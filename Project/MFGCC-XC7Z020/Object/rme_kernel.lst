ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 1


   1              		.cpu cortex-a9
   2              		.arch armv7-a
   3              		.fpu neon-fp16
   4              		.arch_extension mp
   5              		.arch_extension sec
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"rme_kernel.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "../../Source/Kernel/rme_kernel.c"
  20              		.section	.text.RME_Int_Print,"ax",%progbits
  21              		.align	2
  22              		.global	RME_Int_Print
  23              		.syntax unified
  24              		.arm
  26              	RME_Int_Print:
  27              	.LFB0:
   1:../../Source/Kernel/rme_kernel.c **** /******************************************************************************
   2:../../Source/Kernel/rme_kernel.c **** Filename    : rme_kernel.c
   3:../../Source/Kernel/rme_kernel.c **** Author      : pry
   4:../../Source/Kernel/rme_kernel.c **** Date        : 23/03/2017
   5:../../Source/Kernel/rme_kernel.c **** Licence     : The Unlicense; see LICENSE for details.
   6:../../Source/Kernel/rme_kernel.c **** Description : The system call processing path, debugging primitives and kernel
   7:../../Source/Kernel/rme_kernel.c ****               capability implementation for the RME system.
   8:../../Source/Kernel/rme_kernel.c **** 
   9:../../Source/Kernel/rme_kernel.c **** * Capability Table ************************************************************
  10:../../Source/Kernel/rme_kernel.c **** This section of code might be confusing if the underlying principles
  11:../../Source/Kernel/rme_kernel.c **** of capability-based systems is not well understood. 
  12:../../Source/Kernel/rme_kernel.c **** 1. Owning a capability means you have the power to use the function
  13:../../Source/Kernel/rme_kernel.c ****    represented by that capability.
  14:../../Source/Kernel/rme_kernel.c **** 2. Capabilities have an field called flags, which denotes what operations
  15:../../Source/Kernel/rme_kernel.c ****    is allowed on that captbl.
  16:../../Source/Kernel/rme_kernel.c **** 3. Owning a capability to a capability table means that you have the
  17:../../Source/Kernel/rme_kernel.c ****    power to modify the capability table's contents.
  18:../../Source/Kernel/rme_kernel.c **** 4. Creation and deletion of kernel objects is an operation on capability
  19:../../Source/Kernel/rme_kernel.c ****    table, thus requiring the capability to the capability table.
  20:../../Source/Kernel/rme_kernel.c **** 
  21:../../Source/Kernel/rme_kernel.c **** Remember we do not check our master table to see if it is frozen, or if it is
  22:../../Source/Kernel/rme_kernel.c **** captbl, or something, because if the master table's cap is not explicitly 
  23:../../Source/Kernel/rme_kernel.c **** passed in, we do not operate on it at all; If it is explicitly passed in, it
  24:../../Source/Kernel/rme_kernel.c **** will be checked.
  25:../../Source/Kernel/rme_kernel.c **** 
  26:../../Source/Kernel/rme_kernel.c **** There are 4 basic types of operations, as listed below:
  27:../../Source/Kernel/rme_kernel.c **** Operation                     What it does
  28:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  29:../../Source/Kernel/rme_kernel.c **** Create/Add-Dst                CAS the slot to CREATING state.
  30:../../Source/Kernel/rme_kernel.c ****                               Update timestamp.
  31:../../Source/Kernel/rme_kernel.c ****                               Create kernel object.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 2


  32:../../Source/Kernel/rme_kernel.c ****                               Atomically update header to complete creation.
  33:../../Source/Kernel/rme_kernel.c **** Use/Add-Src                   Use the kernel object, have a WCET.
  34:../../Source/Kernel/rme_kernel.c **** Freeze                        Check timestamp for create-freeze QUIESCENCE.
  35:../../Source/Kernel/rme_kernel.c ****                               Update timestamp.
  36:../../Source/Kernel/rme_kernel.c ****                               CAS the slot to FROZEN state.
  37:../../Source/Kernel/rme_kernel.c **** Delete/Removal                Check FROZEN.
  38:../../Source/Kernel/rme_kernel.c ****                               Check timestamp for freeze-delete QUIESCENCE.
  39:../../Source/Kernel/rme_kernel.c ****                               Check REFCNT (delete only).
  40:../../Source/Kernel/rme_kernel.c ****                               CAS the slot to empty.
  41:../../Source/Kernel/rme_kernel.c ****                               Delete the kernel object (delete only).
  42:../../Source/Kernel/rme_kernel.c **** 
  43:../../Source/Kernel/rme_kernel.c **** Hazard Table: (Operation 2 follows Operation 1)
  44:../../Source/Kernel/rme_kernel.c **** Operation 1    Operation 2    Reason why it is safe
  45:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  46:../../Source/Kernel/rme_kernel.c **** Create         Create         Only one creation will be successful, because 
  47:../../Source/Kernel/rme_kernel.c ****                               CREATING slot is done by CAS.
  48:../../Source/Kernel/rme_kernel.c **** Create         Delete         Create only set the CREATING. Delete will require
  49:../../Source/Kernel/rme_kernel.c ****                               a TYPE data, which will only be set after the 
  50:../../Source/Kernel/rme_kernel.c ****                               creation completes. ABA problem cannot occur
  51:../../Source/Kernel/rme_kernel.c ****                               because of create-freeze quiescence.
  52:../../Source/Kernel/rme_kernel.c ****                               If there is no quiescence between Create-Freeze, 
  53:../../Source/Kernel/rme_kernel.c ****                               the following may occur:
  54:../../Source/Kernel/rme_kernel.c ****                               T1: Check ---------------------------- Delete(CAS)
  55:../../Source/Kernel/rme_kernel.c ****                               T2: Check - Delete - Create - Freeze -------------
  56:../../Source/Kernel/rme_kernel.c ****                               In this case, thread 1 will perform a wrong 
  57:../../Source/Kernel/rme_kernel.c ****                               deletion on the new capability (the CAS will be
  58:../../Source/Kernel/rme_kernel.c ****                               successful), but this cap is actually a new cap 
  59:../../Source/Kernel/rme_kernel.c ****                               created by the thread 2 at the same location, not
  60:../../Source/Kernel/rme_kernel.c ****                               the old cap, and its quiescence may not be satisfied.
  61:../../Source/Kernel/rme_kernel.c **** Create         Freeze         OCCUPY only set the FROZEN. FROZEN will require
  62:../../Source/Kernel/rme_kernel.c ****                               that bit not set.
  63:../../Source/Kernel/rme_kernel.c **** Create         Add-Src        Add-Src will require a TYPE data, which will only
  64:../../Source/Kernel/rme_kernel.c ****                               be set after the creation completes.
  65:../../Source/Kernel/rme_kernel.c **** Create         Add-Dst        Only one creation will be successful, because 
  66:../../Source/Kernel/rme_kernel.c ****                               OCCUPY slot is done by CAS.
  67:../../Source/Kernel/rme_kernel.c **** Create         Remove         OCCUPY only set the FROZEN. Remove will require a
  68:../../Source/Kernel/rme_kernel.c ****                               TYPE data, which will only be set after the
  69:../../Source/Kernel/rme_kernel.c ****                               creation completes. See Create-Delete for details.
  70:../../Source/Kernel/rme_kernel.c **** Create         Use            OCCUPY only set the FROZEN. Use the cap will 
  71:../../Source/Kernel/rme_kernel.c ****                               require a TYPE data, which will only be set after
  72:../../Source/Kernel/rme_kernel.c ****                               the creation completes.
  73:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  74:../../Source/Kernel/rme_kernel.c **** Delete         Delete         Actual deletion done by CAS so only one deletion
  75:../../Source/Kernel/rme_kernel.c ****                               will be successful.
  76:../../Source/Kernel/rme_kernel.c **** Delete         Freeze         If the deletion fails and clears the FROZEN flag,
  77:../../Source/Kernel/rme_kernel.c ****                               nothing will be done;
  78:../../Source/Kernel/rme_kernel.c ****                               If it does not fail, then the cap will be erased,
  79:../../Source/Kernel/rme_kernel.c ****                               and the FREEZE CAS will not succeed.
  80:../../Source/Kernel/rme_kernel.c **** Delete         Remove         Only one will be successful because only the root
  81:../../Source/Kernel/rme_kernel.c ****                               can be DELETED.
  82:../../Source/Kernel/rme_kernel.c **** Delete         Others         Banned by the FROZEN flag before deletion. 
  83:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  84:../../Source/Kernel/rme_kernel.c **** Freeze         Create         Create fails because slot is still OCCUPY.
  85:../../Source/Kernel/rme_kernel.c **** Freeze         Delete         Delete fails if not FROZEN, or not QUIESCENT.
  86:../../Source/Kernel/rme_kernel.c **** Freeze         Remove         Remove fails if not FROZEN, or not QUIESCENT.
  87:../../Source/Kernel/rme_kernel.c **** Freeze         Freeze         Freeze done by CAS, and only one will be successful.
  88:../../Source/Kernel/rme_kernel.c **** Freeze         Others         Freeze bans them if they attempt after FROZEN set.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 3


  89:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  90:../../Source/Kernel/rme_kernel.c **** Add-Src        Create         Impossible because something in that slot.
  91:../../Source/Kernel/rme_kernel.c **** Add-Src        Freeze         Cannot freeze if already increased REFCNT. If they
  92:../../Source/Kernel/rme_kernel.c ****                               increase REFCNT just after FROZEN set, let it be.
  93:../../Source/Kernel/rme_kernel.c ****                               The cap can't be deleted because of non-zero REFCNT.
  94:../../Source/Kernel/rme_kernel.c **** Add-Src        Delete         Impossible because cap not FROZEN.
  95:../../Source/Kernel/rme_kernel.c **** Add-Src        Remove         Impossible because cap not FROZEN.
  96:../../Source/Kernel/rme_kernel.c **** Add-Src        Others         These operations can be parallel, which is fine.
  97:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
  98:../../Source/Kernel/rme_kernel.c **** Add-Dst         ...           Conclusion same as Create operation.
  99:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
 100:../../Source/Kernel/rme_kernel.c **** Remove          ...           Conclusion same as Delete operation.
 101:../../Source/Kernel/rme_kernel.c **** -------------------------------------------------------------------------------
 102:../../Source/Kernel/rme_kernel.c **** Use            Create         Impossible because something in that slot.
 103:../../Source/Kernel/rme_kernel.c **** Use            Delete         Impossible because not FROZEN. The use can't be
 104:../../Source/Kernel/rme_kernel.c ****                               from leaf caps as well because deletion will check
 105:../../Source/Kernel/rme_kernel.c ****                               the REFCNT, and if the REFCNT is 0, then the only
 106:../../Source/Kernel/rme_kernel.c ****                               case where an unsettled use can happen is that it
 107:../../Source/Kernel/rme_kernel.c ****                               happens within WCET time to REFCNT check time. This
 108:../../Source/Kernel/rme_kernel.c ****                               unsettled use must come from a leaf cap, as the use
 109:../../Source/Kernel/rme_kernel.c ****                               happened after the root gets FROZEN. This leaf cap
 110:../../Source/Kernel/rme_kernel.c ****                               itself, will set the REFCNT to 1, and it have no
 111:../../Source/Kernel/rme_kernel.c ****                               chance to freeze then remove itself before a WCET.
 112:../../Source/Kernel/rme_kernel.c ****                               The unsettled use case is thus impossible and there
 113:../../Source/Kernel/rme_kernel.c ****                               is no race. As long as all new reference to caps
 114:../../Source/Kernel/rme_kernel.c ****                               require an active cap passed in, there is no such
 115:../../Source/Kernel/rme_kernel.c ****                               race. Also, for cap creation, the header create step 
 116:../../Source/Kernel/rme_kernel.c ****                               must be the last step (after refcnt can be seen on
 117:../../Source/Kernel/rme_kernel.c ****                               all cores as we use write release semantics), and
 118:../../Source/Kernel/rme_kernel.c ****                               this ensures that no new leaf caps will be available
 119:../../Source/Kernel/rme_kernel.c ****                               for use before REFCNT is seen by all cores.
 120:../../Source/Kernel/rme_kernel.c **** Use            Freeze         It is fine.
 121:../../Source/Kernel/rme_kernel.c **** Use            Add-Src        It is fine.
 122:../../Source/Kernel/rme_kernel.c **** Use            Add-Dst        Impossible because something in that slot.
 123:../../Source/Kernel/rme_kernel.c **** Use            Remove         Impossible because not FROZEN.
 124:../../Source/Kernel/rme_kernel.c **** Use            Use            It is fine.
 125:../../Source/Kernel/rme_kernel.c **** 
 126:../../Source/Kernel/rme_kernel.c **** * Page Table ******************************************************************
 127:../../Source/Kernel/rme_kernel.c **** Different from most large-scale operating systems, RME requires the page tables
 128:../../Source/Kernel/rme_kernel.c **** to be constructed by the user-level rather than kernel logic. Yet, RME provided
 129:../../Source/Kernel/rme_kernel.c **** sufficient utilities for the user to conduct the necessary paging operations:
 130:../../Source/Kernel/rme_kernel.c **** 1. Creating page directories;
 131:../../Source/Kernel/rme_kernel.c **** 2. Deletiing page directories;
 132:../../Source/Kernel/rme_kernel.c **** 3. Adding(mapping) pages into page directories;
 133:../../Source/Kernel/rme_kernel.c **** 4. Deleting(unmapping) pages from page directories.
 134:../../Source/Kernel/rme_kernel.c **** 5. Constructing hierachical page tables;
 135:../../Source/Kernel/rme_kernel.c **** 6. Destructing hierachical page tables.
 136:../../Source/Kernel/rme_kernel.c **** 
 137:../../Source/Kernel/rme_kernel.c **** * Kernel Memory ***************************************************************
 138:../../Source/Kernel/rme_kernel.c **** Different seL4 and Composite, RME applys a principle that resembles Fiasco.OC's
 139:../../Source/Kernel/rme_kernel.c **** kernel object factory. However, this is simplified very much in RME - just a table
 140:../../Source/Kernel/rme_kernel.c **** for registering kernel memory usage! Some may think that this prohibits retyping;
 141:../../Source/Kernel/rme_kernel.c **** this is not true because we can implement it with a trusted user-level proxy.
 142:../../Source/Kernel/rme_kernel.c **** 
 143:../../Source/Kernel/rme_kernel.c **** * Process and Thread **********************************************************
 144:../../Source/Kernel/rme_kernel.c **** RME provided process as a light-weight virtual machine/container abstraction, 
 145:../../Source/Kernel/rme_kernel.c **** and a versatile thread abstraction. Processes enforce isolation, while threads
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 4


 146:../../Source/Kernel/rme_kernel.c **** carry out the task.
 147:../../Source/Kernel/rme_kernel.c **** There is no bind-bind race because bind is done using CAS.
 148:../../Source/Kernel/rme_kernel.c **** There is no bind-unbind race for scheduler thread because all are core-local.
 149:../../Source/Kernel/rme_kernel.c **** 
 150:../../Source/Kernel/rme_kernel.c **** * Signal and Invocation *******************************************************
 151:../../Source/Kernel/rme_kernel.c **** RME employs simple signal endpoints for interrupt passing, inter-core interrupt
 152:../../Source/Kernel/rme_kernel.c **** and asynchronous communication. Different from most operating systems, it employs
 153:../../Source/Kernel/rme_kernel.c **** thread migration model for cross-boundary synchronous communication rather than
 154:../../Source/Kernel/rme_kernel.c **** simple blockpoints. This invocation design have many benefits in many facets.
 155:../../Source/Kernel/rme_kernel.c **** 
 156:../../Source/Kernel/rme_kernel.c **** * Kernel Function *************************************************************
 157:../../Source/Kernel/rme_kernel.c **** There's no perfect operating system for a particular hardware. A hardware may
 158:../../Source/Kernel/rme_kernel.c **** have its own idiosyncrasies that needs extra hacks. RME's kernel function utility
 159:../../Source/Kernel/rme_kernel.c **** provides a disciplined way of making such hacks, in case you need to add new 
 160:../../Source/Kernel/rme_kernel.c **** system calls or directly manipulate hardware.
 161:../../Source/Kernel/rme_kernel.c **** 
 162:../../Source/Kernel/rme_kernel.c **** * The Use of 'volatile' *******************************************************
 163:../../Source/Kernel/rme_kernel.c **** 'volatile' is not needed in the kernel because the syscall interface acts as a
 164:../../Source/Kernel/rme_kernel.c **** natural compiler barrier. We're safe to assume that, during one syscall, data
 165:../../Source/Kernel/rme_kernel.c **** in memory remains unchanged. If anything changes, it has been dealt with the 
 166:../../Source/Kernel/rme_kernel.c **** dedicated assembly atomics. If LTO has been enabled, there are three cases:
 167:../../Source/Kernel/rme_kernel.c **** (1) Uniprocessor with C-implemented "atomics" with no real atomic support.
 168:../../Source/Kernel/rme_kernel.c ****     In this case, compiler barriers are not needed due to no kernel concurrency.
 169:../../Source/Kernel/rme_kernel.c **** (2) Multiprocessor with assembly-implemented atomics, but the compiler LTO does
 170:../../Source/Kernel/rme_kernel.c ****     not honor the assembly functions; instead it thinks that they are opaque.
 171:../../Source/Kernel/rme_kernel.c ****     In this case, the opaque function call itself is a full compiler barrier.
 172:../../Source/Kernel/rme_kernel.c **** (3) Multiprocessor with assembly-implemented atomics, and the compiler LTO does
 173:../../Source/Kernel/rme_kernel.c ****     honor the assembly functions.
 174:../../Source/Kernel/rme_kernel.c ****     In this case, the compiler should be aware of the semantics of the assembly,
 175:../../Source/Kernel/rme_kernel.c ****     and produce correct code.
 176:../../Source/Kernel/rme_kernel.c **** * Function Name Rules *********************************************************
 177:../../Source/Kernel/rme_kernel.c **** (1) No "_": OS entry function RME_Kmain and C entry "main".
 178:../../Source/Kernel/rme_kernel.c **** (2) "_"   : Kernel functions that are be called by kernel.
 179:../../Source/Kernel/rme_kernel.c **** (3) "__"  : HAL functions that are called by kernel.
 180:../../Source/Kernel/rme_kernel.c **** (4) "___" : HAL functions that should only be called by HAL.
 181:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 182:../../Source/Kernel/rme_kernel.c **** 
 183:../../Source/Kernel/rme_kernel.c **** /* Include *******************************************************************/
 184:../../Source/Kernel/rme_kernel.c **** #define __HDR_DEF__
 185:../../Source/Kernel/rme_kernel.c **** #include "rme_platform.h"
 186:../../Source/Kernel/rme_kernel.c **** #include "Kernel/rme_kernel.h"
 187:../../Source/Kernel/rme_kernel.c **** #undef __HDR_DEF__
 188:../../Source/Kernel/rme_kernel.c **** 
 189:../../Source/Kernel/rme_kernel.c **** #define __HDR_STRUCT__
 190:../../Source/Kernel/rme_kernel.c **** #include "rme_platform.h"
 191:../../Source/Kernel/rme_kernel.c **** #include "Kernel/rme_kernel.h"
 192:../../Source/Kernel/rme_kernel.c **** #undef __HDR_STRUCT__
 193:../../Source/Kernel/rme_kernel.c **** 
 194:../../Source/Kernel/rme_kernel.c **** /* Private include */
 195:../../Source/Kernel/rme_kernel.c **** #include "Kernel/rme_kernel.h"
 196:../../Source/Kernel/rme_kernel.c **** 
 197:../../Source/Kernel/rme_kernel.c **** #define __HDR_PUBLIC__
 198:../../Source/Kernel/rme_kernel.c **** #include "rme_platform.h"
 199:../../Source/Kernel/rme_kernel.c **** #undef __HDR_PUBLIC__
 200:../../Source/Kernel/rme_kernel.c **** /* End Include ***************************************************************/
 201:../../Source/Kernel/rme_kernel.c **** 
 202:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Int_Print *****************************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 5


 203:../../Source/Kernel/rme_kernel.c **** Description : Print a signed integer on the debugging console. This integer is
 204:../../Source/Kernel/rme_kernel.c ****               printed as decimal with sign.
 205:../../Source/Kernel/rme_kernel.c **** Input       : rme_cnt_t Int - The integer to print.
 206:../../Source/Kernel/rme_kernel.c **** Output      : None.
 207:../../Source/Kernel/rme_kernel.c **** Return      : rme_cnt_t - The length of the string printed.
 208:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 209:../../Source/Kernel/rme_kernel.c **** #if(RME_DBGLOG_ENABLE!=0U)
 210:../../Source/Kernel/rme_kernel.c **** rme_cnt_t RME_Int_Print(rme_cnt_t Int)
 211:../../Source/Kernel/rme_kernel.c **** {
  28              		.loc 1 211 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 32
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 00482DE9 		push	{fp, lr}
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 11, -8
  35              		.cfi_offset 14, -4
  36 0004 04B08DE2 		add	fp, sp, #4
  37              		.cfi_def_cfa 11, 4
  38 0008 20D04DE2 		sub	sp, sp, #32
  39 000c 20000BE5 		str	r0, [fp, #-32]
 212:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Num;
 213:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Abs;
 214:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Iter;
 215:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Count;
 216:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Div;
 217:../../Source/Kernel/rme_kernel.c ****     
 218:../../Source/Kernel/rme_kernel.c ****     /* Exit on zero */
 219:../../Source/Kernel/rme_kernel.c ****     if(Int==0)
  40              		.loc 1 219 7
  41 0010 20301BE5 		ldr	r3, [fp, #-32]
  42 0014 000053E3 		cmp	r3, #0
  43 0018 0300001A 		bne	.L2
 220:../../Source/Kernel/rme_kernel.c ****     {
 221:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 222:../../Source/Kernel/rme_kernel.c **** 
 223:../../Source/Kernel/rme_kernel.c ****         __RME_Putchar('0');
  44              		.loc 1 223 9
  45 001c 3000A0E3 		mov	r0, #48
  46 0020 FEFFFFEB 		bl	__RME_Putchar
 224:../../Source/Kernel/rme_kernel.c ****         return 1;
  47              		.loc 1 224 16
  48 0024 0130A0E3 		mov	r3, #1
  49 0028 500000EA 		b	.L3
  50              	.L2:
 225:../../Source/Kernel/rme_kernel.c ****     }
 226:../../Source/Kernel/rme_kernel.c ****     else
 227:../../Source/Kernel/rme_kernel.c ****     {
 228:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 229:../../Source/Kernel/rme_kernel.c ****         /* No action required */
 230:../../Source/Kernel/rme_kernel.c ****     }
 231:../../Source/Kernel/rme_kernel.c **** 
 232:../../Source/Kernel/rme_kernel.c **** 
 233:../../Source/Kernel/rme_kernel.c ****     /* Correct all negatives into positives */
 234:../../Source/Kernel/rme_kernel.c ****     if(Int<0)
  51              		.loc 1 234 7
  52 002c 20301BE5 		ldr	r3, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 6


  53 0030 000053E3 		cmp	r3, #0
  54 0034 070000AA 		bge	.L4
 235:../../Source/Kernel/rme_kernel.c ****     {
 236:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 237:../../Source/Kernel/rme_kernel.c **** 
 238:../../Source/Kernel/rme_kernel.c ****         __RME_Putchar('-');
  55              		.loc 1 238 9
  56 0038 2D00A0E3 		mov	r0, #45
  57 003c FEFFFFEB 		bl	__RME_Putchar
 239:../../Source/Kernel/rme_kernel.c ****         Abs=-Int;
  58              		.loc 1 239 12
  59 0040 20301BE5 		ldr	r3, [fp, #-32]
  60 0044 003063E2 		rsb	r3, r3, #0
  61 0048 0C300BE5 		str	r3, [fp, #-12]
 240:../../Source/Kernel/rme_kernel.c ****         Num=1;
  62              		.loc 1 240 12
  63 004c 0130A0E3 		mov	r3, #1
  64 0050 08300BE5 		str	r3, [fp, #-8]
  65 0054 030000EA 		b	.L5
  66              	.L4:
 241:../../Source/Kernel/rme_kernel.c ****     }
 242:../../Source/Kernel/rme_kernel.c ****     else
 243:../../Source/Kernel/rme_kernel.c ****     {
 244:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 245:../../Source/Kernel/rme_kernel.c **** 
 246:../../Source/Kernel/rme_kernel.c ****         Abs=Int;
  67              		.loc 1 246 12
  68 0058 20301BE5 		ldr	r3, [fp, #-32]
  69 005c 0C300BE5 		str	r3, [fp, #-12]
 247:../../Source/Kernel/rme_kernel.c ****         Num=0;
  70              		.loc 1 247 12
  71 0060 0030A0E3 		mov	r3, #0
  72 0064 08300BE5 		str	r3, [fp, #-8]
  73              	.L5:
 248:../../Source/Kernel/rme_kernel.c ****     }
 249:../../Source/Kernel/rme_kernel.c **** 
 250:../../Source/Kernel/rme_kernel.c ****     /* How many digits are there? */
 251:../../Source/Kernel/rme_kernel.c ****     Count=0;
  74              		.loc 1 251 10
  75 0068 0030A0E3 		mov	r3, #0
  76 006c 14300BE5 		str	r3, [fp, #-20]
 252:../../Source/Kernel/rme_kernel.c ****     Div=1;
  77              		.loc 1 252 8
  78 0070 0130A0E3 		mov	r3, #1
  79 0074 18300BE5 		str	r3, [fp, #-24]
 253:../../Source/Kernel/rme_kernel.c ****     Iter=Abs;
  80              		.loc 1 253 9
  81 0078 0C301BE5 		ldr	r3, [fp, #-12]
  82 007c 10300BE5 		str	r3, [fp, #-16]
  83              	.L9:
 254:../../Source/Kernel/rme_kernel.c ****     while(1U)
 255:../../Source/Kernel/rme_kernel.c ****     {
 256:../../Source/Kernel/rme_kernel.c ****         Iter/=10;
  84              		.loc 1 256 13
  85 0080 10201BE5 		ldr	r2, [fp, #-16]
  86 0084 673606E3 		movw	r3, #26215
  87 0088 663646E3 		movt	r3, 26214
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 7


  88 008c 9312C3E0 		smull	r1, r3, r3, r2
  89 0090 4311A0E1 		asr	r1, r3, #2
  90 0094 C23FA0E1 		asr	r3, r2, #31
  91 0098 033041E0 		sub	r3, r1, r3
  92 009c 10300BE5 		str	r3, [fp, #-16]
 257:../../Source/Kernel/rme_kernel.c ****         Count++;
  93              		.loc 1 257 14
  94 00a0 14301BE5 		ldr	r3, [fp, #-20]
  95 00a4 013083E2 		add	r3, r3, #1
  96 00a8 14300BE5 		str	r3, [fp, #-20]
 258:../../Source/Kernel/rme_kernel.c ****         if(Iter!=0)
  97              		.loc 1 258 11
  98 00ac 10301BE5 		ldr	r3, [fp, #-16]
  99 00b0 000053E3 		cmp	r3, #0
 100 00b4 0600000A 		beq	.L12
 259:../../Source/Kernel/rme_kernel.c ****         {
 260:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 261:../../Source/Kernel/rme_kernel.c **** 
 262:../../Source/Kernel/rme_kernel.c ****             Div*=10;
 101              		.loc 1 262 16
 102 00b8 18201BE5 		ldr	r2, [fp, #-24]
 103 00bc 0230A0E1 		mov	r3, r2
 104 00c0 0331A0E1 		lsl	r3, r3, #2
 105 00c4 023083E0 		add	r3, r3, r2
 106 00c8 8330A0E1 		lsl	r3, r3, #1
 107 00cc 18300BE5 		str	r3, [fp, #-24]
 256:../../Source/Kernel/rme_kernel.c ****         Count++;
 108              		.loc 1 256 13
 109 00d0 EAFFFFEA 		b	.L9
 110              	.L12:
 263:../../Source/Kernel/rme_kernel.c ****         }
 264:../../Source/Kernel/rme_kernel.c ****         else
 265:../../Source/Kernel/rme_kernel.c ****         {
 266:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 267:../../Source/Kernel/rme_kernel.c **** 
 268:../../Source/Kernel/rme_kernel.c ****             break;
 111              		.loc 1 268 13
 112 00d4 00F020E3 		nop
 269:../../Source/Kernel/rme_kernel.c ****         }
 270:../../Source/Kernel/rme_kernel.c ****     }
 271:../../Source/Kernel/rme_kernel.c ****     Num+=Count;
 113              		.loc 1 271 8
 114 00d8 08201BE5 		ldr	r2, [fp, #-8]
 115 00dc 14301BE5 		ldr	r3, [fp, #-20]
 116 00e0 033082E0 		add	r3, r2, r3
 117 00e4 08300BE5 		str	r3, [fp, #-8]
 272:../../Source/Kernel/rme_kernel.c **** 
 273:../../Source/Kernel/rme_kernel.c ****     /* Print the integer */
 274:../../Source/Kernel/rme_kernel.c ****     Iter=Abs;
 118              		.loc 1 274 9
 119 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 120 00ec 10300BE5 		str	r3, [fp, #-16]
 275:../../Source/Kernel/rme_kernel.c **** 
 276:../../Source/Kernel/rme_kernel.c ****     while(Count>0)
 121              		.loc 1 276 10
 122 00f0 1A0000EA 		b	.L10
 123              	.L11:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 8


 277:../../Source/Kernel/rme_kernel.c ****     {
 278:../../Source/Kernel/rme_kernel.c ****         Count--;
 124              		.loc 1 278 14
 125 00f4 14301BE5 		ldr	r3, [fp, #-20]
 126 00f8 013043E2 		sub	r3, r3, #1
 127 00fc 14300BE5 		str	r3, [fp, #-20]
 279:../../Source/Kernel/rme_kernel.c ****         __RME_Putchar((rme_s8_t)(Iter/Div)+'0');
 128              		.loc 1 279 38
 129 0100 18101BE5 		ldr	r1, [fp, #-24]
 130 0104 10001BE5 		ldr	r0, [fp, #-16]
 131 0108 FEFFFFEB 		bl	__aeabi_idiv
 132 010c 0030A0E1 		mov	r3, r0
 133              		.loc 1 279 23
 134 0110 7330EFE6 		uxtb	r3, r3
 135              		.loc 1 279 43
 136 0114 303083E2 		add	r3, r3, #48
 137 0118 7330EFE6 		uxtb	r3, r3
 138              		.loc 1 279 9
 139 011c 7330AFE6 		sxtb	r3, r3
 140 0120 0300A0E1 		mov	r0, r3
 141 0124 FEFFFFEB 		bl	__RME_Putchar
 280:../../Source/Kernel/rme_kernel.c ****         Iter=Iter%Div;
 142              		.loc 1 280 13
 143 0128 10301BE5 		ldr	r3, [fp, #-16]
 144 012c 18101BE5 		ldr	r1, [fp, #-24]
 145 0130 0300A0E1 		mov	r0, r3
 146 0134 FEFFFFEB 		bl	__aeabi_idivmod
 147 0138 0130A0E1 		mov	r3, r1
 148 013c 10300BE5 		str	r3, [fp, #-16]
 281:../../Source/Kernel/rme_kernel.c ****         Div/=10;
 149              		.loc 1 281 12
 150 0140 18201BE5 		ldr	r2, [fp, #-24]
 151 0144 673606E3 		movw	r3, #26215
 152 0148 663646E3 		movt	r3, 26214
 153 014c 9312C3E0 		smull	r1, r3, r3, r2
 154 0150 4311A0E1 		asr	r1, r3, #2
 155 0154 C23FA0E1 		asr	r3, r2, #31
 156 0158 033041E0 		sub	r3, r1, r3
 157 015c 18300BE5 		str	r3, [fp, #-24]
 158              	.L10:
 276:../../Source/Kernel/rme_kernel.c ****     {
 159              		.loc 1 276 16
 160 0160 14301BE5 		ldr	r3, [fp, #-20]
 161 0164 000053E3 		cmp	r3, #0
 162 0168 E1FFFFCA 		bgt	.L11
 282:../../Source/Kernel/rme_kernel.c ****     }
 283:../../Source/Kernel/rme_kernel.c ****     
 284:../../Source/Kernel/rme_kernel.c ****     return Num;
 163              		.loc 1 284 12
 164 016c 08301BE5 		ldr	r3, [fp, #-8]
 165              	.L3:
 285:../../Source/Kernel/rme_kernel.c **** }
 166              		.loc 1 285 1
 167 0170 0300A0E1 		mov	r0, r3
 168 0174 04D04BE2 		sub	sp, fp, #4
 169              		.cfi_def_cfa 13, 8
 170              		@ sp needed
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 9


 171 0178 0088BDE8 		pop	{fp, pc}
 172              		.cfi_endproc
 173              	.LFE0:
 175              		.section	.text.RME_Hex_Print,"ax",%progbits
 176              		.align	2
 177              		.global	RME_Hex_Print
 178              		.syntax unified
 179              		.arm
 181              	RME_Hex_Print:
 182              	.LFB1:
 286:../../Source/Kernel/rme_kernel.c **** #endif
 287:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Int_Print ************************************************/
 288:../../Source/Kernel/rme_kernel.c **** 
 289:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Hex_Print *****************************************************
 290:../../Source/Kernel/rme_kernel.c **** Description : Print a unsigned integer on the debugging console. This integer is
 291:../../Source/Kernel/rme_kernel.c ****               printed as hexadecimal.
 292:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Uint - The unsigned integer to print.
 293:../../Source/Kernel/rme_kernel.c **** Output      : None.
 294:../../Source/Kernel/rme_kernel.c **** Return      : rme_cnt_t - The length of the string printed.
 295:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 296:../../Source/Kernel/rme_kernel.c **** #if(RME_DBGLOG_ENABLE!=0U)
 297:../../Source/Kernel/rme_kernel.c **** rme_cnt_t RME_Hex_Print(rme_ptr_t Uint)
 298:../../Source/Kernel/rme_kernel.c **** {
 183              		.loc 1 298 1
 184              		.cfi_startproc
 185              		@ args = 0, pretend = 0, frame = 24
 186              		@ frame_needed = 1, uses_anonymous_args = 0
 187 0000 00482DE9 		push	{fp, lr}
 188              		.cfi_def_cfa_offset 8
 189              		.cfi_offset 11, -8
 190              		.cfi_offset 14, -4
 191 0004 04B08DE2 		add	fp, sp, #4
 192              		.cfi_def_cfa 11, 4
 193 0008 18D04DE2 		sub	sp, sp, #24
 194 000c 18000BE5 		str	r0, [fp, #-24]
 299:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Iter;
 300:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
 301:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Num;
 302:../../Source/Kernel/rme_kernel.c ****     
 303:../../Source/Kernel/rme_kernel.c ****     /* Exit on zero */
 304:../../Source/Kernel/rme_kernel.c ****     if(Uint==0U)
 195              		.loc 1 304 7
 196 0010 18301BE5 		ldr	r3, [fp, #-24]
 197 0014 000053E3 		cmp	r3, #0
 198 0018 0300001A 		bne	.L14
 305:../../Source/Kernel/rme_kernel.c ****     {
 306:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 307:../../Source/Kernel/rme_kernel.c ****         
 308:../../Source/Kernel/rme_kernel.c ****         __RME_Putchar('0');
 199              		.loc 1 308 9
 200 001c 3000A0E3 		mov	r0, #48
 201 0020 FEFFFFEB 		bl	__RME_Putchar
 309:../../Source/Kernel/rme_kernel.c ****         return 1;
 202              		.loc 1 309 16
 203 0024 0130A0E3 		mov	r3, #1
 204 0028 330000EA 		b	.L15
 205              	.L14:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 10


 310:../../Source/Kernel/rme_kernel.c ****     }
 311:../../Source/Kernel/rme_kernel.c ****     else
 312:../../Source/Kernel/rme_kernel.c ****     {
 313:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 314:../../Source/Kernel/rme_kernel.c ****         /* No action required */
 315:../../Source/Kernel/rme_kernel.c ****     }
 316:../../Source/Kernel/rme_kernel.c **** 
 317:../../Source/Kernel/rme_kernel.c ****     /* Filter out all the zeroes */
 318:../../Source/Kernel/rme_kernel.c ****     Count=0U;
 206              		.loc 1 318 10
 207 002c 0030A0E3 		mov	r3, #0
 208 0030 0C300BE5 		str	r3, [fp, #-12]
 319:../../Source/Kernel/rme_kernel.c ****     Iter=Uint;
 209              		.loc 1 319 9
 210 0034 18301BE5 		ldr	r3, [fp, #-24]
 211 0038 08300BE5 		str	r3, [fp, #-8]
 320:../../Source/Kernel/rme_kernel.c ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 212              		.loc 1 320 10
 213 003c 050000EA 		b	.L16
 214              	.L17:
 321:../../Source/Kernel/rme_kernel.c ****     {
 322:../../Source/Kernel/rme_kernel.c ****         Iter<<=4;
 215              		.loc 1 322 13
 216 0040 08301BE5 		ldr	r3, [fp, #-8]
 217 0044 0332A0E1 		lsl	r3, r3, #4
 218 0048 08300BE5 		str	r3, [fp, #-8]
 323:../../Source/Kernel/rme_kernel.c ****         Count++;
 219              		.loc 1 323 14
 220 004c 0C301BE5 		ldr	r3, [fp, #-12]
 221 0050 013083E2 		add	r3, r3, #1
 222 0054 0C300BE5 		str	r3, [fp, #-12]
 223              	.L16:
 320:../../Source/Kernel/rme_kernel.c ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 224              		.loc 1 320 16
 225 0058 08301BE5 		ldr	r3, [fp, #-8]
 226 005c 233EA0E1 		lsr	r3, r3, #28
 320:../../Source/Kernel/rme_kernel.c ****     while((Iter>>(RME_WORD_BIT-4U))==0U)
 227              		.loc 1 320 36
 228 0060 000053E3 		cmp	r3, #0
 229 0064 F5FFFF0A 		beq	.L17
 324:../../Source/Kernel/rme_kernel.c ****     }
 325:../../Source/Kernel/rme_kernel.c ****     
 326:../../Source/Kernel/rme_kernel.c ****     /* Count is the number of pts to print */
 327:../../Source/Kernel/rme_kernel.c ****     Count=RME_POW2(RME_WORD_ORDER-2U)-Count;
 230              		.loc 1 327 10
 231 0068 0C301BE5 		ldr	r3, [fp, #-12]
 232 006c 083063E2 		rsb	r3, r3, #8
 233 0070 0C300BE5 		str	r3, [fp, #-12]
 328:../../Source/Kernel/rme_kernel.c ****     Num=Count;
 234              		.loc 1 328 8
 235 0074 0C301BE5 		ldr	r3, [fp, #-12]
 236 0078 10300BE5 		str	r3, [fp, #-16]
 329:../../Source/Kernel/rme_kernel.c ****     while(Count>0U)
 237              		.loc 1 329 10
 238 007c 1A0000EA 		b	.L18
 239              	.L20:
 330:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 11


 331:../../Source/Kernel/rme_kernel.c ****         Count--;
 240              		.loc 1 331 14
 241 0080 0C301BE5 		ldr	r3, [fp, #-12]
 242 0084 013043E2 		sub	r3, r3, #1
 243 0088 0C300BE5 		str	r3, [fp, #-12]
 332:../../Source/Kernel/rme_kernel.c ****         Iter=(Uint>>(Count<<2U))&0x0FU;
 244              		.loc 1 332 27
 245 008c 0C301BE5 		ldr	r3, [fp, #-12]
 246 0090 0331A0E1 		lsl	r3, r3, #2
 247              		.loc 1 332 19
 248 0094 18201BE5 		ldr	r2, [fp, #-24]
 249 0098 3233A0E1 		lsr	r3, r2, r3
 250              		.loc 1 332 13
 251 009c 0F3003E2 		and	r3, r3, #15
 252 00a0 08300BE5 		str	r3, [fp, #-8]
 333:../../Source/Kernel/rme_kernel.c ****         if(Iter<10U)
 253              		.loc 1 333 11
 254 00a4 08301BE5 		ldr	r3, [fp, #-8]
 255 00a8 090053E3 		cmp	r3, #9
 256 00ac 0700008A 		bhi	.L19
 334:../../Source/Kernel/rme_kernel.c ****         {
 335:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 336:../../Source/Kernel/rme_kernel.c ****             
 337:../../Source/Kernel/rme_kernel.c ****             __RME_Putchar((rme_s8_t)Iter+'0');
 257              		.loc 1 337 27
 258 00b0 08301BE5 		ldr	r3, [fp, #-8]
 259 00b4 7330EFE6 		uxtb	r3, r3
 260              		.loc 1 337 41
 261 00b8 303083E2 		add	r3, r3, #48
 262 00bc 7330EFE6 		uxtb	r3, r3
 263              		.loc 1 337 13
 264 00c0 7330AFE6 		sxtb	r3, r3
 265 00c4 0300A0E1 		mov	r0, r3
 266 00c8 FEFFFFEB 		bl	__RME_Putchar
 267 00cc 060000EA 		b	.L18
 268              	.L19:
 338:../../Source/Kernel/rme_kernel.c ****         }
 339:../../Source/Kernel/rme_kernel.c ****         else
 340:../../Source/Kernel/rme_kernel.c ****         {
 341:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 342:../../Source/Kernel/rme_kernel.c ****             
 343:../../Source/Kernel/rme_kernel.c ****             __RME_Putchar((rme_s8_t)Iter+'A'-10);
 269              		.loc 1 343 27
 270 00d0 08301BE5 		ldr	r3, [fp, #-8]
 271 00d4 7330EFE6 		uxtb	r3, r3
 272              		.loc 1 343 45
 273 00d8 373083E2 		add	r3, r3, #55
 274 00dc 7330EFE6 		uxtb	r3, r3
 275              		.loc 1 343 13
 276 00e0 7330AFE6 		sxtb	r3, r3
 277 00e4 0300A0E1 		mov	r0, r3
 278 00e8 FEFFFFEB 		bl	__RME_Putchar
 279              	.L18:
 329:../../Source/Kernel/rme_kernel.c ****     {
 280              		.loc 1 329 16
 281 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 282 00f0 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 12


 283 00f4 E1FFFF1A 		bne	.L20
 344:../../Source/Kernel/rme_kernel.c ****         }
 345:../../Source/Kernel/rme_kernel.c ****     }
 346:../../Source/Kernel/rme_kernel.c ****     
 347:../../Source/Kernel/rme_kernel.c ****     return (rme_cnt_t)Num;
 284              		.loc 1 347 12
 285 00f8 10301BE5 		ldr	r3, [fp, #-16]
 286              	.L15:
 348:../../Source/Kernel/rme_kernel.c **** }
 287              		.loc 1 348 1
 288 00fc 0300A0E1 		mov	r0, r3
 289 0100 04D04BE2 		sub	sp, fp, #4
 290              		.cfi_def_cfa 13, 8
 291              		@ sp needed
 292 0104 0088BDE8 		pop	{fp, pc}
 293              		.cfi_endproc
 294              	.LFE1:
 296              		.section	.text.RME_Str_Print,"ax",%progbits
 297              		.align	2
 298              		.global	RME_Str_Print
 299              		.syntax unified
 300              		.arm
 302              	RME_Str_Print:
 303              	.LFB2:
 349:../../Source/Kernel/rme_kernel.c **** #endif
 350:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Hex_Print ************************************************/
 351:../../Source/Kernel/rme_kernel.c **** 
 352:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Str_Print *****************************************************
 353:../../Source/Kernel/rme_kernel.c **** Description : Print a string the kernel console.
 354:../../Source/Kernel/rme_kernel.c ****               This is only used for kernel-level debugging.
 355:../../Source/Kernel/rme_kernel.c **** Input       : const rme_s8_t* String - The string to print
 356:../../Source/Kernel/rme_kernel.c **** Output      : None.
 357:../../Source/Kernel/rme_kernel.c **** Return      : rme_cnt_t - The length of the string printed, the '\0' is not included.
 358:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 359:../../Source/Kernel/rme_kernel.c **** #if(RME_DBGLOG_ENABLE!=0U)
 360:../../Source/Kernel/rme_kernel.c **** rme_cnt_t RME_Str_Print(const rme_s8_t* String)
 361:../../Source/Kernel/rme_kernel.c **** {
 304              		.loc 1 361 1
 305              		.cfi_startproc
 306              		@ args = 0, pretend = 0, frame = 16
 307              		@ frame_needed = 1, uses_anonymous_args = 0
 308 0000 00482DE9 		push	{fp, lr}
 309              		.cfi_def_cfa_offset 8
 310              		.cfi_offset 11, -8
 311              		.cfi_offset 14, -4
 312 0004 04B08DE2 		add	fp, sp, #4
 313              		.cfi_def_cfa 11, 4
 314 0008 10D04DE2 		sub	sp, sp, #16
 315 000c 10000BE5 		str	r0, [fp, #-16]
 362:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
 363:../../Source/Kernel/rme_kernel.c ****     
 364:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<RME_DBGLOG_MAX;Count++)
 316              		.loc 1 364 14
 317 0010 0030A0E3 		mov	r3, #0
 318 0014 08300BE5 		str	r3, [fp, #-8]
 319              		.loc 1 364 5
 320 0018 0E0000EA 		b	.L22
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 13


 321              	.L25:
 365:../../Source/Kernel/rme_kernel.c ****     {
 366:../../Source/Kernel/rme_kernel.c ****         if(String[Count]==(rme_s8_t)'\0')
 322              		.loc 1 366 18
 323 001c 10201BE5 		ldr	r2, [fp, #-16]
 324 0020 08301BE5 		ldr	r3, [fp, #-8]
 325 0024 033082E0 		add	r3, r2, r3
 326 0028 D030D3E1 		ldrsb	r3, [r3]
 327              		.loc 1 366 11
 328 002c 000053E3 		cmp	r3, #0
 329 0030 0C00000A 		beq	.L27
 367:../../Source/Kernel/rme_kernel.c ****         {
 368:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 369:../../Source/Kernel/rme_kernel.c ****             
 370:../../Source/Kernel/rme_kernel.c ****             break;
 371:../../Source/Kernel/rme_kernel.c ****         }
 372:../../Source/Kernel/rme_kernel.c ****         else
 373:../../Source/Kernel/rme_kernel.c ****         {
 374:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 375:../../Source/Kernel/rme_kernel.c ****             /* No action required */
 376:../../Source/Kernel/rme_kernel.c ****         }
 377:../../Source/Kernel/rme_kernel.c ****         
 378:../../Source/Kernel/rme_kernel.c ****         __RME_Putchar(String[Count]);
 330              		.loc 1 378 29
 331 0034 10201BE5 		ldr	r2, [fp, #-16]
 332 0038 08301BE5 		ldr	r3, [fp, #-8]
 333 003c 033082E0 		add	r3, r2, r3
 334              		.loc 1 378 9
 335 0040 D030D3E1 		ldrsb	r3, [r3]
 336 0044 0300A0E1 		mov	r0, r3
 337 0048 FEFFFFEB 		bl	__RME_Putchar
 364:../../Source/Kernel/rme_kernel.c ****     {
 338              		.loc 1 364 44 discriminator 2
 339 004c 08301BE5 		ldr	r3, [fp, #-8]
 340 0050 013083E2 		add	r3, r3, #1
 341 0054 08300BE5 		str	r3, [fp, #-8]
 342              	.L22:
 364:../../Source/Kernel/rme_kernel.c ****     {
 343              		.loc 1 364 23 discriminator 1
 344 0058 08301BE5 		ldr	r3, [fp, #-8]
 345 005c FE0053E3 		cmp	r3, #254
 346 0060 EDFFFF9A 		bls	.L25
 347 0064 000000EA 		b	.L24
 348              	.L27:
 370:../../Source/Kernel/rme_kernel.c ****         }
 349              		.loc 1 370 13
 350 0068 00F020E3 		nop
 351              	.L24:
 379:../../Source/Kernel/rme_kernel.c ****     }
 380:../../Source/Kernel/rme_kernel.c ****     
 381:../../Source/Kernel/rme_kernel.c ****     return (rme_cnt_t)Count;
 352              		.loc 1 381 12
 353 006c 08301BE5 		ldr	r3, [fp, #-8]
 382:../../Source/Kernel/rme_kernel.c **** }
 354              		.loc 1 382 1
 355 0070 0300A0E1 		mov	r0, r3
 356 0074 04D04BE2 		sub	sp, fp, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 14


 357              		.cfi_def_cfa 13, 8
 358              		@ sp needed
 359 0078 0088BDE8 		pop	{fp, pc}
 360              		.cfi_endproc
 361              	.LFE2:
 363              		.section	.rodata
 364              		.align	2
 365              	.LC0:
 366 0000 0D0A2A2A 		.ascii	"\015\012***\015\012Kernel panic - not syncing :\015"
 366      2A0D0A4B 
 366      65726E65 
 366      6C207061 
 366      6E696320 
 367 0024 0A00     		.ascii	"\012\000"
 368 0026 0000     		.align	2
 369              	.LC1:
 370 0028 202C204C 		.ascii	" , Line \000"
 370      696E6520 
 370      00
 371 0031 000000   		.align	2
 372              	.LC2:
 373 0034 0D0A00   		.ascii	"\015\012\000"
 374 0037 00       		.align	2
 375              	.LC3:
 376 0038 202C2000 		.ascii	" , \000"
 377              		.section	.text.RME_Log,"ax",%progbits
 378              		.align	2
 379              		.global	RME_Log
 380              		.syntax unified
 381              		.arm
 383              	RME_Log:
 384              	.LFB3:
 383:../../Source/Kernel/rme_kernel.c **** #endif
 384:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Str_Print ************************************************/
 385:../../Source/Kernel/rme_kernel.c **** 
 386:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Log ***********************************************************
 387:../../Source/Kernel/rme_kernel.c **** Description : Default logging function, will be used when the user does not 
 388:../../Source/Kernel/rme_kernel.c ****               supply one. This will only be called when the kernel panics.
 389:../../Source/Kernel/rme_kernel.c **** Input       : const char* File - The filename.
 390:../../Source/Kernel/rme_kernel.c ****               long Line - The line number.
 391:../../Source/Kernel/rme_kernel.c ****               const char* Date - The compilation date.
 392:../../Source/Kernel/rme_kernel.c ****               const char* Time - The compilation time.
 393:../../Source/Kernel/rme_kernel.c **** Output      : None.
 394:../../Source/Kernel/rme_kernel.c **** Return      : None.
 395:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 396:../../Source/Kernel/rme_kernel.c **** #ifndef RME_LOG
 397:../../Source/Kernel/rme_kernel.c **** void RME_Log(const char* File,
 398:../../Source/Kernel/rme_kernel.c ****              long Line,
 399:../../Source/Kernel/rme_kernel.c ****              const char* Date,
 400:../../Source/Kernel/rme_kernel.c ****              const char* Time)
 401:../../Source/Kernel/rme_kernel.c **** {
 385              		.loc 1 401 1
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 16
 388              		@ frame_needed = 1, uses_anonymous_args = 0
 389 0000 00482DE9 		push	{fp, lr}
 390              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 15


 391              		.cfi_offset 11, -8
 392              		.cfi_offset 14, -4
 393 0004 04B08DE2 		add	fp, sp, #4
 394              		.cfi_def_cfa 11, 4
 395 0008 10D04DE2 		sub	sp, sp, #16
 396 000c 08000BE5 		str	r0, [fp, #-8]
 397 0010 0C100BE5 		str	r1, [fp, #-12]
 398 0014 10200BE5 		str	r2, [fp, #-16]
 399 0018 14300BE5 		str	r3, [fp, #-20]
 402:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S("\r\n***\r\nKernel panic - not syncing :\r\n"); \
 400              		.loc 1 402 5
 401 001c 000000E3 		movw	r0, #:lower16:.LC0
 402 0020 000040E3 		movt	r0, #:upper16:.LC0
 403 0024 FEFFFFEB 		bl	RME_Str_Print
 403:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S(File); \
 404              		.loc 1 403 5
 405 0028 08001BE5 		ldr	r0, [fp, #-8]
 406 002c FEFFFFEB 		bl	RME_Str_Print
 404:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S(" , Line "); \
 407              		.loc 1 404 5
 408 0030 000000E3 		movw	r0, #:lower16:.LC1
 409 0034 000040E3 		movt	r0, #:upper16:.LC1
 410 0038 FEFFFFEB 		bl	RME_Str_Print
 405:../../Source/Kernel/rme_kernel.c ****     RME_DBG_I(Line); \
 411              		.loc 1 405 5
 412 003c 0C001BE5 		ldr	r0, [fp, #-12]
 413 0040 FEFFFFEB 		bl	RME_Int_Print
 406:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S("\r\n"); \
 414              		.loc 1 406 5
 415 0044 000000E3 		movw	r0, #:lower16:.LC2
 416 0048 000040E3 		movt	r0, #:upper16:.LC2
 417 004c FEFFFFEB 		bl	RME_Str_Print
 407:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S(Date); \
 418              		.loc 1 407 5
 419 0050 10001BE5 		ldr	r0, [fp, #-16]
 420 0054 FEFFFFEB 		bl	RME_Str_Print
 408:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S(" , "); \
 421              		.loc 1 408 5
 422 0058 000000E3 		movw	r0, #:lower16:.LC3
 423 005c 000040E3 		movt	r0, #:upper16:.LC3
 424 0060 FEFFFFEB 		bl	RME_Str_Print
 409:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S(Time); \
 425              		.loc 1 409 5
 426 0064 14001BE5 		ldr	r0, [fp, #-20]
 427 0068 FEFFFFEB 		bl	RME_Str_Print
 410:../../Source/Kernel/rme_kernel.c ****     RME_DBG_S("\r\n"); \
 428              		.loc 1 410 5
 429 006c 000000E3 		movw	r0, #:lower16:.LC2
 430 0070 000040E3 		movt	r0, #:upper16:.LC2
 431 0074 FEFFFFEB 		bl	RME_Str_Print
 411:../../Source/Kernel/rme_kernel.c **** }
 432              		.loc 1 411 1
 433 0078 00F020E3 		nop
 434 007c 04D04BE2 		sub	sp, fp, #4
 435              		.cfi_def_cfa 13, 8
 436              		@ sp needed
 437 0080 0088BDE8 		pop	{fp, pc}
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 16


 438              		.cfi_endproc
 439              	.LFE3:
 441              		.section	.text._RME_MSB_Generic,"ax",%progbits
 442              		.align	2
 443              		.global	_RME_MSB_Generic
 444              		.syntax unified
 445              		.arm
 447              	_RME_MSB_Generic:
 448              	.LFB4:
 412:../../Source/Kernel/rme_kernel.c **** #endif
 413:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Log ******************************************************/
 414:../../Source/Kernel/rme_kernel.c **** 
 415:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Cov_Print *****************************************************
 416:../../Source/Kernel/rme_kernel.c **** Description : The coverage data printer. Should always be disabled for all cases
 417:../../Source/Kernel/rme_kernel.c ****               except where a kernel coverage test is needed. This should never
 418:../../Source/Kernel/rme_kernel.c ****               be called any any user application; for coverage testing only.
 419:../../Source/Kernel/rme_kernel.c **** Input       : None.
 420:../../Source/Kernel/rme_kernel.c **** Output      : None.
 421:../../Source/Kernel/rme_kernel.c **** Return      : None.
 422:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 423:../../Source/Kernel/rme_kernel.c **** #ifdef RME_COV_LINE_NUM
 424:../../Source/Kernel/rme_kernel.c **** void RME_Cov_Print(void)
 425:../../Source/Kernel/rme_kernel.c **** {
 426:../../Source/Kernel/rme_kernel.c ****     rmp_ptr_t Count;
 427:../../Source/Kernel/rme_kernel.c ****     rmp_ptr_t Next;
 428:../../Source/Kernel/rme_kernel.c ****     
 429:../../Source/Kernel/rme_kernel.c ****     Next=0U;
 430:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<RME_COV_LINE_NUM;Count++)
 431:../../Source/Kernel/rme_kernel.c ****     {
 432:../../Source/Kernel/rme_kernel.c ****         if(RME_BITMAP_IS_SET(RME_Cov,Count))
 433:../../Source/Kernel/rme_kernel.c ****         {
 434:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 435:../../Source/Kernel/rme_kernel.c ****             RME_DBG_I(Count);
 436:../../Source/Kernel/rme_kernel.c ****             RME_DBG_S(",");
 437:../../Source/Kernel/rme_kernel.c ****             /* We put 12 markers on a single line */
 438:../../Source/Kernel/rme_kernel.c ****             Next++;
 439:../../Source/Kernel/rme_kernel.c ****             if(Next>11U)
 440:../../Source/Kernel/rme_kernel.c ****             {
 441:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 442:../../Source/Kernel/rme_kernel.c ****                 
 443:../../Source/Kernel/rme_kernel.c ****                 Next=0U;
 444:../../Source/Kernel/rme_kernel.c ****                 RME_DBG_S("\r\n");
 445:../../Source/Kernel/rme_kernel.c ****             }
 446:../../Source/Kernel/rme_kernel.c ****             else
 447:../../Source/Kernel/rme_kernel.c ****             {
 448:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 449:../../Source/Kernel/rme_kernel.c ****                 /* No action needed */
 450:../../Source/Kernel/rme_kernel.c ****             }
 451:../../Source/Kernel/rme_kernel.c ****         }
 452:../../Source/Kernel/rme_kernel.c ****         else
 453:../../Source/Kernel/rme_kernel.c ****         {
 454:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 455:../../Source/Kernel/rme_kernel.c ****             /* No action needed */
 456:../../Source/Kernel/rme_kernel.c ****         }
 457:../../Source/Kernel/rme_kernel.c ****     }
 458:../../Source/Kernel/rme_kernel.c **** }
 459:../../Source/Kernel/rme_kernel.c **** #endif
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 17


 460:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Cov_Print ************************************************/
 461:../../Source/Kernel/rme_kernel.c **** 
 462:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_MSB_Generic **************************************************
 463:../../Source/Kernel/rme_kernel.c **** Description : Find the MSB's position. This is a portable solution for all
 464:../../Source/Kernel/rme_kernel.c ****               processors; if your processor does not have fast built-in bit
 465:../../Source/Kernel/rme_kernel.c ****               manipulation support, you can resort to this when porting.
 466:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Value - The value to compute for.
 467:../../Source/Kernel/rme_kernel.c **** Output      : None.
 468:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - The result. 0 will be returned for 0.
 469:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 470:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_MSB_Generic(rme_ptr_t Value)
 471:../../Source/Kernel/rme_kernel.c **** {
 449              		.loc 1 471 1
 450              		.cfi_startproc
 451              		@ args = 0, pretend = 0, frame = 16
 452              		@ frame_needed = 1, uses_anonymous_args = 0
 453              		@ link register save eliminated.
 454 0000 04B02DE5 		str	fp, [sp, #-4]!
 455              		.cfi_def_cfa_offset 4
 456              		.cfi_offset 11, -4
 457 0004 00B08DE2 		add	fp, sp, #0
 458              		.cfi_def_cfa_register 11
 459 0008 14D04DE2 		sub	sp, sp, #20
 460 000c 10000BE5 		str	r0, [fp, #-16]
 472:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Bit;
 473:../../Source/Kernel/rme_kernel.c ****     static const rme_u8_t Table[256U]=
 474:../../Source/Kernel/rme_kernel.c ****     {
 475:../../Source/Kernel/rme_kernel.c ****         0U,0U,1U,1U,2U,2U,2U,2U,3U,3U,3U,3U,3U,3U,3U,3U,
 476:../../Source/Kernel/rme_kernel.c ****         4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,4U,
 477:../../Source/Kernel/rme_kernel.c ****         5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,
 478:../../Source/Kernel/rme_kernel.c ****         5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,5U,
 479:../../Source/Kernel/rme_kernel.c ****         6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,
 480:../../Source/Kernel/rme_kernel.c ****         6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,
 481:../../Source/Kernel/rme_kernel.c ****         6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,
 482:../../Source/Kernel/rme_kernel.c ****         6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,6U,
 483:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 484:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 485:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 486:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 487:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 488:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 489:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,
 490:../../Source/Kernel/rme_kernel.c ****         7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U,7U
 491:../../Source/Kernel/rme_kernel.c ****     };
 492:../../Source/Kernel/rme_kernel.c **** 
 493:../../Source/Kernel/rme_kernel.c **** #if(RME_WORD_ORDER==4U)
 494:../../Source/Kernel/rme_kernel.c ****     /* 15-8 */
 495:../../Source/Kernel/rme_kernel.c ****     if(Value>=RME_POW2(8U))
 496:../../Source/Kernel/rme_kernel.c ****     {
 497:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 498:../../Source/Kernel/rme_kernel.c ****         
 499:../../Source/Kernel/rme_kernel.c ****         Bit=8U;
 500:../../Source/Kernel/rme_kernel.c ****     }
 501:../../Source/Kernel/rme_kernel.c ****     /* 7-0 */
 502:../../Source/Kernel/rme_kernel.c ****     else
 503:../../Source/Kernel/rme_kernel.c ****     {
 504:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 18


 505:../../Source/Kernel/rme_kernel.c ****         
 506:../../Source/Kernel/rme_kernel.c ****         Bit=0U;
 507:../../Source/Kernel/rme_kernel.c ****     }
 508:../../Source/Kernel/rme_kernel.c **** #elif(RME_WORD_ORDER==5U)
 509:../../Source/Kernel/rme_kernel.c ****     /* 31-16 */
 510:../../Source/Kernel/rme_kernel.c ****     if(Value>=RME_POW2(16U))
 461              		.loc 1 510 7
 462 0010 10301BE5 		ldr	r3, [fp, #-16]
 463 0014 010853E3 		cmp	r3, #65536
 464 0018 0800003A 		bcc	.L30
 511:../../Source/Kernel/rme_kernel.c ****     {
 512:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 513:../../Source/Kernel/rme_kernel.c ****         
 514:../../Source/Kernel/rme_kernel.c ****         /* 31-24 */
 515:../../Source/Kernel/rme_kernel.c ****         if(Value>=RME_POW2(24U))
 465              		.loc 1 515 11
 466 001c 10301BE5 		ldr	r3, [fp, #-16]
 467 0020 010453E3 		cmp	r3, #16777216
 468 0024 0200003A 		bcc	.L31
 516:../../Source/Kernel/rme_kernel.c ****         {
 517:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 518:../../Source/Kernel/rme_kernel.c ****             
 519:../../Source/Kernel/rme_kernel.c ****             Bit=24U;
 469              		.loc 1 519 16
 470 0028 1830A0E3 		mov	r3, #24
 471 002c 08300BE5 		str	r3, [fp, #-8]
 472 0030 0A0000EA 		b	.L32
 473              	.L31:
 520:../../Source/Kernel/rme_kernel.c ****         }
 521:../../Source/Kernel/rme_kernel.c ****         /* 24-16 */
 522:../../Source/Kernel/rme_kernel.c ****         else
 523:../../Source/Kernel/rme_kernel.c ****         {
 524:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 525:../../Source/Kernel/rme_kernel.c ****             
 526:../../Source/Kernel/rme_kernel.c ****             Bit=16U;
 474              		.loc 1 526 16
 475 0034 1030A0E3 		mov	r3, #16
 476 0038 08300BE5 		str	r3, [fp, #-8]
 477 003c 070000EA 		b	.L32
 478              	.L30:
 527:../../Source/Kernel/rme_kernel.c ****         }
 528:../../Source/Kernel/rme_kernel.c ****     }
 529:../../Source/Kernel/rme_kernel.c ****     /* 15-0 */
 530:../../Source/Kernel/rme_kernel.c ****     else
 531:../../Source/Kernel/rme_kernel.c ****     {
 532:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 533:../../Source/Kernel/rme_kernel.c ****         
 534:../../Source/Kernel/rme_kernel.c ****         /* 15-8 */
 535:../../Source/Kernel/rme_kernel.c ****         if(Value>=RME_POW2(8U))
 479              		.loc 1 535 11
 480 0040 10301BE5 		ldr	r3, [fp, #-16]
 481 0044 FF0053E3 		cmp	r3, #255
 482 0048 0200009A 		bls	.L33
 536:../../Source/Kernel/rme_kernel.c ****         {
 537:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 538:../../Source/Kernel/rme_kernel.c ****             
 539:../../Source/Kernel/rme_kernel.c ****             Bit=8U;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 19


 483              		.loc 1 539 16
 484 004c 0830A0E3 		mov	r3, #8
 485 0050 08300BE5 		str	r3, [fp, #-8]
 486 0054 010000EA 		b	.L32
 487              	.L33:
 540:../../Source/Kernel/rme_kernel.c ****         }
 541:../../Source/Kernel/rme_kernel.c ****         /* 7-0 */
 542:../../Source/Kernel/rme_kernel.c ****         else
 543:../../Source/Kernel/rme_kernel.c ****         {
 544:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 545:../../Source/Kernel/rme_kernel.c ****             
 546:../../Source/Kernel/rme_kernel.c ****             Bit=0U;
 488              		.loc 1 546 16
 489 0058 0030A0E3 		mov	r3, #0
 490 005c 08300BE5 		str	r3, [fp, #-8]
 491              	.L32:
 547:../../Source/Kernel/rme_kernel.c ****         }
 548:../../Source/Kernel/rme_kernel.c ****     }
 549:../../Source/Kernel/rme_kernel.c **** #elif(RME_WORD_ORDER==6U)
 550:../../Source/Kernel/rme_kernel.c ****     /* 63-32 */
 551:../../Source/Kernel/rme_kernel.c ****     if(Value>=RME_POW2(32U))
 552:../../Source/Kernel/rme_kernel.c ****     {
 553:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 554:../../Source/Kernel/rme_kernel.c ****         
 555:../../Source/Kernel/rme_kernel.c ****         /* 63-48 */
 556:../../Source/Kernel/rme_kernel.c ****         if(Value>=RME_POW2(48U))
 557:../../Source/Kernel/rme_kernel.c ****         {
 558:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 559:../../Source/Kernel/rme_kernel.c ****             
 560:../../Source/Kernel/rme_kernel.c ****             /* 63-56 */
 561:../../Source/Kernel/rme_kernel.c ****             if(Value>=RME_POW2(56U))
 562:../../Source/Kernel/rme_kernel.c ****             {
 563:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 564:../../Source/Kernel/rme_kernel.c ****                 
 565:../../Source/Kernel/rme_kernel.c ****                 Bit=56U;
 566:../../Source/Kernel/rme_kernel.c ****             }
 567:../../Source/Kernel/rme_kernel.c ****             /* 56-48 */
 568:../../Source/Kernel/rme_kernel.c ****             else
 569:../../Source/Kernel/rme_kernel.c ****             {
 570:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 571:../../Source/Kernel/rme_kernel.c ****                 
 572:../../Source/Kernel/rme_kernel.c ****                 Bit=48U;
 573:../../Source/Kernel/rme_kernel.c ****             }
 574:../../Source/Kernel/rme_kernel.c ****         }
 575:../../Source/Kernel/rme_kernel.c ****         /* 47-32 */
 576:../../Source/Kernel/rme_kernel.c ****         else
 577:../../Source/Kernel/rme_kernel.c ****         {
 578:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 579:../../Source/Kernel/rme_kernel.c ****             
 580:../../Source/Kernel/rme_kernel.c ****             /* 47-40 */
 581:../../Source/Kernel/rme_kernel.c ****             if(Value>=RME_POW2(40U))
 582:../../Source/Kernel/rme_kernel.c ****             {
 583:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 584:../../Source/Kernel/rme_kernel.c ****                 
 585:../../Source/Kernel/rme_kernel.c ****                 Bit=40U;
 586:../../Source/Kernel/rme_kernel.c ****             }
 587:../../Source/Kernel/rme_kernel.c ****             /* 39-32 */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 20


 588:../../Source/Kernel/rme_kernel.c ****             else
 589:../../Source/Kernel/rme_kernel.c ****             {
 590:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 591:../../Source/Kernel/rme_kernel.c ****                 
 592:../../Source/Kernel/rme_kernel.c ****                 Bit=32U;
 593:../../Source/Kernel/rme_kernel.c ****             }
 594:../../Source/Kernel/rme_kernel.c ****         }
 595:../../Source/Kernel/rme_kernel.c ****     }
 596:../../Source/Kernel/rme_kernel.c ****     /* 31-0 */
 597:../../Source/Kernel/rme_kernel.c ****     else
 598:../../Source/Kernel/rme_kernel.c ****     {
 599:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 600:../../Source/Kernel/rme_kernel.c ****         
 601:../../Source/Kernel/rme_kernel.c ****         /* 31-16 */
 602:../../Source/Kernel/rme_kernel.c ****         if(Value>=RME_POW2(16U))
 603:../../Source/Kernel/rme_kernel.c ****         {
 604:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 605:../../Source/Kernel/rme_kernel.c ****             
 606:../../Source/Kernel/rme_kernel.c ****             /* 31-24 */
 607:../../Source/Kernel/rme_kernel.c ****             if(Value>=RME_POW2(24U))
 608:../../Source/Kernel/rme_kernel.c ****             {
 609:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 610:../../Source/Kernel/rme_kernel.c ****                 
 611:../../Source/Kernel/rme_kernel.c ****                 Bit=24U;
 612:../../Source/Kernel/rme_kernel.c ****             }
 613:../../Source/Kernel/rme_kernel.c ****             /* 24-16 */
 614:../../Source/Kernel/rme_kernel.c ****             else
 615:../../Source/Kernel/rme_kernel.c ****             {
 616:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 617:../../Source/Kernel/rme_kernel.c ****                 
 618:../../Source/Kernel/rme_kernel.c ****                 Bit=16U;
 619:../../Source/Kernel/rme_kernel.c ****             }
 620:../../Source/Kernel/rme_kernel.c ****         }
 621:../../Source/Kernel/rme_kernel.c ****         /* 15-0 */
 622:../../Source/Kernel/rme_kernel.c ****         else
 623:../../Source/Kernel/rme_kernel.c ****         {
 624:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 625:../../Source/Kernel/rme_kernel.c ****             
 626:../../Source/Kernel/rme_kernel.c ****             /* 15-8 */
 627:../../Source/Kernel/rme_kernel.c ****             if(Value>=RME_POW2(8U))
 628:../../Source/Kernel/rme_kernel.c ****             {
 629:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 630:../../Source/Kernel/rme_kernel.c ****                 
 631:../../Source/Kernel/rme_kernel.c ****                 Bit=8U;
 632:../../Source/Kernel/rme_kernel.c ****             }
 633:../../Source/Kernel/rme_kernel.c ****             /* 7-0 */
 634:../../Source/Kernel/rme_kernel.c ****             else
 635:../../Source/Kernel/rme_kernel.c ****             {
 636:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 637:../../Source/Kernel/rme_kernel.c ****                 
 638:../../Source/Kernel/rme_kernel.c ****                 Bit=0U;
 639:../../Source/Kernel/rme_kernel.c ****             }
 640:../../Source/Kernel/rme_kernel.c ****         }
 641:../../Source/Kernel/rme_kernel.c ****     }
 642:../../Source/Kernel/rme_kernel.c **** #else
 643:../../Source/Kernel/rme_kernel.c **** #error Generic MSB for 128-bits & above are not implemented.
 644:../../Source/Kernel/rme_kernel.c **** #endif
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 21


 645:../../Source/Kernel/rme_kernel.c **** 
 646:../../Source/Kernel/rme_kernel.c ****     return Table[Value>>Bit]+Bit;
 492              		.loc 1 646 23
 493 0060 10201BE5 		ldr	r2, [fp, #-16]
 494 0064 08301BE5 		ldr	r3, [fp, #-8]
 495 0068 3223A0E1 		lsr	r2, r2, r3
 496              		.loc 1 646 17
 497 006c 003000E3 		movw	r3, #:lower16:Table.1
 498 0070 003040E3 		movt	r3, #:upper16:Table.1
 499 0074 0230D3E7 		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 500 0078 0320A0E1 		mov	r2, r3
 501              		.loc 1 646 29
 502 007c 08301BE5 		ldr	r3, [fp, #-8]
 503 0080 033082E0 		add	r3, r2, r3
 647:../../Source/Kernel/rme_kernel.c **** }
 504              		.loc 1 647 1
 505 0084 0300A0E1 		mov	r0, r3
 506 0088 00D08BE2 		add	sp, fp, #0
 507              		.cfi_def_cfa_register 13
 508              		@ sp needed
 509 008c 04B09DE4 		ldr	fp, [sp], #4
 510              		.cfi_restore 11
 511              		.cfi_def_cfa_offset 0
 512 0090 1EFF2FE1 		bx	lr
 513              		.cfi_endproc
 514              	.LFE4:
 516              		.section	.text._RME_LSB_Generic,"ax",%progbits
 517              		.align	2
 518              		.global	_RME_LSB_Generic
 519              		.syntax unified
 520              		.arm
 522              	_RME_LSB_Generic:
 523              	.LFB5:
 648:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_MSB_Generic *********************************************/
 649:../../Source/Kernel/rme_kernel.c **** 
 650:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_LSB_Generic **************************************************
 651:../../Source/Kernel/rme_kernel.c **** Description : Find the LSB's position. This is a portable solution for all
 652:../../Source/Kernel/rme_kernel.c ****               processors; if your processor does not have fast built-in bit
 653:../../Source/Kernel/rme_kernel.c ****               manipulation support, you can resort to this when porting.
 654:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Value - The value to count.
 655:../../Source/Kernel/rme_kernel.c **** Output      : None.
 656:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - The result. 0 will be returned for 0.
 657:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 658:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_LSB_Generic(rme_ptr_t Value)
 659:../../Source/Kernel/rme_kernel.c **** {
 524              		.loc 1 659 1
 525              		.cfi_startproc
 526              		@ args = 0, pretend = 0, frame = 16
 527              		@ frame_needed = 1, uses_anonymous_args = 0
 528              		@ link register save eliminated.
 529 0000 04B02DE5 		str	fp, [sp, #-4]!
 530              		.cfi_def_cfa_offset 4
 531              		.cfi_offset 11, -4
 532 0004 00B08DE2 		add	fp, sp, #0
 533              		.cfi_def_cfa_register 11
 534 0008 14D04DE2 		sub	sp, sp, #20
 535 000c 10000BE5 		str	r0, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 22


 660:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Bit;
 661:../../Source/Kernel/rme_kernel.c ****     static const rme_u8_t Table[256U]=
 662:../../Source/Kernel/rme_kernel.c ****     {
 663:../../Source/Kernel/rme_kernel.c ****         0U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 664:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 665:../../Source/Kernel/rme_kernel.c ****         5U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 666:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 667:../../Source/Kernel/rme_kernel.c ****         6U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 668:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 669:../../Source/Kernel/rme_kernel.c ****         5U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 670:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 671:../../Source/Kernel/rme_kernel.c ****         7U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 672:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 673:../../Source/Kernel/rme_kernel.c ****         5U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 674:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 675:../../Source/Kernel/rme_kernel.c ****         6U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 676:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 677:../../Source/Kernel/rme_kernel.c ****         5U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U,
 678:../../Source/Kernel/rme_kernel.c ****         4U,0U,1U,0U,2U,0U,1U,0U,3U,0U,1U,0U,2U,0U,1U,0U
 679:../../Source/Kernel/rme_kernel.c ****     };
 680:../../Source/Kernel/rme_kernel.c ****     
 681:../../Source/Kernel/rme_kernel.c **** #if(RME_WORD_ORDER==4U)
 682:../../Source/Kernel/rme_kernel.c ****     /* 16-8 */
 683:../../Source/Kernel/rme_kernel.c ****     if((Value<<8U)==0U)
 684:../../Source/Kernel/rme_kernel.c ****     {
 685:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 686:../../Source/Kernel/rme_kernel.c ****         
 687:../../Source/Kernel/rme_kernel.c ****         Bit=8U;
 688:../../Source/Kernel/rme_kernel.c ****     }
 689:../../Source/Kernel/rme_kernel.c ****     /* 7-0 */
 690:../../Source/Kernel/rme_kernel.c ****     else
 691:../../Source/Kernel/rme_kernel.c ****     {
 692:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 693:../../Source/Kernel/rme_kernel.c ****         
 694:../../Source/Kernel/rme_kernel.c ****         Bit=0U;
 695:../../Source/Kernel/rme_kernel.c ****     }
 696:../../Source/Kernel/rme_kernel.c **** #elif(RME_WORD_ORDER==5U)
 697:../../Source/Kernel/rme_kernel.c ****     /* 31-16 */
 698:../../Source/Kernel/rme_kernel.c ****     if((Value<<16U)==0U)
 536              		.loc 1 698 14
 537 0010 10301BE5 		ldr	r3, [fp, #-16]
 538 0014 0338A0E1 		lsl	r3, r3, #16
 539              		.loc 1 698 7
 540 0018 000053E3 		cmp	r3, #0
 541 001c 0900001A 		bne	.L36
 699:../../Source/Kernel/rme_kernel.c ****     {
 700:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 701:../../Source/Kernel/rme_kernel.c ****         
 702:../../Source/Kernel/rme_kernel.c ****         /* 31-24 */
 703:../../Source/Kernel/rme_kernel.c ****         if((Value<<8U)==0U)
 542              		.loc 1 703 18
 543 0020 10301BE5 		ldr	r3, [fp, #-16]
 544 0024 0334A0E1 		lsl	r3, r3, #8
 545              		.loc 1 703 11
 546 0028 000053E3 		cmp	r3, #0
 547 002c 0200001A 		bne	.L37
 704:../../Source/Kernel/rme_kernel.c ****         {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 23


 705:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 706:../../Source/Kernel/rme_kernel.c ****             
 707:../../Source/Kernel/rme_kernel.c ****             Bit=24U;
 548              		.loc 1 707 16
 549 0030 1830A0E3 		mov	r3, #24
 550 0034 08300BE5 		str	r3, [fp, #-8]
 551 0038 0B0000EA 		b	.L38
 552              	.L37:
 708:../../Source/Kernel/rme_kernel.c ****         }
 709:../../Source/Kernel/rme_kernel.c ****         /* 24-16 */
 710:../../Source/Kernel/rme_kernel.c ****         else
 711:../../Source/Kernel/rme_kernel.c ****         {
 712:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 713:../../Source/Kernel/rme_kernel.c ****             
 714:../../Source/Kernel/rme_kernel.c ****             Bit=16U;
 553              		.loc 1 714 16
 554 003c 1030A0E3 		mov	r3, #16
 555 0040 08300BE5 		str	r3, [fp, #-8]
 556 0044 080000EA 		b	.L38
 557              	.L36:
 715:../../Source/Kernel/rme_kernel.c ****         }
 716:../../Source/Kernel/rme_kernel.c ****     }
 717:../../Source/Kernel/rme_kernel.c ****     /* 15-0 */
 718:../../Source/Kernel/rme_kernel.c ****     else
 719:../../Source/Kernel/rme_kernel.c ****     {
 720:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 721:../../Source/Kernel/rme_kernel.c ****         
 722:../../Source/Kernel/rme_kernel.c ****         /* 15-8 */
 723:../../Source/Kernel/rme_kernel.c ****         if((Value<<24U)==0U)
 558              		.loc 1 723 18
 559 0048 10301BE5 		ldr	r3, [fp, #-16]
 560 004c 033CA0E1 		lsl	r3, r3, #24
 561              		.loc 1 723 11
 562 0050 000053E3 		cmp	r3, #0
 563 0054 0200001A 		bne	.L39
 724:../../Source/Kernel/rme_kernel.c ****         {
 725:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 726:../../Source/Kernel/rme_kernel.c ****             
 727:../../Source/Kernel/rme_kernel.c ****             Bit=8U;
 564              		.loc 1 727 16
 565 0058 0830A0E3 		mov	r3, #8
 566 005c 08300BE5 		str	r3, [fp, #-8]
 567 0060 010000EA 		b	.L38
 568              	.L39:
 728:../../Source/Kernel/rme_kernel.c ****         }
 729:../../Source/Kernel/rme_kernel.c ****         /* 7-0 */
 730:../../Source/Kernel/rme_kernel.c ****         else
 731:../../Source/Kernel/rme_kernel.c ****         {
 732:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 733:../../Source/Kernel/rme_kernel.c ****             
 734:../../Source/Kernel/rme_kernel.c ****             Bit=0U;
 569              		.loc 1 734 16
 570 0064 0030A0E3 		mov	r3, #0
 571 0068 08300BE5 		str	r3, [fp, #-8]
 572              	.L38:
 735:../../Source/Kernel/rme_kernel.c ****         }
 736:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 24


 737:../../Source/Kernel/rme_kernel.c **** #elif(RME_WORD_ORDER==6U)
 738:../../Source/Kernel/rme_kernel.c ****     /* 63-32 */
 739:../../Source/Kernel/rme_kernel.c ****     if((Value<<32U)==0U)
 740:../../Source/Kernel/rme_kernel.c ****     {
 741:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 742:../../Source/Kernel/rme_kernel.c ****         
 743:../../Source/Kernel/rme_kernel.c ****         /* 63-48 */
 744:../../Source/Kernel/rme_kernel.c ****         if((Value<<16U)==0U)
 745:../../Source/Kernel/rme_kernel.c ****         {
 746:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 747:../../Source/Kernel/rme_kernel.c ****             
 748:../../Source/Kernel/rme_kernel.c ****             /* 63-56 */
 749:../../Source/Kernel/rme_kernel.c ****             if((Value<<8U)==0U)
 750:../../Source/Kernel/rme_kernel.c ****             {
 751:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 752:../../Source/Kernel/rme_kernel.c ****                 
 753:../../Source/Kernel/rme_kernel.c ****                 Bit=56U;
 754:../../Source/Kernel/rme_kernel.c ****             }
 755:../../Source/Kernel/rme_kernel.c ****             /* 56-48 */
 756:../../Source/Kernel/rme_kernel.c ****             else
 757:../../Source/Kernel/rme_kernel.c ****             {
 758:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 759:../../Source/Kernel/rme_kernel.c ****                 
 760:../../Source/Kernel/rme_kernel.c ****                 Bit=48U;
 761:../../Source/Kernel/rme_kernel.c ****             }
 762:../../Source/Kernel/rme_kernel.c ****         }
 763:../../Source/Kernel/rme_kernel.c ****         /* 47-32 */
 764:../../Source/Kernel/rme_kernel.c ****         else
 765:../../Source/Kernel/rme_kernel.c ****         {
 766:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 767:../../Source/Kernel/rme_kernel.c ****             
 768:../../Source/Kernel/rme_kernel.c ****             /* 47-40 */
 769:../../Source/Kernel/rme_kernel.c ****             if((Value<<24U)==0U)
 770:../../Source/Kernel/rme_kernel.c ****             {
 771:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 772:../../Source/Kernel/rme_kernel.c ****                 
 773:../../Source/Kernel/rme_kernel.c ****                 Bit=40U;
 774:../../Source/Kernel/rme_kernel.c ****             }
 775:../../Source/Kernel/rme_kernel.c ****             /* 39-32 */
 776:../../Source/Kernel/rme_kernel.c ****             else
 777:../../Source/Kernel/rme_kernel.c ****             {
 778:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 779:../../Source/Kernel/rme_kernel.c ****                 
 780:../../Source/Kernel/rme_kernel.c ****                 Bit=32U;
 781:../../Source/Kernel/rme_kernel.c ****             }
 782:../../Source/Kernel/rme_kernel.c ****         }
 783:../../Source/Kernel/rme_kernel.c ****     }
 784:../../Source/Kernel/rme_kernel.c ****     /* 31-0 */
 785:../../Source/Kernel/rme_kernel.c ****     else
 786:../../Source/Kernel/rme_kernel.c ****     {
 787:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 788:../../Source/Kernel/rme_kernel.c ****         
 789:../../Source/Kernel/rme_kernel.c ****         /* 31-16 */
 790:../../Source/Kernel/rme_kernel.c ****         if((Value<<48U)==0U)
 791:../../Source/Kernel/rme_kernel.c ****         {
 792:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 793:../../Source/Kernel/rme_kernel.c ****             
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 25


 794:../../Source/Kernel/rme_kernel.c ****             /* 31-24 */
 795:../../Source/Kernel/rme_kernel.c ****             if((Value<<40U)==0U)
 796:../../Source/Kernel/rme_kernel.c ****             {
 797:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 798:../../Source/Kernel/rme_kernel.c ****                 
 799:../../Source/Kernel/rme_kernel.c ****                 Bit=24U;
 800:../../Source/Kernel/rme_kernel.c ****             }
 801:../../Source/Kernel/rme_kernel.c ****             /* 24-16 */
 802:../../Source/Kernel/rme_kernel.c ****             else
 803:../../Source/Kernel/rme_kernel.c ****             {
 804:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 805:../../Source/Kernel/rme_kernel.c ****                 
 806:../../Source/Kernel/rme_kernel.c ****                 Bit=16U;
 807:../../Source/Kernel/rme_kernel.c ****             }
 808:../../Source/Kernel/rme_kernel.c ****         }
 809:../../Source/Kernel/rme_kernel.c ****         /* 15-0 */
 810:../../Source/Kernel/rme_kernel.c ****         else
 811:../../Source/Kernel/rme_kernel.c ****         {
 812:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
 813:../../Source/Kernel/rme_kernel.c ****             
 814:../../Source/Kernel/rme_kernel.c ****             /* 15-8 */
 815:../../Source/Kernel/rme_kernel.c ****             if((Value<<56U)==0U)
 816:../../Source/Kernel/rme_kernel.c ****             {
 817:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 818:../../Source/Kernel/rme_kernel.c ****                 
 819:../../Source/Kernel/rme_kernel.c ****                 Bit=8U;
 820:../../Source/Kernel/rme_kernel.c ****             }
 821:../../Source/Kernel/rme_kernel.c ****             /* 7-0 */
 822:../../Source/Kernel/rme_kernel.c ****             else
 823:../../Source/Kernel/rme_kernel.c ****             {
 824:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
 825:../../Source/Kernel/rme_kernel.c ****                 
 826:../../Source/Kernel/rme_kernel.c ****                 Bit=0U;
 827:../../Source/Kernel/rme_kernel.c ****             }
 828:../../Source/Kernel/rme_kernel.c ****         }
 829:../../Source/Kernel/rme_kernel.c ****     }
 830:../../Source/Kernel/rme_kernel.c **** #else
 831:../../Source/Kernel/rme_kernel.c **** #error Generic LSB for 128-bits & above are not implemented.
 832:../../Source/Kernel/rme_kernel.c **** #endif
 833:../../Source/Kernel/rme_kernel.c **** 
 834:../../Source/Kernel/rme_kernel.c ****     return Table[(rme_u8_t)(Value>>Bit)]+Bit;
 573              		.loc 1 834 34
 574 006c 10201BE5 		ldr	r2, [fp, #-16]
 575 0070 08301BE5 		ldr	r3, [fp, #-8]
 576 0074 3233A0E1 		lsr	r3, r2, r3
 577              		.loc 1 834 18
 578 0078 7330EFE6 		uxtb	r3, r3
 579 007c 0320A0E1 		mov	r2, r3
 580              		.loc 1 834 17
 581 0080 003000E3 		movw	r3, #:lower16:Table.0
 582 0084 003040E3 		movt	r3, #:upper16:Table.0
 583 0088 0230D3E7 		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 584 008c 0320A0E1 		mov	r2, r3
 585              		.loc 1 834 41
 586 0090 08301BE5 		ldr	r3, [fp, #-8]
 587 0094 033082E0 		add	r3, r2, r3
 835:../../Source/Kernel/rme_kernel.c **** }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 26


 588              		.loc 1 835 1
 589 0098 0300A0E1 		mov	r0, r3
 590 009c 00D08BE2 		add	sp, fp, #0
 591              		.cfi_def_cfa_register 13
 592              		@ sp needed
 593 00a0 04B09DE4 		ldr	fp, [sp], #4
 594              		.cfi_restore 11
 595              		.cfi_def_cfa_offset 0
 596 00a4 1EFF2FE1 		bx	lr
 597              		.cfi_endproc
 598              	.LFE5:
 600              		.section	.text._RME_Comp_Swap_Single,"ax",%progbits
 601              		.align	2
 602              		.global	_RME_Comp_Swap_Single
 603              		.syntax unified
 604              		.arm
 606              	_RME_Comp_Swap_Single:
 607              	.LFB6:
 836:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_LSB_Generic *********************************************/
 837:../../Source/Kernel/rme_kernel.c **** 
 838:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Comp_Swap_Single *********************************************
 839:../../Source/Kernel/rme_kernel.c **** Description : The compare-and-swap atomic instruction. If the Old value is
 840:../../Source/Kernel/rme_kernel.c ****               equal to *Ptr, then set the *Ptr as New and return 1; else return
 841:../../Source/Kernel/rme_kernel.c ****               0.
 842:../../Source/Kernel/rme_kernel.c ****               This is for use on single-core processors.
 843:../../Source/Kernel/rme_kernel.c **** Input       : volatile rme_ptr_t* Ptr - The pointer to the data.
 844:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Old - The old value.
 845:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t New - The new value.
 846:../../Source/Kernel/rme_kernel.c **** Output      : volatile rme_ptr_t* Ptr - The pointer to the data.
 847:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - If successful, 1; else 0.
 848:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 849:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Comp_Swap_Single(volatile rme_ptr_t* Ptr,
 850:../../Source/Kernel/rme_kernel.c ****                                 rme_ptr_t Old,
 851:../../Source/Kernel/rme_kernel.c ****                                 rme_ptr_t New)
 852:../../Source/Kernel/rme_kernel.c **** {
 608              		.loc 1 852 1
 609              		.cfi_startproc
 610              		@ args = 0, pretend = 0, frame = 16
 611              		@ frame_needed = 1, uses_anonymous_args = 0
 612              		@ link register save eliminated.
 613 0000 04B02DE5 		str	fp, [sp, #-4]!
 614              		.cfi_def_cfa_offset 4
 615              		.cfi_offset 11, -4
 616 0004 00B08DE2 		add	fp, sp, #0
 617              		.cfi_def_cfa_register 11
 618 0008 14D04DE2 		sub	sp, sp, #20
 619 000c 08000BE5 		str	r0, [fp, #-8]
 620 0010 0C100BE5 		str	r1, [fp, #-12]
 621 0014 10200BE5 		str	r2, [fp, #-16]
 853:../../Source/Kernel/rme_kernel.c ****     if(*Ptr==Old)
 622              		.loc 1 853 8
 623 0018 08301BE5 		ldr	r3, [fp, #-8]
 624 001c 003093E5 		ldr	r3, [r3]
 625              		.loc 1 853 7
 626 0020 0C201BE5 		ldr	r2, [fp, #-12]
 627 0024 030052E1 		cmp	r2, r3
 628 0028 0400001A 		bne	.L42
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 27


 854:../../Source/Kernel/rme_kernel.c ****     {
 855:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 856:../../Source/Kernel/rme_kernel.c ****         
 857:../../Source/Kernel/rme_kernel.c ****         *Ptr=New;
 629              		.loc 1 857 13
 630 002c 08301BE5 		ldr	r3, [fp, #-8]
 631 0030 10201BE5 		ldr	r2, [fp, #-16]
 632 0034 002083E5 		str	r2, [r3]
 858:../../Source/Kernel/rme_kernel.c ****         return 1U;
 633              		.loc 1 858 16
 634 0038 0130A0E3 		mov	r3, #1
 635 003c 000000EA 		b	.L43
 636              	.L42:
 859:../../Source/Kernel/rme_kernel.c ****     }
 860:../../Source/Kernel/rme_kernel.c ****     else
 861:../../Source/Kernel/rme_kernel.c ****     {
 862:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
 863:../../Source/Kernel/rme_kernel.c ****         /* No action required */
 864:../../Source/Kernel/rme_kernel.c ****     }
 865:../../Source/Kernel/rme_kernel.c **** 
 866:../../Source/Kernel/rme_kernel.c ****     return 0U;
 637              		.loc 1 866 12
 638 0040 0030A0E3 		mov	r3, #0
 639              	.L43:
 867:../../Source/Kernel/rme_kernel.c **** }
 640              		.loc 1 867 1
 641 0044 0300A0E1 		mov	r0, r3
 642 0048 00D08BE2 		add	sp, fp, #0
 643              		.cfi_def_cfa_register 13
 644              		@ sp needed
 645 004c 04B09DE4 		ldr	fp, [sp], #4
 646              		.cfi_restore 11
 647              		.cfi_def_cfa_offset 0
 648 0050 1EFF2FE1 		bx	lr
 649              		.cfi_endproc
 650              	.LFE6:
 652              		.section	.text._RME_Fetch_Add_Single,"ax",%progbits
 653              		.align	2
 654              		.global	_RME_Fetch_Add_Single
 655              		.syntax unified
 656              		.arm
 658              	_RME_Fetch_Add_Single:
 659              	.LFB7:
 868:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Comp_Swap_Single ****************************************/
 869:../../Source/Kernel/rme_kernel.c **** 
 870:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Fetch_Add_Single *********************************************
 871:../../Source/Kernel/rme_kernel.c **** Description : The fetch-and-add atomic instruction. Increase the value that is
 872:../../Source/Kernel/rme_kernel.c ****               pointed to by the pointer, and return the value before addition.
 873:../../Source/Kernel/rme_kernel.c ****               This is for use on single-core processors.
 874:../../Source/Kernel/rme_kernel.c **** Input       : volatile rme_ptr_t* Ptr - The pointer to the data.
 875:../../Source/Kernel/rme_kernel.c ****               rme_cnt_t Addend - The number to add.
 876:../../Source/Kernel/rme_kernel.c **** Output      : volatile rme_ptr_t* Ptr - The pointer to the data.
 877:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - The value before the addition.
 878:../../Source/Kernel/rme_kernel.c **** *******************************************************************************/
 879:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Fetch_Add_Single(volatile rme_ptr_t* Ptr,
 880:../../Source/Kernel/rme_kernel.c ****                                 rme_cnt_t Addend)
 881:../../Source/Kernel/rme_kernel.c **** {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 28


 660              		.loc 1 881 1
 661              		.cfi_startproc
 662              		@ args = 0, pretend = 0, frame = 16
 663              		@ frame_needed = 1, uses_anonymous_args = 0
 664              		@ link register save eliminated.
 665 0000 04B02DE5 		str	fp, [sp, #-4]!
 666              		.cfi_def_cfa_offset 4
 667              		.cfi_offset 11, -4
 668 0004 00B08DE2 		add	fp, sp, #0
 669              		.cfi_def_cfa_register 11
 670 0008 14D04DE2 		sub	sp, sp, #20
 671 000c 10000BE5 		str	r0, [fp, #-16]
 672 0010 14100BE5 		str	r1, [fp, #-20]
 882:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Old;
 883:../../Source/Kernel/rme_kernel.c **** 
 884:../../Source/Kernel/rme_kernel.c ****     Old=(rme_cnt_t)(*Ptr);
 673              		.loc 1 884 21
 674 0014 10301BE5 		ldr	r3, [fp, #-16]
 675 0018 003093E5 		ldr	r3, [r3]
 676              		.loc 1 884 8
 677 001c 08300BE5 		str	r3, [fp, #-8]
 885:../../Source/Kernel/rme_kernel.c ****     *Ptr=(rme_ptr_t)(Old+Addend);
 678              		.loc 1 885 25
 679 0020 08201BE5 		ldr	r2, [fp, #-8]
 680 0024 14301BE5 		ldr	r3, [fp, #-20]
 681 0028 033082E0 		add	r3, r2, r3
 682              		.loc 1 885 10
 683 002c 0320A0E1 		mov	r2, r3
 684              		.loc 1 885 9
 685 0030 10301BE5 		ldr	r3, [fp, #-16]
 686 0034 002083E5 		str	r2, [r3]
 886:../../Source/Kernel/rme_kernel.c **** 
 887:../../Source/Kernel/rme_kernel.c ****     return (rme_ptr_t)Old;
 687              		.loc 1 887 12
 688 0038 08301BE5 		ldr	r3, [fp, #-8]
 888:../../Source/Kernel/rme_kernel.c **** }
 689              		.loc 1 888 1
 690 003c 0300A0E1 		mov	r0, r3
 691 0040 00D08BE2 		add	sp, fp, #0
 692              		.cfi_def_cfa_register 13
 693              		@ sp needed
 694 0044 04B09DE4 		ldr	fp, [sp], #4
 695              		.cfi_restore 11
 696              		.cfi_def_cfa_offset 0
 697 0048 1EFF2FE1 		bx	lr
 698              		.cfi_endproc
 699              	.LFE7:
 701              		.section	.text._RME_Fetch_And_Single,"ax",%progbits
 702              		.align	2
 703              		.global	_RME_Fetch_And_Single
 704              		.syntax unified
 705              		.arm
 707              	_RME_Fetch_And_Single:
 708              	.LFB8:
 889:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Fetch_Add_Single ****************************************/
 890:../../Source/Kernel/rme_kernel.c **** 
 891:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Fetch_And_Single *********************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 29


 892:../../Source/Kernel/rme_kernel.c **** Description : The fetch-and-logic-and atomic instruction. Logic AND the pointer
 893:../../Source/Kernel/rme_kernel.c ****               value with the operand, and return the value before logic AND.
 894:../../Source/Kernel/rme_kernel.c ****               This is for use on single-core processors.
 895:../../Source/Kernel/rme_kernel.c **** Input       : volatile rme_ptr_t* Ptr - The pointer to the data.
 896:../../Source/Kernel/rme_kernel.c ****               rme_cnt_t Operand - The number to logic AND with the destination.
 897:../../Source/Kernel/rme_kernel.c **** Output      : volatile rme_ptr_t* Ptr - The pointer to the data.
 898:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - The value before the AND operation.
 899:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 900:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Fetch_And_Single(volatile rme_ptr_t* Ptr,
 901:../../Source/Kernel/rme_kernel.c ****                                 rme_ptr_t Operand)
 902:../../Source/Kernel/rme_kernel.c **** {
 709              		.loc 1 902 1
 710              		.cfi_startproc
 711              		@ args = 0, pretend = 0, frame = 16
 712              		@ frame_needed = 1, uses_anonymous_args = 0
 713              		@ link register save eliminated.
 714 0000 04B02DE5 		str	fp, [sp, #-4]!
 715              		.cfi_def_cfa_offset 4
 716              		.cfi_offset 11, -4
 717 0004 00B08DE2 		add	fp, sp, #0
 718              		.cfi_def_cfa_register 11
 719 0008 14D04DE2 		sub	sp, sp, #20
 720 000c 10000BE5 		str	r0, [fp, #-16]
 721 0010 14100BE5 		str	r1, [fp, #-20]
 903:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Old;
 904:../../Source/Kernel/rme_kernel.c **** 
 905:../../Source/Kernel/rme_kernel.c ****     Old=*Ptr;
 722              		.loc 1 905 8
 723 0014 10301BE5 		ldr	r3, [fp, #-16]
 724 0018 003093E5 		ldr	r3, [r3]
 725 001c 08300BE5 		str	r3, [fp, #-8]
 906:../../Source/Kernel/rme_kernel.c ****     *Ptr=Old&Operand;
 726              		.loc 1 906 13
 727 0020 08201BE5 		ldr	r2, [fp, #-8]
 728 0024 14301BE5 		ldr	r3, [fp, #-20]
 729 0028 032002E0 		and	r2, r2, r3
 730              		.loc 1 906 9
 731 002c 10301BE5 		ldr	r3, [fp, #-16]
 732 0030 002083E5 		str	r2, [r3]
 907:../../Source/Kernel/rme_kernel.c **** 
 908:../../Source/Kernel/rme_kernel.c ****     return Old;
 733              		.loc 1 908 12
 734 0034 08301BE5 		ldr	r3, [fp, #-8]
 909:../../Source/Kernel/rme_kernel.c **** }
 735              		.loc 1 909 1
 736 0038 0300A0E1 		mov	r0, r3
 737 003c 00D08BE2 		add	sp, fp, #0
 738              		.cfi_def_cfa_register 13
 739              		@ sp needed
 740 0040 04B09DE4 		ldr	fp, [sp], #4
 741              		.cfi_restore 11
 742              		.cfi_def_cfa_offset 0
 743 0044 1EFF2FE1 		bx	lr
 744              		.cfi_endproc
 745              	.LFE8:
 747              		.section	.text._RME_List_Crt,"ax",%progbits
 748              		.align	2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 30


 749              		.global	_RME_List_Crt
 750              		.syntax unified
 751              		.arm
 753              	_RME_List_Crt:
 754              	.LFB9:
 910:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Fetch_And_Single ****************************************/
 911:../../Source/Kernel/rme_kernel.c **** 
 912:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_List_Crt *****************************************************
 913:../../Source/Kernel/rme_kernel.c **** Description : Create a doubly linked list.
 914:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_List* Head - The pointer to the list head.
 915:../../Source/Kernel/rme_kernel.c **** Output      : None.
 916:../../Source/Kernel/rme_kernel.c **** Return      : None.
 917:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 918:../../Source/Kernel/rme_kernel.c **** void _RME_List_Crt(struct RME_List* Head)
 919:../../Source/Kernel/rme_kernel.c **** {
 755              		.loc 1 919 1
 756              		.cfi_startproc
 757              		@ args = 0, pretend = 0, frame = 8
 758              		@ frame_needed = 1, uses_anonymous_args = 0
 759              		@ link register save eliminated.
 760 0000 04B02DE5 		str	fp, [sp, #-4]!
 761              		.cfi_def_cfa_offset 4
 762              		.cfi_offset 11, -4
 763 0004 00B08DE2 		add	fp, sp, #0
 764              		.cfi_def_cfa_register 11
 765 0008 0CD04DE2 		sub	sp, sp, #12
 766 000c 08000BE5 		str	r0, [fp, #-8]
 920:../../Source/Kernel/rme_kernel.c ****     Head->Prev=Head;
 767              		.loc 1 920 15
 768 0010 08301BE5 		ldr	r3, [fp, #-8]
 769 0014 08201BE5 		ldr	r2, [fp, #-8]
 770 0018 042083E5 		str	r2, [r3, #4]
 921:../../Source/Kernel/rme_kernel.c ****     Head->Next=Head;
 771              		.loc 1 921 15
 772 001c 08301BE5 		ldr	r3, [fp, #-8]
 773 0020 08201BE5 		ldr	r2, [fp, #-8]
 774 0024 002083E5 		str	r2, [r3]
 922:../../Source/Kernel/rme_kernel.c **** }
 775              		.loc 1 922 1
 776 0028 00F020E3 		nop
 777 002c 00D08BE2 		add	sp, fp, #0
 778              		.cfi_def_cfa_register 13
 779              		@ sp needed
 780 0030 04B09DE4 		ldr	fp, [sp], #4
 781              		.cfi_restore 11
 782              		.cfi_def_cfa_offset 0
 783 0034 1EFF2FE1 		bx	lr
 784              		.cfi_endproc
 785              	.LFE9:
 787              		.section	.text._RME_List_Del,"ax",%progbits
 788              		.align	2
 789              		.global	_RME_List_Del
 790              		.syntax unified
 791              		.arm
 793              	_RME_List_Del:
 794              	.LFB10:
 923:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_List_Crt ************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 31


 924:../../Source/Kernel/rme_kernel.c **** 
 925:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_List_Del *****************************************************
 926:../../Source/Kernel/rme_kernel.c **** Description : Delete a node from the doubly-linked list.
 927:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_List* Prev - The previous node.
 928:../../Source/Kernel/rme_kernel.c ****               struct RME_List* Next - The next node.
 929:../../Source/Kernel/rme_kernel.c **** Output      : None.
 930:../../Source/Kernel/rme_kernel.c **** Return      : None.
 931:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 932:../../Source/Kernel/rme_kernel.c **** void _RME_List_Del(struct RME_List* Prev,
 933:../../Source/Kernel/rme_kernel.c ****                    struct RME_List* Next)
 934:../../Source/Kernel/rme_kernel.c **** {
 795              		.loc 1 934 1
 796              		.cfi_startproc
 797              		@ args = 0, pretend = 0, frame = 8
 798              		@ frame_needed = 1, uses_anonymous_args = 0
 799              		@ link register save eliminated.
 800 0000 04B02DE5 		str	fp, [sp, #-4]!
 801              		.cfi_def_cfa_offset 4
 802              		.cfi_offset 11, -4
 803 0004 00B08DE2 		add	fp, sp, #0
 804              		.cfi_def_cfa_register 11
 805 0008 0CD04DE2 		sub	sp, sp, #12
 806 000c 08000BE5 		str	r0, [fp, #-8]
 807 0010 0C100BE5 		str	r1, [fp, #-12]
 935:../../Source/Kernel/rme_kernel.c ****     Next->Prev=Prev;
 808              		.loc 1 935 15
 809 0014 0C301BE5 		ldr	r3, [fp, #-12]
 810 0018 08201BE5 		ldr	r2, [fp, #-8]
 811 001c 042083E5 		str	r2, [r3, #4]
 936:../../Source/Kernel/rme_kernel.c ****     Prev->Next=Next;
 812              		.loc 1 936 15
 813 0020 08301BE5 		ldr	r3, [fp, #-8]
 814 0024 0C201BE5 		ldr	r2, [fp, #-12]
 815 0028 002083E5 		str	r2, [r3]
 937:../../Source/Kernel/rme_kernel.c **** }
 816              		.loc 1 937 1
 817 002c 00F020E3 		nop
 818 0030 00D08BE2 		add	sp, fp, #0
 819              		.cfi_def_cfa_register 13
 820              		@ sp needed
 821 0034 04B09DE4 		ldr	fp, [sp], #4
 822              		.cfi_restore 11
 823              		.cfi_def_cfa_offset 0
 824 0038 1EFF2FE1 		bx	lr
 825              		.cfi_endproc
 826              	.LFE10:
 828              		.section	.text._RME_List_Ins,"ax",%progbits
 829              		.align	2
 830              		.global	_RME_List_Ins
 831              		.syntax unified
 832              		.arm
 834              	_RME_List_Ins:
 835              	.LFB11:
 938:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_List_Del ************************************************/
 939:../../Source/Kernel/rme_kernel.c **** 
 940:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_List_Ins *****************************************************
 941:../../Source/Kernel/rme_kernel.c **** Description : Insert a node to the doubly-linked list.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 32


 942:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_List* New - The new node to insert.
 943:../../Source/Kernel/rme_kernel.c ****               struct RME_List* Prev - The previous node.
 944:../../Source/Kernel/rme_kernel.c ****               struct RME_List* Next - The next node.
 945:../../Source/Kernel/rme_kernel.c **** Output      : None.
 946:../../Source/Kernel/rme_kernel.c **** Return      : None.
 947:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 948:../../Source/Kernel/rme_kernel.c **** void _RME_List_Ins(struct RME_List* New,
 949:../../Source/Kernel/rme_kernel.c ****                    struct RME_List* Prev,
 950:../../Source/Kernel/rme_kernel.c ****                    struct RME_List* Next)
 951:../../Source/Kernel/rme_kernel.c **** {
 836              		.loc 1 951 1
 837              		.cfi_startproc
 838              		@ args = 0, pretend = 0, frame = 16
 839              		@ frame_needed = 1, uses_anonymous_args = 0
 840              		@ link register save eliminated.
 841 0000 04B02DE5 		str	fp, [sp, #-4]!
 842              		.cfi_def_cfa_offset 4
 843              		.cfi_offset 11, -4
 844 0004 00B08DE2 		add	fp, sp, #0
 845              		.cfi_def_cfa_register 11
 846 0008 14D04DE2 		sub	sp, sp, #20
 847 000c 08000BE5 		str	r0, [fp, #-8]
 848 0010 0C100BE5 		str	r1, [fp, #-12]
 849 0014 10200BE5 		str	r2, [fp, #-16]
 952:../../Source/Kernel/rme_kernel.c ****     Next->Prev=New;
 850              		.loc 1 952 15
 851 0018 10301BE5 		ldr	r3, [fp, #-16]
 852 001c 08201BE5 		ldr	r2, [fp, #-8]
 853 0020 042083E5 		str	r2, [r3, #4]
 953:../../Source/Kernel/rme_kernel.c ****     New->Next=Next;
 854              		.loc 1 953 14
 855 0024 08301BE5 		ldr	r3, [fp, #-8]
 856 0028 10201BE5 		ldr	r2, [fp, #-16]
 857 002c 002083E5 		str	r2, [r3]
 954:../../Source/Kernel/rme_kernel.c ****     New->Prev=Prev;
 858              		.loc 1 954 14
 859 0030 08301BE5 		ldr	r3, [fp, #-8]
 860 0034 0C201BE5 		ldr	r2, [fp, #-12]
 861 0038 042083E5 		str	r2, [r3, #4]
 955:../../Source/Kernel/rme_kernel.c ****     Prev->Next=New;
 862              		.loc 1 955 15
 863 003c 0C301BE5 		ldr	r3, [fp, #-12]
 864 0040 08201BE5 		ldr	r2, [fp, #-8]
 865 0044 002083E5 		str	r2, [r3]
 956:../../Source/Kernel/rme_kernel.c **** }
 866              		.loc 1 956 1
 867 0048 00F020E3 		nop
 868 004c 00D08BE2 		add	sp, fp, #0
 869              		.cfi_def_cfa_register 13
 870              		@ sp needed
 871 0050 04B09DE4 		ldr	fp, [sp], #4
 872              		.cfi_restore 11
 873              		.cfi_def_cfa_offset 0
 874 0054 1EFF2FE1 		bx	lr
 875              		.cfi_endproc
 876              	.LFE11:
 878              		.section	.text._RME_Clear,"ax",%progbits
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 33


 879              		.align	2
 880              		.global	_RME_Clear
 881              		.syntax unified
 882              		.arm
 884              	_RME_Clear:
 885              	.LFB12:
 957:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_List_Ins ************************************************/
 958:../../Source/Kernel/rme_kernel.c **** 
 959:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Clear ********************************************************
 960:../../Source/Kernel/rme_kernel.c **** Description : Memset a memory area to zero. This is not fast due to byte operations;
 961:../../Source/Kernel/rme_kernel.c ****               this is not meant for large memory. However, it is indeed secure.
 962:../../Source/Kernel/rme_kernel.c **** Input       : void* Addr - The address to clear.
 963:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size - The size to clear.
 964:../../Source/Kernel/rme_kernel.c **** Output      : None.
 965:../../Source/Kernel/rme_kernel.c **** Return      : None.
 966:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 967:../../Source/Kernel/rme_kernel.c **** void _RME_Clear(void* Addr,
 968:../../Source/Kernel/rme_kernel.c ****                 rme_ptr_t Size)
 969:../../Source/Kernel/rme_kernel.c **** {
 886              		.loc 1 969 1
 887              		.cfi_startproc
 888              		@ args = 0, pretend = 0, frame = 16
 889              		@ frame_needed = 1, uses_anonymous_args = 0
 890              		@ link register save eliminated.
 891 0000 04B02DE5 		str	fp, [sp, #-4]!
 892              		.cfi_def_cfa_offset 4
 893              		.cfi_offset 11, -4
 894 0004 00B08DE2 		add	fp, sp, #0
 895              		.cfi_def_cfa_register 11
 896 0008 14D04DE2 		sub	sp, sp, #20
 897 000c 10000BE5 		str	r0, [fp, #-16]
 898 0010 14100BE5 		str	r1, [fp, #-20]
 970:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
 971:../../Source/Kernel/rme_kernel.c **** 
 972:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Size;Count++)
 899              		.loc 1 972 14
 900 0014 0030A0E3 		mov	r3, #0
 901 0018 08300BE5 		str	r3, [fp, #-8]
 902              		.loc 1 972 5
 903 001c 070000EA 		b	.L52
 904              	.L53:
 973:../../Source/Kernel/rme_kernel.c ****     {
 974:../../Source/Kernel/rme_kernel.c ****         ((rme_u8_t*)Addr)[Count]=0U;
 905              		.loc 1 974 26
 906 0020 10201BE5 		ldr	r2, [fp, #-16]
 907 0024 08301BE5 		ldr	r3, [fp, #-8]
 908 0028 033082E0 		add	r3, r2, r3
 909              		.loc 1 974 33
 910 002c 0020A0E3 		mov	r2, #0
 911 0030 0020C3E5 		strb	r2, [r3]
 972:../../Source/Kernel/rme_kernel.c ****     {
 912              		.loc 1 972 34 discriminator 3
 913 0034 08301BE5 		ldr	r3, [fp, #-8]
 914 0038 013083E2 		add	r3, r3, #1
 915 003c 08300BE5 		str	r3, [fp, #-8]
 916              	.L52:
 972:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 34


 917              		.loc 1 972 23 discriminator 1
 918 0040 08201BE5 		ldr	r2, [fp, #-8]
 919 0044 14301BE5 		ldr	r3, [fp, #-20]
 920 0048 030052E1 		cmp	r2, r3
 921 004c F3FFFF3A 		bcc	.L53
 975:../../Source/Kernel/rme_kernel.c ****     }
 976:../../Source/Kernel/rme_kernel.c **** }
 922              		.loc 1 976 1
 923 0050 00F020E3 		nop
 924 0054 00F020E3 		nop
 925 0058 00D08BE2 		add	sp, fp, #0
 926              		.cfi_def_cfa_register 13
 927              		@ sp needed
 928 005c 04B09DE4 		ldr	fp, [sp], #4
 929              		.cfi_restore 11
 930              		.cfi_def_cfa_offset 0
 931 0060 1EFF2FE1 		bx	lr
 932              		.cfi_endproc
 933              	.LFE12:
 935              		.section	.text._RME_Memcmp,"ax",%progbits
 936              		.align	2
 937              		.global	_RME_Memcmp
 938              		.syntax unified
 939              		.arm
 941              	_RME_Memcmp:
 942              	.LFB13:
 977:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Clear ***************************************************/
 978:../../Source/Kernel/rme_kernel.c **** 
 979:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Memcmp *******************************************************
 980:../../Source/Kernel/rme_kernel.c **** Description : Compare two memory segments to see if they are equal. This is not
 981:../../Source/Kernel/rme_kernel.c ****               fast due to byte operations; this is not meant for large memory.
 982:../../Source/Kernel/rme_kernel.c **** Input       : const void* Ptr1 - The first memory region.
 983:../../Source/Kernel/rme_kernel.c ****               const void* Ptr2 - The second memory region.
 984:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Num - The number of bytes to compare.
 985:../../Source/Kernel/rme_kernel.c **** Output      : None.
 986:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If Ptr1>Ptr2, then return a positive value; else a negative
 987:../../Source/Kernel/rme_kernel.c ****                           value. If Ptr1==Ptr2, then return 0;
 988:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
 989:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Memcmp(const void* Ptr1,
 990:../../Source/Kernel/rme_kernel.c ****                       const void* Ptr2,
 991:../../Source/Kernel/rme_kernel.c ****                       rme_ptr_t Num)
 992:../../Source/Kernel/rme_kernel.c **** {
 943              		.loc 1 992 1
 944              		.cfi_startproc
 945              		@ args = 0, pretend = 0, frame = 32
 946              		@ frame_needed = 1, uses_anonymous_args = 0
 947              		@ link register save eliminated.
 948 0000 04B02DE5 		str	fp, [sp, #-4]!
 949              		.cfi_def_cfa_offset 4
 950              		.cfi_offset 11, -4
 951 0004 00B08DE2 		add	fp, sp, #0
 952              		.cfi_def_cfa_register 11
 953 0008 24D04DE2 		sub	sp, sp, #36
 954 000c 18000BE5 		str	r0, [fp, #-24]
 955 0010 1C100BE5 		str	r1, [fp, #-28]
 956 0014 20200BE5 		str	r2, [fp, #-32]
 993:../../Source/Kernel/rme_kernel.c ****     const rme_s8_t* Dst;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 35


 994:../../Source/Kernel/rme_kernel.c ****     const rme_s8_t* Src;
 995:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
 996:../../Source/Kernel/rme_kernel.c **** 
 997:../../Source/Kernel/rme_kernel.c ****     Dst=(const rme_s8_t*)Ptr1;
 957              		.loc 1 997 8
 958 0018 18301BE5 		ldr	r3, [fp, #-24]
 959 001c 0C300BE5 		str	r3, [fp, #-12]
 998:../../Source/Kernel/rme_kernel.c ****     Src=(const rme_s8_t*)Ptr2;
 960              		.loc 1 998 8
 961 0020 1C301BE5 		ldr	r3, [fp, #-28]
 962 0024 10300BE5 		str	r3, [fp, #-16]
 999:../../Source/Kernel/rme_kernel.c **** 
1000:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Num;Count++)
 963              		.loc 1 1000 14
 964 0028 0030A0E3 		mov	r3, #0
 965 002c 08300BE5 		str	r3, [fp, #-8]
 966              		.loc 1 1000 5
 967 0030 170000EA 		b	.L55
 968              	.L58:
1001:../../Source/Kernel/rme_kernel.c ****     {
1002:../../Source/Kernel/rme_kernel.c ****         if(Dst[Count]!=Src[Count])
 969              		.loc 1 1002 15
 970 0034 0C201BE5 		ldr	r2, [fp, #-12]
 971 0038 08301BE5 		ldr	r3, [fp, #-8]
 972 003c 033082E0 		add	r3, r2, r3
 973 0040 D020D3E1 		ldrsb	r2, [r3]
 974              		.loc 1 1002 27
 975 0044 10101BE5 		ldr	r1, [fp, #-16]
 976 0048 08301BE5 		ldr	r3, [fp, #-8]
 977 004c 033081E0 		add	r3, r1, r3
 978 0050 D030D3E1 		ldrsb	r3, [r3]
 979              		.loc 1 1002 11
 980 0054 030052E1 		cmp	r2, r3
 981 0058 0A00000A 		beq	.L56
1003:../../Source/Kernel/rme_kernel.c ****         {
1004:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1005:../../Source/Kernel/rme_kernel.c ****             
1006:../../Source/Kernel/rme_kernel.c ****             return Dst[Count]-Src[Count];
 982              		.loc 1 1006 23
 983 005c 0C201BE5 		ldr	r2, [fp, #-12]
 984 0060 08301BE5 		ldr	r3, [fp, #-8]
 985 0064 033082E0 		add	r3, r2, r3
 986 0068 D030D3E1 		ldrsb	r3, [r3]
 987 006c 0310A0E1 		mov	r1, r3
 988              		.loc 1 1006 34
 989 0070 10201BE5 		ldr	r2, [fp, #-16]
 990 0074 08301BE5 		ldr	r3, [fp, #-8]
 991 0078 033082E0 		add	r3, r2, r3
 992 007c D030D3E1 		ldrsb	r3, [r3]
 993              		.loc 1 1006 30
 994 0080 033041E0 		sub	r3, r1, r3
 995 0084 070000EA 		b	.L57
 996              	.L56:
1000:../../Source/Kernel/rme_kernel.c ****     {
 997              		.loc 1 1000 33 discriminator 2
 998 0088 08301BE5 		ldr	r3, [fp, #-8]
 999 008c 013083E2 		add	r3, r3, #1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 36


 1000 0090 08300BE5 		str	r3, [fp, #-8]
 1001              	.L55:
1000:../../Source/Kernel/rme_kernel.c ****     {
 1002              		.loc 1 1000 23 discriminator 1
 1003 0094 08201BE5 		ldr	r2, [fp, #-8]
 1004 0098 20301BE5 		ldr	r3, [fp, #-32]
 1005 009c 030052E1 		cmp	r2, r3
 1006 00a0 E3FFFF3A 		bcc	.L58
1007:../../Source/Kernel/rme_kernel.c ****         }
1008:../../Source/Kernel/rme_kernel.c ****         else
1009:../../Source/Kernel/rme_kernel.c ****         {
1010:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1011:../../Source/Kernel/rme_kernel.c ****             /* No action required */
1012:../../Source/Kernel/rme_kernel.c ****         }
1013:../../Source/Kernel/rme_kernel.c ****     }
1014:../../Source/Kernel/rme_kernel.c **** 
1015:../../Source/Kernel/rme_kernel.c ****     return 0;
 1007              		.loc 1 1015 12
 1008 00a4 0030A0E3 		mov	r3, #0
 1009              	.L57:
1016:../../Source/Kernel/rme_kernel.c **** }
 1010              		.loc 1 1016 1
 1011 00a8 0300A0E1 		mov	r0, r3
 1012 00ac 00D08BE2 		add	sp, fp, #0
 1013              		.cfi_def_cfa_register 13
 1014              		@ sp needed
 1015 00b0 04B09DE4 		ldr	fp, [sp], #4
 1016              		.cfi_restore 11
 1017              		.cfi_def_cfa_offset 0
 1018 00b4 1EFF2FE1 		bx	lr
 1019              		.cfi_endproc
 1020              	.LFE13:
 1022              		.section	.text._RME_Memcpy,"ax",%progbits
 1023              		.align	2
 1024              		.global	_RME_Memcpy
 1025              		.syntax unified
 1026              		.arm
 1028              	_RME_Memcpy:
 1029              	.LFB14:
1017:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Memcmp **************************************************/
1018:../../Source/Kernel/rme_kernel.c **** 
1019:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Memcpy *******************************************************
1020:../../Source/Kernel/rme_kernel.c **** Description : Copy one segment of memory to another segment. This is not fast
1021:../../Source/Kernel/rme_kernel.c ****               due to byte operations; this is not meant for large memory.
1022:../../Source/Kernel/rme_kernel.c **** Input       : volatile void* Dst - The first memory region.
1023:../../Source/Kernel/rme_kernel.c ****               volatile void* Src - The second memory region.
1024:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Num - The number of bytes to compare.
1025:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size - The size to clear.
1026:../../Source/Kernel/rme_kernel.c **** Output      : None.
1027:../../Source/Kernel/rme_kernel.c **** Return      : None.
1028:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1029:../../Source/Kernel/rme_kernel.c **** void _RME_Memcpy(void* Dst,
1030:../../Source/Kernel/rme_kernel.c ****                  void* Src,
1031:../../Source/Kernel/rme_kernel.c ****                  rme_ptr_t Num)
1032:../../Source/Kernel/rme_kernel.c **** {
 1030              		.loc 1 1032 1
 1031              		.cfi_startproc
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 37


 1032              		@ args = 0, pretend = 0, frame = 24
 1033              		@ frame_needed = 1, uses_anonymous_args = 0
 1034              		@ link register save eliminated.
 1035 0000 04B02DE5 		str	fp, [sp, #-4]!
 1036              		.cfi_def_cfa_offset 4
 1037              		.cfi_offset 11, -4
 1038 0004 00B08DE2 		add	fp, sp, #0
 1039              		.cfi_def_cfa_register 11
 1040 0008 1CD04DE2 		sub	sp, sp, #28
 1041 000c 10000BE5 		str	r0, [fp, #-16]
 1042 0010 14100BE5 		str	r1, [fp, #-20]
 1043 0014 18200BE5 		str	r2, [fp, #-24]
1033:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
1034:../../Source/Kernel/rme_kernel.c **** 
1035:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Num;Count++)
 1044              		.loc 1 1035 14
 1045 0018 0030A0E3 		mov	r3, #0
 1046 001c 08300BE5 		str	r3, [fp, #-8]
 1047              		.loc 1 1035 5
 1048 0020 0B0000EA 		b	.L60
 1049              	.L61:
1036:../../Source/Kernel/rme_kernel.c ****     {
1037:../../Source/Kernel/rme_kernel.c ****         ((volatile rme_u8_t*)Dst)[Count]=((volatile rme_u8_t*)Src)[Count];
 1050              		.loc 1 1037 67
 1051 0024 14201BE5 		ldr	r2, [fp, #-20]
 1052 0028 08301BE5 		ldr	r3, [fp, #-8]
 1053 002c 032082E0 		add	r2, r2, r3
 1054              		.loc 1 1037 34
 1055 0030 10101BE5 		ldr	r1, [fp, #-16]
 1056 0034 08301BE5 		ldr	r3, [fp, #-8]
 1057 0038 033081E0 		add	r3, r1, r3
 1058              		.loc 1 1037 67
 1059 003c 0020D2E5 		ldrb	r2, [r2]
 1060 0040 7220EFE6 		uxtb	r2, r2
 1061              		.loc 1 1037 41
 1062 0044 0020C3E5 		strb	r2, [r3]
1035:../../Source/Kernel/rme_kernel.c ****     {
 1063              		.loc 1 1035 33 discriminator 3
 1064 0048 08301BE5 		ldr	r3, [fp, #-8]
 1065 004c 013083E2 		add	r3, r3, #1
 1066 0050 08300BE5 		str	r3, [fp, #-8]
 1067              	.L60:
1035:../../Source/Kernel/rme_kernel.c ****     {
 1068              		.loc 1 1035 23 discriminator 1
 1069 0054 08201BE5 		ldr	r2, [fp, #-8]
 1070 0058 18301BE5 		ldr	r3, [fp, #-24]
 1071 005c 030052E1 		cmp	r2, r3
 1072 0060 EFFFFF3A 		bcc	.L61
1038:../../Source/Kernel/rme_kernel.c ****     }
1039:../../Source/Kernel/rme_kernel.c **** }
 1073              		.loc 1 1039 1
 1074 0064 00F020E3 		nop
 1075 0068 00F020E3 		nop
 1076 006c 00D08BE2 		add	sp, fp, #0
 1077              		.cfi_def_cfa_register 13
 1078              		@ sp needed
 1079 0070 04B09DE4 		ldr	fp, [sp], #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 38


 1080              		.cfi_restore 11
 1081              		.cfi_def_cfa_offset 0
 1082 0074 1EFF2FE1 		bx	lr
 1083              		.cfi_endproc
 1084              	.LFE14:
 1086              		.section	.text._RME_Diff,"ax",%progbits
 1087              		.align	2
 1088              		.global	_RME_Diff
 1089              		.syntax unified
 1090              		.arm
 1092              	_RME_Diff:
 1093              	.LFB15:
1040:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Memcpy **************************************************/
1041:../../Source/Kernel/rme_kernel.c **** 
1042:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Diff *********************************************************
1043:../../Source/Kernel/rme_kernel.c **** Description : Compute the absolute difference between two numbers, when integer
1044:../../Source/Kernel/rme_kernel.c ****               wraparound is considered.
1045:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Num1 - The first number.
1046:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Num2 - The second number.
1047:../../Source/Kernel/rme_kernel.c **** Output      : None.
1048:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - The distance.
1049:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1050:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Diff(rme_ptr_t Num1,
1051:../../Source/Kernel/rme_kernel.c ****                     rme_ptr_t Num2)
1052:../../Source/Kernel/rme_kernel.c **** {
 1094              		.loc 1 1052 1
 1095              		.cfi_startproc
 1096              		@ args = 0, pretend = 0, frame = 16
 1097              		@ frame_needed = 1, uses_anonymous_args = 0
 1098              		@ link register save eliminated.
 1099 0000 04B02DE5 		str	fp, [sp, #-4]!
 1100              		.cfi_def_cfa_offset 4
 1101              		.cfi_offset 11, -4
 1102 0004 00B08DE2 		add	fp, sp, #0
 1103              		.cfi_def_cfa_register 11
 1104 0008 14D04DE2 		sub	sp, sp, #20
 1105 000c 10000BE5 		str	r0, [fp, #-16]
 1106 0010 14100BE5 		str	r1, [fp, #-20]
1053:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Diff1;
1054:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Diff2;
1055:../../Source/Kernel/rme_kernel.c ****     
1056:../../Source/Kernel/rme_kernel.c ****     Diff1=Num1-Num2;
 1107              		.loc 1 1056 10
 1108 0014 10201BE5 		ldr	r2, [fp, #-16]
 1109 0018 14301BE5 		ldr	r3, [fp, #-20]
 1110 001c 033042E0 		sub	r3, r2, r3
 1111 0020 08300BE5 		str	r3, [fp, #-8]
1057:../../Source/Kernel/rme_kernel.c ****     Diff2=Num2-Num1;
 1112              		.loc 1 1057 10
 1113 0024 14201BE5 		ldr	r2, [fp, #-20]
 1114 0028 10301BE5 		ldr	r3, [fp, #-16]
 1115 002c 033042E0 		sub	r3, r2, r3
 1116 0030 0C300BE5 		str	r3, [fp, #-12]
1058:../../Source/Kernel/rme_kernel.c ****     
1059:../../Source/Kernel/rme_kernel.c ****     if(Diff1>Diff2)
 1117              		.loc 1 1059 7
 1118 0034 08201BE5 		ldr	r2, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 39


 1119 0038 0C301BE5 		ldr	r3, [fp, #-12]
 1120 003c 030052E1 		cmp	r2, r3
 1121 0040 0100009A 		bls	.L63
1060:../../Source/Kernel/rme_kernel.c ****     {
1061:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1062:../../Source/Kernel/rme_kernel.c ****         
1063:../../Source/Kernel/rme_kernel.c ****         return Diff2;
 1122              		.loc 1 1063 16
 1123 0044 0C301BE5 		ldr	r3, [fp, #-12]
 1124 0048 000000EA 		b	.L64
 1125              	.L63:
1064:../../Source/Kernel/rme_kernel.c ****     }
1065:../../Source/Kernel/rme_kernel.c ****     else
1066:../../Source/Kernel/rme_kernel.c ****     {
1067:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1068:../../Source/Kernel/rme_kernel.c ****         
1069:../../Source/Kernel/rme_kernel.c ****         return Diff1;
 1126              		.loc 1 1069 16
 1127 004c 08301BE5 		ldr	r3, [fp, #-8]
 1128              	.L64:
1070:../../Source/Kernel/rme_kernel.c ****     }
1071:../../Source/Kernel/rme_kernel.c **** }
 1129              		.loc 1 1071 1
 1130 0050 0300A0E1 		mov	r0, r3
 1131 0054 00D08BE2 		add	sp, fp, #0
 1132              		.cfi_def_cfa_register 13
 1133              		@ sp needed
 1134 0058 04B09DE4 		ldr	fp, [sp], #4
 1135              		.cfi_restore 11
 1136              		.cfi_def_cfa_offset 0
 1137 005c 1EFF2FE1 		bx	lr
 1138              		.cfi_endproc
 1139              	.LFE15:
 1141              		.section	.text.RME_Kmain,"ax",%progbits
 1142              		.align	2
 1143              		.global	RME_Kmain
 1144              		.syntax unified
 1145              		.arm
 1147              	RME_Kmain:
 1148              	.LFB16:
1072:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Diff ****************************************************/
1073:../../Source/Kernel/rme_kernel.c **** 
1074:../../Source/Kernel/rme_kernel.c **** /* Function:RME_Kmain *********************************************************
1075:../../Source/Kernel/rme_kernel.c **** Description : The entry of the operating system.
1076:../../Source/Kernel/rme_kernel.c **** Input       : None.
1077:../../Source/Kernel/rme_kernel.c **** Output      : None.
1078:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - This function never returns.
1079:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1080:../../Source/Kernel/rme_kernel.c **** rme_ret_t RME_Kmain(void)
1081:../../Source/Kernel/rme_kernel.c **** {
 1149              		.loc 1 1081 1
 1150              		.cfi_startproc
 1151              		@ args = 0, pretend = 0, frame = 0
 1152              		@ frame_needed = 1, uses_anonymous_args = 0
 1153 0000 00482DE9 		push	{fp, lr}
 1154              		.cfi_def_cfa_offset 8
 1155              		.cfi_offset 11, -8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 40


 1156              		.cfi_offset 14, -4
 1157 0004 04B08DE2 		add	fp, sp, #4
 1158              		.cfi_def_cfa 11, 4
1082:../../Source/Kernel/rme_kernel.c ****     /* Disable all interrupts first */
1083:../../Source/Kernel/rme_kernel.c ****     __RME_Int_Disable();
 1159              		.loc 1 1083 5
 1160 0008 FEFFFFEB 		bl	__RME_Int_Disable
1084:../../Source/Kernel/rme_kernel.c ****     /* Some low-level kernel assertions */
1085:../../Source/Kernel/rme_kernel.c ****     _RME_Lowlvl_Check();
 1161              		.loc 1 1085 5
 1162 000c FEFFFFEB 		bl	_RME_Lowlvl_Check
1086:../../Source/Kernel/rme_kernel.c ****     /* Hardware low-level init */
1087:../../Source/Kernel/rme_kernel.c ****     __RME_Lowlvl_Init();
 1163              		.loc 1 1087 5
 1164 0010 FEFFFFEB 		bl	__RME_Lowlvl_Init
1088:../../Source/Kernel/rme_kernel.c ****     /* Initialize the kernel page tables or memory mappings */
1089:../../Source/Kernel/rme_kernel.c ****     __RME_Pgt_Kom_Init();
 1165              		.loc 1 1089 5
 1166 0014 FEFFFFEB 		bl	__RME_Pgt_Kom_Init
1090:../../Source/Kernel/rme_kernel.c ****     
1091:../../Source/Kernel/rme_kernel.c ****     /* Initialize the kernel object allocation table - default init */
1092:../../Source/Kernel/rme_kernel.c ****     _RME_Kot_Init(RME_KOT_WORD_NUM);
 1167              		.loc 1 1092 5
 1168 0018 0206A0E3 		mov	r0, #2097152
 1169 001c FEFFFFEB 		bl	_RME_Kot_Init
1093:../../Source/Kernel/rme_kernel.c ****     
1094:../../Source/Kernel/rme_kernel.c ****     /* Boot into the first process */
1095:../../Source/Kernel/rme_kernel.c ****     __RME_Boot();
 1170              		.loc 1 1095 5
 1171 0020 FEFFFFEB 		bl	__RME_Boot
1096:../../Source/Kernel/rme_kernel.c ****     
1097:../../Source/Kernel/rme_kernel.c ****     /* Should never reach here */
1098:../../Source/Kernel/rme_kernel.c ****     return 0;
 1172              		.loc 1 1098 12
 1173 0024 0030A0E3 		mov	r3, #0
1099:../../Source/Kernel/rme_kernel.c **** }
 1174              		.loc 1 1099 1
 1175 0028 0300A0E1 		mov	r0, r3
 1176 002c 0088BDE8 		pop	{fp, pc}
 1177              		.cfi_endproc
 1178              	.LFE16:
 1180              		.section	.text._RME_Lowlvl_Check,"ax",%progbits
 1181              		.align	2
 1182              		.syntax unified
 1183              		.arm
 1185              	_RME_Lowlvl_Check:
 1186              	.LFB17:
1100:../../Source/Kernel/rme_kernel.c **** /* End Function:RME_Kmain ****************************************************/
1101:../../Source/Kernel/rme_kernel.c **** 
1102:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Lowlvl_Check *************************************************
1103:../../Source/Kernel/rme_kernel.c **** Description : Do some low-level checking for the operating system.
1104:../../Source/Kernel/rme_kernel.c **** Input       : None.
1105:../../Source/Kernel/rme_kernel.c **** Output      : None.
1106:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - Always 0.
1107:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1108:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Lowlvl_Check(void)
1109:../../Source/Kernel/rme_kernel.c **** {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 41


 1187              		.loc 1 1109 1
 1188              		.cfi_startproc
 1189              		@ args = 0, pretend = 0, frame = 0
 1190              		@ frame_needed = 1, uses_anonymous_args = 0
 1191              		@ link register save eliminated.
 1192 0000 04B02DE5 		str	fp, [sp, #-4]!
 1193              		.cfi_def_cfa_offset 4
 1194              		.cfi_offset 11, -4
 1195 0004 00B08DE2 		add	fp, sp, #0
 1196              		.cfi_def_cfa_register 11
1110:../../Source/Kernel/rme_kernel.c ****     /* Make sure the machine is at least 32-bit */
1111:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_WORD_ORDER>=5U);
1112:../../Source/Kernel/rme_kernel.c ****     /* Check if the word order setting is correct */
1113:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_WORD_BIT==RME_POW2(RME_WORD_ORDER));
1114:../../Source/Kernel/rme_kernel.c ****     /* Check if the struct sizes are correct */
1115:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Struct)==RME_CAP_SIZE);
1116:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Cpt)==RME_CAP_SIZE);
1117:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
1118:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Pgt)==RME_CAP_SIZE);
1119:../../Source/Kernel/rme_kernel.c **** #endif
1120:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Prc)==RME_CAP_SIZE);
1121:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Thd)==RME_CAP_SIZE);
1122:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Sig)==RME_CAP_SIZE);
1123:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Inv)==RME_CAP_SIZE);
1124:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Kfn)==RME_CAP_SIZE);
1125:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(sizeof(struct RME_Cap_Kom)==RME_CAP_SIZE);
1126:../../Source/Kernel/rme_kernel.c ****     /* Check if the other configurations are correct */
1127:../../Source/Kernel/rme_kernel.c ****     /* Kernel memory allocation minimal size aligned to word boundary */
1128:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_KOM_SLOT_ORDER>=RME_WORD_ORDER-3U);
1129:../../Source/Kernel/rme_kernel.c ****     /* Make sure the number of priorities do not exceed half-word boundary */
1130:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_PREEMPT_PRIO_NUM<=RME_POW2(RME_WORD_BIT>>1));
1131:../../Source/Kernel/rme_kernel.c ****     
1132:../../Source/Kernel/rme_kernel.c ****     return 0;
 1197              		.loc 1 1132 12
 1198 0008 0030A0E3 		mov	r3, #0
1133:../../Source/Kernel/rme_kernel.c **** }
 1199              		.loc 1 1133 1
 1200 000c 0300A0E1 		mov	r0, r3
 1201 0010 00D08BE2 		add	sp, fp, #0
 1202              		.cfi_def_cfa_register 13
 1203              		@ sp needed
 1204 0014 04B09DE4 		ldr	fp, [sp], #4
 1205              		.cfi_restore 11
 1206              		.cfi_def_cfa_offset 0
 1207 0018 1EFF2FE1 		bx	lr
 1208              		.cfi_endproc
 1209              	.LFE17:
 1211              		.section	.text._RME_Svc_Handler,"ax",%progbits
 1212              		.align	2
 1213              		.global	_RME_Svc_Handler
 1214              		.syntax unified
 1215              		.arm
 1217              	_RME_Svc_Handler:
 1218              	.LFB18:
1134:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Lowlvl_Check ********************************************/
1135:../../Source/Kernel/rme_kernel.c **** 
1136:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Svc_Handler **************************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 42


1137:../../Source/Kernel/rme_kernel.c **** Description : The system call handler of the operating system. The register set 
1138:../../Source/Kernel/rme_kernel.c ****               of the current thread shall be passed in as a parameter.
1139:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
1140:../../Source/Kernel/rme_kernel.c **** Output      : struct RME_Reg_Struct* Reg - The updated register set.
1141:../../Source/Kernel/rme_kernel.c **** Return      : None.
1142:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1143:../../Source/Kernel/rme_kernel.c **** void _RME_Svc_Handler(struct RME_Reg_Struct* Reg)
1144:../../Source/Kernel/rme_kernel.c **** {
 1219              		.loc 1 1144 1
 1220              		.cfi_startproc
 1221              		@ args = 0, pretend = 0, frame = 48
 1222              		@ frame_needed = 1, uses_anonymous_args = 0
 1223 0000 30482DE9 		push	{r4, r5, fp, lr}
 1224              		.cfi_def_cfa_offset 16
 1225              		.cfi_offset 4, -16
 1226              		.cfi_offset 5, -12
 1227              		.cfi_offset 11, -8
 1228              		.cfi_offset 14, -4
 1229 0004 0CB08DE2 		add	fp, sp, #12
 1230              		.cfi_def_cfa 11, 4
 1231 0008 48D04DE2 		sub	sp, sp, #72
 1232 000c 38000BE5 		str	r0, [fp, #-56]
1145:../../Source/Kernel/rme_kernel.c ****     /* What's the system call number and major capability ID? */
1146:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Svc;
1147:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Cid;
1148:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Param[3];
1149:../../Source/Kernel/rme_kernel.c ****     rme_ret_t Retval;
1150:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Svc_Num;
1151:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
1152:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Inv_Top;
1153:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt;
1154:../../Source/Kernel/rme_kernel.c **** 
1155:../../Source/Kernel/rme_kernel.c ****     /* Get the system call parameters from the system call */
1156:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Param_Get(Reg, &Svc, &Cid, Param);
 1233              		.loc 1 1156 5
 1234 0010 34304BE2 		sub	r3, fp, #52
 1235 0014 28204BE2 		sub	r2, fp, #40
 1236 0018 24104BE2 		sub	r1, fp, #36
 1237 001c 38001BE5 		ldr	r0, [fp, #-56]
 1238 0020 FEFFFFEB 		bl	__RME_Svc_Param_Get
1157:../../Source/Kernel/rme_kernel.c ****     /* System call number takes [5:0] bits */
1158:../../Source/Kernel/rme_kernel.c ****     Svc_Num=Svc&RME_MASK_END(5U);
 1239              		.loc 1 1158 16
 1240 0024 24301BE5 		ldr	r3, [fp, #-36]
 1241              		.loc 1 1158 12
 1242 0028 3F3003E2 		and	r3, r3, #63
 1243 002c 18300BE5 		str	r3, [fp, #-24]
1159:../../Source/Kernel/rme_kernel.c ****     
1160:../../Source/Kernel/rme_kernel.c ****     /* Ultra-fast path - synchronous invocation returning */
1161:../../Source/Kernel/rme_kernel.c ****     if(Svc_Num==RME_SVC_INV_RET)
 1244              		.loc 1 1161 7
 1245 0030 18301BE5 		ldr	r3, [fp, #-24]
 1246 0034 000053E3 		cmp	r3, #0
 1247 0038 0C00001A 		bne	.L70
1162:../../Source/Kernel/rme_kernel.c ****     {
1163:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1164:../../Source/Kernel/rme_kernel.c ****         
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 43


1165:../../Source/Kernel/rme_kernel.c ****         Retval=_RME_Inv_Ret(Reg,                                            /* volatile struct RME_
 1248              		.loc 1 1165 16
 1249 003c 34301BE5 		ldr	r3, [fp, #-52]
 1250 0040 0020A0E3 		mov	r2, #0
 1251 0044 0310A0E1 		mov	r1, r3
 1252 0048 38001BE5 		ldr	r0, [fp, #-56]
 1253 004c FEFFFFEB 		bl	_RME_Inv_Ret
 1254 0050 10000BE5 		str	r0, [fp, #-16]
1166:../../Source/Kernel/rme_kernel.c ****                             Param[0],                                       /* rme_ptr_t Retval */
1167:../../Source/Kernel/rme_kernel.c ****                             0U);                                            /* rme_ptr_t Is_Exc */
1168:../../Source/Kernel/rme_kernel.c ****         RME_SWITCH_RETURN(Reg, Retval);
 1255              		.loc 1 1168 9
 1256 0054 10301BE5 		ldr	r3, [fp, #-16]
 1257 0058 000053E3 		cmp	r3, #0
 1258 005c 110200AA 		bge	.L69
 1259              		.loc 1 1168 9 is_stmt 0 discriminator 1
 1260 0060 10101BE5 		ldr	r1, [fp, #-16]
 1261 0064 38001BE5 		ldr	r0, [fp, #-56]
 1262 0068 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1263              		.loc 1 1168 9
 1264 006c 0D0200EA 		b	.L69
 1265              	.L70:
1169:../../Source/Kernel/rme_kernel.c ****     }
1170:../../Source/Kernel/rme_kernel.c ****     else
1171:../../Source/Kernel/rme_kernel.c ****     {
1172:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1173:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1174:../../Source/Kernel/rme_kernel.c ****     }
1175:../../Source/Kernel/rme_kernel.c ****     
1176:../../Source/Kernel/rme_kernel.c ****     /* Get our current capability table. No need to check whether it is frozen
1177:../../Source/Kernel/rme_kernel.c ****      * because it can't be deleted anyway */
1178:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=RME_CPU_LOCAL()->Thd_Cur;
 1266              		.loc 1 1178 12 is_stmt 1
 1267 0070 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 1268 0074 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 1269 0078 043093E5 		ldr	r3, [r3, #4]
 1270 007c 1C300BE5 		str	r3, [fp, #-28]
1179:../../Source/Kernel/rme_kernel.c ****     Inv_Top=RME_INVSTK_TOP(Thd_Cur);
 1271              		.loc 1 1179 13
 1272 0080 1C301BE5 		ldr	r3, [fp, #-28]
 1273 0084 4C2093E5 		ldr	r2, [r3, #76]
 1274 0088 1C301BE5 		ldr	r3, [fp, #-28]
 1275 008c 4C3083E2 		add	r3, r3, #76
 1276 0090 030052E1 		cmp	r2, r3
 1277 0094 0200000A 		beq	.L73
 1278              		.loc 1 1179 13 is_stmt 0 discriminator 1
 1279 0098 1C301BE5 		ldr	r3, [fp, #-28]
 1280 009c 4C3093E5 		ldr	r3, [r3, #76]
 1281 00a0 000000EA 		b	.L74
 1282              	.L73:
 1283              		.loc 1 1179 13 discriminator 2
 1284 00a4 0030A0E3 		mov	r3, #0
 1285              	.L74:
 1286              		.loc 1 1179 12 is_stmt 1 discriminator 4
 1287 00a8 20300BE5 		str	r3, [fp, #-32]
1180:../../Source/Kernel/rme_kernel.c ****     if(Inv_Top==RME_NULL)
 1288              		.loc 1 1180 7
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 44


 1289 00ac 20301BE5 		ldr	r3, [fp, #-32]
 1290 00b0 000053E3 		cmp	r3, #0
 1291 00b4 0400001A 		bne	.L75
1181:../../Source/Kernel/rme_kernel.c ****     {
1182:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1183:../../Source/Kernel/rme_kernel.c ****         
1184:../../Source/Kernel/rme_kernel.c ****         Cpt=Thd_Cur->Sched.Prc->Cpt;
 1292              		.loc 1 1184 27
 1293 00b8 1C301BE5 		ldr	r3, [fp, #-28]
 1294 00bc 2C3093E5 		ldr	r3, [r3, #44]
 1295              		.loc 1 1184 12
 1296 00c0 143093E5 		ldr	r3, [r3, #20]
 1297 00c4 14300BE5 		str	r3, [fp, #-20]
 1298 00c8 030000EA 		b	.L76
 1299              	.L75:
1185:../../Source/Kernel/rme_kernel.c ****     }
1186:../../Source/Kernel/rme_kernel.c ****     else
1187:../../Source/Kernel/rme_kernel.c ****     {
1188:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1189:../../Source/Kernel/rme_kernel.c ****         
1190:../../Source/Kernel/rme_kernel.c ****         Cpt=Inv_Top->Prc->Cpt;
 1300              		.loc 1 1190 20
 1301 00cc 20301BE5 		ldr	r3, [fp, #-32]
 1302 00d0 083093E5 		ldr	r3, [r3, #8]
 1303              		.loc 1 1190 12
 1304 00d4 143093E5 		ldr	r3, [r3, #20]
 1305 00d8 14300BE5 		str	r3, [fp, #-20]
 1306              	.L76:
1191:../../Source/Kernel/rme_kernel.c ****     }
1192:../../Source/Kernel/rme_kernel.c **** 
1193:../../Source/Kernel/rme_kernel.c ****     /* Fast path - synchronous invocation activation */
1194:../../Source/Kernel/rme_kernel.c ****     if(Svc_Num==RME_SVC_INV_ACT)
 1307              		.loc 1 1194 7
 1308 00dc 18301BE5 		ldr	r3, [fp, #-24]
 1309 00e0 010053E3 		cmp	r3, #1
 1310 00e4 0D00001A 		bne	.L77
1195:../../Source/Kernel/rme_kernel.c ****     {
1196:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1197:../../Source/Kernel/rme_kernel.c ****         
1198:../../Source/Kernel/rme_kernel.c ****         Retval=_RME_Inv_Act(Cpt,
1199:../../Source/Kernel/rme_kernel.c ****                             Reg,                                            /* volatile struct RME_
1200:../../Source/Kernel/rme_kernel.c ****                             (rme_cid_t)Param[0],                            /* rme_cid_t Cap_Inv */
 1311              		.loc 1 1200 45
 1312 00e8 34301BE5 		ldr	r3, [fp, #-52]
1198:../../Source/Kernel/rme_kernel.c ****                             Reg,                                            /* volatile struct RME_
 1313              		.loc 1 1198 16
 1314 00ec 0320A0E1 		mov	r2, r3
 1315 00f0 30301BE5 		ldr	r3, [fp, #-48]
 1316 00f4 38101BE5 		ldr	r1, [fp, #-56]
 1317 00f8 14001BE5 		ldr	r0, [fp, #-20]
 1318 00fc FEFFFFEB 		bl	_RME_Inv_Act
 1319 0100 10000BE5 		str	r0, [fp, #-16]
1201:../../Source/Kernel/rme_kernel.c ****                             Param[1]);                                      /* rme_ptr_t Param */
1202:../../Source/Kernel/rme_kernel.c ****         RME_SWITCH_RETURN(Reg,Retval);
 1320              		.loc 1 1202 9
 1321 0104 10301BE5 		ldr	r3, [fp, #-16]
 1322 0108 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 45


 1323 010c E50100AA 		bge	.L69
 1324              		.loc 1 1202 9 is_stmt 0 discriminator 1
 1325 0110 10101BE5 		ldr	r1, [fp, #-16]
 1326 0114 38001BE5 		ldr	r0, [fp, #-56]
 1327 0118 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1328              		.loc 1 1202 9
 1329 011c E10100EA 		b	.L69
 1330              	.L77:
1203:../../Source/Kernel/rme_kernel.c ****     }
1204:../../Source/Kernel/rme_kernel.c ****     else
1205:../../Source/Kernel/rme_kernel.c ****     {
1206:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1207:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1208:../../Source/Kernel/rme_kernel.c ****     }
1209:../../Source/Kernel/rme_kernel.c **** 
1210:../../Source/Kernel/rme_kernel.c ****     /* See if this operation can potentially cause a context switch. All the 
1211:../../Source/Kernel/rme_kernel.c ****      * functions that may cause a context switch is listed here. The behavior
1212:../../Source/Kernel/rme_kernel.c ****      * of these functions shall be: If the function is successful, they shall
1213:../../Source/Kernel/rme_kernel.c ****      * perform the return value saving on proper register stacks by themselves;
1214:../../Source/Kernel/rme_kernel.c ****      * if the function fails, it should not conduct such return value saving.
1215:../../Source/Kernel/rme_kernel.c ****      * These paths are less optimized than synchronous invocation, but are still
1216:../../Source/Kernel/rme_kernel.c ****      * optimized anyway. */
1217:../../Source/Kernel/rme_kernel.c ****     switch(Svc_Num)
 1331              		.loc 1 1217 5 is_stmt 1
 1332 0120 18301BE5 		ldr	r3, [fp, #-24]
 1333 0124 022043E2 		sub	r2, r3, #2
 1334 0128 80379FE5 		ldr	r3, .L127
 1335 012c 070052E3 		cmp	r2, #7
 1336 0130 9400008A 		bhi	.L126
 1337 0134 02F193E7 		ldr	pc, [r3, r2, lsl #2]
 1338              	.Lrtx81:
 1339 0138 00F020E3 		nop
 1340              		.section	.rodata._RME_Svc_Handler,"a",%progbits
 1341              		.align	2
 1342              	.L81:
 1343 0000 3C010000 		.word	.L88
 1344 0004 70010000 		.word	.L87
 1345 0008 A8010000 		.word	.L86
 1346 000c 08020000 		.word	.L85
 1347 0010 3C020000 		.word	.L84
 1348 0014 8C020000 		.word	.L83
 1349 0018 08030000 		.word	.L82
 1350 001c 50030000 		.word	.L80
 1351              		.section	.text._RME_Svc_Handler
 1352              		.p2align 2
 1353              	.L88:
1218:../../Source/Kernel/rme_kernel.c ****     {
1219:../../Source/Kernel/rme_kernel.c ****         /* Send to a signal endpoint */
1220:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_SIG_SND:
1221:../../Source/Kernel/rme_kernel.c ****         {
1222:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1223:../../Source/Kernel/rme_kernel.c ****             
1224:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Sig_Snd(Cpt,
1225:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
1226:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Sig */
 1354              		.loc 1 1226 49
 1355 013c 34301BE5 		ldr	r3, [fp, #-52]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 46


1224:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
 1356              		.loc 1 1224 20
 1357 0140 0320A0E1 		mov	r2, r3
 1358 0144 38101BE5 		ldr	r1, [fp, #-56]
 1359 0148 14001BE5 		ldr	r0, [fp, #-20]
 1360 014c FEFFFFEB 		bl	_RME_Sig_Snd
 1361 0150 10000BE5 		str	r0, [fp, #-16]
1227:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1362              		.loc 1 1227 13
 1363 0154 10301BE5 		ldr	r3, [fp, #-16]
 1364 0158 000053E3 		cmp	r3, #0
 1365 015c D10100AA 		bge	.L69
 1366              		.loc 1 1227 13 is_stmt 0 discriminator 1
 1367 0160 10101BE5 		ldr	r1, [fp, #-16]
 1368 0164 38001BE5 		ldr	r0, [fp, #-56]
 1369 0168 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1370              		.loc 1 1227 13
 1371 016c CD0100EA 		b	.L69
 1372              	.L87:
1228:../../Source/Kernel/rme_kernel.c ****         }
1229:../../Source/Kernel/rme_kernel.c ****         /* Receive from a signal endpoint */
1230:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_SIG_RCV:
1231:../../Source/Kernel/rme_kernel.c ****         {
1232:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1233:../../Source/Kernel/rme_kernel.c ****             
1234:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Sig_Rcv(Cpt,
1235:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
1236:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Sig */
 1373              		.loc 1 1236 49 is_stmt 1
 1374 0170 34301BE5 		ldr	r3, [fp, #-52]
1234:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
 1375              		.loc 1 1234 20
 1376 0174 0320A0E1 		mov	r2, r3
 1377 0178 30301BE5 		ldr	r3, [fp, #-48]
 1378 017c 38101BE5 		ldr	r1, [fp, #-56]
 1379 0180 14001BE5 		ldr	r0, [fp, #-20]
 1380 0184 FEFFFFEB 		bl	_RME_Sig_Rcv
 1381 0188 10000BE5 		str	r0, [fp, #-16]
1237:../../Source/Kernel/rme_kernel.c ****                                 Param[1]);                                  /* rme_ptr_t Option */
1238:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1382              		.loc 1 1238 13
 1383 018c 10301BE5 		ldr	r3, [fp, #-16]
 1384 0190 000053E3 		cmp	r3, #0
 1385 0194 C30100AA 		bge	.L69
 1386              		.loc 1 1238 13 is_stmt 0 discriminator 1
 1387 0198 10101BE5 		ldr	r1, [fp, #-16]
 1388 019c 38001BE5 		ldr	r0, [fp, #-56]
 1389 01a0 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1390              		.loc 1 1238 13
 1391 01a4 BF0100EA 		b	.L69
 1392              	.L86:
1239:../../Source/Kernel/rme_kernel.c ****         }
1240:../../Source/Kernel/rme_kernel.c ****         /* Call kernel functions */
1241:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_KFN:
1242:../../Source/Kernel/rme_kernel.c ****         {
1243:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1244:../../Source/Kernel/rme_kernel.c ****             
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 47


1245:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Kfn_Act(Cpt,
 1393              		.loc 1 1245 20 is_stmt 1
 1394 01a8 28301BE5 		ldr	r3, [fp, #-40]
 1395 01ac 03C0A0E1 		mov	ip, r3
1246:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
1247:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Kfn */
1248:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D0(Param[0]),                     /* rme_ptr_t Func_ID */
 1396              		.loc 1 1248 33
 1397 01b0 34301BE5 		ldr	r3, [fp, #-52]
1245:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
 1398              		.loc 1 1245 20
 1399 01b4 7300FFE6 		uxth	r0, r3
1249:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D1(Param[0]),                     /* rme_ptr_t Sub_ID */
 1400              		.loc 1 1249 33
 1401 01b8 34301BE5 		ldr	r3, [fp, #-52]
1245:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
 1402              		.loc 1 1245 20
 1403 01bc 2338A0E1 		lsr	r3, r3, #16
 1404 01c0 30201BE5 		ldr	r2, [fp, #-48]
 1405 01c4 2C101BE5 		ldr	r1, [fp, #-44]
 1406 01c8 08108DE5 		str	r1, [sp, #8]
 1407 01cc 04208DE5 		str	r2, [sp, #4]
 1408 01d0 00308DE5 		str	r3, [sp]
 1409 01d4 0030A0E1 		mov	r3, r0
 1410 01d8 0C20A0E1 		mov	r2, ip
 1411 01dc 38101BE5 		ldr	r1, [fp, #-56]
 1412 01e0 14001BE5 		ldr	r0, [fp, #-20]
 1413 01e4 FEFFFFEB 		bl	_RME_Kfn_Act
 1414 01e8 10000BE5 		str	r0, [fp, #-16]
1250:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Param1 */
1251:../../Source/Kernel/rme_kernel.c ****                                 Param[2]);                                  /* rme_ptr_t Param2 */
1252:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg, Retval);
 1415              		.loc 1 1252 13
 1416 01ec 10301BE5 		ldr	r3, [fp, #-16]
 1417 01f0 000053E3 		cmp	r3, #0
 1418 01f4 AB0100AA 		bge	.L69
 1419              		.loc 1 1252 13 is_stmt 0 discriminator 1
 1420 01f8 10101BE5 		ldr	r1, [fp, #-16]
 1421 01fc 38001BE5 		ldr	r0, [fp, #-56]
 1422 0200 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1423              		.loc 1 1252 13
 1424 0204 A70100EA 		b	.L69
 1425              	.L85:
1253:../../Source/Kernel/rme_kernel.c ****         }
1254:../../Source/Kernel/rme_kernel.c ****         /* Free a thread from some core */
1255:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_SCHED_FREE:
1256:../../Source/Kernel/rme_kernel.c ****         {
1257:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1258:../../Source/Kernel/rme_kernel.c ****             
1259:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Sched_Free(Cpt,
1260:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
1261:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Param[0]);                /* rme_cid_t Cap_Thd */
 1426              		.loc 1 1261 56 is_stmt 1
 1427 0208 34301BE5 		ldr	r3, [fp, #-52]
1259:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1428              		.loc 1 1259 20
 1429 020c 0320A0E1 		mov	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 48


 1430 0210 38101BE5 		ldr	r1, [fp, #-56]
 1431 0214 14001BE5 		ldr	r0, [fp, #-20]
 1432 0218 FEFFFFEB 		bl	_RME_Thd_Sched_Free
 1433 021c 10000BE5 		str	r0, [fp, #-16]
1262:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1434              		.loc 1 1262 13
 1435 0220 10301BE5 		ldr	r3, [fp, #-16]
 1436 0224 000053E3 		cmp	r3, #0
 1437 0228 9E0100AA 		bge	.L69
 1438              		.loc 1 1262 13 is_stmt 0 discriminator 1
 1439 022c 10101BE5 		ldr	r1, [fp, #-16]
 1440 0230 38001BE5 		ldr	r0, [fp, #-56]
 1441 0234 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1442              		.loc 1 1262 13
 1443 0238 9A0100EA 		b	.L69
 1444              	.L84:
1263:../../Source/Kernel/rme_kernel.c ****         }
1264:../../Source/Kernel/rme_kernel.c ****         /* Changing thread execution context */
1265:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_EXEC_SET:
1266:../../Source/Kernel/rme_kernel.c ****         {
1267:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1268:../../Source/Kernel/rme_kernel.c ****             
1269:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Exec_Set(Cpt,
 1445              		.loc 1 1269 20 is_stmt 1
 1446 023c 28301BE5 		ldr	r3, [fp, #-40]
 1447 0240 0300A0E1 		mov	r0, r3
 1448 0244 34101BE5 		ldr	r1, [fp, #-52]
 1449 0248 30301BE5 		ldr	r3, [fp, #-48]
 1450 024c 2C201BE5 		ldr	r2, [fp, #-44]
 1451 0250 04208DE5 		str	r2, [sp, #4]
 1452 0254 00308DE5 		str	r3, [sp]
 1453 0258 0130A0E1 		mov	r3, r1
 1454 025c 0020A0E1 		mov	r2, r0
 1455 0260 38101BE5 		ldr	r1, [fp, #-56]
 1456 0264 14001BE5 		ldr	r0, [fp, #-20]
 1457 0268 FEFFFFEB 		bl	_RME_Thd_Exec_Set
 1458 026c 10000BE5 		str	r0, [fp, #-16]
1270:../../Source/Kernel/rme_kernel.c ****                                      Reg,                                   /* volatile struct RME_
1271:../../Source/Kernel/rme_kernel.c ****                                      (rme_cid_t)Cid,                        /* rme_cid_t Cap_Thd */
1272:../../Source/Kernel/rme_kernel.c ****                                      Param[0],                              /* rme_ptr_t Entry */
1273:../../Source/Kernel/rme_kernel.c ****                                      Param[1],                              /* rme_ptr_t Stack */
1274:../../Source/Kernel/rme_kernel.c ****                                      Param[2]);                             /* rme_ptr_t Param */
1275:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1459              		.loc 1 1275 13
 1460 0270 10301BE5 		ldr	r3, [fp, #-16]
 1461 0274 000053E3 		cmp	r3, #0
 1462 0278 8A0100AA 		bge	.L69
 1463              		.loc 1 1275 13 is_stmt 0 discriminator 1
 1464 027c 10101BE5 		ldr	r1, [fp, #-16]
 1465 0280 38001BE5 		ldr	r0, [fp, #-56]
 1466 0284 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1467              		.loc 1 1275 13
 1468 0288 860100EA 		b	.L69
 1469              	.L83:
1276:../../Source/Kernel/rme_kernel.c ****         }
1277:../../Source/Kernel/rme_kernel.c ****         /* Changing thread priority (up to three threads at once) */
1278:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_SCHED_PRIO:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 49


1279:../../Source/Kernel/rme_kernel.c ****         {
1280:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1281:../../Source/Kernel/rme_kernel.c ****             
1282:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Sched_Prio(Cpt,
 1470              		.loc 1 1282 20 is_stmt 1
 1471 028c 28E01BE5 		ldr	lr, [fp, #-40]
1283:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
1284:../../Source/Kernel/rme_kernel.c ****                                        Cid,                                 /* rme_ptr_t Number */
1285:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)RME_PARAM_D0(Param[0]),   /* rme_cid_t Cap_Thd0 *
 1472              		.loc 1 1285 51
 1473 0290 34301BE5 		ldr	r3, [fp, #-52]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1474              		.loc 1 1282 20
 1475 0294 7340FFE6 		uxth	r4, r3
1286:../../Source/Kernel/rme_kernel.c ****                                        RME_PARAM_D1(Param[0]),              /* rme_ptr_t Prio0 */
 1476              		.loc 1 1286 40
 1477 0298 34301BE5 		ldr	r3, [fp, #-52]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1478              		.loc 1 1282 20
 1479 029c 2338A0E1 		lsr	r3, r3, #16
1287:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)RME_PARAM_D0(Param[1]),   /* rme_cid_t Cap_Thd1 *
 1480              		.loc 1 1287 51
 1481 02a0 30201BE5 		ldr	r2, [fp, #-48]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1482              		.loc 1 1282 20
 1483 02a4 7220FFE6 		uxth	r2, r2
1288:../../Source/Kernel/rme_kernel.c ****                                        RME_PARAM_D1(Param[1]),              /* rme_ptr_t Prio1 */
 1484              		.loc 1 1288 40
 1485 02a8 30101BE5 		ldr	r1, [fp, #-48]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1486              		.loc 1 1282 20
 1487 02ac 2118A0E1 		lsr	r1, r1, #16
1289:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)RME_PARAM_D0(Param[2]),   /* rme_cid_t Cap_Thd2 *
 1488              		.loc 1 1289 51
 1489 02b0 2C001BE5 		ldr	r0, [fp, #-44]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1490              		.loc 1 1282 20
 1491 02b4 7000FFE6 		uxth	r0, r0
1290:../../Source/Kernel/rme_kernel.c ****                                        RME_PARAM_D1(Param[2]));             /* rme_ptr_t Prio2 */
 1492              		.loc 1 1290 40
 1493 02b8 2CC01BE5 		ldr	ip, [fp, #-44]
1282:../../Source/Kernel/rme_kernel.c ****                                        Reg,                                 /* volatile struct RME_
 1494              		.loc 1 1282 20
 1495 02bc 2CC8A0E1 		lsr	ip, ip, #16
 1496 02c0 10C08DE5 		str	ip, [sp, #16]
 1497 02c4 0C008DE5 		str	r0, [sp, #12]
 1498 02c8 08108DE5 		str	r1, [sp, #8]
 1499 02cc 04208DE5 		str	r2, [sp, #4]
 1500 02d0 00308DE5 		str	r3, [sp]
 1501 02d4 0430A0E1 		mov	r3, r4
 1502 02d8 0E20A0E1 		mov	r2, lr
 1503 02dc 38101BE5 		ldr	r1, [fp, #-56]
 1504 02e0 14001BE5 		ldr	r0, [fp, #-20]
 1505 02e4 FEFFFFEB 		bl	_RME_Thd_Sched_Prio
 1506 02e8 10000BE5 		str	r0, [fp, #-16]
1291:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1507              		.loc 1 1291 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 50


 1508 02ec 10301BE5 		ldr	r3, [fp, #-16]
 1509 02f0 000053E3 		cmp	r3, #0
 1510 02f4 6B0100AA 		bge	.L69
 1511              		.loc 1 1291 13 is_stmt 0 discriminator 1
 1512 02f8 10101BE5 		ldr	r1, [fp, #-16]
 1513 02fc 38001BE5 		ldr	r0, [fp, #-56]
 1514 0300 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1515              		.loc 1 1291 13
 1516 0304 670100EA 		b	.L69
 1517              	.L82:
1292:../../Source/Kernel/rme_kernel.c ****         }
1293:../../Source/Kernel/rme_kernel.c ****         /* Transfer time to a thread */
1294:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_TIME_XFER:
1295:../../Source/Kernel/rme_kernel.c ****         {
1296:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1297:../../Source/Kernel/rme_kernel.c ****             
1298:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Time_Xfer(Cpt,
1299:../../Source/Kernel/rme_kernel.c ****                                       Reg,                                  /* volatile struct RME_
1300:../../Source/Kernel/rme_kernel.c ****                                       (rme_cid_t)Param[0],                  /* rme_cid_t Cap_Thd_Ds
 1518              		.loc 1 1300 55 is_stmt 1
 1519 0308 34301BE5 		ldr	r3, [fp, #-52]
1298:../../Source/Kernel/rme_kernel.c ****                                       Reg,                                  /* volatile struct RME_
 1520              		.loc 1 1298 20
 1521 030c 0320A0E1 		mov	r2, r3
1301:../../Source/Kernel/rme_kernel.c ****                                       (rme_cid_t)Param[1],                  /* rme_cid_t Cap_Thd_Sr
 1522              		.loc 1 1301 55
 1523 0310 30301BE5 		ldr	r3, [fp, #-48]
1298:../../Source/Kernel/rme_kernel.c ****                                       Reg,                                  /* volatile struct RME_
 1524              		.loc 1 1298 20
 1525 0314 0310A0E1 		mov	r1, r3
 1526 0318 2C301BE5 		ldr	r3, [fp, #-44]
 1527 031c 00308DE5 		str	r3, [sp]
 1528 0320 0130A0E1 		mov	r3, r1
 1529 0324 38101BE5 		ldr	r1, [fp, #-56]
 1530 0328 14001BE5 		ldr	r0, [fp, #-20]
 1531 032c FEFFFFEB 		bl	_RME_Thd_Time_Xfer
 1532 0330 10000BE5 		str	r0, [fp, #-16]
1302:../../Source/Kernel/rme_kernel.c ****                                       Param[2]);                            /* rme_ptr_t Time */
1303:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1533              		.loc 1 1303 13
 1534 0334 10301BE5 		ldr	r3, [fp, #-16]
 1535 0338 000053E3 		cmp	r3, #0
 1536 033c 590100AA 		bge	.L69
 1537              		.loc 1 1303 13 is_stmt 0 discriminator 1
 1538 0340 10101BE5 		ldr	r1, [fp, #-16]
 1539 0344 38001BE5 		ldr	r0, [fp, #-56]
 1540 0348 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1541              		.loc 1 1303 13
 1542 034c 550100EA 		b	.L69
 1543              	.L80:
1304:../../Source/Kernel/rme_kernel.c ****         }
1305:../../Source/Kernel/rme_kernel.c ****         /* Switch to another thread */
1306:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_SWT:
1307:../../Source/Kernel/rme_kernel.c ****         {
1308:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1309:../../Source/Kernel/rme_kernel.c ****             
1310:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Swt(Cpt,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 51


1311:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
1312:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Thd */
 1544              		.loc 1 1312 49 is_stmt 1
 1545 0350 34301BE5 		ldr	r3, [fp, #-52]
1310:../../Source/Kernel/rme_kernel.c ****                                 Reg,                                        /* volatile struct RME_
 1546              		.loc 1 1310 20
 1547 0354 0320A0E1 		mov	r2, r3
 1548 0358 30301BE5 		ldr	r3, [fp, #-48]
 1549 035c 38101BE5 		ldr	r1, [fp, #-56]
 1550 0360 14001BE5 		ldr	r0, [fp, #-20]
 1551 0364 FEFFFFEB 		bl	_RME_Thd_Swt
 1552 0368 10000BE5 		str	r0, [fp, #-16]
1313:../../Source/Kernel/rme_kernel.c ****                                 Param[1]);                                  /* rme_ptr_t Full_Yield
1314:../../Source/Kernel/rme_kernel.c ****             RME_SWITCH_RETURN(Reg,Retval);
 1553              		.loc 1 1314 13
 1554 036c 10301BE5 		ldr	r3, [fp, #-16]
 1555 0370 000053E3 		cmp	r3, #0
 1556 0374 4B0100AA 		bge	.L69
 1557              		.loc 1 1314 13 is_stmt 0 discriminator 1
 1558 0378 10101BE5 		ldr	r1, [fp, #-16]
 1559 037c 38001BE5 		ldr	r0, [fp, #-56]
 1560 0380 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 1561              		.loc 1 1314 13
 1562 0384 470100EA 		b	.L69
 1563              	.L126:
1315:../../Source/Kernel/rme_kernel.c ****         }
1316:../../Source/Kernel/rme_kernel.c ****         default:
1317:../../Source/Kernel/rme_kernel.c ****         {
1318:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1319:../../Source/Kernel/rme_kernel.c ****             break;
 1564              		.loc 1 1319 13 is_stmt 1
 1565 0388 00F020E3 		nop
1320:../../Source/Kernel/rme_kernel.c ****         }
1321:../../Source/Kernel/rme_kernel.c ****     } 
1322:../../Source/Kernel/rme_kernel.c **** 
1323:../../Source/Kernel/rme_kernel.c ****     /* It is guaranteed that these functions will never cause a context switch */
1324:../../Source/Kernel/rme_kernel.c ****     switch(Svc_Num)
 1566              		.loc 1 1324 5
 1567 038c 18301BE5 		ldr	r3, [fp, #-24]
 1568 0390 0A2043E2 		sub	r2, r3, #10
 1569 0394 18359FE5 		ldr	r3, .L127+4
 1570 0398 170052E3 		cmp	r2, #23
 1571 039c 3B01008A 		bhi	.L97
 1572 03a0 02F193E7 		ldr	pc, [r3, r2, lsl #2]
 1573              	.Lrtx99:
 1574 03a4 00F020E3 		nop
 1575              		.section	.rodata._RME_Svc_Handler
 1576              		.align	2
 1577              	.L99:
 1578 0020 A8030000 		.word	.L122
 1579 0024 F0030000 		.word	.L121
 1580 0028 10040000 		.word	.L120
 1581 002c 30040000 		.word	.L119
 1582 0030 94040000 		.word	.L118
 1583 0034 B4040000 		.word	.L117
 1584 0038 28050000 		.word	.L116
 1585 003c 48050000 		.word	.L115
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 52


 1586 0040 A0050000 		.word	.L114
 1587 0044 C0050000 		.word	.L113
 1588 0048 F8050000 		.word	.L112
 1589 004c 18060000 		.word	.L111
 1590 0050 4C060000 		.word	.L110
 1591 0054 6C060000 		.word	.L109
 1592 0058 8C060000 		.word	.L108
 1593 005c AC060000 		.word	.L107
 1594 0060 20070000 		.word	.L106
 1595 0064 40070000 		.word	.L105
 1596 0068 9C070000 		.word	.L104
 1597 006c B4070000 		.word	.L103
 1598 0070 D4070000 		.word	.L102
 1599 0074 F4070000 		.word	.L101
 1600 0078 40080000 		.word	.L100
 1601 007c 60080000 		.word	.L98
 1602              		.section	.text._RME_Svc_Handler
 1603              		.p2align 2
 1604              	.L122:
1325:../../Source/Kernel/rme_kernel.c ****     {
1326:../../Source/Kernel/rme_kernel.c ****         /* Capability table */
1327:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_CPT_CRT:
1328:../../Source/Kernel/rme_kernel.c ****         {
1329:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1330:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Cpt_Crt(Cpt,
 1605              		.loc 1 1330 20
 1606 03a8 28301BE5 		ldr	r3, [fp, #-40]
 1607 03ac 0300A0E1 		mov	r0, r3
1331:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
1332:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Kom */
 1608              		.loc 1 1332 44
 1609 03b0 34301BE5 		ldr	r3, [fp, #-52]
 1610 03b4 2338A0E1 		lsr	r3, r3, #16
1330:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
 1611              		.loc 1 1330 20
 1612 03b8 03C0A0E1 		mov	ip, r3
1333:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Crt */
 1613              		.loc 1 1333 44
 1614 03bc 34301BE5 		ldr	r3, [fp, #-52]
1330:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
 1615              		.loc 1 1330 20
 1616 03c0 7310FFE6 		uxth	r1, r3
 1617 03c4 30301BE5 		ldr	r3, [fp, #-48]
 1618 03c8 2C201BE5 		ldr	r2, [fp, #-44]
 1619 03cc 04208DE5 		str	r2, [sp, #4]
 1620 03d0 00308DE5 		str	r3, [sp]
 1621 03d4 0130A0E1 		mov	r3, r1
 1622 03d8 0C20A0E1 		mov	r2, ip
 1623 03dc 0010A0E1 		mov	r1, r0
 1624 03e0 14001BE5 		ldr	r0, [fp, #-20]
 1625 03e4 FEFFFFEB 		bl	_RME_Cpt_Crt
 1626 03e8 10000BE5 		str	r0, [fp, #-16]
1334:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Raddr */
1335:../../Source/Kernel/rme_kernel.c ****                                 Param[2]);                                  /* rme_ptr_t Entry_Num 
1336:../../Source/Kernel/rme_kernel.c ****             break;
 1627              		.loc 1 1336 13
 1628 03ec 2A0100EA 		b	.L123
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 53


 1629              	.L121:
1337:../../Source/Kernel/rme_kernel.c ****         }
1338:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_CPT_DEL:
1339:../../Source/Kernel/rme_kernel.c ****         {
1340:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1341:../../Source/Kernel/rme_kernel.c ****             
1342:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Cpt_Del(Cpt,
 1630              		.loc 1 1342 20
 1631 03f0 28301BE5 		ldr	r3, [fp, #-40]
 1632 03f4 0310A0E1 		mov	r1, r3
1343:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_De
1344:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Cpt */
 1633              		.loc 1 1344 49
 1634 03f8 34301BE5 		ldr	r3, [fp, #-52]
1342:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_De
 1635              		.loc 1 1342 20
 1636 03fc 0320A0E1 		mov	r2, r3
 1637 0400 14001BE5 		ldr	r0, [fp, #-20]
 1638 0404 FEFFFFEB 		bl	_RME_Cpt_Del
 1639 0408 10000BE5 		str	r0, [fp, #-16]
1345:../../Source/Kernel/rme_kernel.c ****             break;
 1640              		.loc 1 1345 13
 1641 040c 220100EA 		b	.L123
 1642              	.L120:
1346:../../Source/Kernel/rme_kernel.c ****         }
1347:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_CPT_FRZ:
1348:../../Source/Kernel/rme_kernel.c ****         {
1349:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1350:../../Source/Kernel/rme_kernel.c ****             
1351:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Cpt_Frz(Cpt,
 1643              		.loc 1 1351 20
 1644 0410 28301BE5 		ldr	r3, [fp, #-40]
 1645 0414 0310A0E1 		mov	r1, r3
1352:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Fr
1353:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Frz */
 1646              		.loc 1 1353 49
 1647 0418 34301BE5 		ldr	r3, [fp, #-52]
1351:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Fr
 1648              		.loc 1 1351 20
 1649 041c 0320A0E1 		mov	r2, r3
 1650 0420 14001BE5 		ldr	r0, [fp, #-20]
 1651 0424 FEFFFFEB 		bl	_RME_Cpt_Frz
 1652 0428 10000BE5 		str	r0, [fp, #-16]
1354:../../Source/Kernel/rme_kernel.c ****             break;
 1653              		.loc 1 1354 13
 1654 042c 1A0100EA 		b	.L123
 1655              	.L119:
1355:../../Source/Kernel/rme_kernel.c ****         }
1356:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_CPT_ADD:
1357:../../Source/Kernel/rme_kernel.c ****         {
1358:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1359:../../Source/Kernel/rme_kernel.c ****             
1360:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Cpt_Add(Cpt,
1361:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1656              		.loc 1 1361 44
 1657 0430 34301BE5 		ldr	r3, [fp, #-52]
 1658 0434 2338A0E1 		lsr	r3, r3, #16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 54


1360:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1659              		.loc 1 1360 20
 1660 0438 03E0A0E1 		mov	lr, r3
1362:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Dst */
 1661              		.loc 1 1362 44
 1662 043c 34301BE5 		ldr	r3, [fp, #-52]
1360:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1663              		.loc 1 1360 20
 1664 0440 73C0FFE6 		uxth	ip, r3
1363:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[1]),          /* rme_cid_t Cap_Cpt_Sr
 1665              		.loc 1 1363 44
 1666 0444 30301BE5 		ldr	r3, [fp, #-48]
 1667 0448 2338A0E1 		lsr	r3, r3, #16
1360:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1668              		.loc 1 1360 20
 1669 044c 0340A0E1 		mov	r4, r3
1364:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[1]),          /* rme_cid_t Cap_Src */
 1670              		.loc 1 1364 44
 1671 0450 30301BE5 		ldr	r3, [fp, #-48]
1360:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1672              		.loc 1 1360 20
 1673 0454 7330FFE6 		uxth	r3, r3
 1674 0458 2C201BE5 		ldr	r2, [fp, #-44]
1365:../../Source/Kernel/rme_kernel.c ****                                 Param[2],                                   /* rme_ptr_t Flag */
1366:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_KM(Svc,Cid));                     /* rme_ptr_t Ext_Flag *
 1675              		.loc 1 1366 33
 1676 045c 24101BE5 		ldr	r1, [fp, #-36]
 1677 0460 0108A0E1 		lsl	r0, r1, #16
1360:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Cpt_Ds
 1678              		.loc 1 1360 20
 1679 0464 28101BE5 		ldr	r1, [fp, #-40]
 1680 0468 011080E1 		orr	r1, r0, r1
 1681 046c 08108DE5 		str	r1, [sp, #8]
 1682 0470 04208DE5 		str	r2, [sp, #4]
 1683 0474 00308DE5 		str	r3, [sp]
 1684 0478 0430A0E1 		mov	r3, r4
 1685 047c 0C20A0E1 		mov	r2, ip
 1686 0480 0E10A0E1 		mov	r1, lr
 1687 0484 14001BE5 		ldr	r0, [fp, #-20]
 1688 0488 FEFFFFEB 		bl	_RME_Cpt_Add
 1689 048c 10000BE5 		str	r0, [fp, #-16]
1367:../../Source/Kernel/rme_kernel.c ****             break;
 1690              		.loc 1 1367 13
 1691 0490 010100EA 		b	.L123
 1692              	.L118:
1368:../../Source/Kernel/rme_kernel.c ****         }
1369:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_CPT_REM:
1370:../../Source/Kernel/rme_kernel.c ****         {
1371:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1372:../../Source/Kernel/rme_kernel.c ****             
1373:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Cpt_Rem(Cpt,
 1693              		.loc 1 1373 20
 1694 0494 28301BE5 		ldr	r3, [fp, #-40]
 1695 0498 0310A0E1 		mov	r1, r3
1374:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Re
1375:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Rem */
 1696              		.loc 1 1375 49
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 55


 1697 049c 34301BE5 		ldr	r3, [fp, #-52]
1373:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Re
 1698              		.loc 1 1373 20
 1699 04a0 0320A0E1 		mov	r2, r3
 1700 04a4 14001BE5 		ldr	r0, [fp, #-20]
 1701 04a8 FEFFFFEB 		bl	_RME_Cpt_Rem
 1702 04ac 10000BE5 		str	r0, [fp, #-16]
1376:../../Source/Kernel/rme_kernel.c ****             break;
 1703              		.loc 1 1376 13
 1704 04b0 F90000EA 		b	.L123
 1705              	.L117:
1377:../../Source/Kernel/rme_kernel.c ****         }
1378:../../Source/Kernel/rme_kernel.c ****         
1379:../../Source/Kernel/rme_kernel.c ****         /* Page table */
1380:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
1381:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_CRT:
1382:../../Source/Kernel/rme_kernel.c ****         {
1383:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1384:../../Source/Kernel/rme_kernel.c ****             
1385:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Crt(Cpt,
 1706              		.loc 1 1385 20
 1707 04b4 28301BE5 		ldr	r3, [fp, #-40]
 1708 04b8 0340A0E1 		mov	r4, r3
1386:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1387:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Kom */
 1709              		.loc 1 1387 44
 1710 04bc 34301BE5 		ldr	r3, [fp, #-52]
 1711 04c0 2338A0E1 		lsr	r3, r3, #16
1385:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1712              		.loc 1 1385 20
 1713 04c4 0350A0E1 		mov	r5, r3
1388:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_Q1(Param[0]),          /* rme_cid_t Cap_Pgt */
 1714              		.loc 1 1388 44
 1715 04c8 34301BE5 		ldr	r3, [fp, #-52]
 1716 04cc 2334A0E1 		lsr	r3, r3, #8
1385:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1717              		.loc 1 1385 20
 1718 04d0 73E0EFE6 		uxtb	lr, r3
 1719 04d4 30301BE5 		ldr	r3, [fp, #-48]
1389:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Raddr */
1390:../../Source/Kernel/rme_kernel.c ****                                 Param[2]&RME_MASK_BEGIN(1U),                /* rme_ptr_t Base */
 1720              		.loc 1 1390 38
 1721 04d8 2C201BE5 		ldr	r2, [fp, #-44]
1385:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1722              		.loc 1 1385 20
 1723 04dc 0120C2E3 		bic	r2, r2, #1
1391:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_PT(Param[2]),                     /* rme_ptr_t Is_Top */
 1724              		.loc 1 1391 33
 1725 04e0 2C101BE5 		ldr	r1, [fp, #-44]
1385:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1726              		.loc 1 1385 20
 1727 04e4 011001E2 		and	r1, r1, #1
1392:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_Q0(Param[0]),                     /* rme_ptr_t Size_Order
 1728              		.loc 1 1392 33
 1729 04e8 34001BE5 		ldr	r0, [fp, #-52]
1385:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1730              		.loc 1 1385 20
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 56


 1731 04ec 7000EFE6 		uxtb	r0, r0
 1732 04f0 24C01BE5 		ldr	ip, [fp, #-36]
 1733 04f4 2CC4A0E1 		lsr	ip, ip, #8
 1734 04f8 10C08DE5 		str	ip, [sp, #16]
 1735 04fc 0C008DE5 		str	r0, [sp, #12]
 1736 0500 08108DE5 		str	r1, [sp, #8]
 1737 0504 04208DE5 		str	r2, [sp, #4]
 1738 0508 00308DE5 		str	r3, [sp]
 1739 050c 0E30A0E1 		mov	r3, lr
 1740 0510 0520A0E1 		mov	r2, r5
 1741 0514 0410A0E1 		mov	r1, r4
 1742 0518 14001BE5 		ldr	r0, [fp, #-20]
 1743 051c FEFFFFEB 		bl	_RME_Pgt_Crt
 1744 0520 10000BE5 		str	r0, [fp, #-16]
1393:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_PC(Svc));                         /* rme_ptr_t Num_Order 
1394:../../Source/Kernel/rme_kernel.c ****             break;
 1745              		.loc 1 1394 13
 1746 0524 DC0000EA 		b	.L123
 1747              	.L116:
1395:../../Source/Kernel/rme_kernel.c ****         }
1396:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_DEL:
1397:../../Source/Kernel/rme_kernel.c ****         {
1398:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1399:../../Source/Kernel/rme_kernel.c ****             
1400:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Del(Cpt,
 1748              		.loc 1 1400 20
 1749 0528 28301BE5 		ldr	r3, [fp, #-40]
 1750 052c 0310A0E1 		mov	r1, r3
1401:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1402:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Pgt */
 1751              		.loc 1 1402 49
 1752 0530 34301BE5 		ldr	r3, [fp, #-52]
1400:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1753              		.loc 1 1400 20
 1754 0534 0320A0E1 		mov	r2, r3
 1755 0538 14001BE5 		ldr	r0, [fp, #-20]
 1756 053c FEFFFFEB 		bl	_RME_Pgt_Del
 1757 0540 10000BE5 		str	r0, [fp, #-16]
1403:../../Source/Kernel/rme_kernel.c ****             break;
 1758              		.loc 1 1403 13
 1759 0544 D40000EA 		b	.L123
 1760              	.L115:
1404:../../Source/Kernel/rme_kernel.c ****         }
1405:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_ADD:
1406:../../Source/Kernel/rme_kernel.c ****         {
1407:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1408:../../Source/Kernel/rme_kernel.c ****             
1409:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Add(Cpt,
1410:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Ds
 1761              		.loc 1 1410 44
 1762 0548 34301BE5 		ldr	r3, [fp, #-52]
 1763 054c 2338A0E1 		lsr	r3, r3, #16
1409:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Ds
 1764              		.loc 1 1409 20
 1765 0550 03E0A0E1 		mov	lr, r3
1411:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D0(Param[0]),                     /* rme_ptr_t Pos_Dst */
 1766              		.loc 1 1411 33
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 57


 1767 0554 34301BE5 		ldr	r3, [fp, #-52]
1409:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Ds
 1768              		.loc 1 1409 20
 1769 0558 7310FFE6 		uxth	r1, r3
 1770 055c 28001BE5 		ldr	r0, [fp, #-40]
1412:../../Source/Kernel/rme_kernel.c ****                                 Cid,                                        /* rme_ptr_t Flag_Dst *
1413:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[1]),          /* rme_cid_t Cap_Pgt_Sr
 1771              		.loc 1 1413 44
 1772 0560 30301BE5 		ldr	r3, [fp, #-48]
 1773 0564 2338A0E1 		lsr	r3, r3, #16
1409:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Ds
 1774              		.loc 1 1409 20
 1775 0568 03C0A0E1 		mov	ip, r3
1414:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D0(Param[1]),                     /* rme_ptr_t Pos_Src */
 1776              		.loc 1 1414 33
 1777 056c 30301BE5 		ldr	r3, [fp, #-48]
1409:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Ds
 1778              		.loc 1 1409 20
 1779 0570 7330FFE6 		uxth	r3, r3
 1780 0574 2C201BE5 		ldr	r2, [fp, #-44]
 1781 0578 08208DE5 		str	r2, [sp, #8]
 1782 057c 04308DE5 		str	r3, [sp, #4]
 1783 0580 00C08DE5 		str	ip, [sp]
 1784 0584 0030A0E1 		mov	r3, r0
 1785 0588 0120A0E1 		mov	r2, r1
 1786 058c 0E10A0E1 		mov	r1, lr
 1787 0590 14001BE5 		ldr	r0, [fp, #-20]
 1788 0594 FEFFFFEB 		bl	_RME_Pgt_Add
 1789 0598 10000BE5 		str	r0, [fp, #-16]
1415:../../Source/Kernel/rme_kernel.c ****                                 Param[2]);                                  /* rme_ptr_t Index */
1416:../../Source/Kernel/rme_kernel.c ****             break;
 1790              		.loc 1 1416 13
 1791 059c BE0000EA 		b	.L123
 1792              	.L114:
1417:../../Source/Kernel/rme_kernel.c ****         }
1418:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_REM:
1419:../../Source/Kernel/rme_kernel.c ****         {
1420:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1421:../../Source/Kernel/rme_kernel.c ****             
1422:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Rem(Cpt,
1423:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Pgt */
 1793              		.loc 1 1423 49
 1794 05a0 34301BE5 		ldr	r3, [fp, #-52]
1422:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Pgt */
 1795              		.loc 1 1422 20
 1796 05a4 0310A0E1 		mov	r1, r3
 1797 05a8 30301BE5 		ldr	r3, [fp, #-48]
 1798 05ac 0320A0E1 		mov	r2, r3
 1799 05b0 14001BE5 		ldr	r0, [fp, #-20]
 1800 05b4 FEFFFFEB 		bl	_RME_Pgt_Rem
 1801 05b8 10000BE5 		str	r0, [fp, #-16]
1424:../../Source/Kernel/rme_kernel.c ****                                 Param[1]);                                  /* rme_ptr_t Pos */
1425:../../Source/Kernel/rme_kernel.c ****             break;
 1802              		.loc 1 1425 13
 1803 05bc B60000EA 		b	.L123
 1804              	.L113:
1426:../../Source/Kernel/rme_kernel.c ****         }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 58


1427:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_CON:
1428:../../Source/Kernel/rme_kernel.c ****         {
1429:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1430:../../Source/Kernel/rme_kernel.c ****             
1431:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Con(Cpt,
1432:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Pa
 1805              		.loc 1 1432 44
 1806 05c0 34301BE5 		ldr	r3, [fp, #-52]
 1807 05c4 2338A0E1 		lsr	r3, r3, #16
1431:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Pa
 1808              		.loc 1 1431 20
 1809 05c8 0300A0E1 		mov	r0, r3
 1810 05cc 30201BE5 		ldr	r2, [fp, #-48]
1433:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Pos */
1434:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Pgt_Ch
 1811              		.loc 1 1434 44
 1812 05d0 34301BE5 		ldr	r3, [fp, #-52]
1431:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Pgt_Pa
 1813              		.loc 1 1431 20
 1814 05d4 7310FFE6 		uxth	r1, r3
 1815 05d8 2C301BE5 		ldr	r3, [fp, #-44]
 1816 05dc 00308DE5 		str	r3, [sp]
 1817 05e0 0130A0E1 		mov	r3, r1
 1818 05e4 0010A0E1 		mov	r1, r0
 1819 05e8 14001BE5 		ldr	r0, [fp, #-20]
 1820 05ec FEFFFFEB 		bl	_RME_Pgt_Con
 1821 05f0 10000BE5 		str	r0, [fp, #-16]
1435:../../Source/Kernel/rme_kernel.c ****                                 Param[2]);                                  /* rme_ptr_t Flag_Child
1436:../../Source/Kernel/rme_kernel.c ****             break;
 1822              		.loc 1 1436 13
 1823 05f4 A80000EA 		b	.L123
 1824              	.L112:
1437:../../Source/Kernel/rme_kernel.c ****         }
1438:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PGT_DES:
1439:../../Source/Kernel/rme_kernel.c ****         {
1440:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1441:../../Source/Kernel/rme_kernel.c ****             
1442:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Pgt_Des(Cpt,
1443:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Pgt_Pa
 1825              		.loc 1 1443 49
 1826 05f8 34301BE5 		ldr	r3, [fp, #-52]
1442:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Pgt_Pa
 1827              		.loc 1 1442 20
 1828 05fc 0310A0E1 		mov	r1, r3
 1829 0600 30201BE5 		ldr	r2, [fp, #-48]
1444:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Pos */
1445:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[2]);                       /* rme_cid_t Cap_Pgt_Ch
 1830              		.loc 1 1445 49
 1831 0604 2C301BE5 		ldr	r3, [fp, #-44]
1442:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Pgt_Pa
 1832              		.loc 1 1442 20
 1833 0608 14001BE5 		ldr	r0, [fp, #-20]
 1834 060c FEFFFFEB 		bl	_RME_Pgt_Des
 1835 0610 10000BE5 		str	r0, [fp, #-16]
1446:../../Source/Kernel/rme_kernel.c ****             break;
 1836              		.loc 1 1446 13
 1837 0614 A00000EA 		b	.L123
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 59


 1838              	.L111:
1447:../../Source/Kernel/rme_kernel.c ****         }
1448:../../Source/Kernel/rme_kernel.c **** #endif
1449:../../Source/Kernel/rme_kernel.c ****         /* Process */
1450:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PRC_CRT:
1451:../../Source/Kernel/rme_kernel.c ****         {
1452:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
1453:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Crt(Cpt,
 1839              		.loc 1 1453 20
 1840 0618 28301BE5 		ldr	r3, [fp, #-40]
 1841 061c 0310A0E1 		mov	r1, r3
1454:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
1455:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1842              		.loc 1 1455 49
 1843 0620 34301BE5 		ldr	r3, [fp, #-52]
1453:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
 1844              		.loc 1 1453 20
 1845 0624 0320A0E1 		mov	r2, r3
1456:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[1],                        /* rme_cid_t Cap_Cpt */
 1846              		.loc 1 1456 49
 1847 0628 30301BE5 		ldr	r3, [fp, #-48]
1453:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
 1848              		.loc 1 1453 20
 1849 062c 0300A0E1 		mov	r0, r3
1457:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[2]);                       /* rme_cid_t Cap_Pgt */
 1850              		.loc 1 1457 49
 1851 0630 2C301BE5 		ldr	r3, [fp, #-44]
1453:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
 1852              		.loc 1 1453 20
 1853 0634 00308DE5 		str	r3, [sp]
 1854 0638 0030A0E1 		mov	r3, r0
 1855 063c 14001BE5 		ldr	r0, [fp, #-20]
 1856 0640 FEFFFFEB 		bl	_RME_Prc_Crt
 1857 0644 10000BE5 		str	r0, [fp, #-16]
1458:../../Source/Kernel/rme_kernel.c **** #else
1459:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Crt(Cpt,
1460:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt_Cr
1461:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
1462:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[1],                        /* rme_cid_t Cap_Cpt */
1463:../../Source/Kernel/rme_kernel.c ****                                 (rme_ptr_t)Param[2]);                       /* rme_ptr_t Raw_Pgt */
1464:../../Source/Kernel/rme_kernel.c **** #endif
1465:../../Source/Kernel/rme_kernel.c ****             break;
 1858              		.loc 1 1465 13
 1859 0648 930000EA 		b	.L123
 1860              	.L110:
1466:../../Source/Kernel/rme_kernel.c ****         }
1467:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PRC_DEL:
1468:../../Source/Kernel/rme_kernel.c ****         {
1469:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1470:../../Source/Kernel/rme_kernel.c ****             
1471:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Del(Cpt,
 1861              		.loc 1 1471 20
 1862 064c 28301BE5 		ldr	r3, [fp, #-40]
 1863 0650 0310A0E1 		mov	r1, r3
1472:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1473:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Prc */
 1864              		.loc 1 1473 49
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 60


 1865 0654 34301BE5 		ldr	r3, [fp, #-52]
1471:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1866              		.loc 1 1471 20
 1867 0658 0320A0E1 		mov	r2, r3
 1868 065c 14001BE5 		ldr	r0, [fp, #-20]
 1869 0660 FEFFFFEB 		bl	_RME_Prc_Del
 1870 0664 10000BE5 		str	r0, [fp, #-16]
1474:../../Source/Kernel/rme_kernel.c ****             break;
 1871              		.loc 1 1474 13
 1872 0668 8B0000EA 		b	.L123
 1873              	.L109:
1475:../../Source/Kernel/rme_kernel.c ****         }
1476:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PRC_CPT:
1477:../../Source/Kernel/rme_kernel.c ****         {
1478:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1479:../../Source/Kernel/rme_kernel.c ****             
1480:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Cpt(Cpt,
1481:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1874              		.loc 1 1481 49
 1875 066c 34301BE5 		ldr	r3, [fp, #-52]
1480:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1876              		.loc 1 1480 20
 1877 0670 0310A0E1 		mov	r1, r3
1482:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[1]);                       /* rme_cid_t Cap_Cpt */
 1878              		.loc 1 1482 49
 1879 0674 30301BE5 		ldr	r3, [fp, #-48]
1480:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1880              		.loc 1 1480 20
 1881 0678 0320A0E1 		mov	r2, r3
 1882 067c 14001BE5 		ldr	r0, [fp, #-20]
 1883 0680 FEFFFFEB 		bl	_RME_Prc_Cpt
 1884 0684 10000BE5 		str	r0, [fp, #-16]
1483:../../Source/Kernel/rme_kernel.c ****             break;
 1885              		.loc 1 1483 13
 1886 0688 830000EA 		b	.L123
 1887              	.L108:
1484:../../Source/Kernel/rme_kernel.c ****         }
1485:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_PRC_PGT:
1486:../../Source/Kernel/rme_kernel.c ****         {
1487:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1488:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
1489:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Pgt(Cpt,
1490:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1888              		.loc 1 1490 49
 1889 068c 34301BE5 		ldr	r3, [fp, #-52]
1489:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1890              		.loc 1 1489 20
 1891 0690 0310A0E1 		mov	r1, r3
1491:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[1]);                       /* rme_cid_t Cap_Pgt */
 1892              		.loc 1 1491 49
 1893 0694 30301BE5 		ldr	r3, [fp, #-48]
1489:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
 1894              		.loc 1 1489 20
 1895 0698 0320A0E1 		mov	r2, r3
 1896 069c 14001BE5 		ldr	r0, [fp, #-20]
 1897 06a0 FEFFFFEB 		bl	_RME_Prc_Pgt
 1898 06a4 10000BE5 		str	r0, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 61


1492:../../Source/Kernel/rme_kernel.c **** #else
1493:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Prc_Pgt(Cpt,
1494:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0],                        /* rme_cid_t Cap_Prc */
1495:../../Source/Kernel/rme_kernel.c ****                                 Param[1]);                                  /* rme_ptr_t Raw_Pgt */
1496:../../Source/Kernel/rme_kernel.c **** #endif
1497:../../Source/Kernel/rme_kernel.c ****             break;
 1899              		.loc 1 1497 13
 1900 06a8 7B0000EA 		b	.L123
 1901              	.L107:
1498:../../Source/Kernel/rme_kernel.c ****         }
1499:../../Source/Kernel/rme_kernel.c ****         
1500:../../Source/Kernel/rme_kernel.c ****         /* Thread */
1501:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_CRT:
1502:../../Source/Kernel/rme_kernel.c ****         {
1503:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1504:../../Source/Kernel/rme_kernel.c ****             
1505:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Crt(Cpt,
 1902              		.loc 1 1505 20
 1903 06ac 28301BE5 		ldr	r3, [fp, #-40]
 1904 06b0 0340A0E1 		mov	r4, r3
1506:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1507:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Kom */
 1905              		.loc 1 1507 44
 1906 06b4 34301BE5 		ldr	r3, [fp, #-52]
 1907 06b8 2338A0E1 		lsr	r3, r3, #16
1505:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1908              		.loc 1 1505 20
 1909 06bc 0350A0E1 		mov	r5, r3
1508:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Thd */
 1910              		.loc 1 1508 44
 1911 06c0 34301BE5 		ldr	r3, [fp, #-52]
1505:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1912              		.loc 1 1505 20
 1913 06c4 73C0FFE6 		uxth	ip, r3
1509:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[1]),          /* rme_cid_t Cap_Prc */
 1914              		.loc 1 1509 44
 1915 06c8 30301BE5 		ldr	r3, [fp, #-48]
 1916 06cc 2338A0E1 		lsr	r3, r3, #16
1505:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1917              		.loc 1 1505 20
 1918 06d0 03E0A0E1 		mov	lr, r3
1510:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D0(Param[1]),                     /* rme_ptr_t Prio_Max *
 1919              		.loc 1 1510 33
 1920 06d4 30301BE5 		ldr	r3, [fp, #-48]
1505:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1921              		.loc 1 1505 20
 1922 06d8 7330FFE6 		uxth	r3, r3
 1923 06dc 2C201BE5 		ldr	r2, [fp, #-44]
 1924 06e0 24101BE5 		ldr	r1, [fp, #-36]
 1925 06e4 A113A0E1 		lsr	r1, r1, #7
 1926 06e8 24001BE5 		ldr	r0, [fp, #-36]
 1927 06ec 400000E2 		and	r0, r0, #64
 1928 06f0 10008DE5 		str	r0, [sp, #16]
 1929 06f4 0C108DE5 		str	r1, [sp, #12]
 1930 06f8 08208DE5 		str	r2, [sp, #8]
 1931 06fc 04308DE5 		str	r3, [sp, #4]
 1932 0700 00E08DE5 		str	lr, [sp]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 62


 1933 0704 0C30A0E1 		mov	r3, ip
 1934 0708 0520A0E1 		mov	r2, r5
 1935 070c 0410A0E1 		mov	r1, r4
 1936 0710 14001BE5 		ldr	r0, [fp, #-20]
 1937 0714 FEFFFFEB 		bl	_RME_Thd_Crt
 1938 0718 10000BE5 		str	r0, [fp, #-16]
1511:../../Source/Kernel/rme_kernel.c ****                                 Param[2],                                   /* rme_ptr_t Raddr */
1512:../../Source/Kernel/rme_kernel.c ****                                 Svc>>7,                                     /* rme_ptr_t Attr */
1513:../../Source/Kernel/rme_kernel.c ****                                 Svc&0x40U);                                 /* rme_ptr_t Is_Hyp */
1514:../../Source/Kernel/rme_kernel.c ****             break;
 1939              		.loc 1 1514 13
 1940 071c 5E0000EA 		b	.L123
 1941              	.L106:
1515:../../Source/Kernel/rme_kernel.c ****         }
1516:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_DEL:
1517:../../Source/Kernel/rme_kernel.c ****         {
1518:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1519:../../Source/Kernel/rme_kernel.c ****             
1520:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Del(Cpt,
 1942              		.loc 1 1520 20
 1943 0720 28301BE5 		ldr	r3, [fp, #-40]
 1944 0724 0310A0E1 		mov	r1, r3
1521:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1522:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Thd */
 1945              		.loc 1 1522 49
 1946 0728 34301BE5 		ldr	r3, [fp, #-52]
1520:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 1947              		.loc 1 1520 20
 1948 072c 0320A0E1 		mov	r2, r3
 1949 0730 14001BE5 		ldr	r0, [fp, #-20]
 1950 0734 FEFFFFEB 		bl	_RME_Thd_Del
 1951 0738 10000BE5 		str	r0, [fp, #-16]
1523:../../Source/Kernel/rme_kernel.c ****             break;
 1952              		.loc 1 1523 13
 1953 073c 560000EA 		b	.L123
 1954              	.L105:
1524:../../Source/Kernel/rme_kernel.c ****         }
1525:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_SCHED_BIND:
1526:../../Source/Kernel/rme_kernel.c ****         {
1527:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1528:../../Source/Kernel/rme_kernel.c ****             
1529:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Sched_Bind(Cpt,
 1955              		.loc 1 1529 20
 1956 0740 28301BE5 		ldr	r3, [fp, #-40]
 1957 0744 03C0A0E1 		mov	ip, r3
1530:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Cid,                      /* rme_cid_t Cap_Thd */
1531:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)RME_PARAM_D1(Param[0]),   /* rme_cid_t Cap_Thd_Sc
 1958              		.loc 1 1531 51
 1959 0748 34301BE5 		ldr	r3, [fp, #-52]
 1960 074c 2338A0E1 		lsr	r3, r3, #16
1529:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Cid,                      /* rme_cid_t Cap_Thd */
 1961              		.loc 1 1529 20
 1962 0750 03E0A0E1 		mov	lr, r3
1532:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)RME_PARAM_D0(Param[0]),   /* rme_cid_t Cap_Sig */
 1963              		.loc 1 1532 51
 1964 0754 34301BE5 		ldr	r3, [fp, #-52]
1529:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Cid,                      /* rme_cid_t Cap_Thd */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 63


 1965              		.loc 1 1529 20
 1966 0758 7310FFE6 		uxth	r1, r3
1533:../../Source/Kernel/rme_kernel.c ****                                        (rme_tid_t)RME_PARAM_D1(Param[1]),   /* rme_tid_t TID */
 1967              		.loc 1 1533 51
 1968 075c 30301BE5 		ldr	r3, [fp, #-48]
 1969 0760 2338A0E1 		lsr	r3, r3, #16
1529:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Cid,                      /* rme_cid_t Cap_Thd */
 1970              		.loc 1 1529 20
 1971 0764 0300A0E1 		mov	r0, r3
1534:../../Source/Kernel/rme_kernel.c ****                                        RME_PARAM_D0(Param[1]),              /* rme_ptr_t Prio */
 1972              		.loc 1 1534 40
 1973 0768 30301BE5 		ldr	r3, [fp, #-48]
1529:../../Source/Kernel/rme_kernel.c ****                                        (rme_cid_t)Cid,                      /* rme_cid_t Cap_Thd */
 1974              		.loc 1 1529 20
 1975 076c 7330FFE6 		uxth	r3, r3
 1976 0770 2C201BE5 		ldr	r2, [fp, #-44]
 1977 0774 08208DE5 		str	r2, [sp, #8]
 1978 0778 04308DE5 		str	r3, [sp, #4]
 1979 077c 00008DE5 		str	r0, [sp]
 1980 0780 0130A0E1 		mov	r3, r1
 1981 0784 0E20A0E1 		mov	r2, lr
 1982 0788 0C10A0E1 		mov	r1, ip
 1983 078c 14001BE5 		ldr	r0, [fp, #-20]
 1984 0790 FEFFFFEB 		bl	_RME_Thd_Sched_Bind
 1985 0794 10000BE5 		str	r0, [fp, #-16]
1535:../../Source/Kernel/rme_kernel.c ****                                        Param[2]);                           /* rme_ptr_t Haddr */
1536:../../Source/Kernel/rme_kernel.c ****             break;
 1986              		.loc 1 1536 13
 1987 0798 3F0000EA 		b	.L123
 1988              	.L104:
1537:../../Source/Kernel/rme_kernel.c ****         }
1538:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_THD_SCHED_RCV:
1539:../../Source/Kernel/rme_kernel.c ****         {
1540:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1541:../../Source/Kernel/rme_kernel.c ****             
1542:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Thd_Sched_Rcv(Cpt,
1543:../../Source/Kernel/rme_kernel.c ****                                       (rme_cid_t)Param[0]);                 /* rme_cid_t Cap_Thd */
 1989              		.loc 1 1543 55
 1990 079c 34301BE5 		ldr	r3, [fp, #-52]
1542:../../Source/Kernel/rme_kernel.c ****                                       (rme_cid_t)Param[0]);                 /* rme_cid_t Cap_Thd */
 1991              		.loc 1 1542 20
 1992 07a0 0310A0E1 		mov	r1, r3
 1993 07a4 14001BE5 		ldr	r0, [fp, #-20]
 1994 07a8 FEFFFFEB 		bl	_RME_Thd_Sched_Rcv
 1995 07ac 10000BE5 		str	r0, [fp, #-16]
1544:../../Source/Kernel/rme_kernel.c ****             break;
 1996              		.loc 1 1544 13
 1997 07b0 390000EA 		b	.L123
 1998              	.L103:
1545:../../Source/Kernel/rme_kernel.c ****         }
1546:../../Source/Kernel/rme_kernel.c ****         
1547:../../Source/Kernel/rme_kernel.c ****         /* Signal */
1548:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_SIG_CRT:
1549:../../Source/Kernel/rme_kernel.c ****         {
1550:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1551:../../Source/Kernel/rme_kernel.c ****             
1552:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Sig_Crt(Cpt,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 64


 1999              		.loc 1 1552 20
 2000 07b4 28301BE5 		ldr	r3, [fp, #-40]
 2001 07b8 0310A0E1 		mov	r1, r3
1553:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1554:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Sig */
 2002              		.loc 1 1554 49
 2003 07bc 34301BE5 		ldr	r3, [fp, #-52]
1552:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 2004              		.loc 1 1552 20
 2005 07c0 0320A0E1 		mov	r2, r3
 2006 07c4 14001BE5 		ldr	r0, [fp, #-20]
 2007 07c8 FEFFFFEB 		bl	_RME_Sig_Crt
 2008 07cc 10000BE5 		str	r0, [fp, #-16]
1555:../../Source/Kernel/rme_kernel.c ****             break;
 2009              		.loc 1 1555 13
 2010 07d0 310000EA 		b	.L123
 2011              	.L102:
1556:../../Source/Kernel/rme_kernel.c ****         }
1557:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_SIG_DEL:
1558:../../Source/Kernel/rme_kernel.c ****         {
1559:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1560:../../Source/Kernel/rme_kernel.c ****             
1561:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Sig_Del(Cpt,
 2012              		.loc 1 1561 20
 2013 07d4 28301BE5 		ldr	r3, [fp, #-40]
 2014 07d8 0310A0E1 		mov	r1, r3
1562:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1563:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Sig */
 2015              		.loc 1 1563 49
 2016 07dc 34301BE5 		ldr	r3, [fp, #-52]
1561:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 2017              		.loc 1 1561 20
 2018 07e0 0320A0E1 		mov	r2, r3
 2019 07e4 14001BE5 		ldr	r0, [fp, #-20]
 2020 07e8 FEFFFFEB 		bl	_RME_Sig_Del
 2021 07ec 10000BE5 		str	r0, [fp, #-16]
1564:../../Source/Kernel/rme_kernel.c ****             break;
 2022              		.loc 1 1564 13
 2023 07f0 290000EA 		b	.L123
 2024              	.L101:
1565:../../Source/Kernel/rme_kernel.c ****         }
1566:../../Source/Kernel/rme_kernel.c ****         
1567:../../Source/Kernel/rme_kernel.c ****         /* Invocation */
1568:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_INV_CRT:
1569:../../Source/Kernel/rme_kernel.c ****         {
1570:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1571:../../Source/Kernel/rme_kernel.c ****             
1572:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Inv_Crt(Cpt,
 2025              		.loc 1 1572 20
 2026 07f4 28301BE5 		ldr	r3, [fp, #-40]
 2027 07f8 0300A0E1 		mov	r0, r3
1573:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1574:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D1(Param[0]),          /* rme_cid_t Cap_Kom */
 2028              		.loc 1 1574 44
 2029 07fc 34301BE5 		ldr	r3, [fp, #-52]
 2030 0800 2338A0E1 		lsr	r3, r3, #16
1572:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 65


 2031              		.loc 1 1572 20
 2032 0804 03C0A0E1 		mov	ip, r3
1575:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Inv */
 2033              		.loc 1 1575 44
 2034 0808 34301BE5 		ldr	r3, [fp, #-52]
1572:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 2035              		.loc 1 1572 20
 2036 080c 7320FFE6 		uxth	r2, r3
1576:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[1],                        /* rme_cid_t Cap_Prc */
 2037              		.loc 1 1576 49
 2038 0810 30301BE5 		ldr	r3, [fp, #-48]
1572:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 2039              		.loc 1 1572 20
 2040 0814 0310A0E1 		mov	r1, r3
 2041 0818 2C301BE5 		ldr	r3, [fp, #-44]
 2042 081c 04308DE5 		str	r3, [sp, #4]
 2043 0820 00108DE5 		str	r1, [sp]
 2044 0824 0230A0E1 		mov	r3, r2
 2045 0828 0C20A0E1 		mov	r2, ip
 2046 082c 0010A0E1 		mov	r1, r0
 2047 0830 14001BE5 		ldr	r0, [fp, #-20]
 2048 0834 FEFFFFEB 		bl	_RME_Inv_Crt
 2049 0838 10000BE5 		str	r0, [fp, #-16]
1577:../../Source/Kernel/rme_kernel.c ****                                 Param[2]);                                  /* rme_ptr_t Raddr */
1578:../../Source/Kernel/rme_kernel.c ****             break;
 2050              		.loc 1 1578 13
 2051 083c 160000EA 		b	.L123
 2052              	.L100:
1579:../../Source/Kernel/rme_kernel.c ****         }
1580:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_INV_DEL:
1581:../../Source/Kernel/rme_kernel.c ****         {
1582:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1583:../../Source/Kernel/rme_kernel.c ****             
1584:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Inv_Del(Cpt,
 2053              		.loc 1 1584 20
 2054 0840 28301BE5 		ldr	r3, [fp, #-40]
 2055 0844 0310A0E1 		mov	r1, r3
1585:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
1586:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Param[0]);                       /* rme_cid_t Cap_Inv */
 2056              		.loc 1 1586 49
 2057 0848 34301BE5 		ldr	r3, [fp, #-52]
1584:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)Cid,                             /* rme_cid_t Cap_Cpt */
 2058              		.loc 1 1584 20
 2059 084c 0320A0E1 		mov	r2, r3
 2060 0850 14001BE5 		ldr	r0, [fp, #-20]
 2061 0854 FEFFFFEB 		bl	_RME_Inv_Del
 2062 0858 10000BE5 		str	r0, [fp, #-16]
1587:../../Source/Kernel/rme_kernel.c ****             break;
 2063              		.loc 1 1587 13
 2064 085c 0E0000EA 		b	.L123
 2065              	.L98:
1588:../../Source/Kernel/rme_kernel.c ****         }
1589:../../Source/Kernel/rme_kernel.c ****         case RME_SVC_INV_SET:
1590:../../Source/Kernel/rme_kernel.c ****         {
1591:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1592:../../Source/Kernel/rme_kernel.c ****             
1593:../../Source/Kernel/rme_kernel.c ****             Retval=_RME_Inv_Set(Cpt,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 66


1594:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Inv */
 2066              		.loc 1 1594 44
 2067 0860 34301BE5 		ldr	r3, [fp, #-52]
1593:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Inv */
 2068              		.loc 1 1593 20
 2069 0864 7310FFE6 		uxth	r1, r3
 2070 0868 30201BE5 		ldr	r2, [fp, #-48]
 2071 086c 2C001BE5 		ldr	r0, [fp, #-44]
1595:../../Source/Kernel/rme_kernel.c ****                                 Param[1],                                   /* rme_ptr_t Entry */
1596:../../Source/Kernel/rme_kernel.c ****                                 Param[2],                                   /* rme_ptr_t Stack */
1597:../../Source/Kernel/rme_kernel.c ****                                 RME_PARAM_D1(Param[0]));                    /* rme_ptr_t Is_Exc_Ret
 2072              		.loc 1 1597 33
 2073 0870 34301BE5 		ldr	r3, [fp, #-52]
1593:../../Source/Kernel/rme_kernel.c ****                                 (rme_cid_t)RME_PARAM_D0(Param[0]),          /* rme_cid_t Cap_Inv */
 2074              		.loc 1 1593 20
 2075 0874 2338A0E1 		lsr	r3, r3, #16
 2076 0878 00308DE5 		str	r3, [sp]
 2077 087c 0030A0E1 		mov	r3, r0
 2078 0880 14001BE5 		ldr	r0, [fp, #-20]
 2079 0884 FEFFFFEB 		bl	_RME_Inv_Set
 2080 0888 10000BE5 		str	r0, [fp, #-16]
1598:../../Source/Kernel/rme_kernel.c ****             break;
 2081              		.loc 1 1598 13
 2082 088c 020000EA 		b	.L123
 2083              	.L97:
1599:../../Source/Kernel/rme_kernel.c ****         }
1600:../../Source/Kernel/rme_kernel.c ****         /* This is an error */
1601:../../Source/Kernel/rme_kernel.c ****         default: 
1602:../../Source/Kernel/rme_kernel.c ****         {
1603:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1604:../../Source/Kernel/rme_kernel.c ****             
1605:../../Source/Kernel/rme_kernel.c ****             Retval=RME_ERR_CPT_NULL;
 2084              		.loc 1 1605 19
 2085 0890 0030E0E3 		mvn	r3, #0
 2086 0894 10300BE5 		str	r3, [fp, #-16]
1606:../../Source/Kernel/rme_kernel.c ****             break;
 2087              		.loc 1 1606 13
 2088 0898 00F020E3 		nop
 2089              	.L123:
1607:../../Source/Kernel/rme_kernel.c ****         }
1608:../../Source/Kernel/rme_kernel.c ****     }
1609:../../Source/Kernel/rme_kernel.c ****     
1610:../../Source/Kernel/rme_kernel.c ****     /* We set the registers and return */
1611:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,Retval);
 2090              		.loc 1 1611 5
 2091 089c 10101BE5 		ldr	r1, [fp, #-16]
 2092 08a0 38001BE5 		ldr	r0, [fp, #-56]
 2093 08a4 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 2094              	.L69:
1612:../../Source/Kernel/rme_kernel.c **** }
 2095              		.loc 1 1612 1
 2096 08a8 0CD04BE2 		sub	sp, fp, #12
 2097              		.cfi_def_cfa 13, 16
 2098              		@ sp needed
 2099 08ac 3088BDE8 		pop	{r4, r5, fp, pc}
 2100              	.L128:
 2101              		.align	2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 67


 2102              	.L127:
 2103 08b0 00000000 		.word	.L81
 2104 08b4 20000000 		.word	.L99
 2105              		.cfi_endproc
 2106              	.LFE18:
 2108              		.section	.text._RME_Tim_Handler,"ax",%progbits
 2109              		.align	2
 2110              		.global	_RME_Tim_Handler
 2111              		.syntax unified
 2112              		.arm
 2114              	_RME_Tim_Handler:
 2115              	.LFB19:
1613:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Svc_Handler *********************************************/
1614:../../Source/Kernel/rme_kernel.c **** 
1615:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Tim_Handler **************************************************
1616:../../Source/Kernel/rme_kernel.c **** Description : The system tick timer handler of RME.
1617:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
1618:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Slice - Number of slices passed since last call of
1619:../../Source/Kernel/rme_kernel.c ****                                 _RME_Tim_Elapse or _RME_Tim_Handler.
1620:../../Source/Kernel/rme_kernel.c **** Output      : struct RME_Reg_Struct* Reg - The updated register set.
1621:../../Source/Kernel/rme_kernel.c **** Return      : None.
1622:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1623:../../Source/Kernel/rme_kernel.c **** void _RME_Tim_Handler(struct RME_Reg_Struct* Reg,
1624:../../Source/Kernel/rme_kernel.c ****                       rme_ptr_t Slice)
1625:../../Source/Kernel/rme_kernel.c **** {
 2116              		.loc 1 1625 1
 2117              		.cfi_startproc
 2118              		@ args = 0, pretend = 0, frame = 16
 2119              		@ frame_needed = 1, uses_anonymous_args = 0
 2120 0000 00482DE9 		push	{fp, lr}
 2121              		.cfi_def_cfa_offset 8
 2122              		.cfi_offset 11, -8
 2123              		.cfi_offset 14, -4
 2124 0004 04B08DE2 		add	fp, sp, #4
 2125              		.cfi_def_cfa 11, 4
 2126 0008 10D04DE2 		sub	sp, sp, #16
 2127 000c 10000BE5 		str	r0, [fp, #-16]
 2128 0010 14100BE5 		str	r1, [fp, #-20]
1626:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
1627:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
1628:../../Source/Kernel/rme_kernel.c ****     
1629:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 2129              		.loc 1 1629 10
 2130 0014 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 2131 0018 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 2132 001c 08300BE5 		str	r3, [fp, #-8]
1630:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=Local->Thd_Cur;
 2133              		.loc 1 1630 12
 2134 0020 08301BE5 		ldr	r3, [fp, #-8]
 2135 0024 043093E5 		ldr	r3, [r3, #4]
 2136 0028 0C300BE5 		str	r3, [fp, #-12]
1631:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur->Sched.Slice<RME_THD_INF_TIME)
 2137              		.loc 1 1631 22
 2138 002c 0C301BE5 		ldr	r3, [fp, #-12]
 2139 0030 183093E5 		ldr	r3, [r3, #24]
 2140              		.loc 1 1631 7
 2141 0034 0E0173E3 		cmn	r3, #-2147483645
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 68


 2142 0038 1500008A 		bhi	.L130
1632:../../Source/Kernel/rme_kernel.c ****     {
1633:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1634:../../Source/Kernel/rme_kernel.c **** 
1635:../../Source/Kernel/rme_kernel.c ****         /* Decrease timeslice count, and see if the timeslice is used up */
1636:../../Source/Kernel/rme_kernel.c ****         if(Slice<Thd_Cur->Sched.Slice)
 2143              		.loc 1 1636 32
 2144 003c 0C301BE5 		ldr	r3, [fp, #-12]
 2145 0040 183093E5 		ldr	r3, [r3, #24]
 2146              		.loc 1 1636 11
 2147 0044 14201BE5 		ldr	r2, [fp, #-20]
 2148 0048 030052E1 		cmp	r2, r3
 2149 004c 0600002A 		bcs	.L131
1637:../../Source/Kernel/rme_kernel.c ****         {
1638:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1639:../../Source/Kernel/rme_kernel.c ****             
1640:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice-=Slice;
 2150              		.loc 1 1640 27
 2151 0050 0C301BE5 		ldr	r3, [fp, #-12]
 2152 0054 182093E5 		ldr	r2, [r3, #24]
 2153              		.loc 1 1640 33
 2154 0058 14301BE5 		ldr	r3, [fp, #-20]
 2155 005c 032042E0 		sub	r2, r2, r3
 2156 0060 0C301BE5 		ldr	r3, [fp, #-12]
 2157 0064 182083E5 		str	r2, [r3, #24]
 2158 0068 090000EA 		b	.L130
 2159              	.L131:
1641:../../Source/Kernel/rme_kernel.c ****         }
1642:../../Source/Kernel/rme_kernel.c ****         else
1643:../../Source/Kernel/rme_kernel.c ****         {
1644:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1645:../../Source/Kernel/rme_kernel.c **** 
1646:../../Source/Kernel/rme_kernel.c ****             /* Deprive all timeslices and remove from runqueue */
1647:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice=0U;
 2160              		.loc 1 1647 33
 2161 006c 0C301BE5 		ldr	r3, [fp, #-12]
 2162 0070 0020A0E3 		mov	r2, #0
 2163 0074 182083E5 		str	r2, [r3, #24]
1648:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Cur);
 2164              		.loc 1 1648 13
 2165 0078 0C001BE5 		ldr	r0, [fp, #-12]
 2166 007c FEFFFFEB 		bl	_RME_Run_Del
1649:../../Source/Kernel/rme_kernel.c ****             
1650:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
1651:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.State=RME_THD_TIMEOUT;
 2167              		.loc 1 1651 33
 2168 0080 0C301BE5 		ldr	r3, [fp, #-12]
 2169 0084 0220A0E3 		mov	r2, #2
 2170 0088 1C2083E5 		str	r2, [r3, #28]
1652:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Cur);
 2171              		.loc 1 1652 13
 2172 008c 0C001BE5 		ldr	r0, [fp, #-12]
 2173 0090 FEFFFFEB 		bl	_RME_Run_Notif
 2174              	.L130:
1653:../../Source/Kernel/rme_kernel.c ****         }
1654:../../Source/Kernel/rme_kernel.c ****     }
1655:../../Source/Kernel/rme_kernel.c ****     else
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 69


1656:../../Source/Kernel/rme_kernel.c ****     {
1657:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1658:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1659:../../Source/Kernel/rme_kernel.c ****     }
1660:../../Source/Kernel/rme_kernel.c **** 
1661:../../Source/Kernel/rme_kernel.c ****     /* Send to the system tick timer endpoint. This endpoint is per-core */
1662:../../Source/Kernel/rme_kernel.c ****     _RME_Kern_Snd(Local->Sig_Tim);
 2175              		.loc 1 1662 5
 2176 0094 08301BE5 		ldr	r3, [fp, #-8]
 2177 0098 083093E5 		ldr	r3, [r3, #8]
 2178 009c 0300A0E1 		mov	r0, r3
 2179 00a0 FEFFFFEB 		bl	_RME_Kern_Snd
1663:../../Source/Kernel/rme_kernel.c **** 
1664:../../Source/Kernel/rme_kernel.c ****     /* All kernel send complete, now pick the highest priority thread to run */
1665:../../Source/Kernel/rme_kernel.c ****     _RME_Kern_High(Reg,Local);
 2180              		.loc 1 1665 5
 2181 00a4 08101BE5 		ldr	r1, [fp, #-8]
 2182 00a8 10001BE5 		ldr	r0, [fp, #-16]
 2183 00ac FEFFFFEB 		bl	_RME_Kern_High
1666:../../Source/Kernel/rme_kernel.c **** }
 2184              		.loc 1 1666 1
 2185 00b0 00F020E3 		nop
 2186 00b4 04D04BE2 		sub	sp, fp, #4
 2187              		.cfi_def_cfa 13, 8
 2188              		@ sp needed
 2189 00b8 0088BDE8 		pop	{fp, pc}
 2190              		.cfi_endproc
 2191              	.LFE19:
 2193              		.section	.text._RME_Tim_Elapse,"ax",%progbits
 2194              		.align	2
 2195              		.global	_RME_Tim_Elapse
 2196              		.syntax unified
 2197              		.arm
 2199              	_RME_Tim_Elapse:
 2200              	.LFB20:
1667:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Tim_Handler *********************************************/
1668:../../Source/Kernel/rme_kernel.c **** 
1669:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Tim_Elapse ***************************************************
1670:../../Source/Kernel/rme_kernel.c **** Description : Honor the elapse of time from the last timer firing.
1671:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Slice - Number of slices passed since last call of
1672:../../Source/Kernel/rme_kernel.c ****                                 _RME_Tim_Elapse or _RME_Tim_Handler.
1673:../../Source/Kernel/rme_kernel.c **** Output      : None.
1674:../../Source/Kernel/rme_kernel.c **** Return      : None.
1675:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1676:../../Source/Kernel/rme_kernel.c **** void _RME_Tim_Elapse(rme_ptr_t Slice)
1677:../../Source/Kernel/rme_kernel.c **** {
 2201              		.loc 1 1677 1
 2202              		.cfi_startproc
 2203              		@ args = 0, pretend = 0, frame = 16
 2204              		@ frame_needed = 1, uses_anonymous_args = 0
 2205              		@ link register save eliminated.
 2206 0000 04B02DE5 		str	fp, [sp, #-4]!
 2207              		.cfi_def_cfa_offset 4
 2208              		.cfi_offset 11, -4
 2209 0004 00B08DE2 		add	fp, sp, #0
 2210              		.cfi_def_cfa_register 11
 2211 0008 14D04DE2 		sub	sp, sp, #20
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 70


 2212 000c 10000BE5 		str	r0, [fp, #-16]
1678:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
1679:../../Source/Kernel/rme_kernel.c ****     
1680:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=RME_CPU_LOCAL()->Thd_Cur;
 2213              		.loc 1 1680 12
 2214 0010 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 2215 0014 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 2216 0018 043093E5 		ldr	r3, [r3, #4]
 2217 001c 08300BE5 		str	r3, [fp, #-8]
1681:../../Source/Kernel/rme_kernel.c ****     
1682:../../Source/Kernel/rme_kernel.c ****     /* We don't want the slices less than 1 because we want to keep the kernel
1683:../../Source/Kernel/rme_kernel.c ****      * SVC invariants - the current thread must still be running after this */
1684:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur->Sched.Slice<RME_THD_INF_TIME)
 2218              		.loc 1 1684 22
 2219 0020 08301BE5 		ldr	r3, [fp, #-8]
 2220 0024 183093E5 		ldr	r3, [r3, #24]
 2221              		.loc 1 1684 7
 2222 0028 0E0173E3 		cmn	r3, #-2147483645
 2223 002c 0E00008A 		bhi	.L135
1685:../../Source/Kernel/rme_kernel.c ****     {
1686:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1687:../../Source/Kernel/rme_kernel.c **** 
1688:../../Source/Kernel/rme_kernel.c ****         /* Decrease timeslice count, but no less than 1, so the thread is
1689:../../Source/Kernel/rme_kernel.c ****          * always running, which keeps the invariant of the kernel */
1690:../../Source/Kernel/rme_kernel.c ****         if(Slice<Thd_Cur->Sched.Slice)
 2224              		.loc 1 1690 32
 2225 0030 08301BE5 		ldr	r3, [fp, #-8]
 2226 0034 183093E5 		ldr	r3, [r3, #24]
 2227              		.loc 1 1690 11
 2228 0038 10201BE5 		ldr	r2, [fp, #-16]
 2229 003c 030052E1 		cmp	r2, r3
 2230 0040 0600002A 		bcs	.L134
1691:../../Source/Kernel/rme_kernel.c ****         {
1692:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1693:../../Source/Kernel/rme_kernel.c ****             
1694:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice-=Slice;
 2231              		.loc 1 1694 27
 2232 0044 08301BE5 		ldr	r3, [fp, #-8]
 2233 0048 182093E5 		ldr	r2, [r3, #24]
 2234              		.loc 1 1694 33
 2235 004c 10301BE5 		ldr	r3, [fp, #-16]
 2236 0050 032042E0 		sub	r2, r2, r3
 2237 0054 08301BE5 		ldr	r3, [fp, #-8]
 2238 0058 182083E5 		str	r2, [r3, #24]
1695:../../Source/Kernel/rme_kernel.c ****         }
1696:../../Source/Kernel/rme_kernel.c ****         else
1697:../../Source/Kernel/rme_kernel.c ****         {
1698:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
1699:../../Source/Kernel/rme_kernel.c ****             
1700:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice=1U;
1701:../../Source/Kernel/rme_kernel.c ****         }
1702:../../Source/Kernel/rme_kernel.c ****     }
1703:../../Source/Kernel/rme_kernel.c ****     else
1704:../../Source/Kernel/rme_kernel.c ****     {
1705:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1706:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1707:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 71


1708:../../Source/Kernel/rme_kernel.c **** }
 2239              		.loc 1 1708 1
 2240 005c 020000EA 		b	.L135
 2241              	.L134:
1700:../../Source/Kernel/rme_kernel.c ****         }
 2242              		.loc 1 1700 33
 2243 0060 08301BE5 		ldr	r3, [fp, #-8]
 2244 0064 0120A0E3 		mov	r2, #1
 2245 0068 182083E5 		str	r2, [r3, #24]
 2246              	.L135:
 2247              		.loc 1 1708 1
 2248 006c 00F020E3 		nop
 2249 0070 00D08BE2 		add	sp, fp, #0
 2250              		.cfi_def_cfa_register 13
 2251              		@ sp needed
 2252 0074 04B09DE4 		ldr	fp, [sp], #4
 2253              		.cfi_restore 11
 2254              		.cfi_def_cfa_offset 0
 2255 0078 1EFF2FE1 		bx	lr
 2256              		.cfi_endproc
 2257              	.LFE20:
 2259              		.section	.text._RME_Tim_Future,"ax",%progbits
 2260              		.align	2
 2261              		.global	_RME_Tim_Future
 2262              		.syntax unified
 2263              		.arm
 2265              	_RME_Tim_Future:
 2266              	.LFB21:
1709:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Tim_Elapse **********************************************/
1710:../../Source/Kernel/rme_kernel.c **** 
1711:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Tim_Future ***************************************************
1712:../../Source/Kernel/rme_kernel.c **** Description : Honor the elapse of time from the last timer firing.
1713:../../Source/Kernel/rme_kernel.c **** Input       : None.
1714:../../Source/Kernel/rme_kernel.c **** Output      : None.
1715:../../Source/Kernel/rme_kernel.c **** Return      : rme_ptr_t - How many slices to program until the next timeout.
1716:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1717:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Tim_Future(void)
1718:../../Source/Kernel/rme_kernel.c **** {
 2267              		.loc 1 1718 1
 2268              		.cfi_startproc
 2269              		@ args = 0, pretend = 0, frame = 0
 2270              		@ frame_needed = 1, uses_anonymous_args = 0
 2271              		@ link register save eliminated.
 2272 0000 04B02DE5 		str	fp, [sp, #-4]!
 2273              		.cfi_def_cfa_offset 4
 2274              		.cfi_offset 11, -4
 2275 0004 00B08DE2 		add	fp, sp, #0
 2276              		.cfi_def_cfa_register 11
1719:../../Source/Kernel/rme_kernel.c ****     /* If we're running an infinite thread, just program infinite time,
1720:../../Source/Kernel/rme_kernel.c ****      * these values are very large so that's fine */
1721:../../Source/Kernel/rme_kernel.c ****     return RME_CPU_LOCAL()->Thd_Cur->Sched.Slice;
 2277              		.loc 1 1721 27
 2278 0008 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 2279 000c 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 2280 0010 043093E5 		ldr	r3, [r3, #4]
 2281              		.loc 1 1721 43
 2282 0014 183093E5 		ldr	r3, [r3, #24]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 72


1722:../../Source/Kernel/rme_kernel.c **** }
 2283              		.loc 1 1722 1
 2284 0018 0300A0E1 		mov	r0, r3
 2285 001c 00D08BE2 		add	sp, fp, #0
 2286              		.cfi_def_cfa_register 13
 2287              		@ sp needed
 2288 0020 04B09DE4 		ldr	fp, [sp], #4
 2289              		.cfi_restore 11
 2290              		.cfi_def_cfa_offset 0
 2291 0024 1EFF2FE1 		bx	lr
 2292              		.cfi_endproc
 2293              	.LFE21:
 2295              		.section	.text._RME_Cpt_Boot_Init,"ax",%progbits
 2296              		.align	2
 2297              		.global	_RME_Cpt_Boot_Init
 2298              		.syntax unified
 2299              		.arm
 2301              	_RME_Cpt_Boot_Init:
 2302              	.LFB22:
1723:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Tim_Future **********************************************/
1724:../../Source/Kernel/rme_kernel.c **** 
1725:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Boot_Init ************************************************
1726:../../Source/Kernel/rme_kernel.c **** Description : Create the first capability table in the system, at boot-time. 
1727:../../Source/Kernel/rme_kernel.c ****               This function must be called at system startup before setting up
1728:../../Source/Kernel/rme_kernel.c ****               any other kernel objects.
1729:../../Source/Kernel/rme_kernel.c ****               This function does not require a kernel memory capability.
1730:../../Source/Kernel/rme_kernel.c **** Input       : rme_cid_t Cap_Cpt - The capability slot that you want this newly
1731:../../Source/Kernel/rme_kernel.c ****                                   created capability table capability to be in.
1732:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
1733:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Vaddr - The kernel virtual address to store the
1734:../../Source/Kernel/rme_kernel.c ****                                 capability table.
1735:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Entry_Num - The number of capability entries in the
1736:../../Source/Kernel/rme_kernel.c ****                                     capability table.
1737:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
1738:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1739:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Cpt_Boot_Init(rme_cid_t Cap_Cpt,
1740:../../Source/Kernel/rme_kernel.c ****                              rme_ptr_t Vaddr,
1741:../../Source/Kernel/rme_kernel.c ****                              rme_ptr_t Entry_Num)
1742:../../Source/Kernel/rme_kernel.c **** {
 2303              		.loc 1 1742 1
 2304              		.cfi_startproc
 2305              		@ args = 0, pretend = 0, frame = 24
 2306              		@ frame_needed = 1, uses_anonymous_args = 0
 2307 0000 00482DE9 		push	{fp, lr}
 2308              		.cfi_def_cfa_offset 8
 2309              		.cfi_offset 11, -8
 2310              		.cfi_offset 14, -4
 2311 0004 04B08DE2 		add	fp, sp, #4
 2312              		.cfi_def_cfa 11, 4
 2313 0008 18D04DE2 		sub	sp, sp, #24
 2314 000c 10000BE5 		str	r0, [fp, #-16]
 2315 0010 14100BE5 		str	r1, [fp, #-20]
 2316 0014 18200BE5 		str	r2, [fp, #-24]
1743:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
1744:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt;
1745:../../Source/Kernel/rme_kernel.c **** 
1746:../../Source/Kernel/rme_kernel.c ****     /* See if the entry number is too big */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 73


1747:../../Source/Kernel/rme_kernel.c ****     if((Entry_Num==0U)||(Entry_Num>RME_CID_2L))
 2317              		.loc 1 1747 7
 2318 0018 18301BE5 		ldr	r3, [fp, #-24]
 2319 001c 000053E3 		cmp	r3, #0
 2320 0020 0200000A 		beq	.L139
 2321              		.loc 1 1747 23 discriminator 1
 2322 0024 18301BE5 		ldr	r3, [fp, #-24]
 2323 0028 800053E3 		cmp	r3, #128
 2324 002c 0100009A 		bls	.L140
 2325              	.L139:
1748:../../Source/Kernel/rme_kernel.c ****     {
1749:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1750:../../Source/Kernel/rme_kernel.c ****         
1751:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_RANGE;
 2326              		.loc 1 1751 16
 2327 0030 0230E0E3 		mvn	r3, #2
 2328 0034 300000EA 		b	.L141
 2329              	.L140:
1752:../../Source/Kernel/rme_kernel.c ****     }
1753:../../Source/Kernel/rme_kernel.c ****     else
1754:../../Source/Kernel/rme_kernel.c ****     {
1755:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1756:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1757:../../Source/Kernel/rme_kernel.c ****     }
1758:../../Source/Kernel/rme_kernel.c ****     
1759:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
1760:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,RME_CPT_SIZE(Entry_Num))!=0)
 2330              		.loc 1 1760 8
 2331 0038 18301BE5 		ldr	r3, [fp, #-24]
 2332 003c 8332A0E1 		lsl	r3, r3, #5
 2333 0040 0310A0E1 		mov	r1, r3
 2334 0044 14001BE5 		ldr	r0, [fp, #-20]
 2335 0048 FEFFFFEB 		bl	_RME_Kot_Mark
 2336 004c 0030A0E1 		mov	r3, r0
 2337              		.loc 1 1760 7 discriminator 1
 2338 0050 000053E3 		cmp	r3, #0
 2339 0054 0100000A 		beq	.L142
1761:../../Source/Kernel/rme_kernel.c ****     {
1762:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1763:../../Source/Kernel/rme_kernel.c ****         
1764:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 2340              		.loc 1 1764 16
 2341 0058 0330E0E3 		mvn	r3, #3
 2342 005c 260000EA 		b	.L141
 2343              	.L142:
1765:../../Source/Kernel/rme_kernel.c ****     }
1766:../../Source/Kernel/rme_kernel.c ****     else
1767:../../Source/Kernel/rme_kernel.c ****     {
1768:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1769:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1770:../../Source/Kernel/rme_kernel.c ****     }
1771:../../Source/Kernel/rme_kernel.c **** 
1772:../../Source/Kernel/rme_kernel.c ****     /* Object init */
1773:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Entry_Num;Count++)
 2344              		.loc 1 1773 14
 2345 0060 0030A0E3 		mov	r3, #0
 2346 0064 08300BE5 		str	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 74


 2347              		.loc 1 1773 5
 2348 0068 090000EA 		b	.L143
 2349              	.L144:
1774:../../Source/Kernel/rme_kernel.c ****     {
1775:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CLEAR(&(((struct RME_Cap_Struct*)Vaddr)[Count]));
 2350              		.loc 1 1775 9
 2351 006c 08301BE5 		ldr	r3, [fp, #-8]
 2352 0070 8322A0E1 		lsl	r2, r3, #5
 2353 0074 14301BE5 		ldr	r3, [fp, #-20]
 2354 0078 033082E0 		add	r3, r2, r3
 2355 007c 0320A0E1 		mov	r2, r3
 2356 0080 0030A0E3 		mov	r3, #0
 2357 0084 003082E5 		str	r3, [r2]
1773:../../Source/Kernel/rme_kernel.c ****     {
 2358              		.loc 1 1773 39 discriminator 3
 2359 0088 08301BE5 		ldr	r3, [fp, #-8]
 2360 008c 013083E2 		add	r3, r3, #1
 2361 0090 08300BE5 		str	r3, [fp, #-8]
 2362              	.L143:
1773:../../Source/Kernel/rme_kernel.c ****     {
 2363              		.loc 1 1773 23 discriminator 1
 2364 0094 08201BE5 		ldr	r2, [fp, #-8]
 2365 0098 18301BE5 		ldr	r3, [fp, #-24]
 2366 009c 030052E1 		cmp	r2, r3
 2367 00a0 F1FFFF3A 		bcc	.L144
1776:../../Source/Kernel/rme_kernel.c ****     }
1777:../../Source/Kernel/rme_kernel.c **** 
1778:../../Source/Kernel/rme_kernel.c ****     Cpt=&(((struct RME_Cap_Cpt*)Vaddr)[Cap_Cpt]);
 2368              		.loc 1 1778 39
 2369 00a4 10301BE5 		ldr	r3, [fp, #-16]
 2370 00a8 8322A0E1 		lsl	r2, r3, #5
 2371 00ac 14301BE5 		ldr	r3, [fp, #-20]
 2372 00b0 033082E0 		add	r3, r2, r3
 2373              		.loc 1 1778 8
 2374 00b4 0C300BE5 		str	r3, [fp, #-12]
1779:../../Source/Kernel/rme_kernel.c ****     
1780:../../Source/Kernel/rme_kernel.c ****     /* Header init */
1781:../../Source/Kernel/rme_kernel.c ****     Cpt->Head.Root_Ref=1U;
 2375              		.loc 1 1781 23
 2376 00b8 0C301BE5 		ldr	r3, [fp, #-12]
 2377 00bc 0120A0E3 		mov	r2, #1
 2378 00c0 042083E5 		str	r2, [r3, #4]
1782:../../Source/Kernel/rme_kernel.c ****     Cpt->Head.Object=Vaddr;
 2379              		.loc 1 1782 21
 2380 00c4 0C301BE5 		ldr	r3, [fp, #-12]
 2381 00c8 14201BE5 		ldr	r2, [fp, #-20]
 2382 00cc 0C2083E5 		str	r2, [r3, #12]
1783:../../Source/Kernel/rme_kernel.c ****     Cpt->Head.Flag=RME_CPT_FLAG_ALL;
 2383              		.loc 1 1783 19
 2384 00d0 0C301BE5 		ldr	r3, [fp, #-12]
 2385 00d4 FF20A0E3 		mov	r2, #255
 2386 00d8 082083E5 		str	r2, [r3, #8]
1784:../../Source/Kernel/rme_kernel.c ****     
1785:../../Source/Kernel/rme_kernel.c ****     /* Info init */
1786:../../Source/Kernel/rme_kernel.c ****     Cpt->Entry_Num=Entry_Num;
 2387              		.loc 1 1786 19
 2388 00dc 0C301BE5 		ldr	r3, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 75


 2389 00e0 18201BE5 		ldr	r2, [fp, #-24]
 2390 00e4 142083E5 		str	r2, [r3, #20]
1787:../../Source/Kernel/rme_kernel.c **** 
1788:../../Source/Kernel/rme_kernel.c ****     /* At last, write into slot the correct information, and set status to VALID */
1789:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Cpt->Head.Type_Stat),
 2391              		.loc 1 1789 5
 2392 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 2393 00ec 0314A0E3 		mov	r1, #50331648
 2394 00f0 0300A0E1 		mov	r0, r3
 2395 00f4 FEFFFFEB 		bl	__RME_A7A_Write_Release
1790:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_CPT,
1791:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
1792:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
1793:../../Source/Kernel/rme_kernel.c **** 
1794:../../Source/Kernel/rme_kernel.c ****     return Cap_Cpt;
 2396              		.loc 1 1794 12
 2397 00f8 10301BE5 		ldr	r3, [fp, #-16]
 2398              	.L141:
1795:../../Source/Kernel/rme_kernel.c **** }
 2399              		.loc 1 1795 1
 2400 00fc 0300A0E1 		mov	r0, r3
 2401 0100 04D04BE2 		sub	sp, fp, #4
 2402              		.cfi_def_cfa 13, 8
 2403              		@ sp needed
 2404 0104 0088BDE8 		pop	{fp, pc}
 2405              		.cfi_endproc
 2406              	.LFE22:
 2408              		.section	.text._RME_Cpt_Boot_Crt,"ax",%progbits
 2409              		.align	2
 2410              		.global	_RME_Cpt_Boot_Crt
 2411              		.syntax unified
 2412              		.arm
 2414              	_RME_Cpt_Boot_Crt:
 2415              	.LFB23:
1796:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Boot_Init *******************************************/
1797:../../Source/Kernel/rme_kernel.c **** 
1798:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Boot_Crt *************************************************
1799:../../Source/Kernel/rme_kernel.c **** Description : Create a boot-time capability table at the designated memory
1800:../../Source/Kernel/rme_kernel.c ****               address.
1801:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
1802:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Crt - The capability table that contains the 
1803:../../Source/Kernel/rme_kernel.c ****                                       newly created cap to captbl.
1804:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
1805:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Crt - The capability slot that you want this newly
1806:../../Source/Kernel/rme_kernel.c ****                                   created capability table capability to be in.
1807:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
1808:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Vaddr - The kernel virtual address to store the 
1809:../../Source/Kernel/rme_kernel.c ****                                 capability table.
1810:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Entry_Num - The number of capabilities in the capability table.
1811:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
1812:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1813:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Cpt_Boot_Crt(struct RME_Cap_Cpt* Cpt,
1814:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt_Crt,
1815:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Crt,
1816:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Vaddr,
1817:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Entry_Num)
1818:../../Source/Kernel/rme_kernel.c **** {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 76


 2416              		.loc 1 1818 1
 2417              		.cfi_startproc
 2418              		@ args = 4, pretend = 0, frame = 32
 2419              		@ frame_needed = 1, uses_anonymous_args = 0
 2420 0000 00482DE9 		push	{fp, lr}
 2421              		.cfi_def_cfa_offset 8
 2422              		.cfi_offset 11, -8
 2423              		.cfi_offset 14, -4
 2424 0004 04B08DE2 		add	fp, sp, #4
 2425              		.cfi_def_cfa 11, 4
 2426 0008 20D04DE2 		sub	sp, sp, #32
 2427 000c 18000BE5 		str	r0, [fp, #-24]
 2428 0010 1C100BE5 		str	r1, [fp, #-28]
 2429 0014 20200BE5 		str	r2, [fp, #-32]
 2430 0018 24300BE5 		str	r3, [fp, #-36]
1819:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
1820:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
1821:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Cpt* Cpt_Crt;
1822:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
1823:../../Source/Kernel/rme_kernel.c ****     
1824:../../Source/Kernel/rme_kernel.c ****     /* See if the entry number is too big - this is not restricted by RME_CPT_ENTRY_MAX */
1825:../../Source/Kernel/rme_kernel.c ****     if((Entry_Num==0U)||(Entry_Num>RME_CID_2L))
 2431              		.loc 1 1825 7
 2432 001c 04309BE5 		ldr	r3, [fp, #4]
 2433 0020 000053E3 		cmp	r3, #0
 2434 0024 0200000A 		beq	.L146
 2435              		.loc 1 1825 23 discriminator 1
 2436 0028 04309BE5 		ldr	r3, [fp, #4]
 2437 002c 800053E3 		cmp	r3, #128
 2438 0030 0100009A 		bls	.L147
 2439              	.L146:
1826:../../Source/Kernel/rme_kernel.c ****     {
1827:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1828:../../Source/Kernel/rme_kernel.c ****         
1829:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_RANGE;
 2440              		.loc 1 1829 16
 2441 0034 0230E0E3 		mvn	r3, #2
 2442 0038 B10000EA 		b	.L148
 2443              	.L147:
1830:../../Source/Kernel/rme_kernel.c ****     }
1831:../../Source/Kernel/rme_kernel.c ****     else
1832:../../Source/Kernel/rme_kernel.c ****     {
1833:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1834:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1835:../../Source/Kernel/rme_kernel.c ****     }
1836:../../Source/Kernel/rme_kernel.c **** 
1837:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
1838:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,
 2444              		.loc 1 1838 5
 2445 003c 1C301BE5 		ldr	r3, [fp, #-28]
 2446 0040 803003E2 		and	r3, r3, #128
 2447 0044 000053E3 		cmp	r3, #0
 2448 0048 1C00001A 		bne	.L149
 2449              		.loc 1 1838 5 is_stmt 0 discriminator 1
 2450 004c 18301BE5 		ldr	r3, [fp, #-24]
 2451 0050 142093E5 		ldr	r2, [r3, #20]
 2452 0054 1C301BE5 		ldr	r3, [fp, #-28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 77


 2453 0058 030052E1 		cmp	r2, r3
 2454 005c 0100008A 		bhi	.L150
 2455              		.loc 1 1838 5 discriminator 3
 2456 0060 0230E0E3 		mvn	r3, #2
 2457              		.loc 1 1838 5
 2458 0064 A60000EA 		b	.L148
 2459              	.L150:
 2460              		.loc 1 1838 5 discriminator 4
 2461 0068 1C301BE5 		ldr	r3, [fp, #-28]
 2462 006c 8322A0E1 		lsl	r2, r3, #5
 2463 0070 18301BE5 		ldr	r3, [fp, #-24]
 2464 0074 0C3093E5 		ldr	r3, [r3, #12]
 2465 0078 033082E0 		add	r3, r2, r3
 2466 007c 0C300BE5 		str	r3, [fp, #-12]
 2467 0080 0C301BE5 		ldr	r3, [fp, #-12]
 2468 0084 0300A0E1 		mov	r0, r3
 2469 0088 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2470 008c 10000BE5 		str	r0, [fp, #-16]
 2471              		.loc 1 1838 5 discriminator 1
 2472 0090 10301BE5 		ldr	r3, [fp, #-16]
 2473 0094 FF3803E2 		and	r3, r3, #16711680
 2474 0098 020853E3 		cmp	r3, #131072
 2475 009c 0100001A 		bne	.L151
 2476              		.loc 1 1838 5 discriminator 5
 2477 00a0 0830E0E3 		mvn	r3, #8
 2478              		.loc 1 1838 5
 2479 00a4 960000EA 		b	.L148
 2480              	.L151:
 2481              		.loc 1 1838 5 discriminator 6
 2482 00a8 10301BE5 		ldr	r3, [fp, #-16]
 2483 00ac 233CA0E1 		lsr	r3, r3, #24
 2484 00b0 030053E3 		cmp	r3, #3
 2485 00b4 3F00000A 		beq	.L152
 2486              		.loc 1 1838 5 discriminator 7
 2487 00b8 0130E0E3 		mvn	r3, #1
 2488              		.loc 1 1838 5
 2489 00bc 900000EA 		b	.L148
 2490              	.L149:
 2491              		.loc 1 1838 5 discriminator 2
 2492 00c0 1C301BE5 		ldr	r3, [fp, #-28]
 2493 00c4 2324A0E1 		lsr	r2, r3, #8
 2494 00c8 18301BE5 		ldr	r3, [fp, #-24]
 2495 00cc 143093E5 		ldr	r3, [r3, #20]
 2496 00d0 030052E1 		cmp	r2, r3
 2497 00d4 0100003A 		bcc	.L153
 2498              		.loc 1 1838 5 discriminator 8
 2499 00d8 0230E0E3 		mvn	r3, #2
 2500              		.loc 1 1838 5
 2501 00dc 880000EA 		b	.L148
 2502              	.L153:
 2503              		.loc 1 1838 5 discriminator 9
 2504 00e0 1C301BE5 		ldr	r3, [fp, #-28]
 2505 00e4 2334A0E1 		lsr	r3, r3, #8
 2506 00e8 8322A0E1 		lsl	r2, r3, #5
 2507 00ec 18301BE5 		ldr	r3, [fp, #-24]
 2508 00f0 0C3093E5 		ldr	r3, [r3, #12]
 2509 00f4 033082E0 		add	r3, r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 78


 2510 00f8 0C300BE5 		str	r3, [fp, #-12]
 2511 00fc 0C301BE5 		ldr	r3, [fp, #-12]
 2512 0100 0300A0E1 		mov	r0, r3
 2513 0104 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2514 0108 10000BE5 		str	r0, [fp, #-16]
 2515              		.loc 1 1838 5 discriminator 1
 2516 010c 10301BE5 		ldr	r3, [fp, #-16]
 2517 0110 FF3803E2 		and	r3, r3, #16711680
 2518 0114 020853E3 		cmp	r3, #131072
 2519 0118 0100001A 		bne	.L154
 2520              		.loc 1 1838 5 discriminator 10
 2521 011c 0830E0E3 		mvn	r3, #8
 2522              		.loc 1 1838 5
 2523 0120 770000EA 		b	.L148
 2524              	.L154:
 2525              		.loc 1 1838 5 discriminator 11
 2526 0124 10301BE5 		ldr	r3, [fp, #-16]
 2527 0128 233CA0E1 		lsr	r3, r3, #24
 2528 012c 030053E3 		cmp	r3, #3
 2529 0130 0100000A 		beq	.L155
 2530              		.loc 1 1838 5 discriminator 12
 2531 0134 0130E0E3 		mvn	r3, #1
 2532              		.loc 1 1838 5
 2533 0138 710000EA 		b	.L148
 2534              	.L155:
 2535              		.loc 1 1838 5 discriminator 13
 2536 013c 1C301BE5 		ldr	r3, [fp, #-28]
 2537 0140 7F2003E2 		and	r2, r3, #127
 2538 0144 0C301BE5 		ldr	r3, [fp, #-12]
 2539 0148 143093E5 		ldr	r3, [r3, #20]
 2540 014c 030052E1 		cmp	r2, r3
 2541 0150 0100003A 		bcc	.L156
 2542              		.loc 1 1838 5 discriminator 14
 2543 0154 0230E0E3 		mvn	r3, #2
 2544              		.loc 1 1838 5
 2545 0158 690000EA 		b	.L148
 2546              	.L156:
 2547              		.loc 1 1838 5 discriminator 15
 2548 015c 1C301BE5 		ldr	r3, [fp, #-28]
 2549 0160 7F3003E2 		and	r3, r3, #127
 2550 0164 8322A0E1 		lsl	r2, r3, #5
 2551 0168 0C301BE5 		ldr	r3, [fp, #-12]
 2552 016c 0C3093E5 		ldr	r3, [r3, #12]
 2553 0170 033082E0 		add	r3, r2, r3
 2554 0174 0C300BE5 		str	r3, [fp, #-12]
 2555 0178 0C301BE5 		ldr	r3, [fp, #-12]
 2556 017c 0300A0E1 		mov	r0, r3
 2557 0180 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2558 0184 10000BE5 		str	r0, [fp, #-16]
 2559              		.loc 1 1838 5 discriminator 1
 2560 0188 10301BE5 		ldr	r3, [fp, #-16]
 2561 018c FF3803E2 		and	r3, r3, #16711680
 2562 0190 020853E3 		cmp	r3, #131072
 2563 0194 0100001A 		bne	.L157
 2564              		.loc 1 1838 5 discriminator 16
 2565 0198 0830E0E3 		mvn	r3, #8
 2566              		.loc 1 1838 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 79


 2567 019c 580000EA 		b	.L148
 2568              	.L157:
 2569              		.loc 1 1838 5 discriminator 17
 2570 01a0 10301BE5 		ldr	r3, [fp, #-16]
 2571 01a4 233CA0E1 		lsr	r3, r3, #24
 2572 01a8 030053E3 		cmp	r3, #3
 2573 01ac 0100000A 		beq	.L152
 2574              		.loc 1 1838 5 discriminator 18
 2575 01b0 0130E0E3 		mvn	r3, #1
 2576              		.loc 1 1838 5
 2577 01b4 520000EA 		b	.L148
 2578              	.L152:
1839:../../Source/Kernel/rme_kernel.c ****                    Cap_Cpt_Crt,
1840:../../Source/Kernel/rme_kernel.c ****                    RME_CAP_TYPE_CPT,
1841:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,
1842:../../Source/Kernel/rme_kernel.c ****                    Cpt_Op,
1843:../../Source/Kernel/rme_kernel.c ****                    Type_Stat);
1844:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
1845:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 2579              		.loc 1 1845 5 is_stmt 1
 2580 01b8 0C301BE5 		ldr	r3, [fp, #-12]
 2581 01bc 083093E5 		ldr	r3, [r3, #8]
 2582 01c0 013003E2 		and	r3, r3, #1
 2583 01c4 000053E3 		cmp	r3, #0
 2584 01c8 0100001A 		bne	.L158
 2585              		.loc 1 1845 5 is_stmt 0 discriminator 1
 2586 01cc 0630E0E3 		mvn	r3, #6
 2587              		.loc 1 1845 5
 2588 01d0 4B0000EA 		b	.L148
 2589              	.L158:
1846:../../Source/Kernel/rme_kernel.c **** 
1847:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
1848:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Crt,struct RME_Cap_Cpt*,Cpt_Crt);
 2590              		.loc 1 1848 5 is_stmt 1
 2591 01d4 0C301BE5 		ldr	r3, [fp, #-12]
 2592 01d8 142093E5 		ldr	r2, [r3, #20]
 2593 01dc 20301BE5 		ldr	r3, [fp, #-32]
 2594 01e0 030052E1 		cmp	r2, r3
 2595 01e4 0100008A 		bhi	.L159
 2596              		.loc 1 1848 5 is_stmt 0 discriminator 1
 2597 01e8 0230E0E3 		mvn	r3, #2
 2598              		.loc 1 1848 5
 2599 01ec 440000EA 		b	.L148
 2600              	.L159:
 2601              		.loc 1 1848 5 discriminator 2
 2602 01f0 20301BE5 		ldr	r3, [fp, #-32]
 2603 01f4 8322A0E1 		lsl	r2, r3, #5
 2604 01f8 0C301BE5 		ldr	r3, [fp, #-12]
 2605 01fc 0C3093E5 		ldr	r3, [r3, #12]
 2606 0200 033082E0 		add	r3, r2, r3
 2607 0204 14300BE5 		str	r3, [fp, #-20]
1849:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
1850:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Cpt_Crt);
 2608              		.loc 1 1850 5 is_stmt 1
 2609 0208 14301BE5 		ldr	r3, [fp, #-20]
 2610 020c 0128A0E3 		mov	r2, #65536
 2611 0210 0010A0E3 		mov	r1, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 80


 2612 0214 0300A0E1 		mov	r0, r3
 2613 0218 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 2614 021c 0030A0E1 		mov	r3, r0
 2615              		.loc 1 1850 5 is_stmt 0 discriminator 1
 2616 0220 000053E3 		cmp	r3, #0
 2617 0224 0100001A 		bne	.L160
 2618 0228 0430E0E3 		mvn	r3, #4
 2619              		.loc 1 1850 5
 2620 022c 340000EA 		b	.L148
 2621              	.L160:
 2622              		.loc 1 1850 5 discriminator 2
 2623 0230 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 2624 0234 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 2625 0238 002093E5 		ldr	r2, [r3]
 2626 023c 14301BE5 		ldr	r3, [fp, #-20]
 2627 0240 102083E5 		str	r2, [r3, #16]
1851:../../Source/Kernel/rme_kernel.c **** 
1852:../../Source/Kernel/rme_kernel.c ****     /* Try to mark this area as populated */
1853:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,RME_CPT_SIZE(Entry_Num))!=0)
 2628              		.loc 1 1853 8 is_stmt 1
 2629 0244 04309BE5 		ldr	r3, [fp, #4]
 2630 0248 8332A0E1 		lsl	r3, r3, #5
 2631 024c 0310A0E1 		mov	r1, r3
 2632 0250 24001BE5 		ldr	r0, [fp, #-36]
 2633 0254 FEFFFFEB 		bl	_RME_Kot_Mark
 2634 0258 0030A0E1 		mov	r3, r0
 2635              		.loc 1 1853 7 discriminator 1
 2636 025c 000053E3 		cmp	r3, #0
 2637 0260 0500000A 		beq	.L161
1854:../../Source/Kernel/rme_kernel.c ****     {
1855:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1856:../../Source/Kernel/rme_kernel.c ****         
1857:../../Source/Kernel/rme_kernel.c ****         /* Abort the creation process */
1858:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Cpt_Crt->Head.Type_Stat),0U);
 2638              		.loc 1 1858 9
 2639 0264 14301BE5 		ldr	r3, [fp, #-20]
 2640 0268 0010A0E3 		mov	r1, #0
 2641 026c 0300A0E1 		mov	r0, r3
 2642 0270 FEFFFFEB 		bl	__RME_A7A_Write_Release
1859:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 2643              		.loc 1 1859 16
 2644 0274 0330E0E3 		mvn	r3, #3
 2645 0278 210000EA 		b	.L148
 2646              	.L161:
1860:../../Source/Kernel/rme_kernel.c ****     }
1861:../../Source/Kernel/rme_kernel.c ****     else
1862:../../Source/Kernel/rme_kernel.c ****     {
1863:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1864:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1865:../../Source/Kernel/rme_kernel.c ****     }
1866:../../Source/Kernel/rme_kernel.c **** 
1867:../../Source/Kernel/rme_kernel.c ****     /* Object init */
1868:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Entry_Num;Count++)
 2647              		.loc 1 1868 14
 2648 027c 0030A0E3 		mov	r3, #0
 2649 0280 08300BE5 		str	r3, [fp, #-8]
 2650              		.loc 1 1868 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 81


 2651 0284 090000EA 		b	.L162
 2652              	.L163:
1869:../../Source/Kernel/rme_kernel.c ****     {
1870:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CLEAR(&(((struct RME_Cap_Struct*)Vaddr)[Count]));
 2653              		.loc 1 1870 9
 2654 0288 08301BE5 		ldr	r3, [fp, #-8]
 2655 028c 8322A0E1 		lsl	r2, r3, #5
 2656 0290 24301BE5 		ldr	r3, [fp, #-36]
 2657 0294 033082E0 		add	r3, r2, r3
 2658 0298 0320A0E1 		mov	r2, r3
 2659 029c 0030A0E3 		mov	r3, #0
 2660 02a0 003082E5 		str	r3, [r2]
1868:../../Source/Kernel/rme_kernel.c ****     {
 2661              		.loc 1 1868 39 discriminator 3
 2662 02a4 08301BE5 		ldr	r3, [fp, #-8]
 2663 02a8 013083E2 		add	r3, r3, #1
 2664 02ac 08300BE5 		str	r3, [fp, #-8]
 2665              	.L162:
1868:../../Source/Kernel/rme_kernel.c ****     {
 2666              		.loc 1 1868 23 discriminator 1
 2667 02b0 08201BE5 		ldr	r2, [fp, #-8]
 2668 02b4 04309BE5 		ldr	r3, [fp, #4]
 2669 02b8 030052E1 		cmp	r2, r3
 2670 02bc F1FFFF3A 		bcc	.L163
1871:../../Source/Kernel/rme_kernel.c ****     }
1872:../../Source/Kernel/rme_kernel.c **** 
1873:../../Source/Kernel/rme_kernel.c ****     /* Header init */
1874:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Root_Ref=0U;
 2671              		.loc 1 1874 27
 2672 02c0 14301BE5 		ldr	r3, [fp, #-20]
 2673 02c4 0020A0E3 		mov	r2, #0
 2674 02c8 042083E5 		str	r2, [r3, #4]
1875:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Object=Vaddr;
 2675              		.loc 1 1875 25
 2676 02cc 14301BE5 		ldr	r3, [fp, #-20]
 2677 02d0 24201BE5 		ldr	r2, [fp, #-36]
 2678 02d4 0C2083E5 		str	r2, [r3, #12]
1876:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Flag=RME_CPT_FLAG_ALL;
 2679              		.loc 1 1876 23
 2680 02d8 14301BE5 		ldr	r3, [fp, #-20]
 2681 02dc FF20A0E3 		mov	r2, #255
 2682 02e0 082083E5 		str	r2, [r3, #8]
1877:../../Source/Kernel/rme_kernel.c ****     /* Info init */
1878:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Entry_Num=Entry_Num;
 2683              		.loc 1 1878 23
 2684 02e4 14301BE5 		ldr	r3, [fp, #-20]
 2685 02e8 04209BE5 		ldr	r2, [fp, #4]
 2686 02ec 142083E5 		str	r2, [r3, #20]
1879:../../Source/Kernel/rme_kernel.c **** 
1880:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
1881:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Cpt_Crt->Head.Type_Stat),
 2687              		.loc 1 1881 5
 2688 02f0 14301BE5 		ldr	r3, [fp, #-20]
 2689 02f4 0314A0E3 		mov	r1, #50331648
 2690 02f8 0300A0E1 		mov	r0, r3
 2691 02fc FEFFFFEB 		bl	__RME_A7A_Write_Release
1882:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_CPT,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 82


1883:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
1884:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
1885:../../Source/Kernel/rme_kernel.c **** 
1886:../../Source/Kernel/rme_kernel.c ****     return 0;
 2692              		.loc 1 1886 12
 2693 0300 0030A0E3 		mov	r3, #0
 2694              	.L148:
1887:../../Source/Kernel/rme_kernel.c **** }
 2695              		.loc 1 1887 1
 2696 0304 0300A0E1 		mov	r0, r3
 2697 0308 04D04BE2 		sub	sp, fp, #4
 2698              		.cfi_def_cfa 13, 8
 2699              		@ sp needed
 2700 030c 0088BDE8 		pop	{fp, pc}
 2701              		.cfi_endproc
 2702              	.LFE23:
 2704              		.section	.text._RME_Cpt_Crt,"ax",%progbits
 2705              		.align	2
 2706              		.syntax unified
 2707              		.arm
 2709              	_RME_Cpt_Crt:
 2710              	.LFB24:
1888:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Boot_Crt ********************************************/
1889:../../Source/Kernel/rme_kernel.c **** 
1890:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Crt ******************************************************
1891:../../Source/Kernel/rme_kernel.c **** Description : Create a capability table.
1892:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
1893:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Crt - The capability table that contains the 
1894:../../Source/Kernel/rme_kernel.c ****                                       newly created cap to captbl.
1895:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
1896:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kom - The kernel memory capability.
1897:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
1898:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Crt - The capability slot that you want this newly
1899:../../Source/Kernel/rme_kernel.c ****                                   created capability table capability to be in.
1900:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
1901:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raddr - The relative virtual address to store the 
1902:../../Source/Kernel/rme_kernel.c ****                                 capability table.
1903:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Entry_Num - The number of entries in that capability
1904:../../Source/Kernel/rme_kernel.c ****                                     table.
1905:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
1906:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
1907:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Cpt_Crt(struct RME_Cap_Cpt* Cpt,
1908:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Crt,
1909:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Kom,
1910:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Crt,
1911:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raddr,
1912:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Entry_Num)
1913:../../Source/Kernel/rme_kernel.c **** {
 2711              		.loc 1 1913 1
 2712              		.cfi_startproc
 2713              		@ args = 8, pretend = 0, frame = 40
 2714              		@ frame_needed = 1, uses_anonymous_args = 0
 2715 0000 00482DE9 		push	{fp, lr}
 2716              		.cfi_def_cfa_offset 8
 2717              		.cfi_offset 11, -8
 2718              		.cfi_offset 14, -4
 2719 0004 04B08DE2 		add	fp, sp, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 83


 2720              		.cfi_def_cfa 11, 4
 2721 0008 28D04DE2 		sub	sp, sp, #40
 2722 000c 20000BE5 		str	r0, [fp, #-32]
 2723 0010 24100BE5 		str	r1, [fp, #-36]
 2724 0014 28200BE5 		str	r2, [fp, #-40]
 2725 0018 2C300BE5 		str	r3, [fp, #-44]
1914:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
1915:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
1916:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Kom* Kom_Op;
1917:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Cpt* Cpt_Crt;
1918:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
1919:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Vaddr;
1920:../../Source/Kernel/rme_kernel.c **** 
1921:../../Source/Kernel/rme_kernel.c ****     /* See if the entry number is too big */
1922:../../Source/Kernel/rme_kernel.c ****     if((Entry_Num==0U)||(Entry_Num>RME_CID_2L))
 2726              		.loc 1 1922 7
 2727 001c 08309BE5 		ldr	r3, [fp, #8]
 2728 0020 000053E3 		cmp	r3, #0
 2729 0024 0200000A 		beq	.L165
 2730              		.loc 1 1922 23 discriminator 1
 2731 0028 08309BE5 		ldr	r3, [fp, #8]
 2732 002c 800053E3 		cmp	r3, #128
 2733 0030 0100009A 		bls	.L166
 2734              	.L165:
1923:../../Source/Kernel/rme_kernel.c ****     {
1924:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1925:../../Source/Kernel/rme_kernel.c ****         
1926:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_RANGE;
 2735              		.loc 1 1926 16
 2736 0034 0230E0E3 		mvn	r3, #2
 2737 0038 3D0100EA 		b	.L167
 2738              	.L166:
1927:../../Source/Kernel/rme_kernel.c ****     }
1928:../../Source/Kernel/rme_kernel.c ****     else
1929:../../Source/Kernel/rme_kernel.c ****     {
1930:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1931:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1932:../../Source/Kernel/rme_kernel.c ****     }
1933:../../Source/Kernel/rme_kernel.c **** 
1934:../../Source/Kernel/rme_kernel.c ****     /* Are we overrunning the size limit? */
1935:../../Source/Kernel/rme_kernel.c **** #if(RME_CPT_ENTRY_MAX!=0U)
1936:../../Source/Kernel/rme_kernel.c ****     if(Entry_Num>RME_CPT_ENTRY_MAX)
1937:../../Source/Kernel/rme_kernel.c ****     {
1938:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1939:../../Source/Kernel/rme_kernel.c ****         
1940:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_RANGE;
1941:../../Source/Kernel/rme_kernel.c ****     }
1942:../../Source/Kernel/rme_kernel.c ****     else
1943:../../Source/Kernel/rme_kernel.c ****     {
1944:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1945:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1946:../../Source/Kernel/rme_kernel.c ****     }
1947:../../Source/Kernel/rme_kernel.c **** #endif
1948:../../Source/Kernel/rme_kernel.c **** 
1949:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
1950:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Crt,RME_CAP_TYPE_CPT,
 2739              		.loc 1 1950 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 84


 2740 003c 24301BE5 		ldr	r3, [fp, #-36]
 2741 0040 803003E2 		and	r3, r3, #128
 2742 0044 000053E3 		cmp	r3, #0
 2743 0048 1C00001A 		bne	.L168
 2744              		.loc 1 1950 5 is_stmt 0 discriminator 1
 2745 004c 20301BE5 		ldr	r3, [fp, #-32]
 2746 0050 142093E5 		ldr	r2, [r3, #20]
 2747 0054 24301BE5 		ldr	r3, [fp, #-36]
 2748 0058 030052E1 		cmp	r2, r3
 2749 005c 0100008A 		bhi	.L169
 2750              		.loc 1 1950 5 discriminator 3
 2751 0060 0230E0E3 		mvn	r3, #2
 2752              		.loc 1 1950 5
 2753 0064 320100EA 		b	.L167
 2754              	.L169:
 2755              		.loc 1 1950 5 discriminator 4
 2756 0068 24301BE5 		ldr	r3, [fp, #-36]
 2757 006c 8322A0E1 		lsl	r2, r3, #5
 2758 0070 20301BE5 		ldr	r3, [fp, #-32]
 2759 0074 0C3093E5 		ldr	r3, [r3, #12]
 2760 0078 033082E0 		add	r3, r2, r3
 2761 007c 0C300BE5 		str	r3, [fp, #-12]
 2762 0080 0C301BE5 		ldr	r3, [fp, #-12]
 2763 0084 0300A0E1 		mov	r0, r3
 2764 0088 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2765 008c 14000BE5 		str	r0, [fp, #-20]
 2766              		.loc 1 1950 5 discriminator 1
 2767 0090 14301BE5 		ldr	r3, [fp, #-20]
 2768 0094 FF3803E2 		and	r3, r3, #16711680
 2769 0098 020853E3 		cmp	r3, #131072
 2770 009c 0100001A 		bne	.L170
 2771              		.loc 1 1950 5 discriminator 5
 2772 00a0 0830E0E3 		mvn	r3, #8
 2773              		.loc 1 1950 5
 2774 00a4 220100EA 		b	.L167
 2775              	.L170:
 2776              		.loc 1 1950 5 discriminator 6
 2777 00a8 14301BE5 		ldr	r3, [fp, #-20]
 2778 00ac 233CA0E1 		lsr	r3, r3, #24
 2779 00b0 030053E3 		cmp	r3, #3
 2780 00b4 3F00000A 		beq	.L171
 2781              		.loc 1 1950 5 discriminator 7
 2782 00b8 0130E0E3 		mvn	r3, #1
 2783              		.loc 1 1950 5
 2784 00bc 1C0100EA 		b	.L167
 2785              	.L168:
 2786              		.loc 1 1950 5 discriminator 2
 2787 00c0 24301BE5 		ldr	r3, [fp, #-36]
 2788 00c4 2324A0E1 		lsr	r2, r3, #8
 2789 00c8 20301BE5 		ldr	r3, [fp, #-32]
 2790 00cc 143093E5 		ldr	r3, [r3, #20]
 2791 00d0 030052E1 		cmp	r2, r3
 2792 00d4 0100003A 		bcc	.L172
 2793              		.loc 1 1950 5 discriminator 8
 2794 00d8 0230E0E3 		mvn	r3, #2
 2795              		.loc 1 1950 5
 2796 00dc 140100EA 		b	.L167
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 85


 2797              	.L172:
 2798              		.loc 1 1950 5 discriminator 9
 2799 00e0 24301BE5 		ldr	r3, [fp, #-36]
 2800 00e4 2334A0E1 		lsr	r3, r3, #8
 2801 00e8 8322A0E1 		lsl	r2, r3, #5
 2802 00ec 20301BE5 		ldr	r3, [fp, #-32]
 2803 00f0 0C3093E5 		ldr	r3, [r3, #12]
 2804 00f4 033082E0 		add	r3, r2, r3
 2805 00f8 0C300BE5 		str	r3, [fp, #-12]
 2806 00fc 0C301BE5 		ldr	r3, [fp, #-12]
 2807 0100 0300A0E1 		mov	r0, r3
 2808 0104 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2809 0108 14000BE5 		str	r0, [fp, #-20]
 2810              		.loc 1 1950 5 discriminator 1
 2811 010c 14301BE5 		ldr	r3, [fp, #-20]
 2812 0110 FF3803E2 		and	r3, r3, #16711680
 2813 0114 020853E3 		cmp	r3, #131072
 2814 0118 0100001A 		bne	.L173
 2815              		.loc 1 1950 5 discriminator 10
 2816 011c 0830E0E3 		mvn	r3, #8
 2817              		.loc 1 1950 5
 2818 0120 030100EA 		b	.L167
 2819              	.L173:
 2820              		.loc 1 1950 5 discriminator 11
 2821 0124 14301BE5 		ldr	r3, [fp, #-20]
 2822 0128 233CA0E1 		lsr	r3, r3, #24
 2823 012c 030053E3 		cmp	r3, #3
 2824 0130 0100000A 		beq	.L174
 2825              		.loc 1 1950 5 discriminator 12
 2826 0134 0130E0E3 		mvn	r3, #1
 2827              		.loc 1 1950 5
 2828 0138 FD0000EA 		b	.L167
 2829              	.L174:
 2830              		.loc 1 1950 5 discriminator 13
 2831 013c 24301BE5 		ldr	r3, [fp, #-36]
 2832 0140 7F2003E2 		and	r2, r3, #127
 2833 0144 0C301BE5 		ldr	r3, [fp, #-12]
 2834 0148 143093E5 		ldr	r3, [r3, #20]
 2835 014c 030052E1 		cmp	r2, r3
 2836 0150 0100003A 		bcc	.L175
 2837              		.loc 1 1950 5 discriminator 14
 2838 0154 0230E0E3 		mvn	r3, #2
 2839              		.loc 1 1950 5
 2840 0158 F50000EA 		b	.L167
 2841              	.L175:
 2842              		.loc 1 1950 5 discriminator 15
 2843 015c 24301BE5 		ldr	r3, [fp, #-36]
 2844 0160 7F3003E2 		and	r3, r3, #127
 2845 0164 8322A0E1 		lsl	r2, r3, #5
 2846 0168 0C301BE5 		ldr	r3, [fp, #-12]
 2847 016c 0C3093E5 		ldr	r3, [r3, #12]
 2848 0170 033082E0 		add	r3, r2, r3
 2849 0174 0C300BE5 		str	r3, [fp, #-12]
 2850 0178 0C301BE5 		ldr	r3, [fp, #-12]
 2851 017c 0300A0E1 		mov	r0, r3
 2852 0180 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2853 0184 14000BE5 		str	r0, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 86


 2854              		.loc 1 1950 5 discriminator 1
 2855 0188 14301BE5 		ldr	r3, [fp, #-20]
 2856 018c FF3803E2 		and	r3, r3, #16711680
 2857 0190 020853E3 		cmp	r3, #131072
 2858 0194 0100001A 		bne	.L176
 2859              		.loc 1 1950 5 discriminator 16
 2860 0198 0830E0E3 		mvn	r3, #8
 2861              		.loc 1 1950 5
 2862 019c E40000EA 		b	.L167
 2863              	.L176:
 2864              		.loc 1 1950 5 discriminator 17
 2865 01a0 14301BE5 		ldr	r3, [fp, #-20]
 2866 01a4 233CA0E1 		lsr	r3, r3, #24
 2867 01a8 030053E3 		cmp	r3, #3
 2868 01ac 0100000A 		beq	.L171
 2869              		.loc 1 1950 5 discriminator 18
 2870 01b0 0130E0E3 		mvn	r3, #1
 2871              		.loc 1 1950 5
 2872 01b4 DE0000EA 		b	.L167
 2873              	.L171:
1951:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
1952:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Kom,RME_CAP_TYPE_KOM,
 2874              		.loc 1 1952 5 is_stmt 1
 2875 01b8 28301BE5 		ldr	r3, [fp, #-40]
 2876 01bc 803003E2 		and	r3, r3, #128
 2877 01c0 000053E3 		cmp	r3, #0
 2878 01c4 1C00001A 		bne	.L177
 2879              		.loc 1 1952 5 is_stmt 0 discriminator 1
 2880 01c8 20301BE5 		ldr	r3, [fp, #-32]
 2881 01cc 142093E5 		ldr	r2, [r3, #20]
 2882 01d0 28301BE5 		ldr	r3, [fp, #-40]
 2883 01d4 030052E1 		cmp	r2, r3
 2884 01d8 0100008A 		bhi	.L178
 2885              		.loc 1 1952 5 discriminator 3
 2886 01dc 0230E0E3 		mvn	r3, #2
 2887              		.loc 1 1952 5
 2888 01e0 D30000EA 		b	.L167
 2889              	.L178:
 2890              		.loc 1 1952 5 discriminator 4
 2891 01e4 28301BE5 		ldr	r3, [fp, #-40]
 2892 01e8 8322A0E1 		lsl	r2, r3, #5
 2893 01ec 20301BE5 		ldr	r3, [fp, #-32]
 2894 01f0 0C3093E5 		ldr	r3, [r3, #12]
 2895 01f4 033082E0 		add	r3, r2, r3
 2896 01f8 10300BE5 		str	r3, [fp, #-16]
 2897 01fc 10301BE5 		ldr	r3, [fp, #-16]
 2898 0200 0300A0E1 		mov	r0, r3
 2899 0204 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2900 0208 14000BE5 		str	r0, [fp, #-20]
 2901              		.loc 1 1952 5 discriminator 1
 2902 020c 14301BE5 		ldr	r3, [fp, #-20]
 2903 0210 FF3803E2 		and	r3, r3, #16711680
 2904 0214 020853E3 		cmp	r3, #131072
 2905 0218 0100001A 		bne	.L179
 2906              		.loc 1 1952 5 discriminator 5
 2907 021c 0830E0E3 		mvn	r3, #8
 2908              		.loc 1 1952 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 87


 2909 0220 C30000EA 		b	.L167
 2910              	.L179:
 2911              		.loc 1 1952 5 discriminator 6
 2912 0224 14301BE5 		ldr	r3, [fp, #-20]
 2913 0228 233CA0E1 		lsr	r3, r3, #24
 2914 022c 020053E3 		cmp	r3, #2
 2915 0230 3F00000A 		beq	.L180
 2916              		.loc 1 1952 5 discriminator 7
 2917 0234 0130E0E3 		mvn	r3, #1
 2918              		.loc 1 1952 5
 2919 0238 BD0000EA 		b	.L167
 2920              	.L177:
 2921              		.loc 1 1952 5 discriminator 2
 2922 023c 28301BE5 		ldr	r3, [fp, #-40]
 2923 0240 2324A0E1 		lsr	r2, r3, #8
 2924 0244 20301BE5 		ldr	r3, [fp, #-32]
 2925 0248 143093E5 		ldr	r3, [r3, #20]
 2926 024c 030052E1 		cmp	r2, r3
 2927 0250 0100003A 		bcc	.L181
 2928              		.loc 1 1952 5 discriminator 8
 2929 0254 0230E0E3 		mvn	r3, #2
 2930              		.loc 1 1952 5
 2931 0258 B50000EA 		b	.L167
 2932              	.L181:
 2933              		.loc 1 1952 5 discriminator 9
 2934 025c 28301BE5 		ldr	r3, [fp, #-40]
 2935 0260 2334A0E1 		lsr	r3, r3, #8
 2936 0264 8322A0E1 		lsl	r2, r3, #5
 2937 0268 20301BE5 		ldr	r3, [fp, #-32]
 2938 026c 0C3093E5 		ldr	r3, [r3, #12]
 2939 0270 033082E0 		add	r3, r2, r3
 2940 0274 10300BE5 		str	r3, [fp, #-16]
 2941 0278 10301BE5 		ldr	r3, [fp, #-16]
 2942 027c 0300A0E1 		mov	r0, r3
 2943 0280 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2944 0284 14000BE5 		str	r0, [fp, #-20]
 2945              		.loc 1 1952 5 discriminator 1
 2946 0288 14301BE5 		ldr	r3, [fp, #-20]
 2947 028c FF3803E2 		and	r3, r3, #16711680
 2948 0290 020853E3 		cmp	r3, #131072
 2949 0294 0100001A 		bne	.L182
 2950              		.loc 1 1952 5 discriminator 10
 2951 0298 0830E0E3 		mvn	r3, #8
 2952              		.loc 1 1952 5
 2953 029c A40000EA 		b	.L167
 2954              	.L182:
 2955              		.loc 1 1952 5 discriminator 11
 2956 02a0 14301BE5 		ldr	r3, [fp, #-20]
 2957 02a4 233CA0E1 		lsr	r3, r3, #24
 2958 02a8 030053E3 		cmp	r3, #3
 2959 02ac 0100000A 		beq	.L183
 2960              		.loc 1 1952 5 discriminator 12
 2961 02b0 0130E0E3 		mvn	r3, #1
 2962              		.loc 1 1952 5
 2963 02b4 9E0000EA 		b	.L167
 2964              	.L183:
 2965              		.loc 1 1952 5 discriminator 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 88


 2966 02b8 28301BE5 		ldr	r3, [fp, #-40]
 2967 02bc 7F2003E2 		and	r2, r3, #127
 2968 02c0 10301BE5 		ldr	r3, [fp, #-16]
 2969 02c4 143093E5 		ldr	r3, [r3, #20]
 2970 02c8 030052E1 		cmp	r2, r3
 2971 02cc 0100003A 		bcc	.L184
 2972              		.loc 1 1952 5 discriminator 14
 2973 02d0 0230E0E3 		mvn	r3, #2
 2974              		.loc 1 1952 5
 2975 02d4 960000EA 		b	.L167
 2976              	.L184:
 2977              		.loc 1 1952 5 discriminator 15
 2978 02d8 28301BE5 		ldr	r3, [fp, #-40]
 2979 02dc 7F3003E2 		and	r3, r3, #127
 2980 02e0 8322A0E1 		lsl	r2, r3, #5
 2981 02e4 10301BE5 		ldr	r3, [fp, #-16]
 2982 02e8 0C3093E5 		ldr	r3, [r3, #12]
 2983 02ec 033082E0 		add	r3, r2, r3
 2984 02f0 10300BE5 		str	r3, [fp, #-16]
 2985 02f4 10301BE5 		ldr	r3, [fp, #-16]
 2986 02f8 0300A0E1 		mov	r0, r3
 2987 02fc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 2988 0300 14000BE5 		str	r0, [fp, #-20]
 2989              		.loc 1 1952 5 discriminator 1
 2990 0304 14301BE5 		ldr	r3, [fp, #-20]
 2991 0308 FF3803E2 		and	r3, r3, #16711680
 2992 030c 020853E3 		cmp	r3, #131072
 2993 0310 0100001A 		bne	.L185
 2994              		.loc 1 1952 5 discriminator 16
 2995 0314 0830E0E3 		mvn	r3, #8
 2996              		.loc 1 1952 5
 2997 0318 850000EA 		b	.L167
 2998              	.L185:
 2999              		.loc 1 1952 5 discriminator 17
 3000 031c 14301BE5 		ldr	r3, [fp, #-20]
 3001 0320 233CA0E1 		lsr	r3, r3, #24
 3002 0324 020053E3 		cmp	r3, #2
 3003 0328 0100000A 		beq	.L180
 3004              		.loc 1 1952 5 discriminator 18
 3005 032c 0130E0E3 		mvn	r3, #1
 3006              		.loc 1 1952 5
 3007 0330 7F0000EA 		b	.L167
 3008              	.L180:
1953:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Kom*,Kom_Op,Type_Stat);
1954:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
1955:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 3009              		.loc 1 1955 5 is_stmt 1
 3010 0334 0C301BE5 		ldr	r3, [fp, #-12]
 3011 0338 083093E5 		ldr	r3, [r3, #8]
 3012 033c 013003E2 		and	r3, r3, #1
 3013 0340 000053E3 		cmp	r3, #0
 3014 0344 0100001A 		bne	.L186
 3015              		.loc 1 1955 5 is_stmt 0 discriminator 1
 3016 0348 0630E0E3 		mvn	r3, #6
 3017              		.loc 1 1955 5
 3018 034c 780000EA 		b	.L167
 3019              	.L186:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 89


1956:../../Source/Kernel/rme_kernel.c ****     /* See if the creation is valid for this kmem range */
1957:../../Source/Kernel/rme_kernel.c ****     RME_KOM_CHECK(Kom_Op,RME_KOM_FLAG_CPT,Raddr,Vaddr,RME_CPT_SIZE(Entry_Num));
 3020              		.loc 1 1957 5 is_stmt 1
 3021 0350 10301BE5 		ldr	r3, [fp, #-16]
 3022 0354 083093E5 		ldr	r3, [r3, #8]
 3023 0358 013003E2 		and	r3, r3, #1
 3024 035c 000053E3 		cmp	r3, #0
 3025 0360 0100001A 		bne	.L187
 3026              		.loc 1 1957 5 is_stmt 0 discriminator 1
 3027 0364 0630E0E3 		mvn	r3, #6
 3028              		.loc 1 1957 5
 3029 0368 710000EA 		b	.L167
 3030              	.L187:
 3031              		.loc 1 1957 5 discriminator 2
 3032 036c 10301BE5 		ldr	r3, [fp, #-16]
 3033 0370 143093E5 		ldr	r3, [r3, #20]
 3034 0374 04209BE5 		ldr	r2, [fp, #4]
 3035 0378 033082E0 		add	r3, r2, r3
 3036 037c 18300BE5 		str	r3, [fp, #-24]
 3037 0380 18201BE5 		ldr	r2, [fp, #-24]
 3038 0384 04309BE5 		ldr	r3, [fp, #4]
 3039 0388 030052E1 		cmp	r2, r3
 3040 038c 0100002A 		bcs	.L188
 3041              		.loc 1 1957 5 discriminator 3
 3042 0390 0630E0E3 		mvn	r3, #6
 3043              		.loc 1 1957 5
 3044 0394 660000EA 		b	.L167
 3045              	.L188:
 3046              		.loc 1 1957 5 discriminator 4
 3047 0398 10301BE5 		ldr	r3, [fp, #-16]
 3048 039c 143093E5 		ldr	r3, [r3, #20]
 3049 03a0 18201BE5 		ldr	r2, [fp, #-24]
 3050 03a4 030052E1 		cmp	r2, r3
 3051 03a8 0100002A 		bcs	.L189
 3052              		.loc 1 1957 5 discriminator 5
 3053 03ac 0630E0E3 		mvn	r3, #6
 3054              		.loc 1 1957 5
 3055 03b0 5F0000EA 		b	.L167
 3056              	.L189:
 3057              		.loc 1 1957 5 discriminator 6
 3058 03b4 08309BE5 		ldr	r3, [fp, #8]
 3059 03b8 8322A0E1 		lsl	r2, r3, #5
 3060 03bc 18301BE5 		ldr	r3, [fp, #-24]
 3061 03c0 033082E0 		add	r3, r2, r3
 3062 03c4 18201BE5 		ldr	r2, [fp, #-24]
 3063 03c8 030052E1 		cmp	r2, r3
 3064 03cc 0100009A 		bls	.L190
 3065              		.loc 1 1957 5 discriminator 7
 3066 03d0 0630E0E3 		mvn	r3, #6
 3067              		.loc 1 1957 5
 3068 03d4 560000EA 		b	.L167
 3069              	.L190:
 3070              		.loc 1 1957 5 discriminator 8
 3071 03d8 10301BE5 		ldr	r3, [fp, #-16]
 3072 03dc 182093E5 		ldr	r2, [r3, #24]
 3073 03e0 08309BE5 		ldr	r3, [fp, #8]
 3074 03e4 8312A0E1 		lsl	r1, r3, #5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 90


 3075 03e8 18301BE5 		ldr	r3, [fp, #-24]
 3076 03ec 033081E0 		add	r3, r1, r3
 3077 03f0 013043E2 		sub	r3, r3, #1
 3078 03f4 030052E1 		cmp	r2, r3
 3079 03f8 0100002A 		bcs	.L191
 3080              		.loc 1 1957 5 discriminator 9
 3081 03fc 0630E0E3 		mvn	r3, #6
 3082              		.loc 1 1957 5
 3083 0400 4B0000EA 		b	.L167
 3084              	.L191:
1958:../../Source/Kernel/rme_kernel.c **** 
1959:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
1960:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Crt,struct RME_Cap_Cpt*,Cpt_Crt);
 3085              		.loc 1 1960 5 is_stmt 1
 3086 0404 0C301BE5 		ldr	r3, [fp, #-12]
 3087 0408 142093E5 		ldr	r2, [r3, #20]
 3088 040c 2C301BE5 		ldr	r3, [fp, #-44]
 3089 0410 030052E1 		cmp	r2, r3
 3090 0414 0100008A 		bhi	.L192
 3091              		.loc 1 1960 5 is_stmt 0 discriminator 1
 3092 0418 0230E0E3 		mvn	r3, #2
 3093              		.loc 1 1960 5
 3094 041c 440000EA 		b	.L167
 3095              	.L192:
 3096              		.loc 1 1960 5 discriminator 2
 3097 0420 2C301BE5 		ldr	r3, [fp, #-44]
 3098 0424 8322A0E1 		lsl	r2, r3, #5
 3099 0428 0C301BE5 		ldr	r3, [fp, #-12]
 3100 042c 0C3093E5 		ldr	r3, [r3, #12]
 3101 0430 033082E0 		add	r3, r2, r3
 3102 0434 1C300BE5 		str	r3, [fp, #-28]
1961:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
1962:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Cpt_Crt);
 3103              		.loc 1 1962 5 is_stmt 1
 3104 0438 1C301BE5 		ldr	r3, [fp, #-28]
 3105 043c 0128A0E3 		mov	r2, #65536
 3106 0440 0010A0E3 		mov	r1, #0
 3107 0444 0300A0E1 		mov	r0, r3
 3108 0448 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 3109 044c 0030A0E1 		mov	r3, r0
 3110              		.loc 1 1962 5 is_stmt 0 discriminator 1
 3111 0450 000053E3 		cmp	r3, #0
 3112 0454 0100001A 		bne	.L193
 3113 0458 0430E0E3 		mvn	r3, #4
 3114              		.loc 1 1962 5
 3115 045c 340000EA 		b	.L167
 3116              	.L193:
 3117              		.loc 1 1962 5 discriminator 2
 3118 0460 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 3119 0464 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 3120 0468 002093E5 		ldr	r2, [r3]
 3121 046c 1C301BE5 		ldr	r3, [fp, #-28]
 3122 0470 102083E5 		str	r2, [r3, #16]
1963:../../Source/Kernel/rme_kernel.c **** 
1964:../../Source/Kernel/rme_kernel.c ****     /* Try to mark this area as populated */
1965:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,RME_CPT_SIZE(Entry_Num))<0)
 3123              		.loc 1 1965 8 is_stmt 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 91


 3124 0474 08309BE5 		ldr	r3, [fp, #8]
 3125 0478 8332A0E1 		lsl	r3, r3, #5
 3126 047c 0310A0E1 		mov	r1, r3
 3127 0480 18001BE5 		ldr	r0, [fp, #-24]
 3128 0484 FEFFFFEB 		bl	_RME_Kot_Mark
 3129 0488 0030A0E1 		mov	r3, r0
 3130              		.loc 1 1965 7 discriminator 1
 3131 048c 000053E3 		cmp	r3, #0
 3132 0490 050000AA 		bge	.L194
1966:../../Source/Kernel/rme_kernel.c ****     {
1967:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1968:../../Source/Kernel/rme_kernel.c ****         
1969:../../Source/Kernel/rme_kernel.c ****         /* Failure. Set the Type_Stat back to 0 and abort the creation process */
1970:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Cpt_Crt->Head.Type_Stat),0U);
 3133              		.loc 1 1970 9
 3134 0494 1C301BE5 		ldr	r3, [fp, #-28]
 3135 0498 0010A0E3 		mov	r1, #0
 3136 049c 0300A0E1 		mov	r0, r3
 3137 04a0 FEFFFFEB 		bl	__RME_A7A_Write_Release
1971:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 3138              		.loc 1 1971 16
 3139 04a4 0330E0E3 		mvn	r3, #3
 3140 04a8 210000EA 		b	.L167
 3141              	.L194:
1972:../../Source/Kernel/rme_kernel.c ****     }
1973:../../Source/Kernel/rme_kernel.c ****     else
1974:../../Source/Kernel/rme_kernel.c ****     {
1975:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
1976:../../Source/Kernel/rme_kernel.c ****         /* No action required */
1977:../../Source/Kernel/rme_kernel.c ****     }
1978:../../Source/Kernel/rme_kernel.c **** 
1979:../../Source/Kernel/rme_kernel.c ****     /* Object init */
1980:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Entry_Num;Count++)
 3142              		.loc 1 1980 14
 3143 04ac 0030A0E3 		mov	r3, #0
 3144 04b0 08300BE5 		str	r3, [fp, #-8]
 3145              		.loc 1 1980 5
 3146 04b4 090000EA 		b	.L195
 3147              	.L196:
1981:../../Source/Kernel/rme_kernel.c ****     {
1982:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CLEAR(&(((struct RME_Cap_Struct*)Vaddr)[Count]));
 3148              		.loc 1 1982 9
 3149 04b8 08301BE5 		ldr	r3, [fp, #-8]
 3150 04bc 8322A0E1 		lsl	r2, r3, #5
 3151 04c0 18301BE5 		ldr	r3, [fp, #-24]
 3152 04c4 033082E0 		add	r3, r2, r3
 3153 04c8 0320A0E1 		mov	r2, r3
 3154 04cc 0030A0E3 		mov	r3, #0
 3155 04d0 003082E5 		str	r3, [r2]
1980:../../Source/Kernel/rme_kernel.c ****     {
 3156              		.loc 1 1980 39 discriminator 3
 3157 04d4 08301BE5 		ldr	r3, [fp, #-8]
 3158 04d8 013083E2 		add	r3, r3, #1
 3159 04dc 08300BE5 		str	r3, [fp, #-8]
 3160              	.L195:
1980:../../Source/Kernel/rme_kernel.c ****     {
 3161              		.loc 1 1980 23 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 92


 3162 04e0 08201BE5 		ldr	r2, [fp, #-8]
 3163 04e4 08309BE5 		ldr	r3, [fp, #8]
 3164 04e8 030052E1 		cmp	r2, r3
 3165 04ec F1FFFF3A 		bcc	.L196
1983:../../Source/Kernel/rme_kernel.c ****     }
1984:../../Source/Kernel/rme_kernel.c **** 
1985:../../Source/Kernel/rme_kernel.c ****     /* Header init */
1986:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Root_Ref=0U;
 3166              		.loc 1 1986 27
 3167 04f0 1C301BE5 		ldr	r3, [fp, #-28]
 3168 04f4 0020A0E3 		mov	r2, #0
 3169 04f8 042083E5 		str	r2, [r3, #4]
1987:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Object=Vaddr;
 3170              		.loc 1 1987 25
 3171 04fc 1C301BE5 		ldr	r3, [fp, #-28]
 3172 0500 18201BE5 		ldr	r2, [fp, #-24]
 3173 0504 0C2083E5 		str	r2, [r3, #12]
1988:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Head.Flag=RME_CPT_FLAG_ALL;
 3174              		.loc 1 1988 23
 3175 0508 1C301BE5 		ldr	r3, [fp, #-28]
 3176 050c FF20A0E3 		mov	r2, #255
 3177 0510 082083E5 		str	r2, [r3, #8]
1989:../../Source/Kernel/rme_kernel.c ****     
1990:../../Source/Kernel/rme_kernel.c ****     /* Info init */
1991:../../Source/Kernel/rme_kernel.c ****     Cpt_Crt->Entry_Num=Entry_Num;
 3178              		.loc 1 1991 23
 3179 0514 1C301BE5 		ldr	r3, [fp, #-28]
 3180 0518 08209BE5 		ldr	r2, [fp, #8]
 3181 051c 142083E5 		str	r2, [r3, #20]
1992:../../Source/Kernel/rme_kernel.c **** 
1993:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
1994:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Cpt_Crt->Head.Type_Stat),
 3182              		.loc 1 1994 5
 3183 0520 1C301BE5 		ldr	r3, [fp, #-28]
 3184 0524 0314A0E3 		mov	r1, #50331648
 3185 0528 0300A0E1 		mov	r0, r3
 3186 052c FEFFFFEB 		bl	__RME_A7A_Write_Release
1995:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_CPT,
1996:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
1997:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
1998:../../Source/Kernel/rme_kernel.c **** 
1999:../../Source/Kernel/rme_kernel.c ****     return 0;
 3187              		.loc 1 1999 12
 3188 0530 0030A0E3 		mov	r3, #0
 3189              	.L167:
2000:../../Source/Kernel/rme_kernel.c **** }
 3190              		.loc 1 2000 1
 3191 0534 0300A0E1 		mov	r0, r3
 3192 0538 04D04BE2 		sub	sp, fp, #4
 3193              		.cfi_def_cfa 13, 8
 3194              		@ sp needed
 3195 053c 0088BDE8 		pop	{fp, pc}
 3196              		.cfi_endproc
 3197              	.LFE24:
 3199              		.section	.rodata
 3200              		.align	2
 3201              	.LC6:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 93


 3202 003c 32323A30 		.ascii	"22:00:42\000"
 3202      303A3432 
 3202      00
 3203 0045 000000   		.align	2
 3204              	.LC7:
 3205 0048 4D617220 		.ascii	"Mar  5 2025\000"
 3205      20352032 
 3205      30323500 
 3206              		.align	2
 3207              	.LC8:
 3208 0054 2E2E2F2E 		.ascii	"../../Source/Kernel/rme_kernel.c\000"
 3208      2E2F536F 
 3208      75726365 
 3208      2F4B6572 
 3208      6E656C2F 
 3209              		.section	.text._RME_Cpt_Del,"ax",%progbits
 3210              		.align	2
 3211              		.syntax unified
 3212              		.arm
 3214              	_RME_Cpt_Del:
 3215              	.LFB25:
2001:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Crt *************************************************/
2002:../../Source/Kernel/rme_kernel.c **** 
2003:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Del ******************************************************
2004:../../Source/Kernel/rme_kernel.c **** Description : Delete a layer of capability table.
2005:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2006:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Del - The capability table that contains the
2007:../../Source/Kernel/rme_kernel.c ****                                       cap to captbl.
2008:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
2009:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Del - The capability to the capability table to be
2010:../../Source/Kernel/rme_kernel.c ****                                   deleted.
2011:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2012:../../Source/Kernel/rme_kernel.c **** Output      : None.
2013:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2014:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2015:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Cpt_Del(struct RME_Cap_Cpt* Cpt,
2016:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Del,
2017:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Del)
2018:../../Source/Kernel/rme_kernel.c **** {
 3216              		.loc 1 2018 1
 3217              		.cfi_startproc
 3218              		@ args = 0, pretend = 0, frame = 48
 3219              		@ frame_needed = 1, uses_anonymous_args = 0
 3220 0000 00482DE9 		push	{fp, lr}
 3221              		.cfi_def_cfa_offset 8
 3222              		.cfi_offset 11, -8
 3223              		.cfi_offset 14, -4
 3224 0004 04B08DE2 		add	fp, sp, #4
 3225              		.cfi_def_cfa 11, 4
 3226 0008 30D04DE2 		sub	sp, sp, #48
 3227 000c 28000BE5 		str	r0, [fp, #-40]
 3228 0010 2C100BE5 		str	r1, [fp, #-44]
 3229 0014 30200BE5 		str	r2, [fp, #-48]
2019:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
2020:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Entry_Num;
2021:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
2022:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Cpt* Cpt_Del;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 94


2023:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Struct* Table;
2024:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2025:../../Source/Kernel/rme_kernel.c ****     /* These are used for deletion */
2026:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Object;
2027:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Size;
2028:../../Source/Kernel/rme_kernel.c ****     
2029:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
2030:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Del,RME_CAP_TYPE_CPT,
 3230              		.loc 1 2030 5
 3231 0018 2C301BE5 		ldr	r3, [fp, #-44]
 3232 001c 803003E2 		and	r3, r3, #128
 3233 0020 000053E3 		cmp	r3, #0
 3234 0024 1C00001A 		bne	.L198
 3235              		.loc 1 2030 5 is_stmt 0 discriminator 1
 3236 0028 28301BE5 		ldr	r3, [fp, #-40]
 3237 002c 142093E5 		ldr	r2, [r3, #20]
 3238 0030 2C301BE5 		ldr	r3, [fp, #-44]
 3239 0034 030052E1 		cmp	r2, r3
 3240 0038 0100008A 		bhi	.L199
 3241              		.loc 1 2030 5 discriminator 3
 3242 003c 0230E0E3 		mvn	r3, #2
 3243              		.loc 1 2030 5
 3244 0040 E10000EA 		b	.L200
 3245              	.L199:
 3246              		.loc 1 2030 5 discriminator 4
 3247 0044 2C301BE5 		ldr	r3, [fp, #-44]
 3248 0048 8322A0E1 		lsl	r2, r3, #5
 3249 004c 28301BE5 		ldr	r3, [fp, #-40]
 3250 0050 0C3093E5 		ldr	r3, [r3, #12]
 3251 0054 033082E0 		add	r3, r2, r3
 3252 0058 0C300BE5 		str	r3, [fp, #-12]
 3253 005c 0C301BE5 		ldr	r3, [fp, #-12]
 3254 0060 0300A0E1 		mov	r0, r3
 3255 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3256 0068 10000BE5 		str	r0, [fp, #-16]
 3257              		.loc 1 2030 5 discriminator 1
 3258 006c 10301BE5 		ldr	r3, [fp, #-16]
 3259 0070 FF3803E2 		and	r3, r3, #16711680
 3260 0074 020853E3 		cmp	r3, #131072
 3261 0078 0100001A 		bne	.L201
 3262              		.loc 1 2030 5 discriminator 5
 3263 007c 0830E0E3 		mvn	r3, #8
 3264              		.loc 1 2030 5
 3265 0080 D10000EA 		b	.L200
 3266              	.L201:
 3267              		.loc 1 2030 5 discriminator 6
 3268 0084 10301BE5 		ldr	r3, [fp, #-16]
 3269 0088 233CA0E1 		lsr	r3, r3, #24
 3270 008c 030053E3 		cmp	r3, #3
 3271 0090 3F00000A 		beq	.L202
 3272              		.loc 1 2030 5 discriminator 7
 3273 0094 0130E0E3 		mvn	r3, #1
 3274              		.loc 1 2030 5
 3275 0098 CB0000EA 		b	.L200
 3276              	.L198:
 3277              		.loc 1 2030 5 discriminator 2
 3278 009c 2C301BE5 		ldr	r3, [fp, #-44]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 95


 3279 00a0 2324A0E1 		lsr	r2, r3, #8
 3280 00a4 28301BE5 		ldr	r3, [fp, #-40]
 3281 00a8 143093E5 		ldr	r3, [r3, #20]
 3282 00ac 030052E1 		cmp	r2, r3
 3283 00b0 0100003A 		bcc	.L203
 3284              		.loc 1 2030 5 discriminator 8
 3285 00b4 0230E0E3 		mvn	r3, #2
 3286              		.loc 1 2030 5
 3287 00b8 C30000EA 		b	.L200
 3288              	.L203:
 3289              		.loc 1 2030 5 discriminator 9
 3290 00bc 2C301BE5 		ldr	r3, [fp, #-44]
 3291 00c0 2334A0E1 		lsr	r3, r3, #8
 3292 00c4 8322A0E1 		lsl	r2, r3, #5
 3293 00c8 28301BE5 		ldr	r3, [fp, #-40]
 3294 00cc 0C3093E5 		ldr	r3, [r3, #12]
 3295 00d0 033082E0 		add	r3, r2, r3
 3296 00d4 0C300BE5 		str	r3, [fp, #-12]
 3297 00d8 0C301BE5 		ldr	r3, [fp, #-12]
 3298 00dc 0300A0E1 		mov	r0, r3
 3299 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3300 00e4 10000BE5 		str	r0, [fp, #-16]
 3301              		.loc 1 2030 5 discriminator 1
 3302 00e8 10301BE5 		ldr	r3, [fp, #-16]
 3303 00ec FF3803E2 		and	r3, r3, #16711680
 3304 00f0 020853E3 		cmp	r3, #131072
 3305 00f4 0100001A 		bne	.L204
 3306              		.loc 1 2030 5 discriminator 10
 3307 00f8 0830E0E3 		mvn	r3, #8
 3308              		.loc 1 2030 5
 3309 00fc B20000EA 		b	.L200
 3310              	.L204:
 3311              		.loc 1 2030 5 discriminator 11
 3312 0100 10301BE5 		ldr	r3, [fp, #-16]
 3313 0104 233CA0E1 		lsr	r3, r3, #24
 3314 0108 030053E3 		cmp	r3, #3
 3315 010c 0100000A 		beq	.L205
 3316              		.loc 1 2030 5 discriminator 12
 3317 0110 0130E0E3 		mvn	r3, #1
 3318              		.loc 1 2030 5
 3319 0114 AC0000EA 		b	.L200
 3320              	.L205:
 3321              		.loc 1 2030 5 discriminator 13
 3322 0118 2C301BE5 		ldr	r3, [fp, #-44]
 3323 011c 7F2003E2 		and	r2, r3, #127
 3324 0120 0C301BE5 		ldr	r3, [fp, #-12]
 3325 0124 143093E5 		ldr	r3, [r3, #20]
 3326 0128 030052E1 		cmp	r2, r3
 3327 012c 0100003A 		bcc	.L206
 3328              		.loc 1 2030 5 discriminator 14
 3329 0130 0230E0E3 		mvn	r3, #2
 3330              		.loc 1 2030 5
 3331 0134 A40000EA 		b	.L200
 3332              	.L206:
 3333              		.loc 1 2030 5 discriminator 15
 3334 0138 2C301BE5 		ldr	r3, [fp, #-44]
 3335 013c 7F3003E2 		and	r3, r3, #127
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 96


 3336 0140 8322A0E1 		lsl	r2, r3, #5
 3337 0144 0C301BE5 		ldr	r3, [fp, #-12]
 3338 0148 0C3093E5 		ldr	r3, [r3, #12]
 3339 014c 033082E0 		add	r3, r2, r3
 3340 0150 0C300BE5 		str	r3, [fp, #-12]
 3341 0154 0C301BE5 		ldr	r3, [fp, #-12]
 3342 0158 0300A0E1 		mov	r0, r3
 3343 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3344 0160 10000BE5 		str	r0, [fp, #-16]
 3345              		.loc 1 2030 5 discriminator 1
 3346 0164 10301BE5 		ldr	r3, [fp, #-16]
 3347 0168 FF3803E2 		and	r3, r3, #16711680
 3348 016c 020853E3 		cmp	r3, #131072
 3349 0170 0100001A 		bne	.L207
 3350              		.loc 1 2030 5 discriminator 16
 3351 0174 0830E0E3 		mvn	r3, #8
 3352              		.loc 1 2030 5
 3353 0178 930000EA 		b	.L200
 3354              	.L207:
 3355              		.loc 1 2030 5 discriminator 17
 3356 017c 10301BE5 		ldr	r3, [fp, #-16]
 3357 0180 233CA0E1 		lsr	r3, r3, #24
 3358 0184 030053E3 		cmp	r3, #3
 3359 0188 0100000A 		beq	.L202
 3360              		.loc 1 2030 5 discriminator 18
 3361 018c 0130E0E3 		mvn	r3, #1
 3362              		.loc 1 2030 5
 3363 0190 8D0000EA 		b	.L200
 3364              	.L202:
2031:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
2032:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
2033:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 3365              		.loc 1 2033 5 is_stmt 1
 3366 0194 0C301BE5 		ldr	r3, [fp, #-12]
 3367 0198 083093E5 		ldr	r3, [r3, #8]
 3368 019c 023003E2 		and	r3, r3, #2
 3369 01a0 000053E3 		cmp	r3, #0
 3370 01a4 0100001A 		bne	.L208
 3371              		.loc 1 2033 5 is_stmt 0 discriminator 1
 3372 01a8 0630E0E3 		mvn	r3, #6
 3373              		.loc 1 2033 5
 3374 01ac 860000EA 		b	.L200
 3375              	.L208:
2034:../../Source/Kernel/rme_kernel.c ****     
2035:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
2036:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Del,struct RME_Cap_Cpt*,Cpt_Del);
 3376              		.loc 1 2036 5 is_stmt 1
 3377 01b0 0C301BE5 		ldr	r3, [fp, #-12]
 3378 01b4 142093E5 		ldr	r2, [r3, #20]
 3379 01b8 30301BE5 		ldr	r3, [fp, #-48]
 3380 01bc 030052E1 		cmp	r2, r3
 3381 01c0 0100008A 		bhi	.L209
 3382              		.loc 1 2036 5 is_stmt 0 discriminator 1
 3383 01c4 0230E0E3 		mvn	r3, #2
 3384              		.loc 1 2036 5
 3385 01c8 7F0000EA 		b	.L200
 3386              	.L209:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 97


 3387              		.loc 1 2036 5 discriminator 2
 3388 01cc 30301BE5 		ldr	r3, [fp, #-48]
 3389 01d0 8322A0E1 		lsl	r2, r3, #5
 3390 01d4 0C301BE5 		ldr	r3, [fp, #-12]
 3391 01d8 0C3093E5 		ldr	r3, [r3, #12]
 3392 01dc 033082E0 		add	r3, r2, r3
 3393 01e0 14300BE5 		str	r3, [fp, #-20]
2037:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
2038:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Cpt_Del,Type_Stat,RME_CAP_TYPE_CPT);
 3394              		.loc 1 2038 5 is_stmt 1
 3395 01e4 14301BE5 		ldr	r3, [fp, #-20]
 3396 01e8 0300A0E1 		mov	r0, r3
 3397 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3398 01f0 10000BE5 		str	r0, [fp, #-16]
 3399              		.loc 1 2038 5 is_stmt 0 discriminator 1
 3400 01f4 10301BE5 		ldr	r3, [fp, #-16]
 3401 01f8 FF3803E2 		and	r3, r3, #16711680
 3402 01fc 020853E3 		cmp	r3, #131072
 3403 0200 0100000A 		beq	.L210
 3404 0204 0830E0E3 		mvn	r3, #8
 3405              		.loc 1 2038 5
 3406 0208 6F0000EA 		b	.L200
 3407              	.L210:
 3408              		.loc 1 2038 5 discriminator 2
 3409 020c 10301BE5 		ldr	r3, [fp, #-16]
 3410 0210 233CA0E1 		lsr	r3, r3, #24
 3411 0214 030053E3 		cmp	r3, #3
 3412 0218 0100000A 		beq	.L211
 3413              		.loc 1 2038 5 discriminator 3
 3414 021c 0130E0E3 		mvn	r3, #1
 3415              		.loc 1 2038 5
 3416 0220 690000EA 		b	.L200
 3417              	.L211:
 3418              		.loc 1 2038 5 discriminator 4
 3419 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 3420 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 3421 022c 002093E5 		ldr	r2, [r3]
 3422 0230 14301BE5 		ldr	r3, [fp, #-20]
 3423 0234 103093E5 		ldr	r3, [r3, #16]
 3424 0238 0310A0E1 		mov	r1, r3
 3425 023c 0200A0E1 		mov	r0, r2
 3426 0240 FEFFFFEB 		bl	_RME_Diff
 3427 0244 0030A0E1 		mov	r3, r0
 3428              		.loc 1 2038 5 discriminator 1
 3429 0248 0A0053E3 		cmp	r3, #10
 3430 024c 0100008A 		bhi	.L212
 3431              		.loc 1 2038 5 discriminator 5
 3432 0250 0730E0E3 		mvn	r3, #7
 3433              		.loc 1 2038 5
 3434 0254 5C0000EA 		b	.L200
 3435              	.L212:
 3436              		.loc 1 2038 5 discriminator 6
 3437 0258 14301BE5 		ldr	r3, [fp, #-20]
 3438 025c 043093E5 		ldr	r3, [r3, #4]
 3439 0260 000053E3 		cmp	r3, #0
 3440 0264 0B00000A 		beq	.L213
 3441              		.loc 1 2038 5 discriminator 7
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 98


 3442 0268 10301BE5 		ldr	r3, [fp, #-16]
 3443 026c 7330FFE6 		uxth	r3, r3
 3444 0270 000053E3 		cmp	r3, #0
 3445 0274 0500001A 		bne	.L214
 3446              		.loc 1 2038 5 discriminator 9
 3447 0278 14001BE5 		ldr	r0, [fp, #-20]
 3448 027c 10301BE5 		ldr	r3, [fp, #-16]
 3449 0280 FF38C3E3 		bic	r3, r3, #16711680
 3450 0284 0320A0E1 		mov	r2, r3
 3451 0288 10101BE5 		ldr	r1, [fp, #-16]
 3452 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 3453              	.L214:
 3454              		.loc 1 2038 5 discriminator 11
 3455 0290 0530E0E3 		mvn	r3, #5
 3456              		.loc 1 2038 5
 3457 0294 4C0000EA 		b	.L200
 3458              	.L213:
 3459              		.loc 1 2038 5 discriminator 8
 3460 0298 10301BE5 		ldr	r3, [fp, #-16]
 3461 029c 7330FFE6 		uxth	r3, r3
 3462 02a0 000053E3 		cmp	r3, #0
 3463 02a4 0800000A 		beq	.L215
 3464              		.loc 1 2038 5 discriminator 12
 3465 02a8 003000E3 		movw	r3, #:lower16:.LC6
 3466 02ac 003040E3 		movt	r3, #:upper16:.LC6
 3467 02b0 002000E3 		movw	r2, #:lower16:.LC7
 3468 02b4 002040E3 		movt	r2, #:upper16:.LC7
 3469 02b8 F61700E3 		movw	r1, #2038
 3470 02bc 000000E3 		movw	r0, #:lower16:.LC8
 3471 02c0 000040E3 		movt	r0, #:upper16:.LC8
 3472 02c4 FEFFFFEB 		bl	RME_Log
 3473              	.L216:
 3474              		.loc 1 2038 5
 3475 02c8 FEFFFFEA 		b	.L216
 3476              	.L215:
2039:../../Source/Kernel/rme_kernel.c ****     
2040:../../Source/Kernel/rme_kernel.c ****     /* Is there any capability in this capability table? If yes, we cannot destroy it.
2041:../../Source/Kernel/rme_kernel.c ****      * We will check every slot to make sure nothing is there. This is surely,
2042:../../Source/Kernel/rme_kernel.c ****      * predictable but not so perfect. So, if the time of such operations is to be 
2043:../../Source/Kernel/rme_kernel.c ****      * bounded, the user must control the maximum number of entries in the table
2044:../../Source/Kernel/rme_kernel.c ****      * by configuring RME_CPT_ENTRY_MAX to a non-zero value. */
2045:../../Source/Kernel/rme_kernel.c ****     Table=RME_CAP_GETOBJ(Cpt_Del,struct RME_Cap_Struct*);
 3477              		.loc 1 2045 11 is_stmt 1
 3478 02cc 14301BE5 		ldr	r3, [fp, #-20]
 3479 02d0 0C3093E5 		ldr	r3, [r3, #12]
 3480              		.loc 1 2045 10
 3481 02d4 18300BE5 		str	r3, [fp, #-24]
2046:../../Source/Kernel/rme_kernel.c ****     Entry_Num=Cpt_Del->Entry_Num;
 3482              		.loc 1 2046 14
 3483 02d8 14301BE5 		ldr	r3, [fp, #-20]
 3484 02dc 143093E5 		ldr	r3, [r3, #20]
 3485 02e0 1C300BE5 		str	r3, [fp, #-28]
2047:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Entry_Num;Count++)
 3486              		.loc 1 2047 14
 3487 02e4 0030A0E3 		mov	r3, #0
 3488 02e8 08300BE5 		str	r3, [fp, #-8]
 3489              		.loc 1 2047 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 99


 3490 02ec 110000EA 		b	.L217
 3491              	.L219:
2048:../../Source/Kernel/rme_kernel.c ****     {
2049:../../Source/Kernel/rme_kernel.c ****         if(Table[Count].Head.Type_Stat!=0U)
 3492              		.loc 1 2049 17
 3493 02f0 08301BE5 		ldr	r3, [fp, #-8]
 3494 02f4 8332A0E1 		lsl	r3, r3, #5
 3495 02f8 18201BE5 		ldr	r2, [fp, #-24]
 3496 02fc 033082E0 		add	r3, r2, r3
 3497              		.loc 1 2049 29
 3498 0300 003093E5 		ldr	r3, [r3]
 3499              		.loc 1 2049 11
 3500 0304 000053E3 		cmp	r3, #0
 3501 0308 0700000A 		beq	.L218
2050:../../Source/Kernel/rme_kernel.c ****         {
2051:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2052:../../Source/Kernel/rme_kernel.c ****             
2053:../../Source/Kernel/rme_kernel.c ****             RME_CAP_DEFROST(Cpt_Del,Type_Stat);
 3502              		.loc 1 2053 13
 3503 030c 14001BE5 		ldr	r0, [fp, #-20]
 3504 0310 10301BE5 		ldr	r3, [fp, #-16]
 3505 0314 FF38C3E3 		bic	r3, r3, #16711680
 3506 0318 0320A0E1 		mov	r2, r3
 3507 031c 10101BE5 		ldr	r1, [fp, #-16]
 3508 0320 FEFFFFEB 		bl	_RME_Comp_Swap_Single
2054:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_EXIST;
 3509              		.loc 1 2054 20
 3510 0324 0430E0E3 		mvn	r3, #4
 3511 0328 270000EA 		b	.L200
 3512              	.L218:
2047:../../Source/Kernel/rme_kernel.c ****     {
 3513              		.loc 1 2047 39 discriminator 2
 3514 032c 08301BE5 		ldr	r3, [fp, #-8]
 3515 0330 013083E2 		add	r3, r3, #1
 3516 0334 08300BE5 		str	r3, [fp, #-8]
 3517              	.L217:
2047:../../Source/Kernel/rme_kernel.c ****     {
 3518              		.loc 1 2047 23 discriminator 1
 3519 0338 08201BE5 		ldr	r2, [fp, #-8]
 3520 033c 1C301BE5 		ldr	r3, [fp, #-28]
 3521 0340 030052E1 		cmp	r2, r3
 3522 0344 E9FFFF3A 		bcc	.L219
2055:../../Source/Kernel/rme_kernel.c ****         }
2056:../../Source/Kernel/rme_kernel.c ****         else
2057:../../Source/Kernel/rme_kernel.c ****         {
2058:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2059:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2060:../../Source/Kernel/rme_kernel.c ****         }
2061:../../Source/Kernel/rme_kernel.c ****     }
2062:../../Source/Kernel/rme_kernel.c ****     
2063:../../Source/Kernel/rme_kernel.c ****     /* Remember these two variables for deletion */
2064:../../Source/Kernel/rme_kernel.c ****     Object=RME_CAP_GETOBJ(Cpt_Del,rme_ptr_t);
 3523              		.loc 1 2064 11
 3524 0348 14301BE5 		ldr	r3, [fp, #-20]
 3525 034c 0C3093E5 		ldr	r3, [r3, #12]
 3526 0350 20300BE5 		str	r3, [fp, #-32]
2065:../../Source/Kernel/rme_kernel.c ****     Size=RME_CPT_SIZE(Cpt_Del->Entry_Num);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 100


 3527              		.loc 1 2065 10
 3528 0354 14301BE5 		ldr	r3, [fp, #-20]
 3529 0358 143093E5 		ldr	r3, [r3, #20]
 3530              		.loc 1 2065 9
 3531 035c 8332A0E1 		lsl	r3, r3, #5
 3532 0360 24300BE5 		str	r3, [fp, #-36]
2066:../../Source/Kernel/rme_kernel.c **** 
2067:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
2068:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Cpt_Del,Type_Stat);
 3533              		.loc 1 2068 5
 3534 0364 14301BE5 		ldr	r3, [fp, #-20]
 3535 0368 0020A0E3 		mov	r2, #0
 3536 036c 10101BE5 		ldr	r1, [fp, #-16]
 3537 0370 0300A0E1 		mov	r0, r3
 3538 0374 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 3539 0378 0030A0E1 		mov	r3, r0
 3540              		.loc 1 2068 5 is_stmt 0 discriminator 1
 3541 037c 000053E3 		cmp	r3, #0
 3542 0380 0100001A 		bne	.L220
 3543 0384 0030E0E3 		mvn	r3, #0
 3544              		.loc 1 2068 5
 3545 0388 0F0000EA 		b	.L200
 3546              	.L220:
2069:../../Source/Kernel/rme_kernel.c **** 
2070:../../Source/Kernel/rme_kernel.c ****     /* Try to depopulate the area - this must be successful */
2071:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(_RME_Kot_Erase(Object,Size)==0);
 3547              		.loc 1 2071 5 is_stmt 1
 3548 038c 24101BE5 		ldr	r1, [fp, #-36]
 3549 0390 20001BE5 		ldr	r0, [fp, #-32]
 3550 0394 FEFFFFEB 		bl	_RME_Kot_Erase
 3551 0398 0030A0E1 		mov	r3, r0
 3552              		.loc 1 2071 5 is_stmt 0 discriminator 1
 3553 039c 000053E3 		cmp	r3, #0
 3554 03a0 0800000A 		beq	.L221
 3555 03a4 003000E3 		movw	r3, #:lower16:.LC6
 3556 03a8 003040E3 		movt	r3, #:upper16:.LC6
 3557 03ac 002000E3 		movw	r2, #:lower16:.LC7
 3558 03b0 002040E3 		movt	r2, #:upper16:.LC7
 3559 03b4 171800E3 		movw	r1, #2071
 3560 03b8 000000E3 		movw	r0, #:lower16:.LC8
 3561 03bc 000040E3 		movt	r0, #:upper16:.LC8
 3562 03c0 FEFFFFEB 		bl	RME_Log
 3563              	.L222:
 3564              		.loc 1 2071 5
 3565 03c4 FEFFFFEA 		b	.L222
 3566              	.L221:
2072:../../Source/Kernel/rme_kernel.c ****     
2073:../../Source/Kernel/rme_kernel.c ****     return 0;
 3567              		.loc 1 2073 12 is_stmt 1
 3568 03c8 0030A0E3 		mov	r3, #0
 3569              	.L200:
2074:../../Source/Kernel/rme_kernel.c **** }
 3570              		.loc 1 2074 1
 3571 03cc 0300A0E1 		mov	r0, r3
 3572 03d0 04D04BE2 		sub	sp, fp, #4
 3573              		.cfi_def_cfa 13, 8
 3574              		@ sp needed
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 101


 3575 03d4 0088BDE8 		pop	{fp, pc}
 3576              		.cfi_endproc
 3577              	.LFE25:
 3579              		.section	.text._RME_Cpt_Frz,"ax",%progbits
 3580              		.align	2
 3581              		.syntax unified
 3582              		.arm
 3584              	_RME_Cpt_Frz:
 3585              	.LFB26:
2075:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Del *************************************************/
2076:../../Source/Kernel/rme_kernel.c **** 
2077:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Frz ******************************************************
2078:../../Source/Kernel/rme_kernel.c **** Description : Freeze a capability in the capability table.
2079:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2080:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Frz  - The capability table containing the cap
2081:../../Source/Kernel/rme_kernel.c ****                                        to captbl for this operation.
2082:../../Source/Kernel/rme_kernel.c ****                                        2-Level.
2083:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Frz - The cap to the kernel object being freezed.
2084:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2085:../../Source/Kernel/rme_kernel.c **** Output      : None.
2086:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2087:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2088:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Cpt_Frz(struct RME_Cap_Cpt* Cpt,
2089:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Frz,
2090:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Frz)
2091:../../Source/Kernel/rme_kernel.c **** {
 3586              		.loc 1 2091 1
 3587              		.cfi_startproc
 3588              		@ args = 0, pretend = 0, frame = 32
 3589              		@ frame_needed = 1, uses_anonymous_args = 0
 3590 0000 00482DE9 		push	{fp, lr}
 3591              		.cfi_def_cfa_offset 8
 3592              		.cfi_offset 11, -8
 3593              		.cfi_offset 14, -4
 3594 0004 04B08DE2 		add	fp, sp, #4
 3595              		.cfi_def_cfa 11, 4
 3596 0008 20D04DE2 		sub	sp, sp, #32
 3597 000c 18000BE5 		str	r0, [fp, #-24]
 3598 0010 1C100BE5 		str	r1, [fp, #-28]
 3599 0014 20200BE5 		str	r2, [fp, #-32]
2092:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
2093:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Struct* Capobj_Frz;
2094:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2095:../../Source/Kernel/rme_kernel.c ****     
2096:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
2097:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Frz,RME_CAP_TYPE_CPT,
 3600              		.loc 1 2097 5
 3601 0018 1C301BE5 		ldr	r3, [fp, #-28]
 3602 001c 803003E2 		and	r3, r3, #128
 3603 0020 000053E3 		cmp	r3, #0
 3604 0024 1C00001A 		bne	.L224
 3605              		.loc 1 2097 5 is_stmt 0 discriminator 1
 3606 0028 18301BE5 		ldr	r3, [fp, #-24]
 3607 002c 142093E5 		ldr	r2, [r3, #20]
 3608 0030 1C301BE5 		ldr	r3, [fp, #-28]
 3609 0034 030052E1 		cmp	r2, r3
 3610 0038 0100008A 		bhi	.L225
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 102


 3611              		.loc 1 2097 5 discriminator 3
 3612 003c 0230E0E3 		mvn	r3, #2
 3613              		.loc 1 2097 5
 3614 0040 9B0000EA 		b	.L226
 3615              	.L225:
 3616              		.loc 1 2097 5 discriminator 4
 3617 0044 1C301BE5 		ldr	r3, [fp, #-28]
 3618 0048 8322A0E1 		lsl	r2, r3, #5
 3619 004c 18301BE5 		ldr	r3, [fp, #-24]
 3620 0050 0C3093E5 		ldr	r3, [r3, #12]
 3621 0054 033082E0 		add	r3, r2, r3
 3622 0058 08300BE5 		str	r3, [fp, #-8]
 3623 005c 08301BE5 		ldr	r3, [fp, #-8]
 3624 0060 0300A0E1 		mov	r0, r3
 3625 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3626 0068 0C000BE5 		str	r0, [fp, #-12]
 3627              		.loc 1 2097 5 discriminator 1
 3628 006c 0C301BE5 		ldr	r3, [fp, #-12]
 3629 0070 FF3803E2 		and	r3, r3, #16711680
 3630 0074 020853E3 		cmp	r3, #131072
 3631 0078 0100001A 		bne	.L227
 3632              		.loc 1 2097 5 discriminator 5
 3633 007c 0830E0E3 		mvn	r3, #8
 3634              		.loc 1 2097 5
 3635 0080 8B0000EA 		b	.L226
 3636              	.L227:
 3637              		.loc 1 2097 5 discriminator 6
 3638 0084 0C301BE5 		ldr	r3, [fp, #-12]
 3639 0088 233CA0E1 		lsr	r3, r3, #24
 3640 008c 030053E3 		cmp	r3, #3
 3641 0090 3F00000A 		beq	.L228
 3642              		.loc 1 2097 5 discriminator 7
 3643 0094 0130E0E3 		mvn	r3, #1
 3644              		.loc 1 2097 5
 3645 0098 850000EA 		b	.L226
 3646              	.L224:
 3647              		.loc 1 2097 5 discriminator 2
 3648 009c 1C301BE5 		ldr	r3, [fp, #-28]
 3649 00a0 2324A0E1 		lsr	r2, r3, #8
 3650 00a4 18301BE5 		ldr	r3, [fp, #-24]
 3651 00a8 143093E5 		ldr	r3, [r3, #20]
 3652 00ac 030052E1 		cmp	r2, r3
 3653 00b0 0100003A 		bcc	.L229
 3654              		.loc 1 2097 5 discriminator 8
 3655 00b4 0230E0E3 		mvn	r3, #2
 3656              		.loc 1 2097 5
 3657 00b8 7D0000EA 		b	.L226
 3658              	.L229:
 3659              		.loc 1 2097 5 discriminator 9
 3660 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 3661 00c0 2334A0E1 		lsr	r3, r3, #8
 3662 00c4 8322A0E1 		lsl	r2, r3, #5
 3663 00c8 18301BE5 		ldr	r3, [fp, #-24]
 3664 00cc 0C3093E5 		ldr	r3, [r3, #12]
 3665 00d0 033082E0 		add	r3, r2, r3
 3666 00d4 08300BE5 		str	r3, [fp, #-8]
 3667 00d8 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 103


 3668 00dc 0300A0E1 		mov	r0, r3
 3669 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3670 00e4 0C000BE5 		str	r0, [fp, #-12]
 3671              		.loc 1 2097 5 discriminator 1
 3672 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 3673 00ec FF3803E2 		and	r3, r3, #16711680
 3674 00f0 020853E3 		cmp	r3, #131072
 3675 00f4 0100001A 		bne	.L230
 3676              		.loc 1 2097 5 discriminator 10
 3677 00f8 0830E0E3 		mvn	r3, #8
 3678              		.loc 1 2097 5
 3679 00fc 6C0000EA 		b	.L226
 3680              	.L230:
 3681              		.loc 1 2097 5 discriminator 11
 3682 0100 0C301BE5 		ldr	r3, [fp, #-12]
 3683 0104 233CA0E1 		lsr	r3, r3, #24
 3684 0108 030053E3 		cmp	r3, #3
 3685 010c 0100000A 		beq	.L231
 3686              		.loc 1 2097 5 discriminator 12
 3687 0110 0130E0E3 		mvn	r3, #1
 3688              		.loc 1 2097 5
 3689 0114 660000EA 		b	.L226
 3690              	.L231:
 3691              		.loc 1 2097 5 discriminator 13
 3692 0118 1C301BE5 		ldr	r3, [fp, #-28]
 3693 011c 7F2003E2 		and	r2, r3, #127
 3694 0120 08301BE5 		ldr	r3, [fp, #-8]
 3695 0124 143093E5 		ldr	r3, [r3, #20]
 3696 0128 030052E1 		cmp	r2, r3
 3697 012c 0100003A 		bcc	.L232
 3698              		.loc 1 2097 5 discriminator 14
 3699 0130 0230E0E3 		mvn	r3, #2
 3700              		.loc 1 2097 5
 3701 0134 5E0000EA 		b	.L226
 3702              	.L232:
 3703              		.loc 1 2097 5 discriminator 15
 3704 0138 1C301BE5 		ldr	r3, [fp, #-28]
 3705 013c 7F3003E2 		and	r3, r3, #127
 3706 0140 8322A0E1 		lsl	r2, r3, #5
 3707 0144 08301BE5 		ldr	r3, [fp, #-8]
 3708 0148 0C3093E5 		ldr	r3, [r3, #12]
 3709 014c 033082E0 		add	r3, r2, r3
 3710 0150 08300BE5 		str	r3, [fp, #-8]
 3711 0154 08301BE5 		ldr	r3, [fp, #-8]
 3712 0158 0300A0E1 		mov	r0, r3
 3713 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3714 0160 0C000BE5 		str	r0, [fp, #-12]
 3715              		.loc 1 2097 5 discriminator 1
 3716 0164 0C301BE5 		ldr	r3, [fp, #-12]
 3717 0168 FF3803E2 		and	r3, r3, #16711680
 3718 016c 020853E3 		cmp	r3, #131072
 3719 0170 0100001A 		bne	.L233
 3720              		.loc 1 2097 5 discriminator 16
 3721 0174 0830E0E3 		mvn	r3, #8
 3722              		.loc 1 2097 5
 3723 0178 4D0000EA 		b	.L226
 3724              	.L233:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 104


 3725              		.loc 1 2097 5 discriminator 17
 3726 017c 0C301BE5 		ldr	r3, [fp, #-12]
 3727 0180 233CA0E1 		lsr	r3, r3, #24
 3728 0184 030053E3 		cmp	r3, #3
 3729 0188 0100000A 		beq	.L228
 3730              		.loc 1 2097 5 discriminator 18
 3731 018c 0130E0E3 		mvn	r3, #1
 3732              		.loc 1 2097 5
 3733 0190 470000EA 		b	.L226
 3734              	.L228:
2098:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
2099:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
2100:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_FRZ);
 3735              		.loc 1 2100 5 is_stmt 1
 3736 0194 08301BE5 		ldr	r3, [fp, #-8]
 3737 0198 083093E5 		ldr	r3, [r3, #8]
 3738 019c 043003E2 		and	r3, r3, #4
 3739 01a0 000053E3 		cmp	r3, #0
 3740 01a4 0100001A 		bne	.L234
 3741              		.loc 1 2100 5 is_stmt 0 discriminator 1
 3742 01a8 0630E0E3 		mvn	r3, #6
 3743              		.loc 1 2100 5
 3744 01ac 400000EA 		b	.L226
 3745              	.L234:
2101:../../Source/Kernel/rme_kernel.c ****     
2102:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
2103:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Frz,struct RME_Cap_Struct*,Capobj_Frz);
 3746              		.loc 1 2103 5 is_stmt 1
 3747 01b0 08301BE5 		ldr	r3, [fp, #-8]
 3748 01b4 142093E5 		ldr	r2, [r3, #20]
 3749 01b8 20301BE5 		ldr	r3, [fp, #-32]
 3750 01bc 030052E1 		cmp	r2, r3
 3751 01c0 0100008A 		bhi	.L235
 3752              		.loc 1 2103 5 is_stmt 0 discriminator 1
 3753 01c4 0230E0E3 		mvn	r3, #2
 3754              		.loc 1 2103 5
 3755 01c8 390000EA 		b	.L226
 3756              	.L235:
 3757              		.loc 1 2103 5 discriminator 2
 3758 01cc 20301BE5 		ldr	r3, [fp, #-32]
 3759 01d0 8322A0E1 		lsl	r2, r3, #5
 3760 01d4 08301BE5 		ldr	r3, [fp, #-8]
 3761 01d8 0C3093E5 		ldr	r3, [r3, #12]
 3762 01dc 033082E0 		add	r3, r2, r3
 3763 01e0 10300BE5 		str	r3, [fp, #-16]
2104:../../Source/Kernel/rme_kernel.c ****     
2105:../../Source/Kernel/rme_kernel.c ****     /* Check if anything is there. If nothing there, the Type_Stat must be 0. 
2106:../../Source/Kernel/rme_kernel.c ****      * Need a read acquire barrier here to avoid stale reads below. */
2107:../../Source/Kernel/rme_kernel.c ****     Type_Stat=RME_READ_ACQUIRE(&(Capobj_Frz->Head.Type_Stat));
 3764              		.loc 1 2107 15 is_stmt 1
 3765 01e4 10301BE5 		ldr	r3, [fp, #-16]
 3766 01e8 0300A0E1 		mov	r0, r3
 3767 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3768 01f0 0C000BE5 		str	r0, [fp, #-12]
2108:../../Source/Kernel/rme_kernel.c ****     /* See if there is a cap */
2109:../../Source/Kernel/rme_kernel.c ****     if(RME_CAP_TYPE(Type_Stat)==RME_CAP_TYPE_NOP)
 3769              		.loc 1 2109 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 105


 3770 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 3771 01f8 233CA0E1 		lsr	r3, r3, #24
 3772              		.loc 1 2109 7
 3773 01fc 000053E3 		cmp	r3, #0
 3774 0200 0100001A 		bne	.L236
2110:../../Source/Kernel/rme_kernel.c ****     {
2111:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2112:../../Source/Kernel/rme_kernel.c ****         
2113:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_NULL;
 3775              		.loc 1 2113 16
 3776 0204 0030E0E3 		mvn	r3, #0
 3777 0208 290000EA 		b	.L226
 3778              	.L236:
2114:../../Source/Kernel/rme_kernel.c ****     }
2115:../../Source/Kernel/rme_kernel.c ****     else
2116:../../Source/Kernel/rme_kernel.c ****     {
2117:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2118:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2119:../../Source/Kernel/rme_kernel.c ****     }
2120:../../Source/Kernel/rme_kernel.c ****     
2121:../../Source/Kernel/rme_kernel.c ****     /* If this is a root capability, check if the reference count allows freezing */
2122:../../Source/Kernel/rme_kernel.c ****     if(RME_CAP_ATTR(Type_Stat)==RME_CAP_ATTR_ROOT)
 3779              		.loc 1 2122 8
 3780 020c 0C301BE5 		ldr	r3, [fp, #-12]
 3781 0210 7330FFE6 		uxth	r3, r3
 3782              		.loc 1 2122 7
 3783 0214 000053E3 		cmp	r3, #0
 3784 0218 0500001A 		bne	.L237
2123:../../Source/Kernel/rme_kernel.c ****     {
2124:../../Source/Kernel/rme_kernel.c ****         if(Capobj_Frz->Head.Root_Ref!=0U)
 3785              		.loc 1 2124 28
 3786 021c 10301BE5 		ldr	r3, [fp, #-16]
 3787 0220 043093E5 		ldr	r3, [r3, #4]
 3788              		.loc 1 2124 11
 3789 0224 000053E3 		cmp	r3, #0
 3790 0228 0100000A 		beq	.L237
2125:../../Source/Kernel/rme_kernel.c ****         {
2126:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2127:../../Source/Kernel/rme_kernel.c ****             
2128:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_REFCNT;
 3791              		.loc 1 2128 20
 3792 022c 0530E0E3 		mvn	r3, #5
 3793 0230 1F0000EA 		b	.L226
 3794              	.L237:
2129:../../Source/Kernel/rme_kernel.c ****         }
2130:../../Source/Kernel/rme_kernel.c ****         else
2131:../../Source/Kernel/rme_kernel.c ****         {
2132:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2133:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2134:../../Source/Kernel/rme_kernel.c ****         }
2135:../../Source/Kernel/rme_kernel.c ****     }
2136:../../Source/Kernel/rme_kernel.c ****     else
2137:../../Source/Kernel/rme_kernel.c ****     {
2138:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2139:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2140:../../Source/Kernel/rme_kernel.c ****     }
2141:../../Source/Kernel/rme_kernel.c ****     
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 106


2142:../../Source/Kernel/rme_kernel.c ****     /* The capability is already frozen - why do it again? */
2143:../../Source/Kernel/rme_kernel.c ****     if(RME_CAP_STAT(Type_Stat)==RME_CAP_STAT_FROZEN)
 3795              		.loc 1 2143 31
 3796 0234 0C301BE5 		ldr	r3, [fp, #-12]
 3797 0238 FF3803E2 		and	r3, r3, #16711680
 3798              		.loc 1 2143 7
 3799 023c 020853E3 		cmp	r3, #131072
 3800 0240 0100001A 		bne	.L238
2144:../../Source/Kernel/rme_kernel.c ****     {
2145:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2146:../../Source/Kernel/rme_kernel.c ****         
2147:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FROZEN;
 3801              		.loc 1 2147 16
 3802 0244 0830E0E3 		mvn	r3, #8
 3803 0248 190000EA 		b	.L226
 3804              	.L238:
2148:../../Source/Kernel/rme_kernel.c ****     }
2149:../../Source/Kernel/rme_kernel.c ****     else
2150:../../Source/Kernel/rme_kernel.c ****     {
2151:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2152:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2153:../../Source/Kernel/rme_kernel.c ****     }
2154:../../Source/Kernel/rme_kernel.c ****     
2155:../../Source/Kernel/rme_kernel.c ****     /* See if the slot is quiescent */
2156:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY(RME_CAP_QUIE(Capobj_Frz->Head.Timestamp)==0U))
 3805              		.loc 1 2156 8
 3806 024c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 3807 0250 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 3808 0254 002093E5 		ldr	r2, [r3]
 3809 0258 10301BE5 		ldr	r3, [fp, #-16]
 3810 025c 103093E5 		ldr	r3, [r3, #16]
 3811 0260 0310A0E1 		mov	r1, r3
 3812 0264 0200A0E1 		mov	r0, r2
 3813 0268 FEFFFFEB 		bl	_RME_Diff
 3814 026c 0030A0E1 		mov	r3, r0
 3815              		.loc 1 2156 7 discriminator 1
 3816 0270 0A0053E3 		cmp	r3, #10
 3817 0274 0100008A 		bhi	.L239
2157:../../Source/Kernel/rme_kernel.c ****     {
2158:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2159:../../Source/Kernel/rme_kernel.c ****         
2160:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_QUIE;
 3818              		.loc 1 2160 16
 3819 0278 0730E0E3 		mvn	r3, #7
 3820 027c 0C0000EA 		b	.L226
 3821              	.L239:
2161:../../Source/Kernel/rme_kernel.c ****     }
2162:../../Source/Kernel/rme_kernel.c ****     else
2163:../../Source/Kernel/rme_kernel.c ****     {
2164:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2165:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2166:../../Source/Kernel/rme_kernel.c ****     }
2167:../../Source/Kernel/rme_kernel.c **** 
2168:../../Source/Kernel/rme_kernel.c ****     /* Update the timestamp */
2169:../../Source/Kernel/rme_kernel.c ****     Capobj_Frz->Head.Timestamp=RME_TIMESTAMP;
 3822              		.loc 1 2169 31
 3823 0280 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 107


 3824 0284 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 3825 0288 002093E5 		ldr	r2, [r3]
 3826 028c 10301BE5 		ldr	r3, [fp, #-16]
 3827 0290 102083E5 		str	r2, [r3, #16]
2170:../../Source/Kernel/rme_kernel.c ****     
2171:../../Source/Kernel/rme_kernel.c ****     /* Finally, freeze it. We do not report error here because if we CASFAIL someone must have help
2172:../../Source/Kernel/rme_kernel.c ****     RME_COMP_SWAP(&(Capobj_Frz->Head.Type_Stat),Type_Stat,
 3828              		.loc 1 2172 5
 3829 0294 10001BE5 		ldr	r0, [fp, #-16]
 3830 0298 0C301BE5 		ldr	r3, [fp, #-12]
 3831 029c FF38C3E3 		bic	r3, r3, #16711680
 3832 02a0 023883E3 		orr	r3, r3, #131072
 3833 02a4 0320A0E1 		mov	r2, r3
 3834 02a8 0C101BE5 		ldr	r1, [fp, #-12]
 3835 02ac FEFFFFEB 		bl	_RME_Comp_Swap_Single
2173:../../Source/Kernel/rme_kernel.c ****                   RME_CAP_TYPE_STAT(RME_CAP_TYPE(Type_Stat),
2174:../../Source/Kernel/rme_kernel.c ****                                     RME_CAP_STAT_FROZEN,
2175:../../Source/Kernel/rme_kernel.c ****                                     RME_CAP_ATTR(Type_Stat)));
2176:../../Source/Kernel/rme_kernel.c **** 
2177:../../Source/Kernel/rme_kernel.c ****     return 0;
 3836              		.loc 1 2177 12
 3837 02b0 0030A0E3 		mov	r3, #0
 3838              	.L226:
2178:../../Source/Kernel/rme_kernel.c **** }
 3839              		.loc 1 2178 1
 3840 02b4 0300A0E1 		mov	r0, r3
 3841 02b8 04D04BE2 		sub	sp, fp, #4
 3842              		.cfi_def_cfa 13, 8
 3843              		@ sp needed
 3844 02bc 0088BDE8 		pop	{fp, pc}
 3845              		.cfi_endproc
 3846              	.LFE26:
 3848              		.section	.text._RME_Cpt_Add,"ax",%progbits
 3849              		.align	2
 3850              		.syntax unified
 3851              		.arm
 3853              	_RME_Cpt_Add:
 3854              	.LFB27:
2179:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Frz *************************************************/
2180:../../Source/Kernel/rme_kernel.c **** 
2181:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Add ******************************************************
2182:../../Source/Kernel/rme_kernel.c **** Description : Delegate capability from one capability table to another.
2183:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2184:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Dst - The capability to the destination 
2185:../../Source/Kernel/rme_kernel.c ****                                       capability table.
2186:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
2187:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Dst - The capability slot you want to add to.
2188:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2189:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Src - The capability to the source capability
2190:../../Source/Kernel/rme_kernel.c ****                                       table.
2191:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
2192:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Src - The capability in the source capability table
2193:../../Source/Kernel/rme_kernel.c ****                                   to delegate.
2194:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2195:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag - The flags for the capability.
2196:../../Source/Kernel/rme_kernel.c **** Output      : None.
2197:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 108


2198:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2199:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Cpt_Add(struct RME_Cap_Cpt* Cpt,
2200:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Dst,
2201:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Dst, 
2202:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Src,
2203:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Src,
2204:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Flag,
2205:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Ext_Flag)
2206:../../Source/Kernel/rme_kernel.c **** {
 3855              		.loc 1 2206 1
 3856              		.cfi_startproc
 3857              		@ args = 12, pretend = 0, frame = 56
 3858              		@ frame_needed = 1, uses_anonymous_args = 0
 3859 0000 00482DE9 		push	{fp, lr}
 3860              		.cfi_def_cfa_offset 8
 3861              		.cfi_offset 11, -8
 3862              		.cfi_offset 14, -4
 3863 0004 04B08DE2 		add	fp, sp, #4
 3864              		.cfi_def_cfa 11, 4
 3865 0008 38D04DE2 		sub	sp, sp, #56
 3866 000c 30000BE5 		str	r0, [fp, #-48]
 3867 0010 34100BE5 		str	r1, [fp, #-52]
 3868 0014 38200BE5 		str	r2, [fp, #-56]
 3869 0018 3C300BE5 		str	r3, [fp, #-60]
2207:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Dst;
2208:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Src;
2209:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Struct* Capobj_Dst;
2210:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Struct* Capobj_Src;
2211:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2212:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Src_Type;
2213:../../Source/Kernel/rme_kernel.c ****     
2214:../../Source/Kernel/rme_kernel.c ****     /* These variables are only used for kernel memory checks */
2215:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Kom_Begin;
2216:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Kom_End;
2217:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Kom_Flag;
2218:../../Source/Kernel/rme_kernel.c **** 
2219:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
2220:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Dst,RME_CAP_TYPE_CPT,
 3870              		.loc 1 2220 5
 3871 001c 34301BE5 		ldr	r3, [fp, #-52]
 3872 0020 803003E2 		and	r3, r3, #128
 3873 0024 000053E3 		cmp	r3, #0
 3874 0028 1C00001A 		bne	.L241
 3875              		.loc 1 2220 5 is_stmt 0 discriminator 1
 3876 002c 30301BE5 		ldr	r3, [fp, #-48]
 3877 0030 142093E5 		ldr	r2, [r3, #20]
 3878 0034 34301BE5 		ldr	r3, [fp, #-52]
 3879 0038 030052E1 		cmp	r2, r3
 3880 003c 0100008A 		bhi	.L242
 3881              		.loc 1 2220 5 discriminator 3
 3882 0040 0230E0E3 		mvn	r3, #2
 3883              		.loc 1 2220 5
 3884 0044 020200EA 		b	.L243
 3885              	.L242:
 3886              		.loc 1 2220 5 discriminator 4
 3887 0048 34301BE5 		ldr	r3, [fp, #-52]
 3888 004c 8322A0E1 		lsl	r2, r3, #5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 109


 3889 0050 30301BE5 		ldr	r3, [fp, #-48]
 3890 0054 0C3093E5 		ldr	r3, [r3, #12]
 3891 0058 033082E0 		add	r3, r2, r3
 3892 005c 08300BE5 		str	r3, [fp, #-8]
 3893 0060 08301BE5 		ldr	r3, [fp, #-8]
 3894 0064 0300A0E1 		mov	r0, r3
 3895 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3896 006c 1C000BE5 		str	r0, [fp, #-28]
 3897              		.loc 1 2220 5 discriminator 1
 3898 0070 1C301BE5 		ldr	r3, [fp, #-28]
 3899 0074 FF3803E2 		and	r3, r3, #16711680
 3900 0078 020853E3 		cmp	r3, #131072
 3901 007c 0100001A 		bne	.L244
 3902              		.loc 1 2220 5 discriminator 5
 3903 0080 0830E0E3 		mvn	r3, #8
 3904              		.loc 1 2220 5
 3905 0084 F20100EA 		b	.L243
 3906              	.L244:
 3907              		.loc 1 2220 5 discriminator 6
 3908 0088 1C301BE5 		ldr	r3, [fp, #-28]
 3909 008c 233CA0E1 		lsr	r3, r3, #24
 3910 0090 030053E3 		cmp	r3, #3
 3911 0094 3F00000A 		beq	.L245
 3912              		.loc 1 2220 5 discriminator 7
 3913 0098 0130E0E3 		mvn	r3, #1
 3914              		.loc 1 2220 5
 3915 009c EC0100EA 		b	.L243
 3916              	.L241:
 3917              		.loc 1 2220 5 discriminator 2
 3918 00a0 34301BE5 		ldr	r3, [fp, #-52]
 3919 00a4 2324A0E1 		lsr	r2, r3, #8
 3920 00a8 30301BE5 		ldr	r3, [fp, #-48]
 3921 00ac 143093E5 		ldr	r3, [r3, #20]
 3922 00b0 030052E1 		cmp	r2, r3
 3923 00b4 0100003A 		bcc	.L246
 3924              		.loc 1 2220 5 discriminator 8
 3925 00b8 0230E0E3 		mvn	r3, #2
 3926              		.loc 1 2220 5
 3927 00bc E40100EA 		b	.L243
 3928              	.L246:
 3929              		.loc 1 2220 5 discriminator 9
 3930 00c0 34301BE5 		ldr	r3, [fp, #-52]
 3931 00c4 2334A0E1 		lsr	r3, r3, #8
 3932 00c8 8322A0E1 		lsl	r2, r3, #5
 3933 00cc 30301BE5 		ldr	r3, [fp, #-48]
 3934 00d0 0C3093E5 		ldr	r3, [r3, #12]
 3935 00d4 033082E0 		add	r3, r2, r3
 3936 00d8 08300BE5 		str	r3, [fp, #-8]
 3937 00dc 08301BE5 		ldr	r3, [fp, #-8]
 3938 00e0 0300A0E1 		mov	r0, r3
 3939 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3940 00e8 1C000BE5 		str	r0, [fp, #-28]
 3941              		.loc 1 2220 5 discriminator 1
 3942 00ec 1C301BE5 		ldr	r3, [fp, #-28]
 3943 00f0 FF3803E2 		and	r3, r3, #16711680
 3944 00f4 020853E3 		cmp	r3, #131072
 3945 00f8 0100001A 		bne	.L247
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 110


 3946              		.loc 1 2220 5 discriminator 10
 3947 00fc 0830E0E3 		mvn	r3, #8
 3948              		.loc 1 2220 5
 3949 0100 D30100EA 		b	.L243
 3950              	.L247:
 3951              		.loc 1 2220 5 discriminator 11
 3952 0104 1C301BE5 		ldr	r3, [fp, #-28]
 3953 0108 233CA0E1 		lsr	r3, r3, #24
 3954 010c 030053E3 		cmp	r3, #3
 3955 0110 0100000A 		beq	.L248
 3956              		.loc 1 2220 5 discriminator 12
 3957 0114 0130E0E3 		mvn	r3, #1
 3958              		.loc 1 2220 5
 3959 0118 CD0100EA 		b	.L243
 3960              	.L248:
 3961              		.loc 1 2220 5 discriminator 13
 3962 011c 34301BE5 		ldr	r3, [fp, #-52]
 3963 0120 7F2003E2 		and	r2, r3, #127
 3964 0124 08301BE5 		ldr	r3, [fp, #-8]
 3965 0128 143093E5 		ldr	r3, [r3, #20]
 3966 012c 030052E1 		cmp	r2, r3
 3967 0130 0100003A 		bcc	.L249
 3968              		.loc 1 2220 5 discriminator 14
 3969 0134 0230E0E3 		mvn	r3, #2
 3970              		.loc 1 2220 5
 3971 0138 C50100EA 		b	.L243
 3972              	.L249:
 3973              		.loc 1 2220 5 discriminator 15
 3974 013c 34301BE5 		ldr	r3, [fp, #-52]
 3975 0140 7F3003E2 		and	r3, r3, #127
 3976 0144 8322A0E1 		lsl	r2, r3, #5
 3977 0148 08301BE5 		ldr	r3, [fp, #-8]
 3978 014c 0C3093E5 		ldr	r3, [r3, #12]
 3979 0150 033082E0 		add	r3, r2, r3
 3980 0154 08300BE5 		str	r3, [fp, #-8]
 3981 0158 08301BE5 		ldr	r3, [fp, #-8]
 3982 015c 0300A0E1 		mov	r0, r3
 3983 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 3984 0164 1C000BE5 		str	r0, [fp, #-28]
 3985              		.loc 1 2220 5 discriminator 1
 3986 0168 1C301BE5 		ldr	r3, [fp, #-28]
 3987 016c FF3803E2 		and	r3, r3, #16711680
 3988 0170 020853E3 		cmp	r3, #131072
 3989 0174 0100001A 		bne	.L250
 3990              		.loc 1 2220 5 discriminator 16
 3991 0178 0830E0E3 		mvn	r3, #8
 3992              		.loc 1 2220 5
 3993 017c B40100EA 		b	.L243
 3994              	.L250:
 3995              		.loc 1 2220 5 discriminator 17
 3996 0180 1C301BE5 		ldr	r3, [fp, #-28]
 3997 0184 233CA0E1 		lsr	r3, r3, #24
 3998 0188 030053E3 		cmp	r3, #3
 3999 018c 0100000A 		beq	.L245
 4000              		.loc 1 2220 5 discriminator 18
 4001 0190 0130E0E3 		mvn	r3, #1
 4002              		.loc 1 2220 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 111


 4003 0194 AE0100EA 		b	.L243
 4004              	.L245:
2221:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Dst,Type_Stat);
2222:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Src,RME_CAP_TYPE_CPT,
 4005              		.loc 1 2222 5 is_stmt 1
 4006 0198 3C301BE5 		ldr	r3, [fp, #-60]
 4007 019c 803003E2 		and	r3, r3, #128
 4008 01a0 000053E3 		cmp	r3, #0
 4009 01a4 1C00001A 		bne	.L251
 4010              		.loc 1 2222 5 is_stmt 0 discriminator 1
 4011 01a8 30301BE5 		ldr	r3, [fp, #-48]
 4012 01ac 142093E5 		ldr	r2, [r3, #20]
 4013 01b0 3C301BE5 		ldr	r3, [fp, #-60]
 4014 01b4 030052E1 		cmp	r2, r3
 4015 01b8 0100008A 		bhi	.L252
 4016              		.loc 1 2222 5 discriminator 3
 4017 01bc 0230E0E3 		mvn	r3, #2
 4018              		.loc 1 2222 5
 4019 01c0 A30100EA 		b	.L243
 4020              	.L252:
 4021              		.loc 1 2222 5 discriminator 4
 4022 01c4 3C301BE5 		ldr	r3, [fp, #-60]
 4023 01c8 8322A0E1 		lsl	r2, r3, #5
 4024 01cc 30301BE5 		ldr	r3, [fp, #-48]
 4025 01d0 0C3093E5 		ldr	r3, [r3, #12]
 4026 01d4 033082E0 		add	r3, r2, r3
 4027 01d8 0C300BE5 		str	r3, [fp, #-12]
 4028 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 4029 01e0 0300A0E1 		mov	r0, r3
 4030 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4031 01e8 1C000BE5 		str	r0, [fp, #-28]
 4032              		.loc 1 2222 5 discriminator 1
 4033 01ec 1C301BE5 		ldr	r3, [fp, #-28]
 4034 01f0 FF3803E2 		and	r3, r3, #16711680
 4035 01f4 020853E3 		cmp	r3, #131072
 4036 01f8 0100001A 		bne	.L253
 4037              		.loc 1 2222 5 discriminator 5
 4038 01fc 0830E0E3 		mvn	r3, #8
 4039              		.loc 1 2222 5
 4040 0200 930100EA 		b	.L243
 4041              	.L253:
 4042              		.loc 1 2222 5 discriminator 6
 4043 0204 1C301BE5 		ldr	r3, [fp, #-28]
 4044 0208 233CA0E1 		lsr	r3, r3, #24
 4045 020c 030053E3 		cmp	r3, #3
 4046 0210 3F00000A 		beq	.L254
 4047              		.loc 1 2222 5 discriminator 7
 4048 0214 0130E0E3 		mvn	r3, #1
 4049              		.loc 1 2222 5
 4050 0218 8D0100EA 		b	.L243
 4051              	.L251:
 4052              		.loc 1 2222 5 discriminator 2
 4053 021c 3C301BE5 		ldr	r3, [fp, #-60]
 4054 0220 2324A0E1 		lsr	r2, r3, #8
 4055 0224 30301BE5 		ldr	r3, [fp, #-48]
 4056 0228 143093E5 		ldr	r3, [r3, #20]
 4057 022c 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 112


 4058 0230 0100003A 		bcc	.L255
 4059              		.loc 1 2222 5 discriminator 8
 4060 0234 0230E0E3 		mvn	r3, #2
 4061              		.loc 1 2222 5
 4062 0238 850100EA 		b	.L243
 4063              	.L255:
 4064              		.loc 1 2222 5 discriminator 9
 4065 023c 3C301BE5 		ldr	r3, [fp, #-60]
 4066 0240 2334A0E1 		lsr	r3, r3, #8
 4067 0244 8322A0E1 		lsl	r2, r3, #5
 4068 0248 30301BE5 		ldr	r3, [fp, #-48]
 4069 024c 0C3093E5 		ldr	r3, [r3, #12]
 4070 0250 033082E0 		add	r3, r2, r3
 4071 0254 0C300BE5 		str	r3, [fp, #-12]
 4072 0258 0C301BE5 		ldr	r3, [fp, #-12]
 4073 025c 0300A0E1 		mov	r0, r3
 4074 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4075 0264 1C000BE5 		str	r0, [fp, #-28]
 4076              		.loc 1 2222 5 discriminator 1
 4077 0268 1C301BE5 		ldr	r3, [fp, #-28]
 4078 026c FF3803E2 		and	r3, r3, #16711680
 4079 0270 020853E3 		cmp	r3, #131072
 4080 0274 0100001A 		bne	.L256
 4081              		.loc 1 2222 5 discriminator 10
 4082 0278 0830E0E3 		mvn	r3, #8
 4083              		.loc 1 2222 5
 4084 027c 740100EA 		b	.L243
 4085              	.L256:
 4086              		.loc 1 2222 5 discriminator 11
 4087 0280 1C301BE5 		ldr	r3, [fp, #-28]
 4088 0284 233CA0E1 		lsr	r3, r3, #24
 4089 0288 030053E3 		cmp	r3, #3
 4090 028c 0100000A 		beq	.L257
 4091              		.loc 1 2222 5 discriminator 12
 4092 0290 0130E0E3 		mvn	r3, #1
 4093              		.loc 1 2222 5
 4094 0294 6E0100EA 		b	.L243
 4095              	.L257:
 4096              		.loc 1 2222 5 discriminator 13
 4097 0298 3C301BE5 		ldr	r3, [fp, #-60]
 4098 029c 7F2003E2 		and	r2, r3, #127
 4099 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 4100 02a4 143093E5 		ldr	r3, [r3, #20]
 4101 02a8 030052E1 		cmp	r2, r3
 4102 02ac 0100003A 		bcc	.L258
 4103              		.loc 1 2222 5 discriminator 14
 4104 02b0 0230E0E3 		mvn	r3, #2
 4105              		.loc 1 2222 5
 4106 02b4 660100EA 		b	.L243
 4107              	.L258:
 4108              		.loc 1 2222 5 discriminator 15
 4109 02b8 3C301BE5 		ldr	r3, [fp, #-60]
 4110 02bc 7F3003E2 		and	r3, r3, #127
 4111 02c0 8322A0E1 		lsl	r2, r3, #5
 4112 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 4113 02c8 0C3093E5 		ldr	r3, [r3, #12]
 4114 02cc 033082E0 		add	r3, r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 113


 4115 02d0 0C300BE5 		str	r3, [fp, #-12]
 4116 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 4117 02d8 0300A0E1 		mov	r0, r3
 4118 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4119 02e0 1C000BE5 		str	r0, [fp, #-28]
 4120              		.loc 1 2222 5 discriminator 1
 4121 02e4 1C301BE5 		ldr	r3, [fp, #-28]
 4122 02e8 FF3803E2 		and	r3, r3, #16711680
 4123 02ec 020853E3 		cmp	r3, #131072
 4124 02f0 0100001A 		bne	.L259
 4125              		.loc 1 2222 5 discriminator 16
 4126 02f4 0830E0E3 		mvn	r3, #8
 4127              		.loc 1 2222 5
 4128 02f8 550100EA 		b	.L243
 4129              	.L259:
 4130              		.loc 1 2222 5 discriminator 17
 4131 02fc 1C301BE5 		ldr	r3, [fp, #-28]
 4132 0300 233CA0E1 		lsr	r3, r3, #24
 4133 0304 030053E3 		cmp	r3, #3
 4134 0308 0100000A 		beq	.L254
 4135              		.loc 1 2222 5 discriminator 18
 4136 030c 0130E0E3 		mvn	r3, #1
 4137              		.loc 1 2222 5
 4138 0310 4F0100EA 		b	.L243
 4139              	.L254:
2223:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Src,Type_Stat);
2224:../../Source/Kernel/rme_kernel.c ****     /* Check if both captbls are not frozen and allows such operations */
2225:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Dst,RME_CPT_FLAG_ADD_DST);
 4140              		.loc 1 2225 5 is_stmt 1
 4141 0314 08301BE5 		ldr	r3, [fp, #-8]
 4142 0318 083093E5 		ldr	r3, [r3, #8]
 4143 031c 103003E2 		and	r3, r3, #16
 4144 0320 000053E3 		cmp	r3, #0
 4145 0324 0100001A 		bne	.L260
 4146              		.loc 1 2225 5 is_stmt 0 discriminator 1
 4147 0328 0630E0E3 		mvn	r3, #6
 4148              		.loc 1 2225 5
 4149 032c 480100EA 		b	.L243
 4150              	.L260:
2226:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Src,RME_CPT_FLAG_ADD_SRC);
 4151              		.loc 1 2226 5 is_stmt 1
 4152 0330 0C301BE5 		ldr	r3, [fp, #-12]
 4153 0334 083093E5 		ldr	r3, [r3, #8]
 4154 0338 083003E2 		and	r3, r3, #8
 4155 033c 000053E3 		cmp	r3, #0
 4156 0340 0100001A 		bne	.L261
 4157              		.loc 1 2226 5 is_stmt 0 discriminator 1
 4158 0344 0630E0E3 		mvn	r3, #6
 4159              		.loc 1 2226 5
 4160 0348 410100EA 		b	.L243
 4161              	.L261:
2227:../../Source/Kernel/rme_kernel.c ****     
2228:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slots */
2229:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Dst,Cap_Dst,struct RME_Cap_Struct*,Capobj_Dst);
 4162              		.loc 1 2229 5 is_stmt 1
 4163 034c 08301BE5 		ldr	r3, [fp, #-8]
 4164 0350 142093E5 		ldr	r2, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 114


 4165 0354 38301BE5 		ldr	r3, [fp, #-56]
 4166 0358 030052E1 		cmp	r2, r3
 4167 035c 0100008A 		bhi	.L262
 4168              		.loc 1 2229 5 is_stmt 0 discriminator 1
 4169 0360 0230E0E3 		mvn	r3, #2
 4170              		.loc 1 2229 5
 4171 0364 3A0100EA 		b	.L243
 4172              	.L262:
 4173              		.loc 1 2229 5 discriminator 2
 4174 0368 38301BE5 		ldr	r3, [fp, #-56]
 4175 036c 8322A0E1 		lsl	r2, r3, #5
 4176 0370 08301BE5 		ldr	r3, [fp, #-8]
 4177 0374 0C3093E5 		ldr	r3, [r3, #12]
 4178 0378 033082E0 		add	r3, r2, r3
 4179 037c 20300BE5 		str	r3, [fp, #-32]
2230:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Src,Cap_Src,struct RME_Cap_Struct*,Capobj_Src);
 4180              		.loc 1 2230 5 is_stmt 1
 4181 0380 0C301BE5 		ldr	r3, [fp, #-12]
 4182 0384 142093E5 		ldr	r2, [r3, #20]
 4183 0388 04309BE5 		ldr	r3, [fp, #4]
 4184 038c 030052E1 		cmp	r2, r3
 4185 0390 0100008A 		bhi	.L263
 4186              		.loc 1 2230 5 is_stmt 0 discriminator 1
 4187 0394 0230E0E3 		mvn	r3, #2
 4188              		.loc 1 2230 5
 4189 0398 2D0100EA 		b	.L243
 4190              	.L263:
 4191              		.loc 1 2230 5 discriminator 2
 4192 039c 04309BE5 		ldr	r3, [fp, #4]
 4193 03a0 8322A0E1 		lsl	r2, r3, #5
 4194 03a4 0C301BE5 		ldr	r3, [fp, #-12]
 4195 03a8 0C3093E5 		ldr	r3, [r3, #12]
 4196 03ac 033082E0 		add	r3, r2, r3
 4197 03b0 24300BE5 		str	r3, [fp, #-36]
2231:../../Source/Kernel/rme_kernel.c ****     
2232:../../Source/Kernel/rme_kernel.c ****     /* Atomic read - Read barrier to avoid premature checking of the rest */
2233:../../Source/Kernel/rme_kernel.c ****     Type_Stat=RME_READ_ACQUIRE(&(Capobj_Src->Head.Type_Stat));
 4198              		.loc 1 2233 15 is_stmt 1
 4199 03b4 24301BE5 		ldr	r3, [fp, #-36]
 4200 03b8 0300A0E1 		mov	r0, r3
 4201 03bc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4202 03c0 1C000BE5 		str	r0, [fp, #-28]
2234:../../Source/Kernel/rme_kernel.c ****     /* Is the source cap frozen? */
2235:../../Source/Kernel/rme_kernel.c ****     if(RME_CAP_STAT(Type_Stat)==RME_CAP_STAT_FROZEN)
 4203              		.loc 1 2235 31
 4204 03c4 1C301BE5 		ldr	r3, [fp, #-28]
 4205 03c8 FF3803E2 		and	r3, r3, #16711680
 4206              		.loc 1 2235 7
 4207 03cc 020853E3 		cmp	r3, #131072
 4208 03d0 0100001A 		bne	.L264
2236:../../Source/Kernel/rme_kernel.c ****     {
2237:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2238:../../Source/Kernel/rme_kernel.c ****         
2239:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FROZEN;
 4209              		.loc 1 2239 16
 4210 03d4 0830E0E3 		mvn	r3, #8
 4211 03d8 1D0100EA 		b	.L243
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 115


 4212              	.L264:
2240:../../Source/Kernel/rme_kernel.c ****     }
2241:../../Source/Kernel/rme_kernel.c ****     else
2242:../../Source/Kernel/rme_kernel.c ****     {
2243:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2244:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2245:../../Source/Kernel/rme_kernel.c ****     }
2246:../../Source/Kernel/rme_kernel.c ****     
2247:../../Source/Kernel/rme_kernel.c ****     /* Does the source cap exist at all? */
2248:../../Source/Kernel/rme_kernel.c ****     if(Type_Stat==0U)
 4213              		.loc 1 2248 7
 4214 03dc 1C301BE5 		ldr	r3, [fp, #-28]
 4215 03e0 000053E3 		cmp	r3, #0
 4216 03e4 0100001A 		bne	.L265
2249:../../Source/Kernel/rme_kernel.c ****     {
2250:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2251:../../Source/Kernel/rme_kernel.c ****         
2252:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_NULL;
 4217              		.loc 1 2252 16
 4218 03e8 0030E0E3 		mvn	r3, #0
 4219 03ec 180100EA 		b	.L243
 4220              	.L265:
2253:../../Source/Kernel/rme_kernel.c ****     }
2254:../../Source/Kernel/rme_kernel.c ****     else
2255:../../Source/Kernel/rme_kernel.c ****     {
2256:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2257:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2258:../../Source/Kernel/rme_kernel.c ****     }
2259:../../Source/Kernel/rme_kernel.c **** 
2260:../../Source/Kernel/rme_kernel.c ****     /* Dewarn some compilers that complain about uninitialized variables */
2261:../../Source/Kernel/rme_kernel.c ****     Kom_Begin=0U;
 4221              		.loc 1 2261 14
 4222 03f0 0030A0E3 		mov	r3, #0
 4223 03f4 10300BE5 		str	r3, [fp, #-16]
2262:../../Source/Kernel/rme_kernel.c ****     Kom_End=0U;
 4224              		.loc 1 2262 12
 4225 03f8 0030A0E3 		mov	r3, #0
 4226 03fc 14300BE5 		str	r3, [fp, #-20]
2263:../../Source/Kernel/rme_kernel.c ****     Kom_Flag=0U;
 4227              		.loc 1 2263 13
 4228 0400 0030A0E3 		mov	r3, #0
 4229 0404 18300BE5 		str	r3, [fp, #-24]
2264:../../Source/Kernel/rme_kernel.c ****     
2265:../../Source/Kernel/rme_kernel.c ****     /* Is there a flag conflict? - For page tables, we have different checking mechanisms */
2266:../../Source/Kernel/rme_kernel.c ****     Src_Type=RME_CAP_TYPE(Type_Stat);
 4230              		.loc 1 2266 13
 4231 0408 1C301BE5 		ldr	r3, [fp, #-28]
 4232 040c 233CA0E1 		lsr	r3, r3, #24
 4233 0410 28300BE5 		str	r3, [fp, #-40]
2267:../../Source/Kernel/rme_kernel.c ****     if(Src_Type==RME_CAP_TYPE_PGT)
 4234              		.loc 1 2267 7
 4235 0414 28301BE5 		ldr	r3, [fp, #-40]
 4236 0418 040053E3 		cmp	r3, #4
 4237 041c 2D00001A 		bne	.L266
2268:../../Source/Kernel/rme_kernel.c ****     {
2269:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2270:../../Source/Kernel/rme_kernel.c ****         
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 116


2271:../../Source/Kernel/rme_kernel.c ****         /* Check the delegation range */
2272:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_FLAG_HIGH(Flag)>RME_PGT_FLAG_HIGH(Capobj_Src->Head.Flag))
 4238              		.loc 1 2272 12
 4239 0420 08309BE5 		ldr	r3, [fp, #8]
 4240 0424 232AA0E1 		lsr	r2, r3, #20
 4241              		.loc 1 2272 36
 4242 0428 24301BE5 		ldr	r3, [fp, #-36]
 4243 042c 083093E5 		ldr	r3, [r3, #8]
 4244 0430 233AA0E1 		lsr	r3, r3, #20
 4245              		.loc 1 2272 11
 4246 0434 030052E1 		cmp	r2, r3
 4247 0438 0100009A 		bls	.L267
2273:../../Source/Kernel/rme_kernel.c ****         {
2274:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2275:../../Source/Kernel/rme_kernel.c ****         
2276:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4248              		.loc 1 2276 20
 4249 043c 0630E0E3 		mvn	r3, #6
 4250 0440 030100EA 		b	.L243
 4251              	.L267:
2277:../../Source/Kernel/rme_kernel.c ****         }
2278:../../Source/Kernel/rme_kernel.c ****         else
2279:../../Source/Kernel/rme_kernel.c ****         {
2280:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2281:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2282:../../Source/Kernel/rme_kernel.c ****         }
2283:../../Source/Kernel/rme_kernel.c ****         
2284:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_FLAG_LOW(Flag)<RME_PGT_FLAG_LOW(Capobj_Src->Head.Flag))
 4252              		.loc 1 2284 12
 4253 0444 08309BE5 		ldr	r3, [fp, #8]
 4254 0448 2334A0E1 		lsr	r3, r3, #8
 4255 044c 5320EBE7 		ubfx	r2, r3, #0, #12
 4256              		.loc 1 2284 35
 4257 0450 24301BE5 		ldr	r3, [fp, #-36]
 4258 0454 083093E5 		ldr	r3, [r3, #8]
 4259 0458 2334A0E1 		lsr	r3, r3, #8
 4260 045c 5330EBE7 		ubfx	r3, r3, #0, #12
 4261              		.loc 1 2284 11
 4262 0460 030052E1 		cmp	r2, r3
 4263 0464 0100002A 		bcs	.L268
2285:../../Source/Kernel/rme_kernel.c ****         {
2286:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2287:../../Source/Kernel/rme_kernel.c ****             
2288:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4264              		.loc 1 2288 20
 4265 0468 0630E0E3 		mvn	r3, #6
 4266 046c F80000EA 		b	.L243
 4267              	.L268:
2289:../../Source/Kernel/rme_kernel.c ****         }
2290:../../Source/Kernel/rme_kernel.c ****         else
2291:../../Source/Kernel/rme_kernel.c ****         {
2292:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2293:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2294:../../Source/Kernel/rme_kernel.c ****         }
2295:../../Source/Kernel/rme_kernel.c ****         
2296:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_FLAG_HIGH(Flag)<RME_PGT_FLAG_LOW(Flag))
 4268              		.loc 1 2296 12
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 117


 4269 0470 08309BE5 		ldr	r3, [fp, #8]
 4270 0474 232AA0E1 		lsr	r2, r3, #20
 4271              		.loc 1 2296 36
 4272 0478 08309BE5 		ldr	r3, [fp, #8]
 4273 047c 2334A0E1 		lsr	r3, r3, #8
 4274 0480 5330EBE7 		ubfx	r3, r3, #0, #12
 4275              		.loc 1 2296 11
 4276 0484 030052E1 		cmp	r2, r3
 4277 0488 0100002A 		bcs	.L269
2297:../../Source/Kernel/rme_kernel.c ****         {
2298:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2299:../../Source/Kernel/rme_kernel.c ****             
2300:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4278              		.loc 1 2300 20
 4279 048c 0630E0E3 		mvn	r3, #6
 4280 0490 EF0000EA 		b	.L243
 4281              	.L269:
2301:../../Source/Kernel/rme_kernel.c ****         }
2302:../../Source/Kernel/rme_kernel.c ****         else
2303:../../Source/Kernel/rme_kernel.c ****         {
2304:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2305:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2306:../../Source/Kernel/rme_kernel.c ****         }
2307:../../Source/Kernel/rme_kernel.c ****         
2308:../../Source/Kernel/rme_kernel.c ****         /* Check the flags - if there are extra ones, or all zero */
2309:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_FLAG_FLAG(Flag)==0U)
 4282              		.loc 1 2309 12
 4283 0494 08309BE5 		ldr	r3, [fp, #8]
 4284 0498 7330EFE6 		uxtb	r3, r3
 4285              		.loc 1 2309 11
 4286 049c 000053E3 		cmp	r3, #0
 4287 04a0 0100001A 		bne	.L270
2310:../../Source/Kernel/rme_kernel.c ****         {
2311:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2312:../../Source/Kernel/rme_kernel.c ****             
2313:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4288              		.loc 1 2313 20
 4289 04a4 0630E0E3 		mvn	r3, #6
 4290 04a8 E90000EA 		b	.L243
 4291              	.L270:
2314:../../Source/Kernel/rme_kernel.c ****         }
2315:../../Source/Kernel/rme_kernel.c ****         else
2316:../../Source/Kernel/rme_kernel.c ****         {
2317:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2318:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2319:../../Source/Kernel/rme_kernel.c ****         }
2320:../../Source/Kernel/rme_kernel.c ****         
2321:../../Source/Kernel/rme_kernel.c ****         if((RME_PGT_FLAG_FLAG(Flag)&(~RME_PGT_FLAG_FLAG(Capobj_Src->Head.Flag)))!=0U)
 4292              		.loc 1 2321 39
 4293 04ac 24301BE5 		ldr	r3, [fp, #-36]
 4294 04b0 083093E5 		ldr	r3, [r3, #8]
 4295 04b4 7330EFE6 		uxtb	r3, r3
 4296              		.loc 1 2321 38
 4297 04b8 0320E0E1 		mvn	r2, r3
 4298              		.loc 1 2321 36
 4299 04bc 08309BE5 		ldr	r3, [fp, #8]
 4300 04c0 023003E0 		and	r3, r3, r2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 118


 4301 04c4 7330EFE6 		uxtb	r3, r3
 4302              		.loc 1 2321 11
 4303 04c8 000053E3 		cmp	r3, #0
 4304 04cc 7700000A 		beq	.L271
2322:../../Source/Kernel/rme_kernel.c ****         {
2323:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2324:../../Source/Kernel/rme_kernel.c ****             
2325:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4305              		.loc 1 2325 20
 4306 04d0 0630E0E3 		mvn	r3, #6
 4307 04d4 DE0000EA 		b	.L243
 4308              	.L266:
2326:../../Source/Kernel/rme_kernel.c ****         }
2327:../../Source/Kernel/rme_kernel.c ****         else
2328:../../Source/Kernel/rme_kernel.c ****         {
2329:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2330:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2331:../../Source/Kernel/rme_kernel.c ****         }
2332:../../Source/Kernel/rme_kernel.c ****     }
2333:../../Source/Kernel/rme_kernel.c ****     else if(Src_Type==RME_CAP_TYPE_KFN)
 4309              		.loc 1 2333 12
 4310 04d8 28301BE5 		ldr	r3, [fp, #-40]
 4311 04dc 010053E3 		cmp	r3, #1
 4312 04e0 1900001A 		bne	.L272
2334:../../Source/Kernel/rme_kernel.c ****     {
2335:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2336:../../Source/Kernel/rme_kernel.c ****         
2337:../../Source/Kernel/rme_kernel.c ****         /* Kernel funcrions only have ranges, no flags - check the delegation range */
2338:../../Source/Kernel/rme_kernel.c ****         if(RME_KFN_FLAG_HIGH(Flag)>RME_KFN_FLAG_HIGH(Capobj_Src->Head.Flag))
 4313              		.loc 1 2338 12
 4314 04e4 08309BE5 		ldr	r3, [fp, #8]
 4315 04e8 2328A0E1 		lsr	r2, r3, #16
 4316              		.loc 1 2338 36
 4317 04ec 24301BE5 		ldr	r3, [fp, #-36]
 4318 04f0 083093E5 		ldr	r3, [r3, #8]
 4319 04f4 2338A0E1 		lsr	r3, r3, #16
 4320              		.loc 1 2338 11
 4321 04f8 030052E1 		cmp	r2, r3
 4322 04fc 0100009A 		bls	.L273
2339:../../Source/Kernel/rme_kernel.c ****         {
2340:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2341:../../Source/Kernel/rme_kernel.c ****             
2342:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4323              		.loc 1 2342 20
 4324 0500 0630E0E3 		mvn	r3, #6
 4325 0504 D20000EA 		b	.L243
 4326              	.L273:
2343:../../Source/Kernel/rme_kernel.c ****         }
2344:../../Source/Kernel/rme_kernel.c ****         else
2345:../../Source/Kernel/rme_kernel.c ****         {
2346:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2347:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2348:../../Source/Kernel/rme_kernel.c ****         }
2349:../../Source/Kernel/rme_kernel.c ****         
2350:../../Source/Kernel/rme_kernel.c ****         if(RME_KFN_FLAG_LOW(Flag)<RME_KFN_FLAG_LOW(Capobj_Src->Head.Flag))
 4327              		.loc 1 2350 12
 4328 0508 08309BE5 		ldr	r3, [fp, #8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 119


 4329 050c 7320FFE6 		uxth	r2, r3
 4330              		.loc 1 2350 35
 4331 0510 24301BE5 		ldr	r3, [fp, #-36]
 4332 0514 083093E5 		ldr	r3, [r3, #8]
 4333 0518 7330FFE6 		uxth	r3, r3
 4334              		.loc 1 2350 11
 4335 051c 030052E1 		cmp	r2, r3
 4336 0520 0100002A 		bcs	.L274
2351:../../Source/Kernel/rme_kernel.c ****         {
2352:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2353:../../Source/Kernel/rme_kernel.c ****             
2354:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4337              		.loc 1 2354 20
 4338 0524 0630E0E3 		mvn	r3, #6
 4339 0528 C90000EA 		b	.L243
 4340              	.L274:
2355:../../Source/Kernel/rme_kernel.c ****         }
2356:../../Source/Kernel/rme_kernel.c ****         else
2357:../../Source/Kernel/rme_kernel.c ****         {
2358:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2359:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2360:../../Source/Kernel/rme_kernel.c ****         }
2361:../../Source/Kernel/rme_kernel.c ****         
2362:../../Source/Kernel/rme_kernel.c ****         if(RME_KFN_FLAG_HIGH(Flag)<RME_KFN_FLAG_LOW(Flag))
 4341              		.loc 1 2362 12
 4342 052c 08309BE5 		ldr	r3, [fp, #8]
 4343 0530 2328A0E1 		lsr	r2, r3, #16
 4344              		.loc 1 2362 36
 4345 0534 08309BE5 		ldr	r3, [fp, #8]
 4346 0538 7330FFE6 		uxth	r3, r3
 4347              		.loc 1 2362 11
 4348 053c 030052E1 		cmp	r2, r3
 4349 0540 5A00002A 		bcs	.L271
2363:../../Source/Kernel/rme_kernel.c ****         {
2364:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2365:../../Source/Kernel/rme_kernel.c ****             
2366:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4350              		.loc 1 2366 20
 4351 0544 0630E0E3 		mvn	r3, #6
 4352 0548 C10000EA 		b	.L243
 4353              	.L272:
2367:../../Source/Kernel/rme_kernel.c ****         }
2368:../../Source/Kernel/rme_kernel.c ****         else
2369:../../Source/Kernel/rme_kernel.c ****         {
2370:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2371:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2372:../../Source/Kernel/rme_kernel.c ****         }
2373:../../Source/Kernel/rme_kernel.c ****     }
2374:../../Source/Kernel/rme_kernel.c ****     else if(Src_Type==RME_CAP_TYPE_KOM)
 4354              		.loc 1 2374 12
 4355 054c 28301BE5 		ldr	r3, [fp, #-40]
 4356 0550 020053E3 		cmp	r3, #2
 4357 0554 4700001A 		bne	.L275
2375:../../Source/Kernel/rme_kernel.c ****     {
2376:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2377:../../Source/Kernel/rme_kernel.c ****         
2378:../../Source/Kernel/rme_kernel.c ****         /* The Kom_End here is exclusive */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 120


2379:../../Source/Kernel/rme_kernel.c ****         Kom_Begin=RME_KOM_FLAG_LOW(Flag,Ext_Flag);
 4358              		.loc 1 2379 18
 4359 0558 08309BE5 		ldr	r3, [fp, #8]
 4360 055c 0338A0E1 		lsl	r3, r3, #16
 4361 0560 10300BE5 		str	r3, [fp, #-16]
2380:../../Source/Kernel/rme_kernel.c ****         Kom_End=RME_KOM_FLAG_HIGH(Flag,Ext_Flag);
 4362              		.loc 1 2380 17
 4363 0564 08309BE5 		ldr	r3, [fp, #8]
 4364 0568 2338A0E1 		lsr	r3, r3, #16
 4365 056c 0338A0E1 		lsl	r3, r3, #16
 4366 0570 0C209BE5 		ldr	r2, [fp, #12]
 4367 0574 2228A0E1 		lsr	r2, r2, #16
 4368 0578 3F20C2E3 		bic	r2, r2, #63
 4369              		.loc 1 2380 16
 4370 057c 023083E1 		orr	r3, r3, r2
 4371 0580 14300BE5 		str	r3, [fp, #-20]
2381:../../Source/Kernel/rme_kernel.c ****         Kom_Flag=RME_KOM_FLAG_KOM(Ext_Flag);
 4372              		.loc 1 2381 17
 4373 0584 0030A0E3 		mov	r3, #0
 4374 0588 18300BE5 		str	r3, [fp, #-24]
2382:../../Source/Kernel/rme_kernel.c ****         
2383:../../Source/Kernel/rme_kernel.c ****         /* Round start and end to the slot boundary, if we are using slots bigger than 64 bytes */
2384:../../Source/Kernel/rme_kernel.c **** #if(RME_KOM_SLOT_ORDER>6U)
2385:../../Source/Kernel/rme_kernel.c ****         Kom_End=RME_ROUND_DOWN(Kom_End,RME_KOM_SLOT_ORDER);
2386:../../Source/Kernel/rme_kernel.c ****         Kom_Begin=RME_ROUND_UP(Kom_Begin,RME_KOM_SLOT_ORDER);
2387:../../Source/Kernel/rme_kernel.c **** #endif
2388:../../Source/Kernel/rme_kernel.c ****         if(Kom_End<=Kom_Begin)
 4375              		.loc 1 2388 11
 4376 058c 14201BE5 		ldr	r2, [fp, #-20]
 4377 0590 10301BE5 		ldr	r3, [fp, #-16]
 4378 0594 030052E1 		cmp	r2, r3
 4379 0598 0100008A 		bhi	.L276
2389:../../Source/Kernel/rme_kernel.c ****         {
2390:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2391:../../Source/Kernel/rme_kernel.c ****             
2392:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4380              		.loc 1 2392 20
 4381 059c 0630E0E3 		mvn	r3, #6
 4382 05a0 AB0000EA 		b	.L243
 4383              	.L276:
2393:../../Source/Kernel/rme_kernel.c ****         }
2394:../../Source/Kernel/rme_kernel.c ****         else
2395:../../Source/Kernel/rme_kernel.c ****         {
2396:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2397:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2398:../../Source/Kernel/rme_kernel.c ****         }
2399:../../Source/Kernel/rme_kernel.c **** 
2400:../../Source/Kernel/rme_kernel.c ****         /* Convert relative addresses to absolute addresses and check for overflow */
2401:../../Source/Kernel/rme_kernel.c ****         Kom_Begin+=((volatile struct RME_Cap_Kom*)Capobj_Src)->Begin;
 4384              		.loc 1 2401 62
 4385 05a4 24301BE5 		ldr	r3, [fp, #-36]
 4386 05a8 143093E5 		ldr	r3, [r3, #20]
 4387              		.loc 1 2401 18
 4388 05ac 10201BE5 		ldr	r2, [fp, #-16]
 4389 05b0 033082E0 		add	r3, r2, r3
 4390 05b4 10300BE5 		str	r3, [fp, #-16]
2402:../../Source/Kernel/rme_kernel.c ****         if(Kom_Begin<((volatile struct RME_Cap_Kom*)Capobj_Src)->Begin)
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 121


 4391              		.loc 1 2402 64
 4392 05b8 24301BE5 		ldr	r3, [fp, #-36]
 4393 05bc 143093E5 		ldr	r3, [r3, #20]
 4394              		.loc 1 2402 11
 4395 05c0 10201BE5 		ldr	r2, [fp, #-16]
 4396 05c4 030052E1 		cmp	r2, r3
 4397 05c8 0100002A 		bcs	.L277
2403:../../Source/Kernel/rme_kernel.c ****         {
2404:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2405:../../Source/Kernel/rme_kernel.c ****             
2406:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4398              		.loc 1 2406 20
 4399 05cc 0630E0E3 		mvn	r3, #6
 4400 05d0 9F0000EA 		b	.L243
 4401              	.L277:
2407:../../Source/Kernel/rme_kernel.c ****         }
2408:../../Source/Kernel/rme_kernel.c ****         else
2409:../../Source/Kernel/rme_kernel.c ****         {
2410:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2411:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2412:../../Source/Kernel/rme_kernel.c ****         }
2413:../../Source/Kernel/rme_kernel.c ****         
2414:../../Source/Kernel/rme_kernel.c ****         Kom_End+=((volatile struct RME_Cap_Kom*)Capobj_Src)->Begin;
 4402              		.loc 1 2414 60
 4403 05d4 24301BE5 		ldr	r3, [fp, #-36]
 4404 05d8 143093E5 		ldr	r3, [r3, #20]
 4405              		.loc 1 2414 16
 4406 05dc 14201BE5 		ldr	r2, [fp, #-20]
 4407 05e0 033082E0 		add	r3, r2, r3
 4408 05e4 14300BE5 		str	r3, [fp, #-20]
2415:../../Source/Kernel/rme_kernel.c ****         if(Kom_End<((volatile struct RME_Cap_Kom*)Capobj_Src)->Begin)
 4409              		.loc 1 2415 62
 4410 05e8 24301BE5 		ldr	r3, [fp, #-36]
 4411 05ec 143093E5 		ldr	r3, [r3, #20]
 4412              		.loc 1 2415 11
 4413 05f0 14201BE5 		ldr	r2, [fp, #-20]
 4414 05f4 030052E1 		cmp	r2, r3
 4415 05f8 0100002A 		bcs	.L278
2416:../../Source/Kernel/rme_kernel.c ****         {
2417:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2418:../../Source/Kernel/rme_kernel.c ****             
2419:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4416              		.loc 1 2419 20
 4417 05fc 0630E0E3 		mvn	r3, #6
 4418 0600 930000EA 		b	.L243
 4419              	.L278:
2420:../../Source/Kernel/rme_kernel.c ****         }
2421:../../Source/Kernel/rme_kernel.c ****         else
2422:../../Source/Kernel/rme_kernel.c ****         {
2423:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2424:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2425:../../Source/Kernel/rme_kernel.c ****         }
2426:../../Source/Kernel/rme_kernel.c **** 
2427:../../Source/Kernel/rme_kernel.c ****         /* Check the ranges of kernel memory */
2428:../../Source/Kernel/rme_kernel.c ****         if(((volatile struct RME_Cap_Kom*)Capobj_Src)->Begin>Kom_Begin)
 4420              		.loc 1 2428 54
 4421 0604 24301BE5 		ldr	r3, [fp, #-36]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 122


 4422 0608 143093E5 		ldr	r3, [r3, #20]
 4423              		.loc 1 2428 11
 4424 060c 10201BE5 		ldr	r2, [fp, #-16]
 4425 0610 030052E1 		cmp	r2, r3
 4426 0614 0100002A 		bcs	.L279
2429:../../Source/Kernel/rme_kernel.c ****         {
2430:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2431:../../Source/Kernel/rme_kernel.c ****             
2432:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4427              		.loc 1 2432 20
 4428 0618 0630E0E3 		mvn	r3, #6
 4429 061c 8C0000EA 		b	.L243
 4430              	.L279:
2433:../../Source/Kernel/rme_kernel.c ****         }
2434:../../Source/Kernel/rme_kernel.c ****         else
2435:../../Source/Kernel/rme_kernel.c ****         {
2436:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2437:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2438:../../Source/Kernel/rme_kernel.c ****         }
2439:../../Source/Kernel/rme_kernel.c ****         
2440:../../Source/Kernel/rme_kernel.c ****         /* Internal encoding of 'end' is inclusive */
2441:../../Source/Kernel/rme_kernel.c ****         if(((volatile struct RME_Cap_Kom*)Capobj_Src)->End<(Kom_End-1U))
 4431              		.loc 1 2441 54
 4432 0620 24301BE5 		ldr	r3, [fp, #-36]
 4433 0624 182093E5 		ldr	r2, [r3, #24]
 4434              		.loc 1 2441 68
 4435 0628 14301BE5 		ldr	r3, [fp, #-20]
 4436 062c 013043E2 		sub	r3, r3, #1
 4437              		.loc 1 2441 11
 4438 0630 030052E1 		cmp	r2, r3
 4439 0634 0100002A 		bcs	.L280
2442:../../Source/Kernel/rme_kernel.c ****         {
2443:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2444:../../Source/Kernel/rme_kernel.c ****             
2445:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4440              		.loc 1 2445 20
 4441 0638 0630E0E3 		mvn	r3, #6
 4442 063c 840000EA 		b	.L243
 4443              	.L280:
2446:../../Source/Kernel/rme_kernel.c ****         }
2447:../../Source/Kernel/rme_kernel.c ****         else
2448:../../Source/Kernel/rme_kernel.c ****         {
2449:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2450:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2451:../../Source/Kernel/rme_kernel.c ****         }
2452:../../Source/Kernel/rme_kernel.c ****         
2453:../../Source/Kernel/rme_kernel.c ****         /* Check the flags - if there are extra ones, or all zero */
2454:../../Source/Kernel/rme_kernel.c ****         if(Kom_Flag==0U)
 4444              		.loc 1 2454 11
 4445 0640 18301BE5 		ldr	r3, [fp, #-24]
 4446 0644 000053E3 		cmp	r3, #0
 4447 0648 0100001A 		bne	.L281
2455:../../Source/Kernel/rme_kernel.c ****         {
2456:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2457:../../Source/Kernel/rme_kernel.c ****             
2458:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4448              		.loc 1 2458 20
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 123


 4449 064c 0630E0E3 		mvn	r3, #6
 4450 0650 7F0000EA 		b	.L243
 4451              	.L281:
2459:../../Source/Kernel/rme_kernel.c ****         }
2460:../../Source/Kernel/rme_kernel.c ****         else
2461:../../Source/Kernel/rme_kernel.c ****         {
2462:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2463:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2464:../../Source/Kernel/rme_kernel.c ****         }
2465:../../Source/Kernel/rme_kernel.c ****         
2466:../../Source/Kernel/rme_kernel.c ****         if((Kom_Flag&(~(Capobj_Src->Head.Flag)))!=0U)
 4452              		.loc 1 2466 41
 4453 0654 24301BE5 		ldr	r3, [fp, #-36]
 4454 0658 083093E5 		ldr	r3, [r3, #8]
 4455              		.loc 1 2466 23
 4456 065c 0320E0E1 		mvn	r2, r3
 4457              		.loc 1 2466 21
 4458 0660 18301BE5 		ldr	r3, [fp, #-24]
 4459 0664 023003E0 		and	r3, r3, r2
 4460              		.loc 1 2466 11
 4461 0668 000053E3 		cmp	r3, #0
 4462 066c 0F00000A 		beq	.L271
2467:../../Source/Kernel/rme_kernel.c ****         {
2468:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2469:../../Source/Kernel/rme_kernel.c ****             
2470:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4463              		.loc 1 2470 20
 4464 0670 0630E0E3 		mvn	r3, #6
 4465 0674 760000EA 		b	.L243
 4466              	.L275:
2471:../../Source/Kernel/rme_kernel.c ****         }
2472:../../Source/Kernel/rme_kernel.c ****         else
2473:../../Source/Kernel/rme_kernel.c ****         {
2474:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2475:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2476:../../Source/Kernel/rme_kernel.c ****         }
2477:../../Source/Kernel/rme_kernel.c ****     }
2478:../../Source/Kernel/rme_kernel.c ****     /* All other caps */
2479:../../Source/Kernel/rme_kernel.c ****     else
2480:../../Source/Kernel/rme_kernel.c ****     {
2481:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2482:../../Source/Kernel/rme_kernel.c ****         
2483:../../Source/Kernel/rme_kernel.c ****         /* Check the flags - if there are extra ones, or all zero */
2484:../../Source/Kernel/rme_kernel.c ****         if(Flag==0U)
 4467              		.loc 1 2484 11
 4468 0678 08309BE5 		ldr	r3, [fp, #8]
 4469 067c 000053E3 		cmp	r3, #0
 4470 0680 0100001A 		bne	.L282
2485:../../Source/Kernel/rme_kernel.c ****         {
2486:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2487:../../Source/Kernel/rme_kernel.c ****             
2488:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4471              		.loc 1 2488 20
 4472 0684 0630E0E3 		mvn	r3, #6
 4473 0688 710000EA 		b	.L243
 4474              	.L282:
2489:../../Source/Kernel/rme_kernel.c ****         }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 124


2490:../../Source/Kernel/rme_kernel.c ****         else
2491:../../Source/Kernel/rme_kernel.c ****         {
2492:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2493:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2494:../../Source/Kernel/rme_kernel.c ****         }
2495:../../Source/Kernel/rme_kernel.c ****         if((Flag&(~(Capobj_Src->Head.Flag)))!=0U)
 4475              		.loc 1 2495 37
 4476 068c 24301BE5 		ldr	r3, [fp, #-36]
 4477 0690 083093E5 		ldr	r3, [r3, #8]
 4478              		.loc 1 2495 19
 4479 0694 0320E0E1 		mvn	r2, r3
 4480              		.loc 1 2495 17
 4481 0698 08309BE5 		ldr	r3, [fp, #8]
 4482 069c 023003E0 		and	r3, r3, r2
 4483              		.loc 1 2495 11
 4484 06a0 000053E3 		cmp	r3, #0
 4485 06a4 0100000A 		beq	.L271
2496:../../Source/Kernel/rme_kernel.c ****         {
2497:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2498:../../Source/Kernel/rme_kernel.c ****             
2499:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_CPT_FLAG;
 4486              		.loc 1 2499 20
 4487 06a8 0630E0E3 		mvn	r3, #6
 4488 06ac 680000EA 		b	.L243
 4489              	.L271:
2500:../../Source/Kernel/rme_kernel.c ****         }
2501:../../Source/Kernel/rme_kernel.c ****         else
2502:../../Source/Kernel/rme_kernel.c ****         {
2503:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2504:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2505:../../Source/Kernel/rme_kernel.c ****         }
2506:../../Source/Kernel/rme_kernel.c ****     }
2507:../../Source/Kernel/rme_kernel.c ****     
2508:../../Source/Kernel/rme_kernel.c ****     /* Is the destination slot unoccupied? */
2509:../../Source/Kernel/rme_kernel.c ****     if(Capobj_Dst->Head.Type_Stat!=0U)
 4490              		.loc 1 2509 24
 4491 06b0 20301BE5 		ldr	r3, [fp, #-32]
 4492 06b4 003093E5 		ldr	r3, [r3]
 4493              		.loc 1 2509 7
 4494 06b8 000053E3 		cmp	r3, #0
 4495 06bc 0100000A 		beq	.L283
2510:../../Source/Kernel/rme_kernel.c ****     {
2511:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2512:../../Source/Kernel/rme_kernel.c ****             
2513:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_EXIST;
 4496              		.loc 1 2513 16
 4497 06c0 0430E0E3 		mvn	r3, #4
 4498 06c4 620000EA 		b	.L243
 4499              	.L283:
2514:../../Source/Kernel/rme_kernel.c ****     }
2515:../../Source/Kernel/rme_kernel.c ****     else
2516:../../Source/Kernel/rme_kernel.c ****     {
2517:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2518:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2519:../../Source/Kernel/rme_kernel.c ****     }
2520:../../Source/Kernel/rme_kernel.c ****     
2521:../../Source/Kernel/rme_kernel.c ****     /* Try to take the empty slot */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 125


2522:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Capobj_Dst);
 4500              		.loc 1 2522 5
 4501 06c8 20301BE5 		ldr	r3, [fp, #-32]
 4502 06cc 0128A0E3 		mov	r2, #65536
 4503 06d0 0010A0E3 		mov	r1, #0
 4504 06d4 0300A0E1 		mov	r0, r3
 4505 06d8 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 4506 06dc 0030A0E1 		mov	r3, r0
 4507              		.loc 1 2522 5 is_stmt 0 discriminator 1
 4508 06e0 000053E3 		cmp	r3, #0
 4509 06e4 0100001A 		bne	.L284
 4510 06e8 0430E0E3 		mvn	r3, #4
 4511              		.loc 1 2522 5
 4512 06ec 580000EA 		b	.L243
 4513              	.L284:
 4514              		.loc 1 2522 5 discriminator 2
 4515 06f0 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 4516 06f4 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 4517 06f8 002093E5 		ldr	r2, [r3]
 4518 06fc 20301BE5 		ldr	r3, [fp, #-32]
 4519 0700 102083E5 		str	r2, [r3, #16]
2523:../../Source/Kernel/rme_kernel.c ****     
2524:../../Source/Kernel/rme_kernel.c ****     /* All done, we replicate the cap with flags */
2525:../../Source/Kernel/rme_kernel.c ****     if(Src_Type==RME_CAP_TYPE_KOM)
 4520              		.loc 1 2525 7 is_stmt 1
 4521 0704 28301BE5 		ldr	r3, [fp, #-40]
 4522 0708 020053E3 		cmp	r3, #2
 4523 070c 1A00001A 		bne	.L285
2526:../../Source/Kernel/rme_kernel.c ****     {
2527:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2528:../../Source/Kernel/rme_kernel.c ****             
2529:../../Source/Kernel/rme_kernel.c ****         RME_CAP_COPY(Capobj_Dst,Capobj_Src,Kom_Flag);
 4524              		.loc 1 2529 9
 4525 0710 20301BE5 		ldr	r3, [fp, #-32]
 4526 0714 18201BE5 		ldr	r2, [fp, #-24]
 4527 0718 082083E5 		str	r2, [r3, #8]
 4528 071c 24301BE5 		ldr	r3, [fp, #-36]
 4529 0720 0C2093E5 		ldr	r2, [r3, #12]
 4530 0724 20301BE5 		ldr	r3, [fp, #-32]
 4531 0728 0C2083E5 		str	r2, [r3, #12]
 4532 072c 24301BE5 		ldr	r3, [fp, #-36]
 4533 0730 142093E5 		ldr	r2, [r3, #20]
 4534 0734 20301BE5 		ldr	r3, [fp, #-32]
 4535 0738 142083E5 		str	r2, [r3, #20]
 4536 073c 24301BE5 		ldr	r3, [fp, #-36]
 4537 0740 182093E5 		ldr	r2, [r3, #24]
 4538 0744 20301BE5 		ldr	r3, [fp, #-32]
 4539 0748 182083E5 		str	r2, [r3, #24]
 4540 074c 24301BE5 		ldr	r3, [fp, #-36]
 4541 0750 1C2093E5 		ldr	r2, [r3, #28]
 4542 0754 20301BE5 		ldr	r3, [fp, #-32]
 4543 0758 1C2083E5 		str	r2, [r3, #28]
2530:../../Source/Kernel/rme_kernel.c ****         /* Write absolute range information for kernel memory caps */
2531:../../Source/Kernel/rme_kernel.c ****         ((volatile struct RME_Cap_Kom*)Capobj_Dst)->Begin=Kom_Begin;
 4544              		.loc 1 2531 58
 4545 075c 20301BE5 		ldr	r3, [fp, #-32]
 4546 0760 10201BE5 		ldr	r2, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 126


 4547 0764 142083E5 		str	r2, [r3, #20]
2532:../../Source/Kernel/rme_kernel.c ****         /* The Kom_End encoded inclusively to avoid overflow at max address */
2533:../../Source/Kernel/rme_kernel.c ****         ((volatile struct RME_Cap_Kom*)Capobj_Dst)->End=Kom_End-1U;
 4548              		.loc 1 2533 64
 4549 0768 14301BE5 		ldr	r3, [fp, #-20]
 4550 076c 012043E2 		sub	r2, r3, #1
 4551              		.loc 1 2533 56
 4552 0770 20301BE5 		ldr	r3, [fp, #-32]
 4553 0774 182083E5 		str	r2, [r3, #24]
 4554 0778 120000EA 		b	.L286
 4555              	.L285:
2534:../../Source/Kernel/rme_kernel.c ****     }
2535:../../Source/Kernel/rme_kernel.c ****     else
2536:../../Source/Kernel/rme_kernel.c ****     {
2537:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2538:../../Source/Kernel/rme_kernel.c ****         
2539:../../Source/Kernel/rme_kernel.c ****         RME_CAP_COPY(Capobj_Dst,Capobj_Src,Flag);
 4556              		.loc 1 2539 9
 4557 077c 20301BE5 		ldr	r3, [fp, #-32]
 4558 0780 08209BE5 		ldr	r2, [fp, #8]
 4559 0784 082083E5 		str	r2, [r3, #8]
 4560 0788 24301BE5 		ldr	r3, [fp, #-36]
 4561 078c 0C2093E5 		ldr	r2, [r3, #12]
 4562 0790 20301BE5 		ldr	r3, [fp, #-32]
 4563 0794 0C2083E5 		str	r2, [r3, #12]
 4564 0798 24301BE5 		ldr	r3, [fp, #-36]
 4565 079c 142093E5 		ldr	r2, [r3, #20]
 4566 07a0 20301BE5 		ldr	r3, [fp, #-32]
 4567 07a4 142083E5 		str	r2, [r3, #20]
 4568 07a8 24301BE5 		ldr	r3, [fp, #-36]
 4569 07ac 182093E5 		ldr	r2, [r3, #24]
 4570 07b0 20301BE5 		ldr	r3, [fp, #-32]
 4571 07b4 182083E5 		str	r2, [r3, #24]
 4572 07b8 24301BE5 		ldr	r3, [fp, #-36]
 4573 07bc 1C2093E5 		ldr	r2, [r3, #28]
 4574 07c0 20301BE5 		ldr	r3, [fp, #-32]
 4575 07c4 1C2083E5 		str	r2, [r3, #28]
 4576              	.L286:
2540:../../Source/Kernel/rme_kernel.c ****     }
2541:../../Source/Kernel/rme_kernel.c ****     
2542:../../Source/Kernel/rme_kernel.c ****     /* Set the parent and increase reference count - if this is actually needed.
2543:../../Source/Kernel/rme_kernel.c ****      * The only two cases where this is not needed are KFN and KOM. These two
2544:../../Source/Kernel/rme_kernel.c ****      * capability types are standalone on their own and do not need to reference
2545:../../Source/Kernel/rme_kernel.c ****      * their parent, nor will they update the parent's reference count. This
2546:../../Source/Kernel/rme_kernel.c ****      * design decision comes from the fact that these two capability types are
2547:../../Source/Kernel/rme_kernel.c ****      * always created on boot and delegated everywhere, and they don't actually
2548:../../Source/Kernel/rme_kernel.c ****      * have an object. If we use refcnt on these, we may cause scalability 
2549:../../Source/Kernel/rme_kernel.c ****      * issues. The parent cap can't be deleted anyway, so this is fine. */
2550:../../Source/Kernel/rme_kernel.c ****     if((Src_Type!=RME_CAP_TYPE_KOM)&&(Src_Type!=RME_CAP_TYPE_KFN))
 4577              		.loc 1 2550 7
 4578 07c8 28301BE5 		ldr	r3, [fp, #-40]
 4579 07cc 020053E3 		cmp	r3, #2
 4580 07d0 1400000A 		beq	.L287
 4581              		.loc 1 2550 36 discriminator 1
 4582 07d4 28301BE5 		ldr	r3, [fp, #-40]
 4583 07d8 010053E3 		cmp	r3, #1
 4584 07dc 1100000A 		beq	.L287
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 127


2551:../../Source/Kernel/rme_kernel.c ****     {
2552:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2553:../../Source/Kernel/rme_kernel.c ****         
2554:../../Source/Kernel/rme_kernel.c ****         /* Register root */
2555:../../Source/Kernel/rme_kernel.c ****         Capobj_Dst->Head.Root_Ref=RME_CAP_CONV_ROOT(Capobj_Src,rme_ptr_t);
 4585              		.loc 1 2555 35
 4586 07e0 24301BE5 		ldr	r3, [fp, #-36]
 4587 07e4 003093E5 		ldr	r3, [r3]
 4588 07e8 7330FFE6 		uxth	r3, r3
 4589 07ec 000053E3 		cmp	r3, #0
 4590 07f0 0200000A 		beq	.L288
 4591              		.loc 1 2555 35 is_stmt 0 discriminator 1
 4592 07f4 24301BE5 		ldr	r3, [fp, #-36]
 4593 07f8 043093E5 		ldr	r3, [r3, #4]
 4594 07fc 000000EA 		b	.L289
 4595              	.L288:
 4596              		.loc 1 2555 35 discriminator 2
 4597 0800 24301BE5 		ldr	r3, [fp, #-36]
 4598              	.L289:
 4599              		.loc 1 2555 34 is_stmt 1 discriminator 4
 4600 0804 20201BE5 		ldr	r2, [fp, #-32]
 4601 0808 043082E5 		str	r3, [r2, #4]
2556:../../Source/Kernel/rme_kernel.c ****     
2557:../../Source/Kernel/rme_kernel.c ****         /* Increase the parent's refcnt - never overflows, guaranteed by field size */
2558:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_ADD(&(((volatile struct RME_Cap_Struct*)
 4602              		.loc 1 2558 9
 4603 080c 20301BE5 		ldr	r3, [fp, #-32]
 4604 0810 043093E5 		ldr	r3, [r3, #4]
 4605 0814 043083E2 		add	r3, r3, #4
 4606 0818 0110A0E3 		mov	r1, #1
 4607 081c 0300A0E1 		mov	r0, r3
 4608 0820 FEFFFFEB 		bl	_RME_Fetch_Add_Single
 4609 0824 020000EA 		b	.L290
 4610              	.L287:
2559:../../Source/Kernel/rme_kernel.c ****                         (Capobj_Dst->Head.Root_Ref))->Head.Root_Ref),1U);
2560:../../Source/Kernel/rme_kernel.c ****     }
2561:../../Source/Kernel/rme_kernel.c ****     else
2562:../../Source/Kernel/rme_kernel.c ****     {
2563:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2564:../../Source/Kernel/rme_kernel.c ****         
2565:../../Source/Kernel/rme_kernel.c ****         /* No root for KOM and KFN */
2566:../../Source/Kernel/rme_kernel.c ****         Capobj_Dst->Head.Root_Ref=0U;
 4611              		.loc 1 2566 34
 4612 0828 20301BE5 		ldr	r3, [fp, #-32]
 4613 082c 0020A0E3 		mov	r2, #0
 4614 0830 042083E5 		str	r2, [r3, #4]
 4615              	.L290:
2567:../../Source/Kernel/rme_kernel.c ****     }
2568:../../Source/Kernel/rme_kernel.c **** 
2569:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
2570:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Capobj_Dst->Head.Type_Stat),
 4616              		.loc 1 2570 5
 4617 0834 20201BE5 		ldr	r2, [fp, #-32]
 4618 0838 28301BE5 		ldr	r3, [fp, #-40]
 4619 083c 033CA0E1 		lsl	r3, r3, #24
 4620 0840 013083E3 		orr	r3, r3, #1
 4621 0844 0310A0E1 		mov	r1, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 128


 4622 0848 0200A0E1 		mov	r0, r2
 4623 084c FEFFFFEB 		bl	__RME_A7A_Write_Release
2571:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(Src_Type,
2572:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
2573:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_LEAF));
2574:../../Source/Kernel/rme_kernel.c **** 
2575:../../Source/Kernel/rme_kernel.c ****     return 0;
 4624              		.loc 1 2575 12
 4625 0850 0030A0E3 		mov	r3, #0
 4626              	.L243:
2576:../../Source/Kernel/rme_kernel.c **** }
 4627              		.loc 1 2576 1
 4628 0854 0300A0E1 		mov	r0, r3
 4629 0858 04D04BE2 		sub	sp, fp, #4
 4630              		.cfi_def_cfa 13, 8
 4631              		@ sp needed
 4632 085c 0088BDE8 		pop	{fp, pc}
 4633              		.cfi_endproc
 4634              	.LFE27:
 4636              		.section	.text._RME_Cpt_Rem,"ax",%progbits
 4637              		.align	2
 4638              		.syntax unified
 4639              		.arm
 4641              	_RME_Cpt_Rem:
 4642              	.LFB28:
2577:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Add *************************************************/
2578:../../Source/Kernel/rme_kernel.c **** 
2579:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Cpt_Rem ******************************************************
2580:../../Source/Kernel/rme_kernel.c **** Description : Remove one capability from the capability table. This function
2581:../../Source/Kernel/rme_kernel.c ****               reverts the delegation.
2582:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2583:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Rem - The capability to the capability table to
2584:../../Source/Kernel/rme_kernel.c ****                                       remove from.
2585:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
2586:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Rem - The capability slot you want to remove.
2587:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2588:../../Source/Kernel/rme_kernel.c **** Output      : None.
2589:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2590:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2591:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Cpt_Rem(struct RME_Cap_Cpt* Cpt,
2592:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Rem,
2593:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Rem)
2594:../../Source/Kernel/rme_kernel.c **** {
 4643              		.loc 1 2594 1
 4644              		.cfi_startproc
 4645              		@ args = 0, pretend = 0, frame = 40
 4646              		@ frame_needed = 1, uses_anonymous_args = 0
 4647 0000 00482DE9 		push	{fp, lr}
 4648              		.cfi_def_cfa_offset 8
 4649              		.cfi_offset 11, -8
 4650              		.cfi_offset 14, -4
 4651 0004 04B08DE2 		add	fp, sp, #4
 4652              		.cfi_def_cfa 11, 4
 4653 0008 28D04DE2 		sub	sp, sp, #40
 4654 000c 20000BE5 		str	r0, [fp, #-32]
 4655 0010 24100BE5 		str	r1, [fp, #-36]
 4656 0014 28200BE5 		str	r2, [fp, #-40]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 129


2595:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
2596:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Struct* Capobj_Rem;
2597:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2598:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Rem_Type;
2599:../../Source/Kernel/rme_kernel.c ****     /* This is used for removal */
2600:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Struct* Capobj_Root;
2601:../../Source/Kernel/rme_kernel.c ****     
2602:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
2603:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Rem,RME_CAP_TYPE_CPT,
 4657              		.loc 1 2603 5
 4658 0018 24301BE5 		ldr	r3, [fp, #-36]
 4659 001c 803003E2 		and	r3, r3, #128
 4660 0020 000053E3 		cmp	r3, #0
 4661 0024 1C00001A 		bne	.L292
 4662              		.loc 1 2603 5 is_stmt 0 discriminator 1
 4663 0028 20301BE5 		ldr	r3, [fp, #-32]
 4664 002c 142093E5 		ldr	r2, [r3, #20]
 4665 0030 24301BE5 		ldr	r3, [fp, #-36]
 4666 0034 030052E1 		cmp	r2, r3
 4667 0038 0100008A 		bhi	.L293
 4668              		.loc 1 2603 5 discriminator 3
 4669 003c 0230E0E3 		mvn	r3, #2
 4670              		.loc 1 2603 5
 4671 0040 AB0000EA 		b	.L294
 4672              	.L293:
 4673              		.loc 1 2603 5 discriminator 4
 4674 0044 24301BE5 		ldr	r3, [fp, #-36]
 4675 0048 8322A0E1 		lsl	r2, r3, #5
 4676 004c 20301BE5 		ldr	r3, [fp, #-32]
 4677 0050 0C3093E5 		ldr	r3, [r3, #12]
 4678 0054 033082E0 		add	r3, r2, r3
 4679 0058 08300BE5 		str	r3, [fp, #-8]
 4680 005c 08301BE5 		ldr	r3, [fp, #-8]
 4681 0060 0300A0E1 		mov	r0, r3
 4682 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4683 0068 0C000BE5 		str	r0, [fp, #-12]
 4684              		.loc 1 2603 5 discriminator 1
 4685 006c 0C301BE5 		ldr	r3, [fp, #-12]
 4686 0070 FF3803E2 		and	r3, r3, #16711680
 4687 0074 020853E3 		cmp	r3, #131072
 4688 0078 0100001A 		bne	.L295
 4689              		.loc 1 2603 5 discriminator 5
 4690 007c 0830E0E3 		mvn	r3, #8
 4691              		.loc 1 2603 5
 4692 0080 9B0000EA 		b	.L294
 4693              	.L295:
 4694              		.loc 1 2603 5 discriminator 6
 4695 0084 0C301BE5 		ldr	r3, [fp, #-12]
 4696 0088 233CA0E1 		lsr	r3, r3, #24
 4697 008c 030053E3 		cmp	r3, #3
 4698 0090 3F00000A 		beq	.L296
 4699              		.loc 1 2603 5 discriminator 7
 4700 0094 0130E0E3 		mvn	r3, #1
 4701              		.loc 1 2603 5
 4702 0098 950000EA 		b	.L294
 4703              	.L292:
 4704              		.loc 1 2603 5 discriminator 2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 130


 4705 009c 24301BE5 		ldr	r3, [fp, #-36]
 4706 00a0 2324A0E1 		lsr	r2, r3, #8
 4707 00a4 20301BE5 		ldr	r3, [fp, #-32]
 4708 00a8 143093E5 		ldr	r3, [r3, #20]
 4709 00ac 030052E1 		cmp	r2, r3
 4710 00b0 0100003A 		bcc	.L297
 4711              		.loc 1 2603 5 discriminator 8
 4712 00b4 0230E0E3 		mvn	r3, #2
 4713              		.loc 1 2603 5
 4714 00b8 8D0000EA 		b	.L294
 4715              	.L297:
 4716              		.loc 1 2603 5 discriminator 9
 4717 00bc 24301BE5 		ldr	r3, [fp, #-36]
 4718 00c0 2334A0E1 		lsr	r3, r3, #8
 4719 00c4 8322A0E1 		lsl	r2, r3, #5
 4720 00c8 20301BE5 		ldr	r3, [fp, #-32]
 4721 00cc 0C3093E5 		ldr	r3, [r3, #12]
 4722 00d0 033082E0 		add	r3, r2, r3
 4723 00d4 08300BE5 		str	r3, [fp, #-8]
 4724 00d8 08301BE5 		ldr	r3, [fp, #-8]
 4725 00dc 0300A0E1 		mov	r0, r3
 4726 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4727 00e4 0C000BE5 		str	r0, [fp, #-12]
 4728              		.loc 1 2603 5 discriminator 1
 4729 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 4730 00ec FF3803E2 		and	r3, r3, #16711680
 4731 00f0 020853E3 		cmp	r3, #131072
 4732 00f4 0100001A 		bne	.L298
 4733              		.loc 1 2603 5 discriminator 10
 4734 00f8 0830E0E3 		mvn	r3, #8
 4735              		.loc 1 2603 5
 4736 00fc 7C0000EA 		b	.L294
 4737              	.L298:
 4738              		.loc 1 2603 5 discriminator 11
 4739 0100 0C301BE5 		ldr	r3, [fp, #-12]
 4740 0104 233CA0E1 		lsr	r3, r3, #24
 4741 0108 030053E3 		cmp	r3, #3
 4742 010c 0100000A 		beq	.L299
 4743              		.loc 1 2603 5 discriminator 12
 4744 0110 0130E0E3 		mvn	r3, #1
 4745              		.loc 1 2603 5
 4746 0114 760000EA 		b	.L294
 4747              	.L299:
 4748              		.loc 1 2603 5 discriminator 13
 4749 0118 24301BE5 		ldr	r3, [fp, #-36]
 4750 011c 7F2003E2 		and	r2, r3, #127
 4751 0120 08301BE5 		ldr	r3, [fp, #-8]
 4752 0124 143093E5 		ldr	r3, [r3, #20]
 4753 0128 030052E1 		cmp	r2, r3
 4754 012c 0100003A 		bcc	.L300
 4755              		.loc 1 2603 5 discriminator 14
 4756 0130 0230E0E3 		mvn	r3, #2
 4757              		.loc 1 2603 5
 4758 0134 6E0000EA 		b	.L294
 4759              	.L300:
 4760              		.loc 1 2603 5 discriminator 15
 4761 0138 24301BE5 		ldr	r3, [fp, #-36]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 131


 4762 013c 7F3003E2 		and	r3, r3, #127
 4763 0140 8322A0E1 		lsl	r2, r3, #5
 4764 0144 08301BE5 		ldr	r3, [fp, #-8]
 4765 0148 0C3093E5 		ldr	r3, [r3, #12]
 4766 014c 033082E0 		add	r3, r2, r3
 4767 0150 08300BE5 		str	r3, [fp, #-8]
 4768 0154 08301BE5 		ldr	r3, [fp, #-8]
 4769 0158 0300A0E1 		mov	r0, r3
 4770 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4771 0160 0C000BE5 		str	r0, [fp, #-12]
 4772              		.loc 1 2603 5 discriminator 1
 4773 0164 0C301BE5 		ldr	r3, [fp, #-12]
 4774 0168 FF3803E2 		and	r3, r3, #16711680
 4775 016c 020853E3 		cmp	r3, #131072
 4776 0170 0100001A 		bne	.L301
 4777              		.loc 1 2603 5 discriminator 16
 4778 0174 0830E0E3 		mvn	r3, #8
 4779              		.loc 1 2603 5
 4780 0178 5D0000EA 		b	.L294
 4781              	.L301:
 4782              		.loc 1 2603 5 discriminator 17
 4783 017c 0C301BE5 		ldr	r3, [fp, #-12]
 4784 0180 233CA0E1 		lsr	r3, r3, #24
 4785 0184 030053E3 		cmp	r3, #3
 4786 0188 0100000A 		beq	.L296
 4787              		.loc 1 2603 5 discriminator 18
 4788 018c 0130E0E3 		mvn	r3, #1
 4789              		.loc 1 2603 5
 4790 0190 570000EA 		b	.L294
 4791              	.L296:
2604:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
2605:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
2606:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_REM);
 4792              		.loc 1 2606 5 is_stmt 1
 4793 0194 08301BE5 		ldr	r3, [fp, #-8]
 4794 0198 083093E5 		ldr	r3, [r3, #8]
 4795 019c 203003E2 		and	r3, r3, #32
 4796 01a0 000053E3 		cmp	r3, #0
 4797 01a4 0100001A 		bne	.L302
 4798              		.loc 1 2606 5 is_stmt 0 discriminator 1
 4799 01a8 0630E0E3 		mvn	r3, #6
 4800              		.loc 1 2606 5
 4801 01ac 500000EA 		b	.L294
 4802              	.L302:
2607:../../Source/Kernel/rme_kernel.c ****     
2608:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
2609:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Rem,struct RME_Cap_Struct*,Capobj_Rem);
 4803              		.loc 1 2609 5 is_stmt 1
 4804 01b0 08301BE5 		ldr	r3, [fp, #-8]
 4805 01b4 142093E5 		ldr	r2, [r3, #20]
 4806 01b8 28301BE5 		ldr	r3, [fp, #-40]
 4807 01bc 030052E1 		cmp	r2, r3
 4808 01c0 0100008A 		bhi	.L303
 4809              		.loc 1 2609 5 is_stmt 0 discriminator 1
 4810 01c4 0230E0E3 		mvn	r3, #2
 4811              		.loc 1 2609 5
 4812 01c8 490000EA 		b	.L294
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 132


 4813              	.L303:
 4814              		.loc 1 2609 5 discriminator 2
 4815 01cc 28301BE5 		ldr	r3, [fp, #-40]
 4816 01d0 8322A0E1 		lsl	r2, r3, #5
 4817 01d4 08301BE5 		ldr	r3, [fp, #-8]
 4818 01d8 0C3093E5 		ldr	r3, [r3, #12]
 4819 01dc 033082E0 		add	r3, r2, r3
 4820 01e0 10300BE5 		str	r3, [fp, #-16]
2610:../../Source/Kernel/rme_kernel.c ****     /* Removal check */
2611:../../Source/Kernel/rme_kernel.c ****     RME_CAP_REM_CHECK(Capobj_Rem,Type_Stat);
 4821              		.loc 1 2611 5 is_stmt 1
 4822 01e4 10301BE5 		ldr	r3, [fp, #-16]
 4823 01e8 0300A0E1 		mov	r0, r3
 4824 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4825 01f0 0C000BE5 		str	r0, [fp, #-12]
 4826              		.loc 1 2611 5 is_stmt 0 discriminator 1
 4827 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 4828 01f8 FF3803E2 		and	r3, r3, #16711680
 4829 01fc 020853E3 		cmp	r3, #131072
 4830 0200 0100000A 		beq	.L304
 4831 0204 0830E0E3 		mvn	r3, #8
 4832              		.loc 1 2611 5
 4833 0208 390000EA 		b	.L294
 4834              	.L304:
 4835              		.loc 1 2611 5 discriminator 2
 4836 020c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 4837 0210 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 4838 0214 002093E5 		ldr	r2, [r3]
 4839 0218 10301BE5 		ldr	r3, [fp, #-16]
 4840 021c 103093E5 		ldr	r3, [r3, #16]
 4841 0220 0310A0E1 		mov	r1, r3
 4842 0224 0200A0E1 		mov	r0, r2
 4843 0228 FEFFFFEB 		bl	_RME_Diff
 4844 022c 0030A0E1 		mov	r3, r0
 4845              		.loc 1 2611 5 discriminator 1
 4846 0230 0A0053E3 		cmp	r3, #10
 4847 0234 0100008A 		bhi	.L305
 4848              		.loc 1 2611 5 discriminator 3
 4849 0238 0730E0E3 		mvn	r3, #7
 4850              		.loc 1 2611 5
 4851 023c 2C0000EA 		b	.L294
 4852              	.L305:
 4853              		.loc 1 2611 5 discriminator 4
 4854 0240 0C301BE5 		ldr	r3, [fp, #-12]
 4855 0244 7330FFE6 		uxth	r3, r3
 4856 0248 000053E3 		cmp	r3, #0
 4857 024c 0100001A 		bne	.L306
 4858              		.loc 1 2611 5 discriminator 5
 4859 0250 0930E0E3 		mvn	r3, #9
 4860              		.loc 1 2611 5
 4861 0254 260000EA 		b	.L294
 4862              	.L306:
2612:../../Source/Kernel/rme_kernel.c ****     
2613:../../Source/Kernel/rme_kernel.c ****     /* If we are KFN or KOM, we don't care about parent or refcnt */
2614:../../Source/Kernel/rme_kernel.c ****     Rem_Type=RME_CAP_TYPE(Type_Stat);
 4863              		.loc 1 2614 13 is_stmt 1
 4864 0258 0C301BE5 		ldr	r3, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 133


 4865 025c 233CA0E1 		lsr	r3, r3, #24
 4866 0260 14300BE5 		str	r3, [fp, #-20]
2615:../../Source/Kernel/rme_kernel.c ****     if((Rem_Type!=RME_CAP_TYPE_KOM)&&(Rem_Type!=RME_CAP_TYPE_KFN))
 4867              		.loc 1 2615 7
 4868 0264 14301BE5 		ldr	r3, [fp, #-20]
 4869 0268 020053E3 		cmp	r3, #2
 4870 026c 1500000A 		beq	.L307
 4871              		.loc 1 2615 36 discriminator 1
 4872 0270 14301BE5 		ldr	r3, [fp, #-20]
 4873 0274 010053E3 		cmp	r3, #1
 4874 0278 1200000A 		beq	.L307
2616:../../Source/Kernel/rme_kernel.c ****     {
2617:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2618:../../Source/Kernel/rme_kernel.c ****         
2619:../../Source/Kernel/rme_kernel.c ****         /* Remember this for refcnt operations */
2620:../../Source/Kernel/rme_kernel.c ****         Capobj_Root=(struct RME_Cap_Struct*)(Capobj_Rem->Head.Root_Ref);
 4875              		.loc 1 2620 62
 4876 027c 10301BE5 		ldr	r3, [fp, #-16]
 4877 0280 043093E5 		ldr	r3, [r3, #4]
 4878              		.loc 1 2620 20
 4879 0284 18300BE5 		str	r3, [fp, #-24]
2621:../../Source/Kernel/rme_kernel.c ****         
2622:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DELETE(Capobj_Rem,Type_Stat);
 4880              		.loc 1 2622 9
 4881 0288 10301BE5 		ldr	r3, [fp, #-16]
 4882 028c 0020A0E3 		mov	r2, #0
 4883 0290 0C101BE5 		ldr	r1, [fp, #-12]
 4884 0294 0300A0E1 		mov	r0, r3
 4885 0298 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 4886 029c 0030A0E1 		mov	r3, r0
 4887              		.loc 1 2622 9 is_stmt 0 discriminator 1
 4888 02a0 000053E3 		cmp	r3, #0
 4889 02a4 0100001A 		bne	.L308
 4890 02a8 0030E0E3 		mvn	r3, #0
 4891              		.loc 1 2622 9
 4892 02ac 100000EA 		b	.L294
 4893              	.L308:
2623:../../Source/Kernel/rme_kernel.c **** 
2624:../../Source/Kernel/rme_kernel.c ****         /* Check done, decrease its parent's refcnt. This must be done at last */
2625:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_ADD(&(Capobj_Root->Head.Root_Ref),-1);
 4894              		.loc 1 2625 9 is_stmt 1
 4895 02b0 18301BE5 		ldr	r3, [fp, #-24]
 4896 02b4 043083E2 		add	r3, r3, #4
 4897 02b8 0010E0E3 		mvn	r1, #0
 4898 02bc 0300A0E1 		mov	r0, r3
 4899 02c0 FEFFFFEB 		bl	_RME_Fetch_Add_Single
 4900 02c4 090000EA 		b	.L309
 4901              	.L307:
2626:../../Source/Kernel/rme_kernel.c ****     }
2627:../../Source/Kernel/rme_kernel.c ****     else
2628:../../Source/Kernel/rme_kernel.c ****     {
2629:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2630:../../Source/Kernel/rme_kernel.c **** 
2631:../../Source/Kernel/rme_kernel.c ****         /* Helping also applies here */
2632:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DELETE(Capobj_Rem,Type_Stat);
 4902              		.loc 1 2632 9
 4903 02c8 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 134


 4904 02cc 0020A0E3 		mov	r2, #0
 4905 02d0 0C101BE5 		ldr	r1, [fp, #-12]
 4906 02d4 0300A0E1 		mov	r0, r3
 4907 02d8 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 4908 02dc 0030A0E1 		mov	r3, r0
 4909              		.loc 1 2632 9 is_stmt 0 discriminator 1
 4910 02e0 000053E3 		cmp	r3, #0
 4911 02e4 0100001A 		bne	.L309
 4912 02e8 0030E0E3 		mvn	r3, #0
 4913              		.loc 1 2632 9
 4914 02ec 000000EA 		b	.L294
 4915              	.L309:
2633:../../Source/Kernel/rme_kernel.c ****     }
2634:../../Source/Kernel/rme_kernel.c ****     
2635:../../Source/Kernel/rme_kernel.c ****     return 0;
 4916              		.loc 1 2635 12 is_stmt 1
 4917 02f0 0030A0E3 		mov	r3, #0
 4918              	.L294:
2636:../../Source/Kernel/rme_kernel.c **** }
 4919              		.loc 1 2636 1
 4920 02f4 0300A0E1 		mov	r0, r3
 4921 02f8 04D04BE2 		sub	sp, fp, #4
 4922              		.cfi_def_cfa 13, 8
 4923              		@ sp needed
 4924 02fc 0088BDE8 		pop	{fp, pc}
 4925              		.cfi_endproc
 4926              	.LFE28:
 4928              		.section	.text._RME_Pgt_Boot_Crt,"ax",%progbits
 4929              		.align	2
 4930              		.global	_RME_Pgt_Boot_Crt
 4931              		.syntax unified
 4932              		.arm
 4934              	_RME_Pgt_Boot_Crt:
 4935              	.LFB29:
2637:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Cpt_Rem *************************************************/
2638:../../Source/Kernel/rme_kernel.c **** 
2639:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Boot_Crt *************************************************
2640:../../Source/Kernel/rme_kernel.c **** Description : Create a boot-time page table.
2641:../../Source/Kernel/rme_kernel.c ****               This function does not require a kernel memory capability.
2642:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2643:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability table that contains the newly
2644:../../Source/Kernel/rme_kernel.c ****                                   created cap to pgtbl.
2645:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
2646:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability slot that you want this newly
2647:../../Source/Kernel/rme_kernel.c ****                                   created page table capability to be in.
2648:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
2649:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Vaddr - The virtual address to store the page table.
2650:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Base - The virtual address to start mapping for this
2651:../../Source/Kernel/rme_kernel.c ****                                page table. This address must be aligned to the
2652:../../Source/Kernel/rme_kernel.c ****                                total size of the table.
2653:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Top - Whether this page table is the top-level. If
2654:../../Source/Kernel/rme_kernel.c ****                                  it is, we will map all the kernel page
2655:../../Source/Kernel/rme_kernel.c ****                                  directories into it.
2656:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size_Order - The size order of the page table. The size
2657:../../Source/Kernel/rme_kernel.c ****                                      refers to the size of each page in the
2658:../../Source/Kernel/rme_kernel.c ****                                      page directory.
2659:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Num_Order - The number order of entries in the page
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 135


2660:../../Source/Kernel/rme_kernel.c ****                                     table.
2661:../../Source/Kernel/rme_kernel.c **** Output      : None.
2662:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2663:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2664:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
2665:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Pgt_Boot_Crt(struct RME_Cap_Cpt* Cpt,
2666:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
2667:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Pgt,
2668:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Vaddr,
2669:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Base,
2670:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Is_Top,
2671:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Size_Order,
2672:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Num_Order)
2673:../../Source/Kernel/rme_kernel.c **** {
 4936              		.loc 1 2673 1
 4937              		.cfi_startproc
 4938              		@ args = 16, pretend = 0, frame = 32
 4939              		@ frame_needed = 1, uses_anonymous_args = 0
 4940 0000 00482DE9 		push	{fp, lr}
 4941              		.cfi_def_cfa_offset 8
 4942              		.cfi_offset 11, -8
 4943              		.cfi_offset 14, -4
 4944 0004 04B08DE2 		add	fp, sp, #4
 4945              		.cfi_def_cfa 11, 4
 4946 0008 28D04DE2 		sub	sp, sp, #40
 4947 000c 18000BE5 		str	r0, [fp, #-24]
 4948 0010 1C100BE5 		str	r1, [fp, #-28]
 4949 0014 20200BE5 		str	r2, [fp, #-32]
 4950 0018 24300BE5 		str	r3, [fp, #-36]
2674:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
2675:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Crt;
2676:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2677:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Table_Size;
2678:../../Source/Kernel/rme_kernel.c ****     
2679:../../Source/Kernel/rme_kernel.c ****     /* Check if the total representable memory exceeds our maximum possible
2680:../../Source/Kernel/rme_kernel.c ****      * addressible memory under the machine word length */
2681:../../Source/Kernel/rme_kernel.c ****     if((Size_Order+Num_Order)>RME_POW2(RME_WORD_ORDER))
 4951              		.loc 1 2681 19
 4952 001c 0C209BE5 		ldr	r2, [fp, #12]
 4953 0020 10309BE5 		ldr	r3, [fp, #16]
 4954 0024 033082E0 		add	r3, r2, r3
 4955              		.loc 1 2681 7
 4956 0028 200053E3 		cmp	r3, #32
 4957 002c 0100009A 		bls	.L311
2682:../../Source/Kernel/rme_kernel.c ****     {
2683:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2684:../../Source/Kernel/rme_kernel.c **** 
2685:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
 4958              		.loc 1 2685 16
 4959 0030 6630E0E3 		mvn	r3, #102
 4960 0034 D00000EA 		b	.L312
 4961              	.L311:
2686:../../Source/Kernel/rme_kernel.c ****     }
2687:../../Source/Kernel/rme_kernel.c ****     else
2688:../../Source/Kernel/rme_kernel.c ****     {
2689:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2690:../../Source/Kernel/rme_kernel.c ****         /* No action required */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 136


2691:../../Source/Kernel/rme_kernel.c ****     }
2692:../../Source/Kernel/rme_kernel.c **** 
2693:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
2694:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 4962              		.loc 1 2694 5
 4963 0038 1C301BE5 		ldr	r3, [fp, #-28]
 4964 003c 803003E2 		and	r3, r3, #128
 4965 0040 000053E3 		cmp	r3, #0
 4966 0044 1C00001A 		bne	.L313
 4967              		.loc 1 2694 5 is_stmt 0 discriminator 1
 4968 0048 18301BE5 		ldr	r3, [fp, #-24]
 4969 004c 142093E5 		ldr	r2, [r3, #20]
 4970 0050 1C301BE5 		ldr	r3, [fp, #-28]
 4971 0054 030052E1 		cmp	r2, r3
 4972 0058 0100008A 		bhi	.L314
 4973              		.loc 1 2694 5 discriminator 3
 4974 005c 0230E0E3 		mvn	r3, #2
 4975              		.loc 1 2694 5
 4976 0060 C50000EA 		b	.L312
 4977              	.L314:
 4978              		.loc 1 2694 5 discriminator 4
 4979 0064 1C301BE5 		ldr	r3, [fp, #-28]
 4980 0068 8322A0E1 		lsl	r2, r3, #5
 4981 006c 18301BE5 		ldr	r3, [fp, #-24]
 4982 0070 0C3093E5 		ldr	r3, [r3, #12]
 4983 0074 033082E0 		add	r3, r2, r3
 4984 0078 0C300BE5 		str	r3, [fp, #-12]
 4985 007c 0C301BE5 		ldr	r3, [fp, #-12]
 4986 0080 0300A0E1 		mov	r0, r3
 4987 0084 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 4988 0088 10000BE5 		str	r0, [fp, #-16]
 4989              		.loc 1 2694 5 discriminator 1
 4990 008c 10301BE5 		ldr	r3, [fp, #-16]
 4991 0090 FF3803E2 		and	r3, r3, #16711680
 4992 0094 020853E3 		cmp	r3, #131072
 4993 0098 0100001A 		bne	.L315
 4994              		.loc 1 2694 5 discriminator 5
 4995 009c 0830E0E3 		mvn	r3, #8
 4996              		.loc 1 2694 5
 4997 00a0 B50000EA 		b	.L312
 4998              	.L315:
 4999              		.loc 1 2694 5 discriminator 6
 5000 00a4 10301BE5 		ldr	r3, [fp, #-16]
 5001 00a8 233CA0E1 		lsr	r3, r3, #24
 5002 00ac 030053E3 		cmp	r3, #3
 5003 00b0 3F00000A 		beq	.L316
 5004              		.loc 1 2694 5 discriminator 7
 5005 00b4 0130E0E3 		mvn	r3, #1
 5006              		.loc 1 2694 5
 5007 00b8 AF0000EA 		b	.L312
 5008              	.L313:
 5009              		.loc 1 2694 5 discriminator 2
 5010 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 5011 00c0 2324A0E1 		lsr	r2, r3, #8
 5012 00c4 18301BE5 		ldr	r3, [fp, #-24]
 5013 00c8 143093E5 		ldr	r3, [r3, #20]
 5014 00cc 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 137


 5015 00d0 0100003A 		bcc	.L317
 5016              		.loc 1 2694 5 discriminator 8
 5017 00d4 0230E0E3 		mvn	r3, #2
 5018              		.loc 1 2694 5
 5019 00d8 A70000EA 		b	.L312
 5020              	.L317:
 5021              		.loc 1 2694 5 discriminator 9
 5022 00dc 1C301BE5 		ldr	r3, [fp, #-28]
 5023 00e0 2334A0E1 		lsr	r3, r3, #8
 5024 00e4 8322A0E1 		lsl	r2, r3, #5
 5025 00e8 18301BE5 		ldr	r3, [fp, #-24]
 5026 00ec 0C3093E5 		ldr	r3, [r3, #12]
 5027 00f0 033082E0 		add	r3, r2, r3
 5028 00f4 0C300BE5 		str	r3, [fp, #-12]
 5029 00f8 0C301BE5 		ldr	r3, [fp, #-12]
 5030 00fc 0300A0E1 		mov	r0, r3
 5031 0100 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5032 0104 10000BE5 		str	r0, [fp, #-16]
 5033              		.loc 1 2694 5 discriminator 1
 5034 0108 10301BE5 		ldr	r3, [fp, #-16]
 5035 010c FF3803E2 		and	r3, r3, #16711680
 5036 0110 020853E3 		cmp	r3, #131072
 5037 0114 0100001A 		bne	.L318
 5038              		.loc 1 2694 5 discriminator 10
 5039 0118 0830E0E3 		mvn	r3, #8
 5040              		.loc 1 2694 5
 5041 011c 960000EA 		b	.L312
 5042              	.L318:
 5043              		.loc 1 2694 5 discriminator 11
 5044 0120 10301BE5 		ldr	r3, [fp, #-16]
 5045 0124 233CA0E1 		lsr	r3, r3, #24
 5046 0128 030053E3 		cmp	r3, #3
 5047 012c 0100000A 		beq	.L319
 5048              		.loc 1 2694 5 discriminator 12
 5049 0130 0130E0E3 		mvn	r3, #1
 5050              		.loc 1 2694 5
 5051 0134 900000EA 		b	.L312
 5052              	.L319:
 5053              		.loc 1 2694 5 discriminator 13
 5054 0138 1C301BE5 		ldr	r3, [fp, #-28]
 5055 013c 7F2003E2 		and	r2, r3, #127
 5056 0140 0C301BE5 		ldr	r3, [fp, #-12]
 5057 0144 143093E5 		ldr	r3, [r3, #20]
 5058 0148 030052E1 		cmp	r2, r3
 5059 014c 0100003A 		bcc	.L320
 5060              		.loc 1 2694 5 discriminator 14
 5061 0150 0230E0E3 		mvn	r3, #2
 5062              		.loc 1 2694 5
 5063 0154 880000EA 		b	.L312
 5064              	.L320:
 5065              		.loc 1 2694 5 discriminator 15
 5066 0158 1C301BE5 		ldr	r3, [fp, #-28]
 5067 015c 7F3003E2 		and	r3, r3, #127
 5068 0160 8322A0E1 		lsl	r2, r3, #5
 5069 0164 0C301BE5 		ldr	r3, [fp, #-12]
 5070 0168 0C3093E5 		ldr	r3, [r3, #12]
 5071 016c 033082E0 		add	r3, r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 138


 5072 0170 0C300BE5 		str	r3, [fp, #-12]
 5073 0174 0C301BE5 		ldr	r3, [fp, #-12]
 5074 0178 0300A0E1 		mov	r0, r3
 5075 017c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5076 0180 10000BE5 		str	r0, [fp, #-16]
 5077              		.loc 1 2694 5 discriminator 1
 5078 0184 10301BE5 		ldr	r3, [fp, #-16]
 5079 0188 FF3803E2 		and	r3, r3, #16711680
 5080 018c 020853E3 		cmp	r3, #131072
 5081 0190 0100001A 		bne	.L321
 5082              		.loc 1 2694 5 discriminator 16
 5083 0194 0830E0E3 		mvn	r3, #8
 5084              		.loc 1 2694 5
 5085 0198 770000EA 		b	.L312
 5086              	.L321:
 5087              		.loc 1 2694 5 discriminator 17
 5088 019c 10301BE5 		ldr	r3, [fp, #-16]
 5089 01a0 233CA0E1 		lsr	r3, r3, #24
 5090 01a4 030053E3 		cmp	r3, #3
 5091 01a8 0100000A 		beq	.L316
 5092              		.loc 1 2694 5 discriminator 18
 5093 01ac 0130E0E3 		mvn	r3, #1
 5094              		.loc 1 2694 5
 5095 01b0 710000EA 		b	.L312
 5096              	.L316:
2695:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
2696:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
2697:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 5097              		.loc 1 2697 5 is_stmt 1
 5098 01b4 0C301BE5 		ldr	r3, [fp, #-12]
 5099 01b8 083093E5 		ldr	r3, [r3, #8]
 5100 01bc 013003E2 		and	r3, r3, #1
 5101 01c0 000053E3 		cmp	r3, #0
 5102 01c4 0100001A 		bne	.L322
 5103              		.loc 1 2697 5 is_stmt 0 discriminator 1
 5104 01c8 0630E0E3 		mvn	r3, #6
 5105              		.loc 1 2697 5
 5106 01cc 6A0000EA 		b	.L312
 5107              	.L322:
2698:../../Source/Kernel/rme_kernel.c ****     
2699:../../Source/Kernel/rme_kernel.c ****     /* Check if these parameters are feasible */
2700:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Check(Base,Is_Top,Size_Order,Num_Order,Vaddr)!=0)
 5108              		.loc 1 2700 8 is_stmt 1
 5109 01d0 24301BE5 		ldr	r3, [fp, #-36]
 5110 01d4 00308DE5 		str	r3, [sp]
 5111 01d8 10309BE5 		ldr	r3, [fp, #16]
 5112 01dc 0C209BE5 		ldr	r2, [fp, #12]
 5113 01e0 08109BE5 		ldr	r1, [fp, #8]
 5114 01e4 04009BE5 		ldr	r0, [fp, #4]
 5115 01e8 FEFFFFEB 		bl	__RME_Pgt_Check
 5116 01ec 0030A0E1 		mov	r3, r0
 5117              		.loc 1 2700 7 discriminator 1
 5118 01f0 000053E3 		cmp	r3, #0
 5119 01f4 0100000A 		beq	.L323
2701:../../Source/Kernel/rme_kernel.c ****     {
2702:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2703:../../Source/Kernel/rme_kernel.c ****     
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 139


2704:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
 5120              		.loc 1 2704 16
 5121 01f8 6630E0E3 		mvn	r3, #102
 5122 01fc 5E0000EA 		b	.L312
 5123              	.L323:
2705:../../Source/Kernel/rme_kernel.c ****     }
2706:../../Source/Kernel/rme_kernel.c ****     else
2707:../../Source/Kernel/rme_kernel.c ****     {
2708:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2709:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2710:../../Source/Kernel/rme_kernel.c ****     }
2711:../../Source/Kernel/rme_kernel.c ****     
2712:../../Source/Kernel/rme_kernel.c ****     /* Check if the base address is properly aligned to the total order of the page table */
2713:../../Source/Kernel/rme_kernel.c ****     if((Base&RME_MASK_END(Size_Order+Num_Order-1U))!=0U)
 5124              		.loc 1 2713 14
 5125 0200 0C209BE5 		ldr	r2, [fp, #12]
 5126 0204 10309BE5 		ldr	r3, [fp, #16]
 5127 0208 033082E0 		add	r3, r2, r3
 5128 020c 203063E2 		rsb	r3, r3, #32
 5129 0210 0020E0E3 		mvn	r2, #0
 5130 0214 3223A0E1 		lsr	r2, r2, r3
 5131              		.loc 1 2713 13
 5132 0218 04309BE5 		ldr	r3, [fp, #4]
 5133 021c 023003E0 		and	r3, r3, r2
 5134              		.loc 1 2713 7
 5135 0220 000053E3 		cmp	r3, #0
 5136 0224 0100000A 		beq	.L324
2714:../../Source/Kernel/rme_kernel.c ****     {
2715:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2716:../../Source/Kernel/rme_kernel.c **** 
2717:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
 5137              		.loc 1 2717 16
 5138 0228 6630E0E3 		mvn	r3, #102
 5139 022c 520000EA 		b	.L312
 5140              	.L324:
2718:../../Source/Kernel/rme_kernel.c ****     }
2719:../../Source/Kernel/rme_kernel.c ****     else
2720:../../Source/Kernel/rme_kernel.c ****     {
2721:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2722:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2723:../../Source/Kernel/rme_kernel.c ****     }
2724:../../Source/Kernel/rme_kernel.c **** 
2725:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
2726:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Pgt,struct RME_Cap_Pgt*,Pgt_Crt);
 5141              		.loc 1 2726 5
 5142 0230 0C301BE5 		ldr	r3, [fp, #-12]
 5143 0234 142093E5 		ldr	r2, [r3, #20]
 5144 0238 20301BE5 		ldr	r3, [fp, #-32]
 5145 023c 030052E1 		cmp	r2, r3
 5146 0240 0100008A 		bhi	.L325
 5147              		.loc 1 2726 5 is_stmt 0 discriminator 1
 5148 0244 0230E0E3 		mvn	r3, #2
 5149              		.loc 1 2726 5
 5150 0248 4B0000EA 		b	.L312
 5151              	.L325:
 5152              		.loc 1 2726 5 discriminator 2
 5153 024c 20301BE5 		ldr	r3, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 140


 5154 0250 8322A0E1 		lsl	r2, r3, #5
 5155 0254 0C301BE5 		ldr	r3, [fp, #-12]
 5156 0258 0C3093E5 		ldr	r3, [r3, #12]
 5157 025c 033082E0 		add	r3, r2, r3
 5158 0260 14300BE5 		str	r3, [fp, #-20]
2727:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
2728:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Pgt_Crt);
 5159              		.loc 1 2728 5 is_stmt 1
 5160 0264 14301BE5 		ldr	r3, [fp, #-20]
 5161 0268 0128A0E3 		mov	r2, #65536
 5162 026c 0010A0E3 		mov	r1, #0
 5163 0270 0300A0E1 		mov	r0, r3
 5164 0274 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 5165 0278 0030A0E1 		mov	r3, r0
 5166              		.loc 1 2728 5 is_stmt 0 discriminator 1
 5167 027c 000053E3 		cmp	r3, #0
 5168 0280 0100001A 		bne	.L326
 5169 0284 0430E0E3 		mvn	r3, #4
 5170              		.loc 1 2728 5
 5171 0288 3B0000EA 		b	.L312
 5172              	.L326:
 5173              		.loc 1 2728 5 discriminator 2
 5174 028c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 5175 0290 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 5176 0294 002093E5 		ldr	r2, [r3]
 5177 0298 14301BE5 		ldr	r3, [fp, #-20]
 5178 029c 102083E5 		str	r2, [r3, #16]
2729:../../Source/Kernel/rme_kernel.c **** 
2730:../../Source/Kernel/rme_kernel.c ****     /* Are we creating the top level? */
2731:../../Source/Kernel/rme_kernel.c ****     if(Is_Top!=0U)
 5179              		.loc 1 2731 7 is_stmt 1
 5180 02a0 08309BE5 		ldr	r3, [fp, #8]
 5181 02a4 000053E3 		cmp	r3, #0
 5182 02a8 0400000A 		beq	.L327
2732:../../Source/Kernel/rme_kernel.c ****     {
2733:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2734:../../Source/Kernel/rme_kernel.c ****         
2735:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_TOP(Num_Order);
 5183              		.loc 1 2735 19
 5184 02ac 0120A0E3 		mov	r2, #1
 5185 02b0 10309BE5 		ldr	r3, [fp, #16]
 5186 02b4 1233A0E1 		lsl	r3, r2, r3
 5187 02b8 08300BE5 		str	r3, [fp, #-8]
 5188 02bc 030000EA 		b	.L328
 5189              	.L327:
2736:../../Source/Kernel/rme_kernel.c ****     }
2737:../../Source/Kernel/rme_kernel.c ****     else
2738:../../Source/Kernel/rme_kernel.c ****     {
2739:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2740:../../Source/Kernel/rme_kernel.c ****         
2741:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_NOM(Num_Order);
 5190              		.loc 1 2741 19
 5191 02c0 0120A0E3 		mov	r2, #1
 5192 02c4 10309BE5 		ldr	r3, [fp, #16]
 5193 02c8 1233A0E1 		lsl	r3, r2, r3
 5194 02cc 08300BE5 		str	r3, [fp, #-8]
 5195              	.L328:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 141


2742:../../Source/Kernel/rme_kernel.c ****     }
2743:../../Source/Kernel/rme_kernel.c ****     
2744:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
2745:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr, Table_Size)!=0)
 5196              		.loc 1 2745 8
 5197 02d0 08101BE5 		ldr	r1, [fp, #-8]
 5198 02d4 24001BE5 		ldr	r0, [fp, #-36]
 5199 02d8 FEFFFFEB 		bl	_RME_Kot_Mark
 5200 02dc 0030A0E1 		mov	r3, r0
 5201              		.loc 1 2745 7 discriminator 1
 5202 02e0 000053E3 		cmp	r3, #0
 5203 02e4 0500000A 		beq	.L329
2746:../../Source/Kernel/rme_kernel.c ****     {
2747:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2748:../../Source/Kernel/rme_kernel.c ****     
2749:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),0U);
 5204              		.loc 1 2749 9
 5205 02e8 14301BE5 		ldr	r3, [fp, #-20]
 5206 02ec 0010A0E3 		mov	r1, #0
 5207 02f0 0300A0E1 		mov	r0, r3
 5208 02f4 FEFFFFEB 		bl	__RME_A7A_Write_Release
2750:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 5209              		.loc 1 2750 16
 5210 02f8 0330E0E3 		mvn	r3, #3
 5211 02fc 1E0000EA 		b	.L312
 5212              	.L329:
2751:../../Source/Kernel/rme_kernel.c ****     }
2752:../../Source/Kernel/rme_kernel.c ****     else
2753:../../Source/Kernel/rme_kernel.c ****     {
2754:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2755:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2756:../../Source/Kernel/rme_kernel.c ****     }
2757:../../Source/Kernel/rme_kernel.c ****     
2758:../../Source/Kernel/rme_kernel.c ****     /* Header init */
2759:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Root_Ref=0U;
 5213              		.loc 1 2759 27
 5214 0300 14301BE5 		ldr	r3, [fp, #-20]
 5215 0304 0020A0E3 		mov	r2, #0
 5216 0308 042083E5 		str	r2, [r3, #4]
2760:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Object=Vaddr;
 5217              		.loc 1 2760 25
 5218 030c 14301BE5 		ldr	r3, [fp, #-20]
 5219 0310 24201BE5 		ldr	r2, [fp, #-36]
 5220 0314 0C2083E5 		str	r2, [r3, #12]
2761:../../Source/Kernel/rme_kernel.c ****     /* Set the property of the page table to only act as source and creating process */
2762:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Flag=RME_PGT_FLAG_FULL_RANGE|RME_PGT_FLAG_ADD_SRC|
 5221              		.loc 1 2762 23
 5222 0318 14201BE5 		ldr	r2, [fp, #-20]
 5223 031c C130A0E3 		mov	r3, #193
 5224 0320 F03F4FE3 		movt	r3, 65520
 5225 0324 083082E5 		str	r3, [r2, #8]
2763:../../Source/Kernel/rme_kernel.c ****                        RME_PGT_FLAG_PRC_CRT|RME_PGT_FLAG_PRC_PGT;
2764:../../Source/Kernel/rme_kernel.c ****     
2765:../../Source/Kernel/rme_kernel.c ****     /* Info init */
2766:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Base=Base|Is_Top;
 5226              		.loc 1 2766 23
 5227 0328 04209BE5 		ldr	r2, [fp, #4]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 142


 5228 032c 08309BE5 		ldr	r3, [fp, #8]
 5229 0330 032082E1 		orr	r2, r2, r3
 5230              		.loc 1 2766 18
 5231 0334 14301BE5 		ldr	r3, [fp, #-20]
 5232 0338 182083E5 		str	r2, [r3, #24]
2767:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Order=RME_PGT_ORDER(Size_Order,Num_Order);
 5233              		.loc 1 2767 20
 5234 033c 0C309BE5 		ldr	r3, [fp, #12]
 5235 0340 0328A0E1 		lsl	r2, r3, #16
 5236 0344 10309BE5 		ldr	r3, [fp, #16]
 5237 0348 032082E1 		orr	r2, r2, r3
 5238              		.loc 1 2767 19
 5239 034c 14301BE5 		ldr	r3, [fp, #-20]
 5240 0350 142083E5 		str	r2, [r3, #20]
2768:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->ASID=0U;
 5241              		.loc 1 2768 18
 5242 0354 14301BE5 		ldr	r3, [fp, #-20]
 5243 0358 0020A0E3 		mov	r2, #0
 5244 035c 1C2083E5 		str	r2, [r3, #28]
2769:../../Source/Kernel/rme_kernel.c **** 
2770:../../Source/Kernel/rme_kernel.c ****     /* Object init - need to add all kernel pages if they are top-level */
2771:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Init(Pgt_Crt)<0)
 5245              		.loc 1 2771 8
 5246 0360 14001BE5 		ldr	r0, [fp, #-20]
 5247 0364 FEFFFFEB 		bl	__RME_Pgt_Init
2772:../../Source/Kernel/rme_kernel.c ****     {
2773:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2774:../../Source/Kernel/rme_kernel.c ****         
2775:../../Source/Kernel/rme_kernel.c ****         /* This must be successful */
2776:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(_RME_Kot_Erase(Vaddr, Table_Size)==0);
2777:../../Source/Kernel/rme_kernel.c **** 
2778:../../Source/Kernel/rme_kernel.c ****         /* Unsuccessful. Revert operations */
2779:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),0U);
2780:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
2781:../../Source/Kernel/rme_kernel.c ****     }
2782:../../Source/Kernel/rme_kernel.c ****     else
2783:../../Source/Kernel/rme_kernel.c ****     {
2784:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2785:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2786:../../Source/Kernel/rme_kernel.c ****     }
2787:../../Source/Kernel/rme_kernel.c **** 
2788:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
2789:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),
 5248              		.loc 1 2789 5
 5249 0368 14301BE5 		ldr	r3, [fp, #-20]
 5250 036c 0113A0E3 		mov	r1, #67108864
 5251 0370 0300A0E1 		mov	r0, r3
 5252 0374 FEFFFFEB 		bl	__RME_A7A_Write_Release
2790:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_PGT,
2791:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
2792:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
2793:../../Source/Kernel/rme_kernel.c **** 
2794:../../Source/Kernel/rme_kernel.c ****     return 0;
 5253              		.loc 1 2794 12
 5254 0378 0030A0E3 		mov	r3, #0
 5255              	.L312:
2795:../../Source/Kernel/rme_kernel.c **** }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 143


 5256              		.loc 1 2795 1
 5257 037c 0300A0E1 		mov	r0, r3
 5258 0380 04D04BE2 		sub	sp, fp, #4
 5259              		.cfi_def_cfa 13, 8
 5260              		@ sp needed
 5261 0384 0088BDE8 		pop	{fp, pc}
 5262              		.cfi_endproc
 5263              	.LFE29:
 5265              		.section	.text._RME_Pgt_Boot_Add,"ax",%progbits
 5266              		.align	2
 5267              		.global	_RME_Pgt_Boot_Add
 5268              		.syntax unified
 5269              		.arm
 5271              	_RME_Pgt_Boot_Add:
 5272              	.LFB30:
2796:../../Source/Kernel/rme_kernel.c **** #endif
2797:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Boot_Crt ********************************************/
2798:../../Source/Kernel/rme_kernel.c **** 
2799:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Boot_Add *************************************************
2800:../../Source/Kernel/rme_kernel.c **** Description : This function is exclusively used to set up the Init process's
2801:../../Source/Kernel/rme_kernel.c ****               memory mappings in the booting process. When the system has
2802:../../Source/Kernel/rme_kernel.c ****               booted, it won't possible to fabricate pages like this.
2803:../../Source/Kernel/rme_kernel.c ****               Additionally, this function will set the cap to page table's 
2804:../../Source/Kernel/rme_kernel.c ****               property as unremovable. This means that it is not allowed to
2805:../../Source/Kernel/rme_kernel.c ****               remove any pages in the directory. It will set the reference
2806:../../Source/Kernel/rme_kernel.c ****               count of the capability as 1, thus making the capability to the
2807:../../Source/Kernel/rme_kernel.c ****               initial page table undeletable.
2808:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2809:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability to the page table.
2810:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
2811:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Paddr - The physical address to map from.
2812:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos - The page table position to map to.
2813:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag - The flags for the user page.
2814:../../Source/Kernel/rme_kernel.c **** Output      : None.
2815:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2816:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2817:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
2818:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Pgt_Boot_Add(struct RME_Cap_Cpt* Cpt,
2819:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Pgt, 
2820:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Paddr,
2821:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Pos,
2822:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Flag)
2823:../../Source/Kernel/rme_kernel.c **** {
 5273              		.loc 1 2823 1
 5274              		.cfi_startproc
 5275              		@ args = 4, pretend = 0, frame = 32
 5276              		@ frame_needed = 1, uses_anonymous_args = 0
 5277 0000 00482DE9 		push	{fp, lr}
 5278              		.cfi_def_cfa_offset 8
 5279              		.cfi_offset 11, -8
 5280              		.cfi_offset 14, -4
 5281 0004 04B08DE2 		add	fp, sp, #4
 5282              		.cfi_def_cfa 11, 4
 5283 0008 20D04DE2 		sub	sp, sp, #32
 5284 000c 18000BE5 		str	r0, [fp, #-24]
 5285 0010 1C100BE5 		str	r1, [fp, #-28]
 5286 0014 20200BE5 		str	r2, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 144


 5287 0018 24300BE5 		str	r3, [fp, #-36]
2824:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Op;
2825:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2826:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Szord;
2827:../../Source/Kernel/rme_kernel.c ****     
2828:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
2829:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt,RME_CAP_TYPE_PGT,
 5288              		.loc 1 2829 5
 5289 001c 1C301BE5 		ldr	r3, [fp, #-28]
 5290 0020 803003E2 		and	r3, r3, #128
 5291 0024 000053E3 		cmp	r3, #0
 5292 0028 1C00001A 		bne	.L331
 5293              		.loc 1 2829 5 is_stmt 0 discriminator 1
 5294 002c 18301BE5 		ldr	r3, [fp, #-24]
 5295 0030 142093E5 		ldr	r2, [r3, #20]
 5296 0034 1C301BE5 		ldr	r3, [fp, #-28]
 5297 0038 030052E1 		cmp	r2, r3
 5298 003c 0100008A 		bhi	.L332
 5299              		.loc 1 2829 5 discriminator 3
 5300 0040 0230E0E3 		mvn	r3, #2
 5301              		.loc 1 2829 5
 5302 0044 730000EA 		b	.L333
 5303              	.L332:
 5304              		.loc 1 2829 5 discriminator 4
 5305 0048 1C301BE5 		ldr	r3, [fp, #-28]
 5306 004c 8322A0E1 		lsl	r2, r3, #5
 5307 0050 18301BE5 		ldr	r3, [fp, #-24]
 5308 0054 0C3093E5 		ldr	r3, [r3, #12]
 5309 0058 033082E0 		add	r3, r2, r3
 5310 005c 08300BE5 		str	r3, [fp, #-8]
 5311 0060 08301BE5 		ldr	r3, [fp, #-8]
 5312 0064 0300A0E1 		mov	r0, r3
 5313 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5314 006c 0C000BE5 		str	r0, [fp, #-12]
 5315              		.loc 1 2829 5 discriminator 1
 5316 0070 0C301BE5 		ldr	r3, [fp, #-12]
 5317 0074 FF3803E2 		and	r3, r3, #16711680
 5318 0078 020853E3 		cmp	r3, #131072
 5319 007c 0100001A 		bne	.L334
 5320              		.loc 1 2829 5 discriminator 5
 5321 0080 0830E0E3 		mvn	r3, #8
 5322              		.loc 1 2829 5
 5323 0084 630000EA 		b	.L333
 5324              	.L334:
 5325              		.loc 1 2829 5 discriminator 6
 5326 0088 0C301BE5 		ldr	r3, [fp, #-12]
 5327 008c 233CA0E1 		lsr	r3, r3, #24
 5328 0090 040053E3 		cmp	r3, #4
 5329 0094 3F00000A 		beq	.L335
 5330              		.loc 1 2829 5 discriminator 7
 5331 0098 0130E0E3 		mvn	r3, #1
 5332              		.loc 1 2829 5
 5333 009c 5D0000EA 		b	.L333
 5334              	.L331:
 5335              		.loc 1 2829 5 discriminator 2
 5336 00a0 1C301BE5 		ldr	r3, [fp, #-28]
 5337 00a4 2324A0E1 		lsr	r2, r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 145


 5338 00a8 18301BE5 		ldr	r3, [fp, #-24]
 5339 00ac 143093E5 		ldr	r3, [r3, #20]
 5340 00b0 030052E1 		cmp	r2, r3
 5341 00b4 0100003A 		bcc	.L336
 5342              		.loc 1 2829 5 discriminator 8
 5343 00b8 0230E0E3 		mvn	r3, #2
 5344              		.loc 1 2829 5
 5345 00bc 550000EA 		b	.L333
 5346              	.L336:
 5347              		.loc 1 2829 5 discriminator 9
 5348 00c0 1C301BE5 		ldr	r3, [fp, #-28]
 5349 00c4 2334A0E1 		lsr	r3, r3, #8
 5350 00c8 8322A0E1 		lsl	r2, r3, #5
 5351 00cc 18301BE5 		ldr	r3, [fp, #-24]
 5352 00d0 0C3093E5 		ldr	r3, [r3, #12]
 5353 00d4 033082E0 		add	r3, r2, r3
 5354 00d8 08300BE5 		str	r3, [fp, #-8]
 5355 00dc 08301BE5 		ldr	r3, [fp, #-8]
 5356 00e0 0300A0E1 		mov	r0, r3
 5357 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5358 00e8 0C000BE5 		str	r0, [fp, #-12]
 5359              		.loc 1 2829 5 discriminator 1
 5360 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 5361 00f0 FF3803E2 		and	r3, r3, #16711680
 5362 00f4 020853E3 		cmp	r3, #131072
 5363 00f8 0100001A 		bne	.L337
 5364              		.loc 1 2829 5 discriminator 10
 5365 00fc 0830E0E3 		mvn	r3, #8
 5366              		.loc 1 2829 5
 5367 0100 440000EA 		b	.L333
 5368              	.L337:
 5369              		.loc 1 2829 5 discriminator 11
 5370 0104 0C301BE5 		ldr	r3, [fp, #-12]
 5371 0108 233CA0E1 		lsr	r3, r3, #24
 5372 010c 030053E3 		cmp	r3, #3
 5373 0110 0100000A 		beq	.L338
 5374              		.loc 1 2829 5 discriminator 12
 5375 0114 0130E0E3 		mvn	r3, #1
 5376              		.loc 1 2829 5
 5377 0118 3E0000EA 		b	.L333
 5378              	.L338:
 5379              		.loc 1 2829 5 discriminator 13
 5380 011c 1C301BE5 		ldr	r3, [fp, #-28]
 5381 0120 7F2003E2 		and	r2, r3, #127
 5382 0124 08301BE5 		ldr	r3, [fp, #-8]
 5383 0128 143093E5 		ldr	r3, [r3, #20]
 5384 012c 030052E1 		cmp	r2, r3
 5385 0130 0100003A 		bcc	.L339
 5386              		.loc 1 2829 5 discriminator 14
 5387 0134 0230E0E3 		mvn	r3, #2
 5388              		.loc 1 2829 5
 5389 0138 360000EA 		b	.L333
 5390              	.L339:
 5391              		.loc 1 2829 5 discriminator 15
 5392 013c 1C301BE5 		ldr	r3, [fp, #-28]
 5393 0140 7F3003E2 		and	r3, r3, #127
 5394 0144 8322A0E1 		lsl	r2, r3, #5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 146


 5395 0148 08301BE5 		ldr	r3, [fp, #-8]
 5396 014c 0C3093E5 		ldr	r3, [r3, #12]
 5397 0150 033082E0 		add	r3, r2, r3
 5398 0154 08300BE5 		str	r3, [fp, #-8]
 5399 0158 08301BE5 		ldr	r3, [fp, #-8]
 5400 015c 0300A0E1 		mov	r0, r3
 5401 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5402 0164 0C000BE5 		str	r0, [fp, #-12]
 5403              		.loc 1 2829 5 discriminator 1
 5404 0168 0C301BE5 		ldr	r3, [fp, #-12]
 5405 016c FF3803E2 		and	r3, r3, #16711680
 5406 0170 020853E3 		cmp	r3, #131072
 5407 0174 0100001A 		bne	.L340
 5408              		.loc 1 2829 5 discriminator 16
 5409 0178 0830E0E3 		mvn	r3, #8
 5410              		.loc 1 2829 5
 5411 017c 250000EA 		b	.L333
 5412              	.L340:
 5413              		.loc 1 2829 5 discriminator 17
 5414 0180 0C301BE5 		ldr	r3, [fp, #-12]
 5415 0184 233CA0E1 		lsr	r3, r3, #24
 5416 0188 040053E3 		cmp	r3, #4
 5417 018c 0100000A 		beq	.L335
 5418              		.loc 1 2829 5 discriminator 18
 5419 0190 0130E0E3 		mvn	r3, #1
 5420              		.loc 1 2829 5
 5421 0194 1F0000EA 		b	.L333
 5422              	.L335:
2830:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Op,Type_Stat);    
2831:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen, but don't check their properties */
2832:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Op,0U);
2833:../../Source/Kernel/rme_kernel.c **** 
2834:../../Source/Kernel/rme_kernel.c ****     Szord=RME_PGT_SZORD(Pgt_Op->Order);
 5423              		.loc 1 2834 11 is_stmt 1
 5424 0198 08301BE5 		ldr	r3, [fp, #-8]
 5425 019c 143093E5 		ldr	r3, [r3, #20]
 5426              		.loc 1 2834 10
 5427 01a0 2338A0E1 		lsr	r3, r3, #16
 5428 01a4 10300BE5 		str	r3, [fp, #-16]
2835:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
2836:../../Source/Kernel/rme_kernel.c ****     /* Check if we force identical mapping */
2837:../../Source/Kernel/rme_kernel.c ****     if(Szord==RME_WORD_BIT)
2838:../../Source/Kernel/rme_kernel.c ****     {
2839:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2840:../../Source/Kernel/rme_kernel.c ****         
2841:../../Source/Kernel/rme_kernel.c ****         if((Paddr!=0U)||(Pos!=0U))
2842:../../Source/Kernel/rme_kernel.c ****         {
2843:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2844:../../Source/Kernel/rme_kernel.c ****             
2845:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
2846:../../Source/Kernel/rme_kernel.c ****         }
2847:../../Source/Kernel/rme_kernel.c ****         else
2848:../../Source/Kernel/rme_kernel.c ****         {
2849:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2850:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2851:../../Source/Kernel/rme_kernel.c ****         }
2852:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 147


2853:../../Source/Kernel/rme_kernel.c ****     else if(Paddr!=(RME_PGT_BASE(Pgt_Op->Base)+(Pos<<Szord)))
2854:../../Source/Kernel/rme_kernel.c ****     {
2855:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2856:../../Source/Kernel/rme_kernel.c ****         
2857:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
2858:../../Source/Kernel/rme_kernel.c ****     }
2859:../../Source/Kernel/rme_kernel.c ****     else
2860:../../Source/Kernel/rme_kernel.c ****     {
2861:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2862:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2863:../../Source/Kernel/rme_kernel.c ****     }
2864:../../Source/Kernel/rme_kernel.c **** #endif
2865:../../Source/Kernel/rme_kernel.c **** 
2866:../../Source/Kernel/rme_kernel.c ****     /* See if the mapping range and the granularity is allowed */
2867:../../Source/Kernel/rme_kernel.c ****     if(((Pos>>RME_PGT_NMORD(Pgt_Op->Order))!=0U)||
 5429              		.loc 1 2867 15
 5430 01a8 08301BE5 		ldr	r3, [fp, #-8]
 5431 01ac 143093E5 		ldr	r3, [r3, #20]
 5432 01b0 7330FFE6 		uxth	r3, r3
 5433              		.loc 1 2867 13
 5434 01b4 24201BE5 		ldr	r2, [fp, #-36]
 5435 01b8 3233A0E1 		lsr	r3, r2, r3
 5436              		.loc 1 2867 7
 5437 01bc 000053E3 		cmp	r3, #0
 5438 01c0 0700001A 		bne	.L341
2868:../../Source/Kernel/rme_kernel.c ****        ((Paddr&RME_MASK_END(Szord-1U))!=0U))
 5439              		.loc 1 2868 16
 5440 01c4 10301BE5 		ldr	r3, [fp, #-16]
 5441 01c8 203063E2 		rsb	r3, r3, #32
 5442 01cc 0020E0E3 		mvn	r2, #0
 5443 01d0 3223A0E1 		lsr	r2, r2, r3
 5444              		.loc 1 2868 15
 5445 01d4 20301BE5 		ldr	r3, [fp, #-32]
 5446 01d8 023003E0 		and	r3, r3, r2
2867:../../Source/Kernel/rme_kernel.c ****        ((Paddr&RME_MASK_END(Szord-1U))!=0U))
 5447              		.loc 1 2867 49 discriminator 1
 5448 01dc 000053E3 		cmp	r3, #0
 5449 01e0 0100000A 		beq	.L342
 5450              	.L341:
2869:../../Source/Kernel/rme_kernel.c ****     {
2870:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2871:../../Source/Kernel/rme_kernel.c ****         
2872:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 5451              		.loc 1 2872 16
 5452 01e4 6430E0E3 		mvn	r3, #100
 5453 01e8 0A0000EA 		b	.L333
 5454              	.L342:
2873:../../Source/Kernel/rme_kernel.c ****     }
2874:../../Source/Kernel/rme_kernel.c ****     else
2875:../../Source/Kernel/rme_kernel.c ****     {
2876:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2877:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2878:../../Source/Kernel/rme_kernel.c ****     }
2879:../../Source/Kernel/rme_kernel.c **** 
2880:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
2881:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict */
2882:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Page_Map(Pgt_Op,Paddr,Pos,Flag)!=0)
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 148


 5455              		.loc 1 2882 8
 5456 01ec 04309BE5 		ldr	r3, [fp, #4]
 5457 01f0 24201BE5 		ldr	r2, [fp, #-36]
 5458 01f4 20101BE5 		ldr	r1, [fp, #-32]
 5459 01f8 08001BE5 		ldr	r0, [fp, #-8]
 5460 01fc FEFFFFEB 		bl	__RME_Pgt_Page_Map
 5461 0200 0030A0E1 		mov	r3, r0
 5462              		.loc 1 2882 7 discriminator 1
 5463 0204 000053E3 		cmp	r3, #0
 5464 0208 0100000A 		beq	.L343
2883:../../Source/Kernel/rme_kernel.c ****     {
2884:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2885:../../Source/Kernel/rme_kernel.c ****         
2886:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
 5465              		.loc 1 2886 16
 5466 020c 6530E0E3 		mvn	r3, #101
 5467 0210 000000EA 		b	.L333
 5468              	.L343:
2887:../../Source/Kernel/rme_kernel.c ****     }
2888:../../Source/Kernel/rme_kernel.c ****     else
2889:../../Source/Kernel/rme_kernel.c ****     {
2890:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2891:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2892:../../Source/Kernel/rme_kernel.c ****     }
2893:../../Source/Kernel/rme_kernel.c **** 
2894:../../Source/Kernel/rme_kernel.c ****     return 0;
 5469              		.loc 1 2894 12
 5470 0214 0030A0E3 		mov	r3, #0
 5471              	.L333:
2895:../../Source/Kernel/rme_kernel.c **** }
 5472              		.loc 1 2895 1
 5473 0218 0300A0E1 		mov	r0, r3
 5474 021c 04D04BE2 		sub	sp, fp, #4
 5475              		.cfi_def_cfa 13, 8
 5476              		@ sp needed
 5477 0220 0088BDE8 		pop	{fp, pc}
 5478              		.cfi_endproc
 5479              	.LFE30:
 5481              		.section	.text._RME_Pgt_Boot_Con,"ax",%progbits
 5482              		.align	2
 5483              		.global	_RME_Pgt_Boot_Con
 5484              		.syntax unified
 5485              		.arm
 5487              	_RME_Pgt_Boot_Con:
 5488              	.LFB31:
2896:../../Source/Kernel/rme_kernel.c **** #endif
2897:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Boot_Add ********************************************/
2898:../../Source/Kernel/rme_kernel.c **** 
2899:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Boot_Con *************************************************
2900:../../Source/Kernel/rme_kernel.c **** Description : Map a child page table from the parent page table at boot-time.
2901:../../Source/Kernel/rme_kernel.c ****               This does not check flags.
2902:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
2903:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Parent - The capability to the parent page 
2904:../../Source/Kernel/rme_kernel.c ****                                          table.
2905:../../Source/Kernel/rme_kernel.c ****                                          2-Level.
2906:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos - The parent page table position to map the child
2907:../../Source/Kernel/rme_kernel.c ****                               page table to.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 149


2908:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Child - The capability to the child page table.
2909:../../Source/Kernel/rme_kernel.c ****                                         2-Level.
2910:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag_Child - Mapping flags.
2911:../../Source/Kernel/rme_kernel.c **** Output      : None.
2912:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
2913:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
2914:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
2915:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Pgt_Boot_Con(struct RME_Cap_Cpt* Cpt,
2916:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Pgt_Parent,
2917:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Pos,
2918:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Pgt_Child,
2919:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Flag_Child)
2920:../../Source/Kernel/rme_kernel.c **** {
 5489              		.loc 1 2920 1
 5490              		.cfi_startproc
 5491              		@ args = 4, pretend = 0, frame = 40
 5492              		@ frame_needed = 1, uses_anonymous_args = 0
 5493 0000 00482DE9 		push	{fp, lr}
 5494              		.cfi_def_cfa_offset 8
 5495              		.cfi_offset 11, -8
 5496              		.cfi_offset 14, -4
 5497 0004 04B08DE2 		add	fp, sp, #4
 5498              		.cfi_def_cfa 11, 4
 5499 0008 28D04DE2 		sub	sp, sp, #40
 5500 000c 20000BE5 		str	r0, [fp, #-32]
 5501 0010 24100BE5 		str	r1, [fp, #-36]
 5502 0014 28200BE5 		str	r2, [fp, #-40]
 5503 0018 2C300BE5 		str	r3, [fp, #-44]
2921:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Parent;
2922:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Child;
2923:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Pgt* Pgt_Root;
2924:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
2925:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Order_Child;
2926:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Szord_Parent;
2927:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
2928:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Begin_Parent;
2929:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t End_Parent;
2930:../../Source/Kernel/rme_kernel.c **** #endif
2931:../../Source/Kernel/rme_kernel.c ****     
2932:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
2933:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Parent,RME_CAP_TYPE_PGT,
 5504              		.loc 1 2933 5
 5505 001c 24301BE5 		ldr	r3, [fp, #-36]
 5506 0020 803003E2 		and	r3, r3, #128
 5507 0024 000053E3 		cmp	r3, #0
 5508 0028 1C00001A 		bne	.L345
 5509              		.loc 1 2933 5 is_stmt 0 discriminator 1
 5510 002c 20301BE5 		ldr	r3, [fp, #-32]
 5511 0030 142093E5 		ldr	r2, [r3, #20]
 5512 0034 24301BE5 		ldr	r3, [fp, #-36]
 5513 0038 030052E1 		cmp	r2, r3
 5514 003c 0100008A 		bhi	.L346
 5515              		.loc 1 2933 5 discriminator 3
 5516 0040 0230E0E3 		mvn	r3, #2
 5517              		.loc 1 2933 5
 5518 0044 F70000EA 		b	.L347
 5519              	.L346:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 150


 5520              		.loc 1 2933 5 discriminator 4
 5521 0048 24301BE5 		ldr	r3, [fp, #-36]
 5522 004c 8322A0E1 		lsl	r2, r3, #5
 5523 0050 20301BE5 		ldr	r3, [fp, #-32]
 5524 0054 0C3093E5 		ldr	r3, [r3, #12]
 5525 0058 033082E0 		add	r3, r2, r3
 5526 005c 08300BE5 		str	r3, [fp, #-8]
 5527 0060 08301BE5 		ldr	r3, [fp, #-8]
 5528 0064 0300A0E1 		mov	r0, r3
 5529 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5530 006c 10000BE5 		str	r0, [fp, #-16]
 5531              		.loc 1 2933 5 discriminator 1
 5532 0070 10301BE5 		ldr	r3, [fp, #-16]
 5533 0074 FF3803E2 		and	r3, r3, #16711680
 5534 0078 020853E3 		cmp	r3, #131072
 5535 007c 0100001A 		bne	.L348
 5536              		.loc 1 2933 5 discriminator 5
 5537 0080 0830E0E3 		mvn	r3, #8
 5538              		.loc 1 2933 5
 5539 0084 E70000EA 		b	.L347
 5540              	.L348:
 5541              		.loc 1 2933 5 discriminator 6
 5542 0088 10301BE5 		ldr	r3, [fp, #-16]
 5543 008c 233CA0E1 		lsr	r3, r3, #24
 5544 0090 040053E3 		cmp	r3, #4
 5545 0094 3F00000A 		beq	.L349
 5546              		.loc 1 2933 5 discriminator 7
 5547 0098 0130E0E3 		mvn	r3, #1
 5548              		.loc 1 2933 5
 5549 009c E10000EA 		b	.L347
 5550              	.L345:
 5551              		.loc 1 2933 5 discriminator 2
 5552 00a0 24301BE5 		ldr	r3, [fp, #-36]
 5553 00a4 2324A0E1 		lsr	r2, r3, #8
 5554 00a8 20301BE5 		ldr	r3, [fp, #-32]
 5555 00ac 143093E5 		ldr	r3, [r3, #20]
 5556 00b0 030052E1 		cmp	r2, r3
 5557 00b4 0100003A 		bcc	.L350
 5558              		.loc 1 2933 5 discriminator 8
 5559 00b8 0230E0E3 		mvn	r3, #2
 5560              		.loc 1 2933 5
 5561 00bc D90000EA 		b	.L347
 5562              	.L350:
 5563              		.loc 1 2933 5 discriminator 9
 5564 00c0 24301BE5 		ldr	r3, [fp, #-36]
 5565 00c4 2334A0E1 		lsr	r3, r3, #8
 5566 00c8 8322A0E1 		lsl	r2, r3, #5
 5567 00cc 20301BE5 		ldr	r3, [fp, #-32]
 5568 00d0 0C3093E5 		ldr	r3, [r3, #12]
 5569 00d4 033082E0 		add	r3, r2, r3
 5570 00d8 08300BE5 		str	r3, [fp, #-8]
 5571 00dc 08301BE5 		ldr	r3, [fp, #-8]
 5572 00e0 0300A0E1 		mov	r0, r3
 5573 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5574 00e8 10000BE5 		str	r0, [fp, #-16]
 5575              		.loc 1 2933 5 discriminator 1
 5576 00ec 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 151


 5577 00f0 FF3803E2 		and	r3, r3, #16711680
 5578 00f4 020853E3 		cmp	r3, #131072
 5579 00f8 0100001A 		bne	.L351
 5580              		.loc 1 2933 5 discriminator 10
 5581 00fc 0830E0E3 		mvn	r3, #8
 5582              		.loc 1 2933 5
 5583 0100 C80000EA 		b	.L347
 5584              	.L351:
 5585              		.loc 1 2933 5 discriminator 11
 5586 0104 10301BE5 		ldr	r3, [fp, #-16]
 5587 0108 233CA0E1 		lsr	r3, r3, #24
 5588 010c 030053E3 		cmp	r3, #3
 5589 0110 0100000A 		beq	.L352
 5590              		.loc 1 2933 5 discriminator 12
 5591 0114 0130E0E3 		mvn	r3, #1
 5592              		.loc 1 2933 5
 5593 0118 C20000EA 		b	.L347
 5594              	.L352:
 5595              		.loc 1 2933 5 discriminator 13
 5596 011c 24301BE5 		ldr	r3, [fp, #-36]
 5597 0120 7F2003E2 		and	r2, r3, #127
 5598 0124 08301BE5 		ldr	r3, [fp, #-8]
 5599 0128 143093E5 		ldr	r3, [r3, #20]
 5600 012c 030052E1 		cmp	r2, r3
 5601 0130 0100003A 		bcc	.L353
 5602              		.loc 1 2933 5 discriminator 14
 5603 0134 0230E0E3 		mvn	r3, #2
 5604              		.loc 1 2933 5
 5605 0138 BA0000EA 		b	.L347
 5606              	.L353:
 5607              		.loc 1 2933 5 discriminator 15
 5608 013c 24301BE5 		ldr	r3, [fp, #-36]
 5609 0140 7F3003E2 		and	r3, r3, #127
 5610 0144 8322A0E1 		lsl	r2, r3, #5
 5611 0148 08301BE5 		ldr	r3, [fp, #-8]
 5612 014c 0C3093E5 		ldr	r3, [r3, #12]
 5613 0150 033082E0 		add	r3, r2, r3
 5614 0154 08300BE5 		str	r3, [fp, #-8]
 5615 0158 08301BE5 		ldr	r3, [fp, #-8]
 5616 015c 0300A0E1 		mov	r0, r3
 5617 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5618 0164 10000BE5 		str	r0, [fp, #-16]
 5619              		.loc 1 2933 5 discriminator 1
 5620 0168 10301BE5 		ldr	r3, [fp, #-16]
 5621 016c FF3803E2 		and	r3, r3, #16711680
 5622 0170 020853E3 		cmp	r3, #131072
 5623 0174 0100001A 		bne	.L354
 5624              		.loc 1 2933 5 discriminator 16
 5625 0178 0830E0E3 		mvn	r3, #8
 5626              		.loc 1 2933 5
 5627 017c A90000EA 		b	.L347
 5628              	.L354:
 5629              		.loc 1 2933 5 discriminator 17
 5630 0180 10301BE5 		ldr	r3, [fp, #-16]
 5631 0184 233CA0E1 		lsr	r3, r3, #24
 5632 0188 040053E3 		cmp	r3, #4
 5633 018c 0100000A 		beq	.L349
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 152


 5634              		.loc 1 2933 5 discriminator 18
 5635 0190 0130E0E3 		mvn	r3, #1
 5636              		.loc 1 2933 5
 5637 0194 A30000EA 		b	.L347
 5638              	.L349:
2934:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Parent,Type_Stat);
2935:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Child,RME_CAP_TYPE_PGT,
 5639              		.loc 1 2935 5 is_stmt 1
 5640 0198 2C301BE5 		ldr	r3, [fp, #-44]
 5641 019c 803003E2 		and	r3, r3, #128
 5642 01a0 000053E3 		cmp	r3, #0
 5643 01a4 1C00001A 		bne	.L355
 5644              		.loc 1 2935 5 is_stmt 0 discriminator 1
 5645 01a8 20301BE5 		ldr	r3, [fp, #-32]
 5646 01ac 142093E5 		ldr	r2, [r3, #20]
 5647 01b0 2C301BE5 		ldr	r3, [fp, #-44]
 5648 01b4 030052E1 		cmp	r2, r3
 5649 01b8 0100008A 		bhi	.L356
 5650              		.loc 1 2935 5 discriminator 3
 5651 01bc 0230E0E3 		mvn	r3, #2
 5652              		.loc 1 2935 5
 5653 01c0 980000EA 		b	.L347
 5654              	.L356:
 5655              		.loc 1 2935 5 discriminator 4
 5656 01c4 2C301BE5 		ldr	r3, [fp, #-44]
 5657 01c8 8322A0E1 		lsl	r2, r3, #5
 5658 01cc 20301BE5 		ldr	r3, [fp, #-32]
 5659 01d0 0C3093E5 		ldr	r3, [r3, #12]
 5660 01d4 033082E0 		add	r3, r2, r3
 5661 01d8 0C300BE5 		str	r3, [fp, #-12]
 5662 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 5663 01e0 0300A0E1 		mov	r0, r3
 5664 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5665 01e8 10000BE5 		str	r0, [fp, #-16]
 5666              		.loc 1 2935 5 discriminator 1
 5667 01ec 10301BE5 		ldr	r3, [fp, #-16]
 5668 01f0 FF3803E2 		and	r3, r3, #16711680
 5669 01f4 020853E3 		cmp	r3, #131072
 5670 01f8 0100001A 		bne	.L357
 5671              		.loc 1 2935 5 discriminator 5
 5672 01fc 0830E0E3 		mvn	r3, #8
 5673              		.loc 1 2935 5
 5674 0200 880000EA 		b	.L347
 5675              	.L357:
 5676              		.loc 1 2935 5 discriminator 6
 5677 0204 10301BE5 		ldr	r3, [fp, #-16]
 5678 0208 233CA0E1 		lsr	r3, r3, #24
 5679 020c 040053E3 		cmp	r3, #4
 5680 0210 3F00000A 		beq	.L358
 5681              		.loc 1 2935 5 discriminator 7
 5682 0214 0130E0E3 		mvn	r3, #1
 5683              		.loc 1 2935 5
 5684 0218 820000EA 		b	.L347
 5685              	.L355:
 5686              		.loc 1 2935 5 discriminator 2
 5687 021c 2C301BE5 		ldr	r3, [fp, #-44]
 5688 0220 2324A0E1 		lsr	r2, r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 153


 5689 0224 20301BE5 		ldr	r3, [fp, #-32]
 5690 0228 143093E5 		ldr	r3, [r3, #20]
 5691 022c 030052E1 		cmp	r2, r3
 5692 0230 0100003A 		bcc	.L359
 5693              		.loc 1 2935 5 discriminator 8
 5694 0234 0230E0E3 		mvn	r3, #2
 5695              		.loc 1 2935 5
 5696 0238 7A0000EA 		b	.L347
 5697              	.L359:
 5698              		.loc 1 2935 5 discriminator 9
 5699 023c 2C301BE5 		ldr	r3, [fp, #-44]
 5700 0240 2334A0E1 		lsr	r3, r3, #8
 5701 0244 8322A0E1 		lsl	r2, r3, #5
 5702 0248 20301BE5 		ldr	r3, [fp, #-32]
 5703 024c 0C3093E5 		ldr	r3, [r3, #12]
 5704 0250 033082E0 		add	r3, r2, r3
 5705 0254 0C300BE5 		str	r3, [fp, #-12]
 5706 0258 0C301BE5 		ldr	r3, [fp, #-12]
 5707 025c 0300A0E1 		mov	r0, r3
 5708 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5709 0264 10000BE5 		str	r0, [fp, #-16]
 5710              		.loc 1 2935 5 discriminator 1
 5711 0268 10301BE5 		ldr	r3, [fp, #-16]
 5712 026c FF3803E2 		and	r3, r3, #16711680
 5713 0270 020853E3 		cmp	r3, #131072
 5714 0274 0100001A 		bne	.L360
 5715              		.loc 1 2935 5 discriminator 10
 5716 0278 0830E0E3 		mvn	r3, #8
 5717              		.loc 1 2935 5
 5718 027c 690000EA 		b	.L347
 5719              	.L360:
 5720              		.loc 1 2935 5 discriminator 11
 5721 0280 10301BE5 		ldr	r3, [fp, #-16]
 5722 0284 233CA0E1 		lsr	r3, r3, #24
 5723 0288 030053E3 		cmp	r3, #3
 5724 028c 0100000A 		beq	.L361
 5725              		.loc 1 2935 5 discriminator 12
 5726 0290 0130E0E3 		mvn	r3, #1
 5727              		.loc 1 2935 5
 5728 0294 630000EA 		b	.L347
 5729              	.L361:
 5730              		.loc 1 2935 5 discriminator 13
 5731 0298 2C301BE5 		ldr	r3, [fp, #-44]
 5732 029c 7F2003E2 		and	r2, r3, #127
 5733 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 5734 02a4 143093E5 		ldr	r3, [r3, #20]
 5735 02a8 030052E1 		cmp	r2, r3
 5736 02ac 0100003A 		bcc	.L362
 5737              		.loc 1 2935 5 discriminator 14
 5738 02b0 0230E0E3 		mvn	r3, #2
 5739              		.loc 1 2935 5
 5740 02b4 5B0000EA 		b	.L347
 5741              	.L362:
 5742              		.loc 1 2935 5 discriminator 15
 5743 02b8 2C301BE5 		ldr	r3, [fp, #-44]
 5744 02bc 7F3003E2 		and	r3, r3, #127
 5745 02c0 8322A0E1 		lsl	r2, r3, #5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 154


 5746 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 5747 02c8 0C3093E5 		ldr	r3, [r3, #12]
 5748 02cc 033082E0 		add	r3, r2, r3
 5749 02d0 0C300BE5 		str	r3, [fp, #-12]
 5750 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 5751 02d8 0300A0E1 		mov	r0, r3
 5752 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5753 02e0 10000BE5 		str	r0, [fp, #-16]
 5754              		.loc 1 2935 5 discriminator 1
 5755 02e4 10301BE5 		ldr	r3, [fp, #-16]
 5756 02e8 FF3803E2 		and	r3, r3, #16711680
 5757 02ec 020853E3 		cmp	r3, #131072
 5758 02f0 0100001A 		bne	.L363
 5759              		.loc 1 2935 5 discriminator 16
 5760 02f4 0830E0E3 		mvn	r3, #8
 5761              		.loc 1 2935 5
 5762 02f8 4A0000EA 		b	.L347
 5763              	.L363:
 5764              		.loc 1 2935 5 discriminator 17
 5765 02fc 10301BE5 		ldr	r3, [fp, #-16]
 5766 0300 233CA0E1 		lsr	r3, r3, #24
 5767 0304 040053E3 		cmp	r3, #4
 5768 0308 0100000A 		beq	.L358
 5769              		.loc 1 2935 5 discriminator 18
 5770 030c 0130E0E3 		mvn	r3, #1
 5771              		.loc 1 2935 5
 5772 0310 440000EA 		b	.L347
 5773              	.L358:
2936:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Child,Type_Stat);
2937:../../Source/Kernel/rme_kernel.c ****     /* Check if both page table caps are not frozen but don't check flags */
2938:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Parent,0U);
2939:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Child,0U);
2940:../../Source/Kernel/rme_kernel.c ****     
2941:../../Source/Kernel/rme_kernel.c ****     /* See if the mapping range is allowed */
2942:../../Source/Kernel/rme_kernel.c ****     if((Pos>>RME_PGT_NMORD(Pgt_Parent->Order))!=0U)
 5774              		.loc 1 2942 14 is_stmt 1
 5775 0314 08301BE5 		ldr	r3, [fp, #-8]
 5776 0318 143093E5 		ldr	r3, [r3, #20]
 5777 031c 7330FFE6 		uxth	r3, r3
 5778              		.loc 1 2942 12
 5779 0320 28201BE5 		ldr	r2, [fp, #-40]
 5780 0324 3233A0E1 		lsr	r3, r2, r3
 5781              		.loc 1 2942 7
 5782 0328 000053E3 		cmp	r3, #0
 5783 032c 0100000A 		beq	.L364
2943:../../Source/Kernel/rme_kernel.c ****     {
2944:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2945:../../Source/Kernel/rme_kernel.c ****         
2946:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 5784              		.loc 1 2946 16
 5785 0330 6430E0E3 		mvn	r3, #100
 5786 0334 3B0000EA 		b	.L347
 5787              	.L364:
2947:../../Source/Kernel/rme_kernel.c ****     }
2948:../../Source/Kernel/rme_kernel.c ****     else
2949:../../Source/Kernel/rme_kernel.c ****     {
2950:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 155


2951:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2952:../../Source/Kernel/rme_kernel.c ****     }
2953:../../Source/Kernel/rme_kernel.c ****     
2954:../../Source/Kernel/rme_kernel.c ****     /* See if the child table falls within one slot of the parent table */
2955:../../Source/Kernel/rme_kernel.c ****     Order_Child=RME_PGT_NMORD(Pgt_Child->Order)+RME_PGT_SZORD(Pgt_Child->Order);
 5788              		.loc 1 2955 17
 5789 0338 0C301BE5 		ldr	r3, [fp, #-12]
 5790 033c 143093E5 		ldr	r3, [r3, #20]
 5791 0340 7320FFE6 		uxth	r2, r3
 5792              		.loc 1 2955 49
 5793 0344 0C301BE5 		ldr	r3, [fp, #-12]
 5794 0348 143093E5 		ldr	r3, [r3, #20]
 5795 034c 2338A0E1 		lsr	r3, r3, #16
 5796              		.loc 1 2955 16
 5797 0350 033082E0 		add	r3, r2, r3
 5798 0354 14300BE5 		str	r3, [fp, #-20]
2956:../../Source/Kernel/rme_kernel.c ****     Szord_Parent=RME_PGT_SZORD(Pgt_Parent->Order);
 5799              		.loc 1 2956 18
 5800 0358 08301BE5 		ldr	r3, [fp, #-8]
 5801 035c 143093E5 		ldr	r3, [r3, #20]
 5802              		.loc 1 2956 17
 5803 0360 2338A0E1 		lsr	r3, r3, #16
 5804 0364 18300BE5 		str	r3, [fp, #-24]
2957:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent<Order_Child)
 5805              		.loc 1 2957 7
 5806 0368 18201BE5 		ldr	r2, [fp, #-24]
 5807 036c 14301BE5 		ldr	r3, [fp, #-20]
 5808 0370 030052E1 		cmp	r2, r3
 5809 0374 0100002A 		bcs	.L365
2958:../../Source/Kernel/rme_kernel.c ****     {
2959:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2960:../../Source/Kernel/rme_kernel.c ****         
2961:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 5810              		.loc 1 2961 16
 5811 0378 6430E0E3 		mvn	r3, #100
 5812 037c 290000EA 		b	.L347
 5813              	.L365:
2962:../../Source/Kernel/rme_kernel.c ****     }
2963:../../Source/Kernel/rme_kernel.c ****     else
2964:../../Source/Kernel/rme_kernel.c ****     {
2965:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2966:../../Source/Kernel/rme_kernel.c ****         /* No action required */
2967:../../Source/Kernel/rme_kernel.c ****     }
2968:../../Source/Kernel/rme_kernel.c **** 
2969:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
2970:../../Source/Kernel/rme_kernel.c ****     /* Check if the child falls into the correct slot */
2971:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent<RME_WORD_BIT)
2972:../../Source/Kernel/rme_kernel.c ****     {
2973:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
2974:../../Source/Kernel/rme_kernel.c ****         
2975:../../Source/Kernel/rme_kernel.c ****         /* Check if the virtual address mapping is correct - note that the child
2976:../../Source/Kernel/rme_kernel.c ****          * could also be a top-level page table. Whether constructing a top into 
2977:../../Source/Kernel/rme_kernel.c ****          * another top is allowed is HAL-defined. */
2978:../../Source/Kernel/rme_kernel.c ****         Begin_Parent=RME_PGT_BASE(Pgt_Parent->Base)+(Pos<<Szord_Parent);
2979:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_BASE(Pgt_Child->Base)<Begin_Parent)
2980:../../Source/Kernel/rme_kernel.c ****         {
2981:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 156


2982:../../Source/Kernel/rme_kernel.c ****             
2983:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
2984:../../Source/Kernel/rme_kernel.c ****         }
2985:../../Source/Kernel/rme_kernel.c ****         else
2986:../../Source/Kernel/rme_kernel.c ****         {
2987:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
2988:../../Source/Kernel/rme_kernel.c ****             /* No action required */
2989:../../Source/Kernel/rme_kernel.c ****         }
2990:../../Source/Kernel/rme_kernel.c ****         
2991:../../Source/Kernel/rme_kernel.c ****         End_Parent=Begin_Parent+RME_POW2(Szord_Parent);
2992:../../Source/Kernel/rme_kernel.c ****         
2993:../../Source/Kernel/rme_kernel.c ****         /* If this is zero, then the parent table's slot expands to the end of 
2994:../../Source/Kernel/rme_kernel.c ****          * memory, and we are sure that overflow won't happen because start
2995:../../Source/Kernel/rme_kernel.c ****          * address is always aligned to the total order of the child table. 
2996:../../Source/Kernel/rme_kernel.c ****          * No UB for Order_Child here because Szord_Parent>=Order_Child */
2997:../../Source/Kernel/rme_kernel.c ****         if(End_Parent!=0U)
2998:../../Source/Kernel/rme_kernel.c ****         {
2999:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3000:../../Source/Kernel/rme_kernel.c ****             
3001:../../Source/Kernel/rme_kernel.c ****             if((RME_PGT_BASE(Pgt_Child->Base)+RME_POW2(Order_Child))>End_Parent)
3002:../../Source/Kernel/rme_kernel.c ****             {
3003:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
3004:../../Source/Kernel/rme_kernel.c **** 
3005:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_PGT_ADDR;
3006:../../Source/Kernel/rme_kernel.c ****             }
3007:../../Source/Kernel/rme_kernel.c ****             else
3008:../../Source/Kernel/rme_kernel.c ****             {
3009:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
3010:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
3011:../../Source/Kernel/rme_kernel.c ****             }
3012:../../Source/Kernel/rme_kernel.c ****         }
3013:../../Source/Kernel/rme_kernel.c ****         else
3014:../../Source/Kernel/rme_kernel.c ****         {
3015:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3016:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3017:../../Source/Kernel/rme_kernel.c ****         }
3018:../../Source/Kernel/rme_kernel.c ****     }
3019:../../Source/Kernel/rme_kernel.c ****     /* Parent is full range, no need to check */
3020:../../Source/Kernel/rme_kernel.c ****     else
3021:../../Source/Kernel/rme_kernel.c ****     {
3022:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3023:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3024:../../Source/Kernel/rme_kernel.c ****     }
3025:../../Source/Kernel/rme_kernel.c **** #else
3026:../../Source/Kernel/rme_kernel.c ****     /* Force no path compression when virtual mappings are enabled */
3027:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent!=Order_Child)
 5814              		.loc 1 3027 7
 5815 0380 18201BE5 		ldr	r2, [fp, #-24]
 5816 0384 14301BE5 		ldr	r3, [fp, #-20]
 5817 0388 030052E1 		cmp	r2, r3
 5818 038c 0100000A 		beq	.L366
3028:../../Source/Kernel/rme_kernel.c ****     {
3029:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3030:../../Source/Kernel/rme_kernel.c **** 
3031:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 5819              		.loc 1 3031 16
 5820 0390 6430E0E3 		mvn	r3, #100
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 157


 5821 0394 230000EA 		b	.L347
 5822              	.L366:
3032:../../Source/Kernel/rme_kernel.c ****     }
3033:../../Source/Kernel/rme_kernel.c ****     else
3034:../../Source/Kernel/rme_kernel.c ****     {
3035:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3036:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3037:../../Source/Kernel/rme_kernel.c ****     }
3038:../../Source/Kernel/rme_kernel.c **** #endif
3039:../../Source/Kernel/rme_kernel.c **** 
3040:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
3041:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict */
3042:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Pgdir_Map(Pgt_Parent,Pos,Pgt_Child,Flag_Child)<0)
 5823              		.loc 1 3042 8
 5824 0398 04309BE5 		ldr	r3, [fp, #4]
 5825 039c 0C201BE5 		ldr	r2, [fp, #-12]
 5826 03a0 28101BE5 		ldr	r1, [fp, #-40]
 5827 03a4 08001BE5 		ldr	r0, [fp, #-8]
 5828 03a8 FEFFFFEB 		bl	__RME_Pgt_Pgdir_Map
3043:../../Source/Kernel/rme_kernel.c ****     {
3044:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3045:../../Source/Kernel/rme_kernel.c **** 
3046:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
3047:../../Source/Kernel/rme_kernel.c ****     }
3048:../../Source/Kernel/rme_kernel.c ****     else
3049:../../Source/Kernel/rme_kernel.c ****     {
3050:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3051:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3052:../../Source/Kernel/rme_kernel.c ****     }
3053:../../Source/Kernel/rme_kernel.c ****     
3054:../../Source/Kernel/rme_kernel.c ****     /* Increase refcnt for both parent/child */
3055:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Parent,struct RME_Cap_Pgt*);
 5829              		.loc 1 3055 14
 5830 03ac 08301BE5 		ldr	r3, [fp, #-8]
 5831 03b0 003093E5 		ldr	r3, [r3]
 5832 03b4 7330FFE6 		uxth	r3, r3
 5833 03b8 000053E3 		cmp	r3, #0
 5834 03bc 0200000A 		beq	.L367
 5835              		.loc 1 3055 14 is_stmt 0 discriminator 1
 5836 03c0 08301BE5 		ldr	r3, [fp, #-8]
 5837 03c4 043093E5 		ldr	r3, [r3, #4]
 5838 03c8 000000EA 		b	.L368
 5839              	.L367:
 5840              		.loc 1 3055 14 discriminator 2
 5841 03cc 08301BE5 		ldr	r3, [fp, #-8]
 5842              	.L368:
 5843              		.loc 1 3055 13 is_stmt 1 discriminator 4
 5844 03d0 1C300BE5 		str	r3, [fp, #-28]
3056:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),1U);
 5845              		.loc 1 3056 5
 5846 03d4 1C301BE5 		ldr	r3, [fp, #-28]
 5847 03d8 043083E2 		add	r3, r3, #4
 5848 03dc 0110A0E3 		mov	r1, #1
 5849 03e0 0300A0E1 		mov	r0, r3
 5850 03e4 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3057:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Child,struct RME_Cap_Pgt*);
 5851              		.loc 1 3057 14
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 158


 5852 03e8 0C301BE5 		ldr	r3, [fp, #-12]
 5853 03ec 003093E5 		ldr	r3, [r3]
 5854 03f0 7330FFE6 		uxth	r3, r3
 5855 03f4 000053E3 		cmp	r3, #0
 5856 03f8 0200000A 		beq	.L369
 5857              		.loc 1 3057 14 is_stmt 0 discriminator 1
 5858 03fc 0C301BE5 		ldr	r3, [fp, #-12]
 5859 0400 043093E5 		ldr	r3, [r3, #4]
 5860 0404 000000EA 		b	.L370
 5861              	.L369:
 5862              		.loc 1 3057 14 discriminator 2
 5863 0408 0C301BE5 		ldr	r3, [fp, #-12]
 5864              	.L370:
 5865              		.loc 1 3057 13 is_stmt 1 discriminator 4
 5866 040c 1C300BE5 		str	r3, [fp, #-28]
3058:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),1U);
 5867              		.loc 1 3058 5
 5868 0410 1C301BE5 		ldr	r3, [fp, #-28]
 5869 0414 043083E2 		add	r3, r3, #4
 5870 0418 0110A0E3 		mov	r1, #1
 5871 041c 0300A0E1 		mov	r0, r3
 5872 0420 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3059:../../Source/Kernel/rme_kernel.c **** 
3060:../../Source/Kernel/rme_kernel.c ****     return 0;
 5873              		.loc 1 3060 12
 5874 0424 0030A0E3 		mov	r3, #0
 5875              	.L347:
3061:../../Source/Kernel/rme_kernel.c **** }
 5876              		.loc 1 3061 1
 5877 0428 0300A0E1 		mov	r0, r3
 5878 042c 04D04BE2 		sub	sp, fp, #4
 5879              		.cfi_def_cfa 13, 8
 5880              		@ sp needed
 5881 0430 0088BDE8 		pop	{fp, pc}
 5882              		.cfi_endproc
 5883              	.LFE31:
 5885              		.section	.text._RME_Pgt_Crt,"ax",%progbits
 5886              		.align	2
 5887              		.syntax unified
 5888              		.arm
 5890              	_RME_Pgt_Crt:
 5891              	.LFB32:
3062:../../Source/Kernel/rme_kernel.c **** #endif
3063:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Boot_Con ********************************************/
3064:../../Source/Kernel/rme_kernel.c **** 
3065:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Crt ******************************************************
3066:../../Source/Kernel/rme_kernel.c **** Description : Create a page table.
3067:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3068:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability table that contains the newly
3069:../../Source/Kernel/rme_kernel.c ****                                   created cap to pgtbl.
3070:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
3071:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kom - The kernel memory capability.
3072:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
3073:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability slot that you want this newly
3074:../../Source/Kernel/rme_kernel.c ****                                   created page table capability to be in.
3075:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
3076:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raddr - The relative virtual address to store the page
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 159


3077:../../Source/Kernel/rme_kernel.c ****                                 table kernel object.
3078:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Base - The virtual address to start mapping for this
3079:../../Source/Kernel/rme_kernel.c ****                                page table. This address must be aligned to the
3080:../../Source/Kernel/rme_kernel.c ****                                total size of the table.
3081:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Top - Whether this page table is the top-level. If
3082:../../Source/Kernel/rme_kernel.c ****                                  it is, we will map all the kernel page 
3083:../../Source/Kernel/rme_kernel.c ****                                  directories into this one.
3084:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size_Order - The size order of the page table. The size
3085:../../Source/Kernel/rme_kernel.c ****                                      refers to the size of each page in the 
3086:../../Source/Kernel/rme_kernel.c ****                                      page directory.
3087:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Num_Order - The number order of entries in the table.
3088:../../Source/Kernel/rme_kernel.c **** Output      : None.
3089:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3090:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3091:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3092:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Crt(struct RME_Cap_Cpt* Cpt,
3093:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
3094:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Kom,
3095:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt,
3096:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raddr,
3097:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Base,
3098:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Is_Top,
3099:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Size_Order,
3100:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Num_Order)
3101:../../Source/Kernel/rme_kernel.c **** {
 5892              		.loc 1 3101 1
 5893              		.cfi_startproc
 5894              		@ args = 20, pretend = 0, frame = 40
 5895              		@ frame_needed = 1, uses_anonymous_args = 0
 5896 0000 00482DE9 		push	{fp, lr}
 5897              		.cfi_def_cfa_offset 8
 5898              		.cfi_offset 11, -8
 5899              		.cfi_offset 14, -4
 5900 0004 04B08DE2 		add	fp, sp, #4
 5901              		.cfi_def_cfa 11, 4
 5902 0008 30D04DE2 		sub	sp, sp, #48
 5903 000c 20000BE5 		str	r0, [fp, #-32]
 5904 0010 24100BE5 		str	r1, [fp, #-36]
 5905 0014 28200BE5 		str	r2, [fp, #-40]
 5906 0018 2C300BE5 		str	r3, [fp, #-44]
3102:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
3103:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Kom* Kom_Op;
3104:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Crt;
3105:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3106:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Vaddr;
3107:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Table_Size;
3108:../../Source/Kernel/rme_kernel.c ****     
3109:../../Source/Kernel/rme_kernel.c ****     /* Check if the total representable memory exceeds our maximum possible
3110:../../Source/Kernel/rme_kernel.c ****      * addressible memory under the machine word length */
3111:../../Source/Kernel/rme_kernel.c ****     if((Size_Order+Num_Order)>RME_POW2(RME_WORD_ORDER))
 5907              		.loc 1 3111 19
 5908 001c 10209BE5 		ldr	r2, [fp, #16]
 5909 0020 14309BE5 		ldr	r3, [fp, #20]
 5910 0024 033082E0 		add	r3, r2, r3
 5911              		.loc 1 3111 7
 5912 0028 200053E3 		cmp	r3, #32
 5913 002c 0100009A 		bls	.L372
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 160


3112:../../Source/Kernel/rme_kernel.c ****     {
3113:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3114:../../Source/Kernel/rme_kernel.c ****         
3115:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
 5914              		.loc 1 3115 16
 5915 0030 6630E0E3 		mvn	r3, #102
 5916 0034 550100EA 		b	.L373
 5917              	.L372:
3116:../../Source/Kernel/rme_kernel.c ****     }
3117:../../Source/Kernel/rme_kernel.c ****     else
3118:../../Source/Kernel/rme_kernel.c ****     {
3119:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3120:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3121:../../Source/Kernel/rme_kernel.c ****     }
3122:../../Source/Kernel/rme_kernel.c ****     
3123:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
3124:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 5918              		.loc 1 3124 5
 5919 0038 24301BE5 		ldr	r3, [fp, #-36]
 5920 003c 803003E2 		and	r3, r3, #128
 5921 0040 000053E3 		cmp	r3, #0
 5922 0044 1C00001A 		bne	.L374
 5923              		.loc 1 3124 5 is_stmt 0 discriminator 1
 5924 0048 20301BE5 		ldr	r3, [fp, #-32]
 5925 004c 142093E5 		ldr	r2, [r3, #20]
 5926 0050 24301BE5 		ldr	r3, [fp, #-36]
 5927 0054 030052E1 		cmp	r2, r3
 5928 0058 0100008A 		bhi	.L375
 5929              		.loc 1 3124 5 discriminator 3
 5930 005c 0230E0E3 		mvn	r3, #2
 5931              		.loc 1 3124 5
 5932 0060 4A0100EA 		b	.L373
 5933              	.L375:
 5934              		.loc 1 3124 5 discriminator 4
 5935 0064 24301BE5 		ldr	r3, [fp, #-36]
 5936 0068 8322A0E1 		lsl	r2, r3, #5
 5937 006c 20301BE5 		ldr	r3, [fp, #-32]
 5938 0070 0C3093E5 		ldr	r3, [r3, #12]
 5939 0074 033082E0 		add	r3, r2, r3
 5940 0078 0C300BE5 		str	r3, [fp, #-12]
 5941 007c 0C301BE5 		ldr	r3, [fp, #-12]
 5942 0080 0300A0E1 		mov	r0, r3
 5943 0084 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5944 0088 14000BE5 		str	r0, [fp, #-20]
 5945              		.loc 1 3124 5 discriminator 1
 5946 008c 14301BE5 		ldr	r3, [fp, #-20]
 5947 0090 FF3803E2 		and	r3, r3, #16711680
 5948 0094 020853E3 		cmp	r3, #131072
 5949 0098 0100001A 		bne	.L376
 5950              		.loc 1 3124 5 discriminator 5
 5951 009c 0830E0E3 		mvn	r3, #8
 5952              		.loc 1 3124 5
 5953 00a0 3A0100EA 		b	.L373
 5954              	.L376:
 5955              		.loc 1 3124 5 discriminator 6
 5956 00a4 14301BE5 		ldr	r3, [fp, #-20]
 5957 00a8 233CA0E1 		lsr	r3, r3, #24
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 161


 5958 00ac 030053E3 		cmp	r3, #3
 5959 00b0 3F00000A 		beq	.L377
 5960              		.loc 1 3124 5 discriminator 7
 5961 00b4 0130E0E3 		mvn	r3, #1
 5962              		.loc 1 3124 5
 5963 00b8 340100EA 		b	.L373
 5964              	.L374:
 5965              		.loc 1 3124 5 discriminator 2
 5966 00bc 24301BE5 		ldr	r3, [fp, #-36]
 5967 00c0 2324A0E1 		lsr	r2, r3, #8
 5968 00c4 20301BE5 		ldr	r3, [fp, #-32]
 5969 00c8 143093E5 		ldr	r3, [r3, #20]
 5970 00cc 030052E1 		cmp	r2, r3
 5971 00d0 0100003A 		bcc	.L378
 5972              		.loc 1 3124 5 discriminator 8
 5973 00d4 0230E0E3 		mvn	r3, #2
 5974              		.loc 1 3124 5
 5975 00d8 2C0100EA 		b	.L373
 5976              	.L378:
 5977              		.loc 1 3124 5 discriminator 9
 5978 00dc 24301BE5 		ldr	r3, [fp, #-36]
 5979 00e0 2334A0E1 		lsr	r3, r3, #8
 5980 00e4 8322A0E1 		lsl	r2, r3, #5
 5981 00e8 20301BE5 		ldr	r3, [fp, #-32]
 5982 00ec 0C3093E5 		ldr	r3, [r3, #12]
 5983 00f0 033082E0 		add	r3, r2, r3
 5984 00f4 0C300BE5 		str	r3, [fp, #-12]
 5985 00f8 0C301BE5 		ldr	r3, [fp, #-12]
 5986 00fc 0300A0E1 		mov	r0, r3
 5987 0100 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 5988 0104 14000BE5 		str	r0, [fp, #-20]
 5989              		.loc 1 3124 5 discriminator 1
 5990 0108 14301BE5 		ldr	r3, [fp, #-20]
 5991 010c FF3803E2 		and	r3, r3, #16711680
 5992 0110 020853E3 		cmp	r3, #131072
 5993 0114 0100001A 		bne	.L379
 5994              		.loc 1 3124 5 discriminator 10
 5995 0118 0830E0E3 		mvn	r3, #8
 5996              		.loc 1 3124 5
 5997 011c 1B0100EA 		b	.L373
 5998              	.L379:
 5999              		.loc 1 3124 5 discriminator 11
 6000 0120 14301BE5 		ldr	r3, [fp, #-20]
 6001 0124 233CA0E1 		lsr	r3, r3, #24
 6002 0128 030053E3 		cmp	r3, #3
 6003 012c 0100000A 		beq	.L380
 6004              		.loc 1 3124 5 discriminator 12
 6005 0130 0130E0E3 		mvn	r3, #1
 6006              		.loc 1 3124 5
 6007 0134 150100EA 		b	.L373
 6008              	.L380:
 6009              		.loc 1 3124 5 discriminator 13
 6010 0138 24301BE5 		ldr	r3, [fp, #-36]
 6011 013c 7F2003E2 		and	r2, r3, #127
 6012 0140 0C301BE5 		ldr	r3, [fp, #-12]
 6013 0144 143093E5 		ldr	r3, [r3, #20]
 6014 0148 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 162


 6015 014c 0100003A 		bcc	.L381
 6016              		.loc 1 3124 5 discriminator 14
 6017 0150 0230E0E3 		mvn	r3, #2
 6018              		.loc 1 3124 5
 6019 0154 0D0100EA 		b	.L373
 6020              	.L381:
 6021              		.loc 1 3124 5 discriminator 15
 6022 0158 24301BE5 		ldr	r3, [fp, #-36]
 6023 015c 7F3003E2 		and	r3, r3, #127
 6024 0160 8322A0E1 		lsl	r2, r3, #5
 6025 0164 0C301BE5 		ldr	r3, [fp, #-12]
 6026 0168 0C3093E5 		ldr	r3, [r3, #12]
 6027 016c 033082E0 		add	r3, r2, r3
 6028 0170 0C300BE5 		str	r3, [fp, #-12]
 6029 0174 0C301BE5 		ldr	r3, [fp, #-12]
 6030 0178 0300A0E1 		mov	r0, r3
 6031 017c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6032 0180 14000BE5 		str	r0, [fp, #-20]
 6033              		.loc 1 3124 5 discriminator 1
 6034 0184 14301BE5 		ldr	r3, [fp, #-20]
 6035 0188 FF3803E2 		and	r3, r3, #16711680
 6036 018c 020853E3 		cmp	r3, #131072
 6037 0190 0100001A 		bne	.L382
 6038              		.loc 1 3124 5 discriminator 16
 6039 0194 0830E0E3 		mvn	r3, #8
 6040              		.loc 1 3124 5
 6041 0198 FC0000EA 		b	.L373
 6042              	.L382:
 6043              		.loc 1 3124 5 discriminator 17
 6044 019c 14301BE5 		ldr	r3, [fp, #-20]
 6045 01a0 233CA0E1 		lsr	r3, r3, #24
 6046 01a4 030053E3 		cmp	r3, #3
 6047 01a8 0100000A 		beq	.L377
 6048              		.loc 1 3124 5 discriminator 18
 6049 01ac 0130E0E3 		mvn	r3, #1
 6050              		.loc 1 3124 5
 6051 01b0 F60000EA 		b	.L373
 6052              	.L377:
3125:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
3126:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Kom,RME_CAP_TYPE_KOM,
 6053              		.loc 1 3126 5 is_stmt 1
 6054 01b4 28301BE5 		ldr	r3, [fp, #-40]
 6055 01b8 803003E2 		and	r3, r3, #128
 6056 01bc 000053E3 		cmp	r3, #0
 6057 01c0 1C00001A 		bne	.L383
 6058              		.loc 1 3126 5 is_stmt 0 discriminator 1
 6059 01c4 20301BE5 		ldr	r3, [fp, #-32]
 6060 01c8 142093E5 		ldr	r2, [r3, #20]
 6061 01cc 28301BE5 		ldr	r3, [fp, #-40]
 6062 01d0 030052E1 		cmp	r2, r3
 6063 01d4 0100008A 		bhi	.L384
 6064              		.loc 1 3126 5 discriminator 3
 6065 01d8 0230E0E3 		mvn	r3, #2
 6066              		.loc 1 3126 5
 6067 01dc EB0000EA 		b	.L373
 6068              	.L384:
 6069              		.loc 1 3126 5 discriminator 4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 163


 6070 01e0 28301BE5 		ldr	r3, [fp, #-40]
 6071 01e4 8322A0E1 		lsl	r2, r3, #5
 6072 01e8 20301BE5 		ldr	r3, [fp, #-32]
 6073 01ec 0C3093E5 		ldr	r3, [r3, #12]
 6074 01f0 033082E0 		add	r3, r2, r3
 6075 01f4 08300BE5 		str	r3, [fp, #-8]
 6076 01f8 08301BE5 		ldr	r3, [fp, #-8]
 6077 01fc 0300A0E1 		mov	r0, r3
 6078 0200 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6079 0204 14000BE5 		str	r0, [fp, #-20]
 6080              		.loc 1 3126 5 discriminator 1
 6081 0208 14301BE5 		ldr	r3, [fp, #-20]
 6082 020c FF3803E2 		and	r3, r3, #16711680
 6083 0210 020853E3 		cmp	r3, #131072
 6084 0214 0100001A 		bne	.L385
 6085              		.loc 1 3126 5 discriminator 5
 6086 0218 0830E0E3 		mvn	r3, #8
 6087              		.loc 1 3126 5
 6088 021c DB0000EA 		b	.L373
 6089              	.L385:
 6090              		.loc 1 3126 5 discriminator 6
 6091 0220 14301BE5 		ldr	r3, [fp, #-20]
 6092 0224 233CA0E1 		lsr	r3, r3, #24
 6093 0228 020053E3 		cmp	r3, #2
 6094 022c 3F00000A 		beq	.L386
 6095              		.loc 1 3126 5 discriminator 7
 6096 0230 0130E0E3 		mvn	r3, #1
 6097              		.loc 1 3126 5
 6098 0234 D50000EA 		b	.L373
 6099              	.L383:
 6100              		.loc 1 3126 5 discriminator 2
 6101 0238 28301BE5 		ldr	r3, [fp, #-40]
 6102 023c 2324A0E1 		lsr	r2, r3, #8
 6103 0240 20301BE5 		ldr	r3, [fp, #-32]
 6104 0244 143093E5 		ldr	r3, [r3, #20]
 6105 0248 030052E1 		cmp	r2, r3
 6106 024c 0100003A 		bcc	.L387
 6107              		.loc 1 3126 5 discriminator 8
 6108 0250 0230E0E3 		mvn	r3, #2
 6109              		.loc 1 3126 5
 6110 0254 CD0000EA 		b	.L373
 6111              	.L387:
 6112              		.loc 1 3126 5 discriminator 9
 6113 0258 28301BE5 		ldr	r3, [fp, #-40]
 6114 025c 2334A0E1 		lsr	r3, r3, #8
 6115 0260 8322A0E1 		lsl	r2, r3, #5
 6116 0264 20301BE5 		ldr	r3, [fp, #-32]
 6117 0268 0C3093E5 		ldr	r3, [r3, #12]
 6118 026c 033082E0 		add	r3, r2, r3
 6119 0270 08300BE5 		str	r3, [fp, #-8]
 6120 0274 08301BE5 		ldr	r3, [fp, #-8]
 6121 0278 0300A0E1 		mov	r0, r3
 6122 027c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6123 0280 14000BE5 		str	r0, [fp, #-20]
 6124              		.loc 1 3126 5 discriminator 1
 6125 0284 14301BE5 		ldr	r3, [fp, #-20]
 6126 0288 FF3803E2 		and	r3, r3, #16711680
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 164


 6127 028c 020853E3 		cmp	r3, #131072
 6128 0290 0100001A 		bne	.L388
 6129              		.loc 1 3126 5 discriminator 10
 6130 0294 0830E0E3 		mvn	r3, #8
 6131              		.loc 1 3126 5
 6132 0298 BC0000EA 		b	.L373
 6133              	.L388:
 6134              		.loc 1 3126 5 discriminator 11
 6135 029c 14301BE5 		ldr	r3, [fp, #-20]
 6136 02a0 233CA0E1 		lsr	r3, r3, #24
 6137 02a4 030053E3 		cmp	r3, #3
 6138 02a8 0100000A 		beq	.L389
 6139              		.loc 1 3126 5 discriminator 12
 6140 02ac 0130E0E3 		mvn	r3, #1
 6141              		.loc 1 3126 5
 6142 02b0 B60000EA 		b	.L373
 6143              	.L389:
 6144              		.loc 1 3126 5 discriminator 13
 6145 02b4 28301BE5 		ldr	r3, [fp, #-40]
 6146 02b8 7F2003E2 		and	r2, r3, #127
 6147 02bc 08301BE5 		ldr	r3, [fp, #-8]
 6148 02c0 143093E5 		ldr	r3, [r3, #20]
 6149 02c4 030052E1 		cmp	r2, r3
 6150 02c8 0100003A 		bcc	.L390
 6151              		.loc 1 3126 5 discriminator 14
 6152 02cc 0230E0E3 		mvn	r3, #2
 6153              		.loc 1 3126 5
 6154 02d0 AE0000EA 		b	.L373
 6155              	.L390:
 6156              		.loc 1 3126 5 discriminator 15
 6157 02d4 28301BE5 		ldr	r3, [fp, #-40]
 6158 02d8 7F3003E2 		and	r3, r3, #127
 6159 02dc 8322A0E1 		lsl	r2, r3, #5
 6160 02e0 08301BE5 		ldr	r3, [fp, #-8]
 6161 02e4 0C3093E5 		ldr	r3, [r3, #12]
 6162 02e8 033082E0 		add	r3, r2, r3
 6163 02ec 08300BE5 		str	r3, [fp, #-8]
 6164 02f0 08301BE5 		ldr	r3, [fp, #-8]
 6165 02f4 0300A0E1 		mov	r0, r3
 6166 02f8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6167 02fc 14000BE5 		str	r0, [fp, #-20]
 6168              		.loc 1 3126 5 discriminator 1
 6169 0300 14301BE5 		ldr	r3, [fp, #-20]
 6170 0304 FF3803E2 		and	r3, r3, #16711680
 6171 0308 020853E3 		cmp	r3, #131072
 6172 030c 0100001A 		bne	.L391
 6173              		.loc 1 3126 5 discriminator 16
 6174 0310 0830E0E3 		mvn	r3, #8
 6175              		.loc 1 3126 5
 6176 0314 9D0000EA 		b	.L373
 6177              	.L391:
 6178              		.loc 1 3126 5 discriminator 17
 6179 0318 14301BE5 		ldr	r3, [fp, #-20]
 6180 031c 233CA0E1 		lsr	r3, r3, #24
 6181 0320 020053E3 		cmp	r3, #2
 6182 0324 0100000A 		beq	.L386
 6183              		.loc 1 3126 5 discriminator 18
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 165


 6184 0328 0130E0E3 		mvn	r3, #1
 6185              		.loc 1 3126 5
 6186 032c 970000EA 		b	.L373
 6187              	.L386:
3127:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Kom*,Kom_Op,Type_Stat);
3128:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
3129:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op, RME_CPT_FLAG_CRT);
 6188              		.loc 1 3129 5 is_stmt 1
 6189 0330 0C301BE5 		ldr	r3, [fp, #-12]
 6190 0334 083093E5 		ldr	r3, [r3, #8]
 6191 0338 013003E2 		and	r3, r3, #1
 6192 033c 000053E3 		cmp	r3, #0
 6193 0340 0100001A 		bne	.L392
 6194              		.loc 1 3129 5 is_stmt 0 discriminator 1
 6195 0344 0630E0E3 		mvn	r3, #6
 6196              		.loc 1 3129 5
 6197 0348 900000EA 		b	.L373
 6198              	.L392:
3130:../../Source/Kernel/rme_kernel.c ****     
3131:../../Source/Kernel/rme_kernel.c ****     /* Are we creating the top-level? */
3132:../../Source/Kernel/rme_kernel.c ****     if(Is_Top!=0U)
 6199              		.loc 1 3132 7 is_stmt 1
 6200 034c 0C309BE5 		ldr	r3, [fp, #12]
 6201 0350 000053E3 		cmp	r3, #0
 6202 0354 0400000A 		beq	.L393
3133:../../Source/Kernel/rme_kernel.c ****     {
3134:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3135:../../Source/Kernel/rme_kernel.c **** 
3136:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_TOP(Num_Order);
 6203              		.loc 1 3136 19
 6204 0358 0120A0E3 		mov	r2, #1
 6205 035c 14309BE5 		ldr	r3, [fp, #20]
 6206 0360 1233A0E1 		lsl	r3, r2, r3
 6207 0364 10300BE5 		str	r3, [fp, #-16]
 6208 0368 030000EA 		b	.L394
 6209              	.L393:
3137:../../Source/Kernel/rme_kernel.c ****     }
3138:../../Source/Kernel/rme_kernel.c ****     else
3139:../../Source/Kernel/rme_kernel.c ****     {
3140:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3141:../../Source/Kernel/rme_kernel.c **** 
3142:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_NOM(Num_Order);
 6210              		.loc 1 3142 19
 6211 036c 0120A0E3 		mov	r2, #1
 6212 0370 14309BE5 		ldr	r3, [fp, #20]
 6213 0374 1233A0E1 		lsl	r3, r2, r3
 6214 0378 10300BE5 		str	r3, [fp, #-16]
 6215              	.L394:
3143:../../Source/Kernel/rme_kernel.c ****     }
3144:../../Source/Kernel/rme_kernel.c ****     
3145:../../Source/Kernel/rme_kernel.c ****     /* See if the creation is valid for this kmem range */
3146:../../Source/Kernel/rme_kernel.c ****     RME_KOM_CHECK(Kom_Op,RME_KOM_FLAG_PGT,Raddr,Vaddr,Table_Size);
 6216              		.loc 1 3146 5
 6217 037c 08301BE5 		ldr	r3, [fp, #-8]
 6218 0380 083093E5 		ldr	r3, [r3, #8]
 6219 0384 023003E2 		and	r3, r3, #2
 6220 0388 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 166


 6221 038c 0100001A 		bne	.L395
 6222              		.loc 1 3146 5 is_stmt 0 discriminator 1
 6223 0390 0630E0E3 		mvn	r3, #6
 6224              		.loc 1 3146 5
 6225 0394 7D0000EA 		b	.L373
 6226              	.L395:
 6227              		.loc 1 3146 5 discriminator 2
 6228 0398 08301BE5 		ldr	r3, [fp, #-8]
 6229 039c 143093E5 		ldr	r3, [r3, #20]
 6230 03a0 04209BE5 		ldr	r2, [fp, #4]
 6231 03a4 033082E0 		add	r3, r2, r3
 6232 03a8 18300BE5 		str	r3, [fp, #-24]
 6233 03ac 18201BE5 		ldr	r2, [fp, #-24]
 6234 03b0 04309BE5 		ldr	r3, [fp, #4]
 6235 03b4 030052E1 		cmp	r2, r3
 6236 03b8 0100002A 		bcs	.L396
 6237              		.loc 1 3146 5 discriminator 3
 6238 03bc 0630E0E3 		mvn	r3, #6
 6239              		.loc 1 3146 5
 6240 03c0 720000EA 		b	.L373
 6241              	.L396:
 6242              		.loc 1 3146 5 discriminator 4
 6243 03c4 08301BE5 		ldr	r3, [fp, #-8]
 6244 03c8 143093E5 		ldr	r3, [r3, #20]
 6245 03cc 18201BE5 		ldr	r2, [fp, #-24]
 6246 03d0 030052E1 		cmp	r2, r3
 6247 03d4 0100002A 		bcs	.L397
 6248              		.loc 1 3146 5 discriminator 5
 6249 03d8 0630E0E3 		mvn	r3, #6
 6250              		.loc 1 3146 5
 6251 03dc 6B0000EA 		b	.L373
 6252              	.L397:
 6253              		.loc 1 3146 5 discriminator 6
 6254 03e0 18201BE5 		ldr	r2, [fp, #-24]
 6255 03e4 10301BE5 		ldr	r3, [fp, #-16]
 6256 03e8 033082E0 		add	r3, r2, r3
 6257 03ec 18201BE5 		ldr	r2, [fp, #-24]
 6258 03f0 030052E1 		cmp	r2, r3
 6259 03f4 0100009A 		bls	.L398
 6260              		.loc 1 3146 5 discriminator 7
 6261 03f8 0630E0E3 		mvn	r3, #6
 6262              		.loc 1 3146 5
 6263 03fc 630000EA 		b	.L373
 6264              	.L398:
 6265              		.loc 1 3146 5 discriminator 8
 6266 0400 08301BE5 		ldr	r3, [fp, #-8]
 6267 0404 182093E5 		ldr	r2, [r3, #24]
 6268 0408 18101BE5 		ldr	r1, [fp, #-24]
 6269 040c 10301BE5 		ldr	r3, [fp, #-16]
 6270 0410 033081E0 		add	r3, r1, r3
 6271 0414 013043E2 		sub	r3, r3, #1
 6272 0418 030052E1 		cmp	r2, r3
 6273 041c 0100002A 		bcs	.L399
 6274              		.loc 1 3146 5 discriminator 9
 6275 0420 0630E0E3 		mvn	r3, #6
 6276              		.loc 1 3146 5
 6277 0424 590000EA 		b	.L373
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 167


 6278              	.L399:
3147:../../Source/Kernel/rme_kernel.c **** 
3148:../../Source/Kernel/rme_kernel.c ****     /* Check if these parameters are feasible */
3149:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Check(Base,Is_Top,Size_Order,Num_Order,Vaddr)<0)
 6279              		.loc 1 3149 8 is_stmt 1
 6280 0428 18301BE5 		ldr	r3, [fp, #-24]
 6281 042c 00308DE5 		str	r3, [sp]
 6282 0430 14309BE5 		ldr	r3, [fp, #20]
 6283 0434 10209BE5 		ldr	r2, [fp, #16]
 6284 0438 0C109BE5 		ldr	r1, [fp, #12]
 6285 043c 08009BE5 		ldr	r0, [fp, #8]
 6286 0440 FEFFFFEB 		bl	__RME_Pgt_Check
3150:../../Source/Kernel/rme_kernel.c ****     {
3151:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3152:../../Source/Kernel/rme_kernel.c **** 
3153:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
3154:../../Source/Kernel/rme_kernel.c ****     }
3155:../../Source/Kernel/rme_kernel.c ****     else
3156:../../Source/Kernel/rme_kernel.c ****     {
3157:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3158:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3159:../../Source/Kernel/rme_kernel.c ****     }
3160:../../Source/Kernel/rme_kernel.c **** 
3161:../../Source/Kernel/rme_kernel.c ****     /* Check if the start address is properly aligned to the total order of the page table */
3162:../../Source/Kernel/rme_kernel.c ****     if((Base&RME_MASK_END(Size_Order+Num_Order-1U))!=0U)
 6287              		.loc 1 3162 14
 6288 0444 10209BE5 		ldr	r2, [fp, #16]
 6289 0448 14309BE5 		ldr	r3, [fp, #20]
 6290 044c 033082E0 		add	r3, r2, r3
 6291 0450 203063E2 		rsb	r3, r3, #32
 6292 0454 0020E0E3 		mvn	r2, #0
 6293 0458 3223A0E1 		lsr	r2, r2, r3
 6294              		.loc 1 3162 13
 6295 045c 08309BE5 		ldr	r3, [fp, #8]
 6296 0460 023003E0 		and	r3, r3, r2
 6297              		.loc 1 3162 7
 6298 0464 000053E3 		cmp	r3, #0
 6299 0468 0100000A 		beq	.L400
3163:../../Source/Kernel/rme_kernel.c ****     {
3164:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3165:../../Source/Kernel/rme_kernel.c **** 
3166:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
 6300              		.loc 1 3166 16
 6301 046c 6630E0E3 		mvn	r3, #102
 6302 0470 460000EA 		b	.L373
 6303              	.L400:
3167:../../Source/Kernel/rme_kernel.c ****     }
3168:../../Source/Kernel/rme_kernel.c ****     else
3169:../../Source/Kernel/rme_kernel.c ****     {
3170:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3171:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3172:../../Source/Kernel/rme_kernel.c ****     }
3173:../../Source/Kernel/rme_kernel.c **** 
3174:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
3175:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Pgt,struct RME_Cap_Pgt*,Pgt_Crt);
 6304              		.loc 1 3175 5
 6305 0474 0C301BE5 		ldr	r3, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 168


 6306 0478 142093E5 		ldr	r2, [r3, #20]
 6307 047c 2C301BE5 		ldr	r3, [fp, #-44]
 6308 0480 030052E1 		cmp	r2, r3
 6309 0484 0100008A 		bhi	.L401
 6310              		.loc 1 3175 5 is_stmt 0 discriminator 1
 6311 0488 0230E0E3 		mvn	r3, #2
 6312              		.loc 1 3175 5
 6313 048c 3F0000EA 		b	.L373
 6314              	.L401:
 6315              		.loc 1 3175 5 discriminator 2
 6316 0490 2C301BE5 		ldr	r3, [fp, #-44]
 6317 0494 8322A0E1 		lsl	r2, r3, #5
 6318 0498 0C301BE5 		ldr	r3, [fp, #-12]
 6319 049c 0C3093E5 		ldr	r3, [r3, #12]
 6320 04a0 033082E0 		add	r3, r2, r3
 6321 04a4 1C300BE5 		str	r3, [fp, #-28]
3176:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
3177:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Pgt_Crt);
 6322              		.loc 1 3177 5 is_stmt 1
 6323 04a8 1C301BE5 		ldr	r3, [fp, #-28]
 6324 04ac 0128A0E3 		mov	r2, #65536
 6325 04b0 0010A0E3 		mov	r1, #0
 6326 04b4 0300A0E1 		mov	r0, r3
 6327 04b8 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 6328 04bc 0030A0E1 		mov	r3, r0
 6329              		.loc 1 3177 5 is_stmt 0 discriminator 1
 6330 04c0 000053E3 		cmp	r3, #0
 6331 04c4 0100001A 		bne	.L402
 6332 04c8 0430E0E3 		mvn	r3, #4
 6333              		.loc 1 3177 5
 6334 04cc 2F0000EA 		b	.L373
 6335              	.L402:
 6336              		.loc 1 3177 5 discriminator 2
 6337 04d0 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 6338 04d4 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 6339 04d8 002093E5 		ldr	r2, [r3]
 6340 04dc 1C301BE5 		ldr	r3, [fp, #-28]
 6341 04e0 102083E5 		str	r2, [r3, #16]
3178:../../Source/Kernel/rme_kernel.c **** 
3179:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
3180:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,Table_Size)!=0)
 6342              		.loc 1 3180 8 is_stmt 1
 6343 04e4 10101BE5 		ldr	r1, [fp, #-16]
 6344 04e8 18001BE5 		ldr	r0, [fp, #-24]
 6345 04ec FEFFFFEB 		bl	_RME_Kot_Mark
 6346 04f0 0030A0E1 		mov	r3, r0
 6347              		.loc 1 3180 7 discriminator 1
 6348 04f4 000053E3 		cmp	r3, #0
 6349 04f8 0500000A 		beq	.L403
3181:../../Source/Kernel/rme_kernel.c ****     {
3182:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3183:../../Source/Kernel/rme_kernel.c **** 
3184:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),0U);
 6350              		.loc 1 3184 9
 6351 04fc 1C301BE5 		ldr	r3, [fp, #-28]
 6352 0500 0010A0E3 		mov	r1, #0
 6353 0504 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 169


 6354 0508 FEFFFFEB 		bl	__RME_A7A_Write_Release
3185:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 6355              		.loc 1 3185 16
 6356 050c 0330E0E3 		mvn	r3, #3
 6357 0510 1E0000EA 		b	.L373
 6358              	.L403:
3186:../../Source/Kernel/rme_kernel.c ****     }
3187:../../Source/Kernel/rme_kernel.c ****     else
3188:../../Source/Kernel/rme_kernel.c ****     {
3189:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3190:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3191:../../Source/Kernel/rme_kernel.c ****     }
3192:../../Source/Kernel/rme_kernel.c ****     
3193:../../Source/Kernel/rme_kernel.c ****     /* Header init */
3194:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Root_Ref=0U;
 6359              		.loc 1 3194 27
 6360 0514 1C301BE5 		ldr	r3, [fp, #-28]
 6361 0518 0020A0E3 		mov	r2, #0
 6362 051c 042083E5 		str	r2, [r3, #4]
3195:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Object=Vaddr;
 6363              		.loc 1 3195 25
 6364 0520 1C301BE5 		ldr	r3, [fp, #-28]
 6365 0524 18201BE5 		ldr	r2, [fp, #-24]
 6366 0528 0C2083E5 		str	r2, [r3, #12]
3196:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Head.Flag=RME_PGT_FLAG_FULL_RANGE|RME_PGT_FLAG_ALL;
 6367              		.loc 1 3196 23
 6368 052c 1C201BE5 		ldr	r2, [fp, #-28]
 6369 0530 FF30A0E3 		mov	r3, #255
 6370 0534 F03F4FE3 		movt	r3, 65520
 6371 0538 083082E5 		str	r3, [r2, #8]
3197:../../Source/Kernel/rme_kernel.c ****     
3198:../../Source/Kernel/rme_kernel.c ****     /* Info init */
3199:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Base=Base|Is_Top;
 6372              		.loc 1 3199 23
 6373 053c 08209BE5 		ldr	r2, [fp, #8]
 6374 0540 0C309BE5 		ldr	r3, [fp, #12]
 6375 0544 032082E1 		orr	r2, r2, r3
 6376              		.loc 1 3199 18
 6377 0548 1C301BE5 		ldr	r3, [fp, #-28]
 6378 054c 182083E5 		str	r2, [r3, #24]
3200:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->Order=RME_PGT_ORDER(Size_Order,Num_Order);
 6379              		.loc 1 3200 20
 6380 0550 10309BE5 		ldr	r3, [fp, #16]
 6381 0554 0328A0E1 		lsl	r2, r3, #16
 6382 0558 14309BE5 		ldr	r3, [fp, #20]
 6383 055c 032082E1 		orr	r2, r2, r3
 6384              		.loc 1 3200 19
 6385 0560 1C301BE5 		ldr	r3, [fp, #-28]
 6386 0564 142083E5 		str	r2, [r3, #20]
3201:../../Source/Kernel/rme_kernel.c ****     Pgt_Crt->ASID=0U;
 6387              		.loc 1 3201 18
 6388 0568 1C301BE5 		ldr	r3, [fp, #-28]
 6389 056c 0020A0E3 		mov	r2, #0
 6390 0570 1C2083E5 		str	r2, [r3, #28]
3202:../../Source/Kernel/rme_kernel.c ****     
3203:../../Source/Kernel/rme_kernel.c ****     /* Object init - need to add all kernel pages if they are top-level */
3204:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Init(Pgt_Crt)<0)
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 170


 6391              		.loc 1 3204 8
 6392 0574 1C001BE5 		ldr	r0, [fp, #-28]
 6393 0578 FEFFFFEB 		bl	__RME_Pgt_Init
3205:../../Source/Kernel/rme_kernel.c ****     {
3206:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3207:../../Source/Kernel/rme_kernel.c **** 
3208:../../Source/Kernel/rme_kernel.c ****         /* This must be successful */
3209:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(_RME_Kot_Erase(Vaddr,Table_Size)==0);
3210:../../Source/Kernel/rme_kernel.c ****         
3211:../../Source/Kernel/rme_kernel.c ****         /* Unsuccessful. Revert operations */
3212:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),0U);
3213:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
3214:../../Source/Kernel/rme_kernel.c ****     }
3215:../../Source/Kernel/rme_kernel.c ****     else
3216:../../Source/Kernel/rme_kernel.c ****     {
3217:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3218:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3219:../../Source/Kernel/rme_kernel.c ****     }
3220:../../Source/Kernel/rme_kernel.c **** 
3221:../../Source/Kernel/rme_kernel.c ****     /* Creation complete */
3222:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Pgt_Crt->Head.Type_Stat),
 6394              		.loc 1 3222 5
 6395 057c 1C301BE5 		ldr	r3, [fp, #-28]
 6396 0580 0113A0E3 		mov	r1, #67108864
 6397 0584 0300A0E1 		mov	r0, r3
 6398 0588 FEFFFFEB 		bl	__RME_A7A_Write_Release
3223:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_PGT,
3224:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
3225:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
3226:../../Source/Kernel/rme_kernel.c **** 
3227:../../Source/Kernel/rme_kernel.c ****     return 0;
 6399              		.loc 1 3227 12
 6400 058c 0030A0E3 		mov	r3, #0
 6401              	.L373:
3228:../../Source/Kernel/rme_kernel.c **** }
 6402              		.loc 1 3228 1
 6403 0590 0300A0E1 		mov	r0, r3
 6404 0594 04D04BE2 		sub	sp, fp, #4
 6405              		.cfi_def_cfa 13, 8
 6406              		@ sp needed
 6407 0598 0088BDE8 		pop	{fp, pc}
 6408              		.cfi_endproc
 6409              	.LFE32:
 6411              		.section	.text._RME_Pgt_Del,"ax",%progbits
 6412              		.align	2
 6413              		.syntax unified
 6414              		.arm
 6416              	_RME_Pgt_Del:
 6417              	.LFB33:
3229:../../Source/Kernel/rme_kernel.c **** #endif
3230:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Crt *************************************************/
3231:../../Source/Kernel/rme_kernel.c **** 
3232:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Del ******************************************************
3233:../../Source/Kernel/rme_kernel.c **** Description : Delete a page table.
3234:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3235:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the captbl that may contain
3236:../../Source/Kernel/rme_kernel.c ****                                   the cap to new captbl.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 171


3237:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
3238:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability slot that you want this newly
3239:../../Source/Kernel/rme_kernel.c ****                                   created page table capability to be in.
3240:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
3241:../../Source/Kernel/rme_kernel.c **** Output      : None.
3242:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3243:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3244:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3245:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Del(struct RME_Cap_Cpt* Cpt,
3246:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
3247:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt)
3248:../../Source/Kernel/rme_kernel.c **** {
 6418              		.loc 1 3248 1
 6419              		.cfi_startproc
 6420              		@ args = 0, pretend = 0, frame = 40
 6421              		@ frame_needed = 1, uses_anonymous_args = 0
 6422 0000 00482DE9 		push	{fp, lr}
 6423              		.cfi_def_cfa_offset 8
 6424              		.cfi_offset 11, -8
 6425              		.cfi_offset 14, -4
 6426 0004 04B08DE2 		add	fp, sp, #4
 6427              		.cfi_def_cfa 11, 4
 6428 0008 28D04DE2 		sub	sp, sp, #40
 6429 000c 20000BE5 		str	r0, [fp, #-32]
 6430 0010 24100BE5 		str	r1, [fp, #-36]
 6431 0014 28200BE5 		str	r2, [fp, #-40]
3249:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
3250:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Del;
3251:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3252:../../Source/Kernel/rme_kernel.c ****     /* These are used for deletion */
3253:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Object;
3254:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Table_Size;
3255:../../Source/Kernel/rme_kernel.c ****     
3256:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
3257:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 6432              		.loc 1 3257 5
 6433 0018 24301BE5 		ldr	r3, [fp, #-36]
 6434 001c 803003E2 		and	r3, r3, #128
 6435 0020 000053E3 		cmp	r3, #0
 6436 0024 1C00001A 		bne	.L405
 6437              		.loc 1 3257 5 is_stmt 0 discriminator 1
 6438 0028 20301BE5 		ldr	r3, [fp, #-32]
 6439 002c 142093E5 		ldr	r2, [r3, #20]
 6440 0030 24301BE5 		ldr	r3, [fp, #-36]
 6441 0034 030052E1 		cmp	r2, r3
 6442 0038 0100008A 		bhi	.L406
 6443              		.loc 1 3257 5 discriminator 3
 6444 003c 0230E0E3 		mvn	r3, #2
 6445              		.loc 1 3257 5
 6446 0040 D20000EA 		b	.L407
 6447              	.L406:
 6448              		.loc 1 3257 5 discriminator 4
 6449 0044 24301BE5 		ldr	r3, [fp, #-36]
 6450 0048 8322A0E1 		lsl	r2, r3, #5
 6451 004c 20301BE5 		ldr	r3, [fp, #-32]
 6452 0050 0C3093E5 		ldr	r3, [r3, #12]
 6453 0054 033082E0 		add	r3, r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 172


 6454 0058 08300BE5 		str	r3, [fp, #-8]
 6455 005c 08301BE5 		ldr	r3, [fp, #-8]
 6456 0060 0300A0E1 		mov	r0, r3
 6457 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6458 0068 10000BE5 		str	r0, [fp, #-16]
 6459              		.loc 1 3257 5 discriminator 1
 6460 006c 10301BE5 		ldr	r3, [fp, #-16]
 6461 0070 FF3803E2 		and	r3, r3, #16711680
 6462 0074 020853E3 		cmp	r3, #131072
 6463 0078 0100001A 		bne	.L408
 6464              		.loc 1 3257 5 discriminator 5
 6465 007c 0830E0E3 		mvn	r3, #8
 6466              		.loc 1 3257 5
 6467 0080 C20000EA 		b	.L407
 6468              	.L408:
 6469              		.loc 1 3257 5 discriminator 6
 6470 0084 10301BE5 		ldr	r3, [fp, #-16]
 6471 0088 233CA0E1 		lsr	r3, r3, #24
 6472 008c 030053E3 		cmp	r3, #3
 6473 0090 3F00000A 		beq	.L409
 6474              		.loc 1 3257 5 discriminator 7
 6475 0094 0130E0E3 		mvn	r3, #1
 6476              		.loc 1 3257 5
 6477 0098 BC0000EA 		b	.L407
 6478              	.L405:
 6479              		.loc 1 3257 5 discriminator 2
 6480 009c 24301BE5 		ldr	r3, [fp, #-36]
 6481 00a0 2324A0E1 		lsr	r2, r3, #8
 6482 00a4 20301BE5 		ldr	r3, [fp, #-32]
 6483 00a8 143093E5 		ldr	r3, [r3, #20]
 6484 00ac 030052E1 		cmp	r2, r3
 6485 00b0 0100003A 		bcc	.L410
 6486              		.loc 1 3257 5 discriminator 8
 6487 00b4 0230E0E3 		mvn	r3, #2
 6488              		.loc 1 3257 5
 6489 00b8 B40000EA 		b	.L407
 6490              	.L410:
 6491              		.loc 1 3257 5 discriminator 9
 6492 00bc 24301BE5 		ldr	r3, [fp, #-36]
 6493 00c0 2334A0E1 		lsr	r3, r3, #8
 6494 00c4 8322A0E1 		lsl	r2, r3, #5
 6495 00c8 20301BE5 		ldr	r3, [fp, #-32]
 6496 00cc 0C3093E5 		ldr	r3, [r3, #12]
 6497 00d0 033082E0 		add	r3, r2, r3
 6498 00d4 08300BE5 		str	r3, [fp, #-8]
 6499 00d8 08301BE5 		ldr	r3, [fp, #-8]
 6500 00dc 0300A0E1 		mov	r0, r3
 6501 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6502 00e4 10000BE5 		str	r0, [fp, #-16]
 6503              		.loc 1 3257 5 discriminator 1
 6504 00e8 10301BE5 		ldr	r3, [fp, #-16]
 6505 00ec FF3803E2 		and	r3, r3, #16711680
 6506 00f0 020853E3 		cmp	r3, #131072
 6507 00f4 0100001A 		bne	.L411
 6508              		.loc 1 3257 5 discriminator 10
 6509 00f8 0830E0E3 		mvn	r3, #8
 6510              		.loc 1 3257 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 173


 6511 00fc A30000EA 		b	.L407
 6512              	.L411:
 6513              		.loc 1 3257 5 discriminator 11
 6514 0100 10301BE5 		ldr	r3, [fp, #-16]
 6515 0104 233CA0E1 		lsr	r3, r3, #24
 6516 0108 030053E3 		cmp	r3, #3
 6517 010c 0100000A 		beq	.L412
 6518              		.loc 1 3257 5 discriminator 12
 6519 0110 0130E0E3 		mvn	r3, #1
 6520              		.loc 1 3257 5
 6521 0114 9D0000EA 		b	.L407
 6522              	.L412:
 6523              		.loc 1 3257 5 discriminator 13
 6524 0118 24301BE5 		ldr	r3, [fp, #-36]
 6525 011c 7F2003E2 		and	r2, r3, #127
 6526 0120 08301BE5 		ldr	r3, [fp, #-8]
 6527 0124 143093E5 		ldr	r3, [r3, #20]
 6528 0128 030052E1 		cmp	r2, r3
 6529 012c 0100003A 		bcc	.L413
 6530              		.loc 1 3257 5 discriminator 14
 6531 0130 0230E0E3 		mvn	r3, #2
 6532              		.loc 1 3257 5
 6533 0134 950000EA 		b	.L407
 6534              	.L413:
 6535              		.loc 1 3257 5 discriminator 15
 6536 0138 24301BE5 		ldr	r3, [fp, #-36]
 6537 013c 7F3003E2 		and	r3, r3, #127
 6538 0140 8322A0E1 		lsl	r2, r3, #5
 6539 0144 08301BE5 		ldr	r3, [fp, #-8]
 6540 0148 0C3093E5 		ldr	r3, [r3, #12]
 6541 014c 033082E0 		add	r3, r2, r3
 6542 0150 08300BE5 		str	r3, [fp, #-8]
 6543 0154 08301BE5 		ldr	r3, [fp, #-8]
 6544 0158 0300A0E1 		mov	r0, r3
 6545 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6546 0160 10000BE5 		str	r0, [fp, #-16]
 6547              		.loc 1 3257 5 discriminator 1
 6548 0164 10301BE5 		ldr	r3, [fp, #-16]
 6549 0168 FF3803E2 		and	r3, r3, #16711680
 6550 016c 020853E3 		cmp	r3, #131072
 6551 0170 0100001A 		bne	.L414
 6552              		.loc 1 3257 5 discriminator 16
 6553 0174 0830E0E3 		mvn	r3, #8
 6554              		.loc 1 3257 5
 6555 0178 840000EA 		b	.L407
 6556              	.L414:
 6557              		.loc 1 3257 5 discriminator 17
 6558 017c 10301BE5 		ldr	r3, [fp, #-16]
 6559 0180 233CA0E1 		lsr	r3, r3, #24
 6560 0184 030053E3 		cmp	r3, #3
 6561 0188 0100000A 		beq	.L409
 6562              		.loc 1 3257 5 discriminator 18
 6563 018c 0130E0E3 		mvn	r3, #1
 6564              		.loc 1 3257 5
 6565 0190 7E0000EA 		b	.L407
 6566              	.L409:
3258:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 174


3259:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
3260:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 6567              		.loc 1 3260 5 is_stmt 1
 6568 0194 08301BE5 		ldr	r3, [fp, #-8]
 6569 0198 083093E5 		ldr	r3, [r3, #8]
 6570 019c 023003E2 		and	r3, r3, #2
 6571 01a0 000053E3 		cmp	r3, #0
 6572 01a4 0100001A 		bne	.L415
 6573              		.loc 1 3260 5 is_stmt 0 discriminator 1
 6574 01a8 0630E0E3 		mvn	r3, #6
 6575              		.loc 1 3260 5
 6576 01ac 770000EA 		b	.L407
 6577              	.L415:
3261:../../Source/Kernel/rme_kernel.c ****     
3262:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
3263:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Pgt,struct RME_Cap_Pgt*,Pgt_Del);
 6578              		.loc 1 3263 5 is_stmt 1
 6579 01b0 08301BE5 		ldr	r3, [fp, #-8]
 6580 01b4 142093E5 		ldr	r2, [r3, #20]
 6581 01b8 28301BE5 		ldr	r3, [fp, #-40]
 6582 01bc 030052E1 		cmp	r2, r3
 6583 01c0 0100008A 		bhi	.L416
 6584              		.loc 1 3263 5 is_stmt 0 discriminator 1
 6585 01c4 0230E0E3 		mvn	r3, #2
 6586              		.loc 1 3263 5
 6587 01c8 700000EA 		b	.L407
 6588              	.L416:
 6589              		.loc 1 3263 5 discriminator 2
 6590 01cc 28301BE5 		ldr	r3, [fp, #-40]
 6591 01d0 8322A0E1 		lsl	r2, r3, #5
 6592 01d4 08301BE5 		ldr	r3, [fp, #-8]
 6593 01d8 0C3093E5 		ldr	r3, [r3, #12]
 6594 01dc 033082E0 		add	r3, r2, r3
 6595 01e0 14300BE5 		str	r3, [fp, #-20]
3264:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
3265:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Pgt_Del,Type_Stat,RME_CAP_TYPE_PGT);
 6596              		.loc 1 3265 5 is_stmt 1
 6597 01e4 14301BE5 		ldr	r3, [fp, #-20]
 6598 01e8 0300A0E1 		mov	r0, r3
 6599 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6600 01f0 10000BE5 		str	r0, [fp, #-16]
 6601              		.loc 1 3265 5 is_stmt 0 discriminator 1
 6602 01f4 10301BE5 		ldr	r3, [fp, #-16]
 6603 01f8 FF3803E2 		and	r3, r3, #16711680
 6604 01fc 020853E3 		cmp	r3, #131072
 6605 0200 0100000A 		beq	.L417
 6606 0204 0830E0E3 		mvn	r3, #8
 6607              		.loc 1 3265 5
 6608 0208 600000EA 		b	.L407
 6609              	.L417:
 6610              		.loc 1 3265 5 discriminator 2
 6611 020c 10301BE5 		ldr	r3, [fp, #-16]
 6612 0210 233CA0E1 		lsr	r3, r3, #24
 6613 0214 040053E3 		cmp	r3, #4
 6614 0218 0100000A 		beq	.L418
 6615              		.loc 1 3265 5 discriminator 3
 6616 021c 0130E0E3 		mvn	r3, #1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 175


 6617              		.loc 1 3265 5
 6618 0220 5A0000EA 		b	.L407
 6619              	.L418:
 6620              		.loc 1 3265 5 discriminator 4
 6621 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 6622 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 6623 022c 002093E5 		ldr	r2, [r3]
 6624 0230 14301BE5 		ldr	r3, [fp, #-20]
 6625 0234 103093E5 		ldr	r3, [r3, #16]
 6626 0238 0310A0E1 		mov	r1, r3
 6627 023c 0200A0E1 		mov	r0, r2
 6628 0240 FEFFFFEB 		bl	_RME_Diff
 6629 0244 0030A0E1 		mov	r3, r0
 6630              		.loc 1 3265 5 discriminator 1
 6631 0248 0A0053E3 		cmp	r3, #10
 6632 024c 0100008A 		bhi	.L419
 6633              		.loc 1 3265 5 discriminator 5
 6634 0250 0730E0E3 		mvn	r3, #7
 6635              		.loc 1 3265 5
 6636 0254 4D0000EA 		b	.L407
 6637              	.L419:
 6638              		.loc 1 3265 5 discriminator 6
 6639 0258 14301BE5 		ldr	r3, [fp, #-20]
 6640 025c 043093E5 		ldr	r3, [r3, #4]
 6641 0260 000053E3 		cmp	r3, #0
 6642 0264 0B00000A 		beq	.L420
 6643              		.loc 1 3265 5 discriminator 7
 6644 0268 10301BE5 		ldr	r3, [fp, #-16]
 6645 026c 7330FFE6 		uxth	r3, r3
 6646 0270 000053E3 		cmp	r3, #0
 6647 0274 0500001A 		bne	.L421
 6648              		.loc 1 3265 5 discriminator 9
 6649 0278 14001BE5 		ldr	r0, [fp, #-20]
 6650 027c 10301BE5 		ldr	r3, [fp, #-16]
 6651 0280 FF38C3E3 		bic	r3, r3, #16711680
 6652 0284 0320A0E1 		mov	r2, r3
 6653 0288 10101BE5 		ldr	r1, [fp, #-16]
 6654 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 6655              	.L421:
 6656              		.loc 1 3265 5 discriminator 11
 6657 0290 0530E0E3 		mvn	r3, #5
 6658              		.loc 1 3265 5
 6659 0294 3D0000EA 		b	.L407
 6660              	.L420:
 6661              		.loc 1 3265 5 discriminator 8
 6662 0298 10301BE5 		ldr	r3, [fp, #-16]
 6663 029c 7330FFE6 		uxth	r3, r3
 6664 02a0 000053E3 		cmp	r3, #0
 6665 02a4 0800000A 		beq	.L422
 6666              		.loc 1 3265 5 discriminator 12
 6667 02a8 003000E3 		movw	r3, #:lower16:.LC6
 6668 02ac 003040E3 		movt	r3, #:upper16:.LC6
 6669 02b0 002000E3 		movw	r2, #:lower16:.LC7
 6670 02b4 002040E3 		movt	r2, #:upper16:.LC7
 6671 02b8 C11C00E3 		movw	r1, #3265
 6672 02bc 000000E3 		movw	r0, #:lower16:.LC8
 6673 02c0 000040E3 		movt	r0, #:upper16:.LC8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 176


 6674 02c4 FEFFFFEB 		bl	RME_Log
 6675              	.L423:
 6676              		.loc 1 3265 5
 6677 02c8 FEFFFFEA 		b	.L423
 6678              	.L422:
3266:../../Source/Kernel/rme_kernel.c ****     
3267:../../Source/Kernel/rme_kernel.c ****     /* Hardware related deletion check passed down to the HAL. The driver should make
3268:../../Source/Kernel/rme_kernel.c ****      * sure that it does not reference any lower level tables. If the driver layer does
3269:../../Source/Kernel/rme_kernel.c ****      * not conform to this, the deletion of page table is not guaranteed to main kernel
3270:../../Source/Kernel/rme_kernel.c ****      * consistency, and such consistency must be maintained by the user-level. It is 
3271:../../Source/Kernel/rme_kernel.c ****      * recommended that the driver layer enforce such consistency. */
3272:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Del_Check(Pgt_Del)<0)
 6679              		.loc 1 3272 8 is_stmt 1
 6680 02cc 14001BE5 		ldr	r0, [fp, #-20]
 6681 02d0 FEFFFFEB 		bl	__RME_Pgt_Del_Check
3273:../../Source/Kernel/rme_kernel.c ****     {
3274:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3275:../../Source/Kernel/rme_kernel.c **** 
3276:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DEFROST(Pgt_Del,Type_Stat);
3277:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
3278:../../Source/Kernel/rme_kernel.c ****     }
3279:../../Source/Kernel/rme_kernel.c ****     else
3280:../../Source/Kernel/rme_kernel.c ****     {
3281:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3282:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3283:../../Source/Kernel/rme_kernel.c ****     }
3284:../../Source/Kernel/rme_kernel.c ****     
3285:../../Source/Kernel/rme_kernel.c ****     /* Remember these two variables for deletion */
3286:../../Source/Kernel/rme_kernel.c ****     Object=RME_CAP_GETOBJ(Pgt_Del,rme_ptr_t);
 6682              		.loc 1 3286 11
 6683 02d4 14301BE5 		ldr	r3, [fp, #-20]
 6684 02d8 0C3093E5 		ldr	r3, [r3, #12]
 6685 02dc 18300BE5 		str	r3, [fp, #-24]
3287:../../Source/Kernel/rme_kernel.c ****     if(((Pgt_Del->Base)&RME_PGT_TOP)!=0U)
 6686              		.loc 1 3287 17
 6687 02e0 14301BE5 		ldr	r3, [fp, #-20]
 6688 02e4 183093E5 		ldr	r3, [r3, #24]
 6689              		.loc 1 3287 24
 6690 02e8 013003E2 		and	r3, r3, #1
 6691              		.loc 1 3287 7
 6692 02ec 000053E3 		cmp	r3, #0
 6693 02f0 0600000A 		beq	.L424
3288:../../Source/Kernel/rme_kernel.c ****     {
3289:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3290:../../Source/Kernel/rme_kernel.c **** 
3291:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_TOP(RME_PGT_NMORD(Pgt_Del->Order));
 6694              		.loc 1 3291 20
 6695 02f4 14301BE5 		ldr	r3, [fp, #-20]
 6696 02f8 143093E5 		ldr	r3, [r3, #20]
 6697 02fc 7330FFE6 		uxth	r3, r3
 6698              		.loc 1 3291 19
 6699 0300 0120A0E3 		mov	r2, #1
 6700 0304 1233A0E1 		lsl	r3, r2, r3
 6701 0308 0C300BE5 		str	r3, [fp, #-12]
 6702 030c 050000EA 		b	.L425
 6703              	.L424:
3292:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 177


3293:../../Source/Kernel/rme_kernel.c ****     else
3294:../../Source/Kernel/rme_kernel.c ****     {
3295:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3296:../../Source/Kernel/rme_kernel.c **** 
3297:../../Source/Kernel/rme_kernel.c ****         Table_Size=RME_PGT_SIZE_NOM(RME_PGT_NMORD(Pgt_Del->Order));
 6704              		.loc 1 3297 20
 6705 0310 14301BE5 		ldr	r3, [fp, #-20]
 6706 0314 143093E5 		ldr	r3, [r3, #20]
 6707 0318 7330FFE6 		uxth	r3, r3
 6708              		.loc 1 3297 19
 6709 031c 0120A0E3 		mov	r2, #1
 6710 0320 1233A0E1 		lsl	r3, r2, r3
 6711 0324 0C300BE5 		str	r3, [fp, #-12]
 6712              	.L425:
3298:../../Source/Kernel/rme_kernel.c ****     }
3299:../../Source/Kernel/rme_kernel.c ****     
3300:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
3301:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Pgt_Del,Type_Stat);
 6713              		.loc 1 3301 5
 6714 0328 14301BE5 		ldr	r3, [fp, #-20]
 6715 032c 0020A0E3 		mov	r2, #0
 6716 0330 10101BE5 		ldr	r1, [fp, #-16]
 6717 0334 0300A0E1 		mov	r0, r3
 6718 0338 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 6719 033c 0030A0E1 		mov	r3, r0
 6720              		.loc 1 3301 5 is_stmt 0 discriminator 1
 6721 0340 000053E3 		cmp	r3, #0
 6722 0344 0100001A 		bne	.L426
 6723 0348 0030E0E3 		mvn	r3, #0
 6724              		.loc 1 3301 5
 6725 034c 0F0000EA 		b	.L407
 6726              	.L426:
3302:../../Source/Kernel/rme_kernel.c **** 
3303:../../Source/Kernel/rme_kernel.c ****     /* Try to erase the area - This must be successful */
3304:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(_RME_Kot_Erase(Object,Table_Size)==0);
 6727              		.loc 1 3304 5 is_stmt 1
 6728 0350 0C101BE5 		ldr	r1, [fp, #-12]
 6729 0354 18001BE5 		ldr	r0, [fp, #-24]
 6730 0358 FEFFFFEB 		bl	_RME_Kot_Erase
 6731 035c 0030A0E1 		mov	r3, r0
 6732              		.loc 1 3304 5 is_stmt 0 discriminator 1
 6733 0360 000053E3 		cmp	r3, #0
 6734 0364 0800000A 		beq	.L427
 6735 0368 003000E3 		movw	r3, #:lower16:.LC6
 6736 036c 003040E3 		movt	r3, #:upper16:.LC6
 6737 0370 002000E3 		movw	r2, #:lower16:.LC7
 6738 0374 002040E3 		movt	r2, #:upper16:.LC7
 6739 0378 E81C00E3 		movw	r1, #3304
 6740 037c 000000E3 		movw	r0, #:lower16:.LC8
 6741 0380 000040E3 		movt	r0, #:upper16:.LC8
 6742 0384 FEFFFFEB 		bl	RME_Log
 6743              	.L428:
 6744              		.loc 1 3304 5
 6745 0388 FEFFFFEA 		b	.L428
 6746              	.L427:
3305:../../Source/Kernel/rme_kernel.c **** 
3306:../../Source/Kernel/rme_kernel.c ****     return 0;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 178


 6747              		.loc 1 3306 12 is_stmt 1
 6748 038c 0030A0E3 		mov	r3, #0
 6749              	.L407:
3307:../../Source/Kernel/rme_kernel.c **** }
 6750              		.loc 1 3307 1
 6751 0390 0300A0E1 		mov	r0, r3
 6752 0394 04D04BE2 		sub	sp, fp, #4
 6753              		.cfi_def_cfa 13, 8
 6754              		@ sp needed
 6755 0398 0088BDE8 		pop	{fp, pc}
 6756              		.cfi_endproc
 6757              	.LFE33:
 6759              		.section	.text._RME_Pgt_Add,"ax",%progbits
 6760              		.align	2
 6761              		.syntax unified
 6762              		.arm
 6764              	_RME_Pgt_Add:
 6765              	.LFB34:
3308:../../Source/Kernel/rme_kernel.c **** #endif
3309:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Del *************************************************/
3310:../../Source/Kernel/rme_kernel.c **** 
3311:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Add ******************************************************
3312:../../Source/Kernel/rme_kernel.c **** Description : Delegate a page from one page table to another. This is the only
3313:../../Source/Kernel/rme_kernel.c ****               way to add pages to new page tables after the system boots.
3314:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3315:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Dst - The capability to the destination page
3316:../../Source/Kernel/rme_kernel.c ****                                       directory.
3317:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
3318:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos_Dst - The position to delegate to in the
3319:../../Source/Kernel/rme_kernel.c ****                                   destination page directory.
3320:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag_Dst - The page access permission for the
3321:../../Source/Kernel/rme_kernel.c ****                                    destination page.
3322:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Src - The capability to the source page 
3323:../../Source/Kernel/rme_kernel.c ****                                       directory.
3324:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
3325:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos_Dst - The position to delegate from in the source
3326:../../Source/Kernel/rme_kernel.c ****                                   page directory.
3327:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Index - The index of the physical address frame to
3328:../../Source/Kernel/rme_kernel.c ****                                 delegate. For example, if the destination
3329:../../Source/Kernel/rme_kernel.c ****                                 directory's page size is 1/4 of that of the
3330:../../Source/Kernel/rme_kernel.c ****                                 source directory, index=0 will delegate the
3331:../../Source/Kernel/rme_kernel.c ****                                 first 1/4, index=1 will delegate the second
3332:../../Source/Kernel/rme_kernel.c ****                                 1/4, index=2 will delegate the third 1/4, and
3333:../../Source/Kernel/rme_kernel.c ****                                 index=3 will delegate the last 1/4.
3334:../../Source/Kernel/rme_kernel.c ****                                 All other index values are illegal.
3335:../../Source/Kernel/rme_kernel.c **** Output      : None.
3336:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3337:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3338:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3339:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Add(struct RME_Cap_Cpt* Cpt, 
3340:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Dst,
3341:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Pos_Dst,
3342:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Flag_Dst,
3343:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Src,
3344:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Pos_Src,
3345:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Index)
3346:../../Source/Kernel/rme_kernel.c **** {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 179


 6766              		.loc 1 3346 1
 6767              		.cfi_startproc
 6768              		@ args = 12, pretend = 0, frame = 48
 6769              		@ frame_needed = 1, uses_anonymous_args = 0
 6770 0000 00482DE9 		push	{fp, lr}
 6771              		.cfi_def_cfa_offset 8
 6772              		.cfi_offset 11, -8
 6773              		.cfi_offset 14, -4
 6774 0004 04B08DE2 		add	fp, sp, #4
 6775              		.cfi_def_cfa 11, 4
 6776 0008 30D04DE2 		sub	sp, sp, #48
 6777 000c 28000BE5 		str	r0, [fp, #-40]
 6778 0010 2C100BE5 		str	r1, [fp, #-44]
 6779 0014 30200BE5 		str	r2, [fp, #-48]
 6780 0018 34300BE5 		str	r3, [fp, #-52]
3347:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Src;
3348:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Dst;
3349:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Paddr_Dst;
3350:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Paddr_Src;
3351:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Flag_Src;
3352:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3353:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Szord_Src;
3354:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Szord_Dst;
3355:../../Source/Kernel/rme_kernel.c **** 
3356:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
3357:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Dst,RME_CAP_TYPE_PGT,
 6781              		.loc 1 3357 5
 6782 001c 2C301BE5 		ldr	r3, [fp, #-44]
 6783 0020 803003E2 		and	r3, r3, #128
 6784 0024 000053E3 		cmp	r3, #0
 6785 0028 1C00001A 		bne	.L430
 6786              		.loc 1 3357 5 is_stmt 0 discriminator 1
 6787 002c 28301BE5 		ldr	r3, [fp, #-40]
 6788 0030 142093E5 		ldr	r2, [r3, #20]
 6789 0034 2C301BE5 		ldr	r3, [fp, #-44]
 6790 0038 030052E1 		cmp	r2, r3
 6791 003c 0100008A 		bhi	.L431
 6792              		.loc 1 3357 5 discriminator 3
 6793 0040 0230E0E3 		mvn	r3, #2
 6794              		.loc 1 3357 5
 6795 0044 260100EA 		b	.L460
 6796              	.L431:
 6797              		.loc 1 3357 5 discriminator 4
 6798 0048 2C301BE5 		ldr	r3, [fp, #-44]
 6799 004c 8322A0E1 		lsl	r2, r3, #5
 6800 0050 28301BE5 		ldr	r3, [fp, #-40]
 6801 0054 0C3093E5 		ldr	r3, [r3, #12]
 6802 0058 033082E0 		add	r3, r2, r3
 6803 005c 0C300BE5 		str	r3, [fp, #-12]
 6804 0060 0C301BE5 		ldr	r3, [fp, #-12]
 6805 0064 0300A0E1 		mov	r0, r3
 6806 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6807 006c 14000BE5 		str	r0, [fp, #-20]
 6808              		.loc 1 3357 5 discriminator 1
 6809 0070 14301BE5 		ldr	r3, [fp, #-20]
 6810 0074 FF3803E2 		and	r3, r3, #16711680
 6811 0078 020853E3 		cmp	r3, #131072
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 180


 6812 007c 0100001A 		bne	.L433
 6813              		.loc 1 3357 5 discriminator 5
 6814 0080 0830E0E3 		mvn	r3, #8
 6815              		.loc 1 3357 5
 6816 0084 160100EA 		b	.L460
 6817              	.L433:
 6818              		.loc 1 3357 5 discriminator 6
 6819 0088 14301BE5 		ldr	r3, [fp, #-20]
 6820 008c 233CA0E1 		lsr	r3, r3, #24
 6821 0090 040053E3 		cmp	r3, #4
 6822 0094 3F00000A 		beq	.L434
 6823              		.loc 1 3357 5 discriminator 7
 6824 0098 0130E0E3 		mvn	r3, #1
 6825              		.loc 1 3357 5
 6826 009c 100100EA 		b	.L460
 6827              	.L430:
 6828              		.loc 1 3357 5 discriminator 2
 6829 00a0 2C301BE5 		ldr	r3, [fp, #-44]
 6830 00a4 2324A0E1 		lsr	r2, r3, #8
 6831 00a8 28301BE5 		ldr	r3, [fp, #-40]
 6832 00ac 143093E5 		ldr	r3, [r3, #20]
 6833 00b0 030052E1 		cmp	r2, r3
 6834 00b4 0100003A 		bcc	.L435
 6835              		.loc 1 3357 5 discriminator 8
 6836 00b8 0230E0E3 		mvn	r3, #2
 6837              		.loc 1 3357 5
 6838 00bc 080100EA 		b	.L460
 6839              	.L435:
 6840              		.loc 1 3357 5 discriminator 9
 6841 00c0 2C301BE5 		ldr	r3, [fp, #-44]
 6842 00c4 2334A0E1 		lsr	r3, r3, #8
 6843 00c8 8322A0E1 		lsl	r2, r3, #5
 6844 00cc 28301BE5 		ldr	r3, [fp, #-40]
 6845 00d0 0C3093E5 		ldr	r3, [r3, #12]
 6846 00d4 033082E0 		add	r3, r2, r3
 6847 00d8 0C300BE5 		str	r3, [fp, #-12]
 6848 00dc 0C301BE5 		ldr	r3, [fp, #-12]
 6849 00e0 0300A0E1 		mov	r0, r3
 6850 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6851 00e8 14000BE5 		str	r0, [fp, #-20]
 6852              		.loc 1 3357 5 discriminator 1
 6853 00ec 14301BE5 		ldr	r3, [fp, #-20]
 6854 00f0 FF3803E2 		and	r3, r3, #16711680
 6855 00f4 020853E3 		cmp	r3, #131072
 6856 00f8 0100001A 		bne	.L436
 6857              		.loc 1 3357 5 discriminator 10
 6858 00fc 0830E0E3 		mvn	r3, #8
 6859              		.loc 1 3357 5
 6860 0100 F70000EA 		b	.L460
 6861              	.L436:
 6862              		.loc 1 3357 5 discriminator 11
 6863 0104 14301BE5 		ldr	r3, [fp, #-20]
 6864 0108 233CA0E1 		lsr	r3, r3, #24
 6865 010c 030053E3 		cmp	r3, #3
 6866 0110 0100000A 		beq	.L437
 6867              		.loc 1 3357 5 discriminator 12
 6868 0114 0130E0E3 		mvn	r3, #1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 181


 6869              		.loc 1 3357 5
 6870 0118 F10000EA 		b	.L460
 6871              	.L437:
 6872              		.loc 1 3357 5 discriminator 13
 6873 011c 2C301BE5 		ldr	r3, [fp, #-44]
 6874 0120 7F2003E2 		and	r2, r3, #127
 6875 0124 0C301BE5 		ldr	r3, [fp, #-12]
 6876 0128 143093E5 		ldr	r3, [r3, #20]
 6877 012c 030052E1 		cmp	r2, r3
 6878 0130 0100003A 		bcc	.L438
 6879              		.loc 1 3357 5 discriminator 14
 6880 0134 0230E0E3 		mvn	r3, #2
 6881              		.loc 1 3357 5
 6882 0138 E90000EA 		b	.L460
 6883              	.L438:
 6884              		.loc 1 3357 5 discriminator 15
 6885 013c 2C301BE5 		ldr	r3, [fp, #-44]
 6886 0140 7F3003E2 		and	r3, r3, #127
 6887 0144 8322A0E1 		lsl	r2, r3, #5
 6888 0148 0C301BE5 		ldr	r3, [fp, #-12]
 6889 014c 0C3093E5 		ldr	r3, [r3, #12]
 6890 0150 033082E0 		add	r3, r2, r3
 6891 0154 0C300BE5 		str	r3, [fp, #-12]
 6892 0158 0C301BE5 		ldr	r3, [fp, #-12]
 6893 015c 0300A0E1 		mov	r0, r3
 6894 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6895 0164 14000BE5 		str	r0, [fp, #-20]
 6896              		.loc 1 3357 5 discriminator 1
 6897 0168 14301BE5 		ldr	r3, [fp, #-20]
 6898 016c FF3803E2 		and	r3, r3, #16711680
 6899 0170 020853E3 		cmp	r3, #131072
 6900 0174 0100001A 		bne	.L439
 6901              		.loc 1 3357 5 discriminator 16
 6902 0178 0830E0E3 		mvn	r3, #8
 6903              		.loc 1 3357 5
 6904 017c D80000EA 		b	.L460
 6905              	.L439:
 6906              		.loc 1 3357 5 discriminator 17
 6907 0180 14301BE5 		ldr	r3, [fp, #-20]
 6908 0184 233CA0E1 		lsr	r3, r3, #24
 6909 0188 040053E3 		cmp	r3, #4
 6910 018c 0100000A 		beq	.L434
 6911              		.loc 1 3357 5 discriminator 18
 6912 0190 0130E0E3 		mvn	r3, #1
 6913              		.loc 1 3357 5
 6914 0194 D20000EA 		b	.L460
 6915              	.L434:
3358:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Dst,Type_Stat);
3359:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Src,RME_CAP_TYPE_PGT,
 6916              		.loc 1 3359 5 is_stmt 1
 6917 0198 04309BE5 		ldr	r3, [fp, #4]
 6918 019c 803003E2 		and	r3, r3, #128
 6919 01a0 000053E3 		cmp	r3, #0
 6920 01a4 1C00001A 		bne	.L440
 6921              		.loc 1 3359 5 is_stmt 0 discriminator 1
 6922 01a8 28301BE5 		ldr	r3, [fp, #-40]
 6923 01ac 142093E5 		ldr	r2, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 182


 6924 01b0 04309BE5 		ldr	r3, [fp, #4]
 6925 01b4 030052E1 		cmp	r2, r3
 6926 01b8 0100008A 		bhi	.L441
 6927              		.loc 1 3359 5 discriminator 3
 6928 01bc 0230E0E3 		mvn	r3, #2
 6929              		.loc 1 3359 5
 6930 01c0 C70000EA 		b	.L460
 6931              	.L441:
 6932              		.loc 1 3359 5 discriminator 4
 6933 01c4 04309BE5 		ldr	r3, [fp, #4]
 6934 01c8 8322A0E1 		lsl	r2, r3, #5
 6935 01cc 28301BE5 		ldr	r3, [fp, #-40]
 6936 01d0 0C3093E5 		ldr	r3, [r3, #12]
 6937 01d4 033082E0 		add	r3, r2, r3
 6938 01d8 08300BE5 		str	r3, [fp, #-8]
 6939 01dc 08301BE5 		ldr	r3, [fp, #-8]
 6940 01e0 0300A0E1 		mov	r0, r3
 6941 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6942 01e8 14000BE5 		str	r0, [fp, #-20]
 6943              		.loc 1 3359 5 discriminator 1
 6944 01ec 14301BE5 		ldr	r3, [fp, #-20]
 6945 01f0 FF3803E2 		and	r3, r3, #16711680
 6946 01f4 020853E3 		cmp	r3, #131072
 6947 01f8 0100001A 		bne	.L442
 6948              		.loc 1 3359 5 discriminator 5
 6949 01fc 0830E0E3 		mvn	r3, #8
 6950              		.loc 1 3359 5
 6951 0200 B70000EA 		b	.L460
 6952              	.L442:
 6953              		.loc 1 3359 5 discriminator 6
 6954 0204 14301BE5 		ldr	r3, [fp, #-20]
 6955 0208 233CA0E1 		lsr	r3, r3, #24
 6956 020c 040053E3 		cmp	r3, #4
 6957 0210 3F00000A 		beq	.L443
 6958              		.loc 1 3359 5 discriminator 7
 6959 0214 0130E0E3 		mvn	r3, #1
 6960              		.loc 1 3359 5
 6961 0218 B10000EA 		b	.L460
 6962              	.L440:
 6963              		.loc 1 3359 5 discriminator 2
 6964 021c 04309BE5 		ldr	r3, [fp, #4]
 6965 0220 2324A0E1 		lsr	r2, r3, #8
 6966 0224 28301BE5 		ldr	r3, [fp, #-40]
 6967 0228 143093E5 		ldr	r3, [r3, #20]
 6968 022c 030052E1 		cmp	r2, r3
 6969 0230 0100003A 		bcc	.L444
 6970              		.loc 1 3359 5 discriminator 8
 6971 0234 0230E0E3 		mvn	r3, #2
 6972              		.loc 1 3359 5
 6973 0238 A90000EA 		b	.L460
 6974              	.L444:
 6975              		.loc 1 3359 5 discriminator 9
 6976 023c 04309BE5 		ldr	r3, [fp, #4]
 6977 0240 2334A0E1 		lsr	r3, r3, #8
 6978 0244 8322A0E1 		lsl	r2, r3, #5
 6979 0248 28301BE5 		ldr	r3, [fp, #-40]
 6980 024c 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 183


 6981 0250 033082E0 		add	r3, r2, r3
 6982 0254 08300BE5 		str	r3, [fp, #-8]
 6983 0258 08301BE5 		ldr	r3, [fp, #-8]
 6984 025c 0300A0E1 		mov	r0, r3
 6985 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 6986 0264 14000BE5 		str	r0, [fp, #-20]
 6987              		.loc 1 3359 5 discriminator 1
 6988 0268 14301BE5 		ldr	r3, [fp, #-20]
 6989 026c FF3803E2 		and	r3, r3, #16711680
 6990 0270 020853E3 		cmp	r3, #131072
 6991 0274 0100001A 		bne	.L445
 6992              		.loc 1 3359 5 discriminator 10
 6993 0278 0830E0E3 		mvn	r3, #8
 6994              		.loc 1 3359 5
 6995 027c 980000EA 		b	.L460
 6996              	.L445:
 6997              		.loc 1 3359 5 discriminator 11
 6998 0280 14301BE5 		ldr	r3, [fp, #-20]
 6999 0284 233CA0E1 		lsr	r3, r3, #24
 7000 0288 030053E3 		cmp	r3, #3
 7001 028c 0100000A 		beq	.L446
 7002              		.loc 1 3359 5 discriminator 12
 7003 0290 0130E0E3 		mvn	r3, #1
 7004              		.loc 1 3359 5
 7005 0294 920000EA 		b	.L460
 7006              	.L446:
 7007              		.loc 1 3359 5 discriminator 13
 7008 0298 04309BE5 		ldr	r3, [fp, #4]
 7009 029c 7F2003E2 		and	r2, r3, #127
 7010 02a0 08301BE5 		ldr	r3, [fp, #-8]
 7011 02a4 143093E5 		ldr	r3, [r3, #20]
 7012 02a8 030052E1 		cmp	r2, r3
 7013 02ac 0100003A 		bcc	.L447
 7014              		.loc 1 3359 5 discriminator 14
 7015 02b0 0230E0E3 		mvn	r3, #2
 7016              		.loc 1 3359 5
 7017 02b4 8A0000EA 		b	.L460
 7018              	.L447:
 7019              		.loc 1 3359 5 discriminator 15
 7020 02b8 04309BE5 		ldr	r3, [fp, #4]
 7021 02bc 7F3003E2 		and	r3, r3, #127
 7022 02c0 8322A0E1 		lsl	r2, r3, #5
 7023 02c4 08301BE5 		ldr	r3, [fp, #-8]
 7024 02c8 0C3093E5 		ldr	r3, [r3, #12]
 7025 02cc 033082E0 		add	r3, r2, r3
 7026 02d0 08300BE5 		str	r3, [fp, #-8]
 7027 02d4 08301BE5 		ldr	r3, [fp, #-8]
 7028 02d8 0300A0E1 		mov	r0, r3
 7029 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7030 02e0 14000BE5 		str	r0, [fp, #-20]
 7031              		.loc 1 3359 5 discriminator 1
 7032 02e4 14301BE5 		ldr	r3, [fp, #-20]
 7033 02e8 FF3803E2 		and	r3, r3, #16711680
 7034 02ec 020853E3 		cmp	r3, #131072
 7035 02f0 0100001A 		bne	.L448
 7036              		.loc 1 3359 5 discriminator 16
 7037 02f4 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 184


 7038              		.loc 1 3359 5
 7039 02f8 790000EA 		b	.L460
 7040              	.L448:
 7041              		.loc 1 3359 5 discriminator 17
 7042 02fc 14301BE5 		ldr	r3, [fp, #-20]
 7043 0300 233CA0E1 		lsr	r3, r3, #24
 7044 0304 040053E3 		cmp	r3, #4
 7045 0308 0100000A 		beq	.L443
 7046              		.loc 1 3359 5 discriminator 18
 7047 030c 0130E0E3 		mvn	r3, #1
 7048              		.loc 1 3359 5
 7049 0310 730000EA 		b	.L460
 7050              	.L443:
3360:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Src,Type_Stat);
3361:../../Source/Kernel/rme_kernel.c ****     /* Check if both page table caps are not frozen and allows such operations */
3362:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Dst,RME_PGT_FLAG_ADD_DST);
 7051              		.loc 1 3362 5 is_stmt 1
 7052 0314 0C301BE5 		ldr	r3, [fp, #-12]
 7053 0318 083093E5 		ldr	r3, [r3, #8]
 7054 031c 023003E2 		and	r3, r3, #2
 7055 0320 000053E3 		cmp	r3, #0
 7056 0324 0100001A 		bne	.L449
 7057              		.loc 1 3362 5 is_stmt 0 discriminator 1
 7058 0328 0630E0E3 		mvn	r3, #6
 7059              		.loc 1 3362 5
 7060 032c 6C0000EA 		b	.L460
 7061              	.L449:
3363:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Src,RME_PGT_FLAG_ADD_SRC);
 7062              		.loc 1 3363 5 is_stmt 1
 7063 0330 08301BE5 		ldr	r3, [fp, #-8]
 7064 0334 083093E5 		ldr	r3, [r3, #8]
 7065 0338 013003E2 		and	r3, r3, #1
 7066 033c 000053E3 		cmp	r3, #0
 7067 0340 0100001A 		bne	.L450
 7068              		.loc 1 3363 5 is_stmt 0 discriminator 1
 7069 0344 0630E0E3 		mvn	r3, #6
 7070              		.loc 1 3363 5
 7071 0348 650000EA 		b	.L460
 7072              	.L450:
3364:../../Source/Kernel/rme_kernel.c ****     /* Check the operation range - This is page table specific */
3365:../../Source/Kernel/rme_kernel.c ****     if((Pos_Dst>RME_PGT_FLAG_HIGH(Pgt_Dst->Head.Flag))||
 7073              		.loc 1 3365 17 is_stmt 1
 7074 034c 0C301BE5 		ldr	r3, [fp, #-12]
 7075 0350 083093E5 		ldr	r3, [r3, #8]
 7076 0354 233AA0E1 		lsr	r3, r3, #20
 7077              		.loc 1 3365 7
 7078 0358 30201BE5 		ldr	r2, [fp, #-48]
 7079 035c 030052E1 		cmp	r2, r3
 7080 0360 1300008A 		bhi	.L451
3366:../../Source/Kernel/rme_kernel.c ****        (Pos_Dst<RME_PGT_FLAG_LOW(Pgt_Dst->Head.Flag))||
 7081              		.loc 1 3366 17
 7082 0364 0C301BE5 		ldr	r3, [fp, #-12]
 7083 0368 083093E5 		ldr	r3, [r3, #8]
 7084 036c 2334A0E1 		lsr	r3, r3, #8
 7085 0370 5330EBE7 		ubfx	r3, r3, #0, #12
3365:../../Source/Kernel/rme_kernel.c ****        (Pos_Dst<RME_PGT_FLAG_LOW(Pgt_Dst->Head.Flag))||
 7086              		.loc 1 3365 55 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 185


 7087 0374 30201BE5 		ldr	r2, [fp, #-48]
 7088 0378 030052E1 		cmp	r2, r3
 7089 037c 0C00003A 		bcc	.L451
3367:../../Source/Kernel/rme_kernel.c ****        (Pos_Src>RME_PGT_FLAG_HIGH(Pgt_Src->Head.Flag))||
 7090              		.loc 1 3367 17
 7091 0380 08301BE5 		ldr	r3, [fp, #-8]
 7092 0384 083093E5 		ldr	r3, [r3, #8]
 7093 0388 233AA0E1 		lsr	r3, r3, #20
3366:../../Source/Kernel/rme_kernel.c ****        (Pos_Dst<RME_PGT_FLAG_LOW(Pgt_Dst->Head.Flag))||
 7094              		.loc 1 3366 54
 7095 038c 08209BE5 		ldr	r2, [fp, #8]
 7096 0390 030052E1 		cmp	r2, r3
 7097 0394 0600008A 		bhi	.L451
3368:../../Source/Kernel/rme_kernel.c ****        (Pos_Src<RME_PGT_FLAG_LOW(Pgt_Src->Head.Flag)))
 7098              		.loc 1 3368 17
 7099 0398 08301BE5 		ldr	r3, [fp, #-8]
 7100 039c 083093E5 		ldr	r3, [r3, #8]
 7101 03a0 2334A0E1 		lsr	r3, r3, #8
 7102 03a4 5330EBE7 		ubfx	r3, r3, #0, #12
3367:../../Source/Kernel/rme_kernel.c ****        (Pos_Src>RME_PGT_FLAG_HIGH(Pgt_Src->Head.Flag))||
 7103              		.loc 1 3367 55
 7104 03a8 08209BE5 		ldr	r2, [fp, #8]
 7105 03ac 030052E1 		cmp	r2, r3
 7106 03b0 0100002A 		bcs	.L452
 7107              	.L451:
3369:../../Source/Kernel/rme_kernel.c ****     {
3370:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3371:../../Source/Kernel/rme_kernel.c **** 
3372:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 7108              		.loc 1 3372 16
 7109 03b4 0630E0E3 		mvn	r3, #6
 7110 03b8 490000EA 		b	.L460
 7111              	.L452:
3373:../../Source/Kernel/rme_kernel.c ****     }
3374:../../Source/Kernel/rme_kernel.c ****     else
3375:../../Source/Kernel/rme_kernel.c ****     {
3376:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3377:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3378:../../Source/Kernel/rme_kernel.c ****     }
3379:../../Source/Kernel/rme_kernel.c **** 
3380:../../Source/Kernel/rme_kernel.c ****     /* See if the size order relationship is correct */
3381:../../Source/Kernel/rme_kernel.c ****     Szord_Dst=RME_PGT_SZORD(Pgt_Dst->Order);
 7112              		.loc 1 3381 15
 7113 03bc 0C301BE5 		ldr	r3, [fp, #-12]
 7114 03c0 143093E5 		ldr	r3, [r3, #20]
 7115              		.loc 1 3381 14
 7116 03c4 2338A0E1 		lsr	r3, r3, #16
 7117 03c8 18300BE5 		str	r3, [fp, #-24]
3382:../../Source/Kernel/rme_kernel.c ****     Szord_Src=RME_PGT_SZORD(Pgt_Src->Order);
 7118              		.loc 1 3382 15
 7119 03cc 08301BE5 		ldr	r3, [fp, #-8]
 7120 03d0 143093E5 		ldr	r3, [r3, #20]
 7121              		.loc 1 3382 14
 7122 03d4 2338A0E1 		lsr	r3, r3, #16
 7123 03d8 1C300BE5 		str	r3, [fp, #-28]
3383:../../Source/Kernel/rme_kernel.c ****     if(Szord_Dst>Szord_Src)
 7124              		.loc 1 3383 7
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 186


 7125 03dc 18201BE5 		ldr	r2, [fp, #-24]
 7126 03e0 1C301BE5 		ldr	r3, [fp, #-28]
 7127 03e4 030052E1 		cmp	r2, r3
 7128 03e8 0100009A 		bls	.L453
3384:../../Source/Kernel/rme_kernel.c ****     {
3385:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3386:../../Source/Kernel/rme_kernel.c **** 
3387:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7129              		.loc 1 3387 16
 7130 03ec 6430E0E3 		mvn	r3, #100
 7131 03f0 3B0000EA 		b	.L460
 7132              	.L453:
3388:../../Source/Kernel/rme_kernel.c ****     }
3389:../../Source/Kernel/rme_kernel.c ****     else
3390:../../Source/Kernel/rme_kernel.c ****     {
3391:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3392:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3393:../../Source/Kernel/rme_kernel.c ****     }
3394:../../Source/Kernel/rme_kernel.c **** 
3395:../../Source/Kernel/rme_kernel.c ****     /* See if the positions are out of range - NMORD is restricted, no UB */
3396:../../Source/Kernel/rme_kernel.c ****     if(((Pos_Dst>>RME_PGT_NMORD(Pgt_Dst->Order))!=0U)||
 7133              		.loc 1 3396 19
 7134 03f4 0C301BE5 		ldr	r3, [fp, #-12]
 7135 03f8 143093E5 		ldr	r3, [r3, #20]
 7136 03fc 7330FFE6 		uxth	r3, r3
 7137              		.loc 1 3396 17
 7138 0400 30201BE5 		ldr	r2, [fp, #-48]
 7139 0404 3233A0E1 		lsr	r3, r2, r3
 7140              		.loc 1 3396 7
 7141 0408 000053E3 		cmp	r3, #0
 7142 040c 0600001A 		bne	.L454
3397:../../Source/Kernel/rme_kernel.c ****        ((Pos_Src>>RME_PGT_NMORD(Pgt_Src->Order))!=0U))
 7143              		.loc 1 3397 19
 7144 0410 08301BE5 		ldr	r3, [fp, #-8]
 7145 0414 143093E5 		ldr	r3, [r3, #20]
 7146 0418 7330FFE6 		uxth	r3, r3
 7147              		.loc 1 3397 17
 7148 041c 08209BE5 		ldr	r2, [fp, #8]
 7149 0420 3233A0E1 		lsr	r3, r2, r3
3396:../../Source/Kernel/rme_kernel.c ****        ((Pos_Src>>RME_PGT_NMORD(Pgt_Src->Order))!=0U))
 7150              		.loc 1 3396 54 discriminator 1
 7151 0424 000053E3 		cmp	r3, #0
 7152 0428 0100000A 		beq	.L455
 7153              	.L454:
3398:../../Source/Kernel/rme_kernel.c ****     {
3399:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3400:../../Source/Kernel/rme_kernel.c **** 
3401:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7154              		.loc 1 3401 16
 7155 042c 6430E0E3 		mvn	r3, #100
 7156 0430 2B0000EA 		b	.L460
 7157              	.L455:
3402:../../Source/Kernel/rme_kernel.c ****     }
3403:../../Source/Kernel/rme_kernel.c ****     else
3404:../../Source/Kernel/rme_kernel.c ****     {
3405:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3406:../../Source/Kernel/rme_kernel.c ****         /* No action required */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 187


3407:../../Source/Kernel/rme_kernel.c ****     }
3408:../../Source/Kernel/rme_kernel.c **** 
3409:../../Source/Kernel/rme_kernel.c ****     /* See if the source subposition is out of range - avoid UB */
3410:../../Source/Kernel/rme_kernel.c ****     if(Szord_Src<RME_WORD_BIT)
 7158              		.loc 1 3410 7
 7159 0434 1C301BE5 		ldr	r3, [fp, #-28]
 7160 0438 1F0053E3 		cmp	r3, #31
 7161 043c 0900008A 		bhi	.L456
3411:../../Source/Kernel/rme_kernel.c ****     {
3412:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3413:../../Source/Kernel/rme_kernel.c ****         
3414:../../Source/Kernel/rme_kernel.c ****         /* No UB because Szord_Dst<=Szord_Src */
3415:../../Source/Kernel/rme_kernel.c ****         if(RME_POW2(Szord_Src)<=(Index<<Szord_Dst))
 7162              		.loc 1 3415 12
 7163 0440 0120A0E3 		mov	r2, #1
 7164 0444 1C301BE5 		ldr	r3, [fp, #-28]
 7165 0448 1223A0E1 		lsl	r2, r2, r3
 7166              		.loc 1 3415 39
 7167 044c 0C109BE5 		ldr	r1, [fp, #12]
 7168 0450 18301BE5 		ldr	r3, [fp, #-24]
 7169 0454 1133A0E1 		lsl	r3, r1, r3
 7170              		.loc 1 3415 11
 7171 0458 030052E1 		cmp	r2, r3
 7172 045c 0100008A 		bhi	.L456
3416:../../Source/Kernel/rme_kernel.c ****         {
3417:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3418:../../Source/Kernel/rme_kernel.c **** 
3419:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
 7173              		.loc 1 3419 20
 7174 0460 6430E0E3 		mvn	r3, #100
 7175 0464 1E0000EA 		b	.L460
 7176              	.L456:
3420:../../Source/Kernel/rme_kernel.c ****         }
3421:../../Source/Kernel/rme_kernel.c ****         else
3422:../../Source/Kernel/rme_kernel.c ****         {
3423:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3424:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3425:../../Source/Kernel/rme_kernel.c ****         }
3426:../../Source/Kernel/rme_kernel.c ****     }
3427:../../Source/Kernel/rme_kernel.c ****     else
3428:../../Source/Kernel/rme_kernel.c ****     {
3429:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3430:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3431:../../Source/Kernel/rme_kernel.c ****     }
3432:../../Source/Kernel/rme_kernel.c **** 
3433:../../Source/Kernel/rme_kernel.c ****     /* Get the physical address and RME standard flags of that source page */
3434:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Lookup(Pgt_Src,Pos_Src,&Paddr_Src,&Flag_Src)<0)
 7177              		.loc 1 3434 8
 7178 0468 24304BE2 		sub	r3, fp, #36
 7179 046c 20204BE2 		sub	r2, fp, #32
 7180 0470 08109BE5 		ldr	r1, [fp, #8]
 7181 0474 08001BE5 		ldr	r0, [fp, #-8]
 7182 0478 FEFFFFEB 		bl	__RME_Pgt_Lookup
3435:../../Source/Kernel/rme_kernel.c ****     {
3436:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3437:../../Source/Kernel/rme_kernel.c **** 
3438:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_HW;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 188


3439:../../Source/Kernel/rme_kernel.c ****     }
3440:../../Source/Kernel/rme_kernel.c ****     else
3441:../../Source/Kernel/rme_kernel.c ****     {
3442:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3443:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3444:../../Source/Kernel/rme_kernel.c ****     }
3445:../../Source/Kernel/rme_kernel.c **** 
3446:../../Source/Kernel/rme_kernel.c ****     /* Calculate the destination physical address - avoid UB */
3447:../../Source/Kernel/rme_kernel.c ****     if(Szord_Dst<RME_WORD_BIT)
 7183              		.loc 1 3447 7
 7184 047c 18301BE5 		ldr	r3, [fp, #-24]
 7185 0480 1F0053E3 		cmp	r3, #31
 7186 0484 0600008A 		bhi	.L457
3448:../../Source/Kernel/rme_kernel.c ****     {
3449:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3450:../../Source/Kernel/rme_kernel.c ****         
3451:../../Source/Kernel/rme_kernel.c ****         Paddr_Dst=Paddr_Src+(Index<<Szord_Dst);
 7187              		.loc 1 3451 35
 7188 0488 0C209BE5 		ldr	r2, [fp, #12]
 7189 048c 18301BE5 		ldr	r3, [fp, #-24]
 7190 0490 1223A0E1 		lsl	r2, r2, r3
 7191              		.loc 1 3451 28
 7192 0494 20301BE5 		ldr	r3, [fp, #-32]
 7193              		.loc 1 3451 18
 7194 0498 033082E0 		add	r3, r2, r3
 7195 049c 10300BE5 		str	r3, [fp, #-16]
 7196 04a0 010000EA 		b	.L458
 7197              	.L457:
3452:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
3453:../../Source/Kernel/rme_kernel.c ****         /* Check if we force identical mapping */
3454:../../Source/Kernel/rme_kernel.c ****         if(Paddr_Dst!=(RME_PGT_BASE(Pgt_Dst->Base)+(Pos_Dst<<Szord_Dst)))
3455:../../Source/Kernel/rme_kernel.c ****         {
3456:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3457:../../Source/Kernel/rme_kernel.c **** 
3458:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
3459:../../Source/Kernel/rme_kernel.c ****         }
3460:../../Source/Kernel/rme_kernel.c ****         else
3461:../../Source/Kernel/rme_kernel.c ****         {
3462:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3463:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3464:../../Source/Kernel/rme_kernel.c ****         }
3465:../../Source/Kernel/rme_kernel.c **** #endif
3466:../../Source/Kernel/rme_kernel.c ****     }
3467:../../Source/Kernel/rme_kernel.c ****     /* The destination is also full range */
3468:../../Source/Kernel/rme_kernel.c ****     else
3469:../../Source/Kernel/rme_kernel.c ****     {
3470:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3471:../../Source/Kernel/rme_kernel.c ****         
3472:../../Source/Kernel/rme_kernel.c ****         Paddr_Dst=Paddr_Src;
 7198              		.loc 1 3472 18
 7199 04a4 20301BE5 		ldr	r3, [fp, #-32]
 7200 04a8 10300BE5 		str	r3, [fp, #-16]
 7201              	.L458:
3473:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
3474:../../Source/Kernel/rme_kernel.c ****         if(Paddr_Dst!=RME_PGT_BASE(Pgt_Dst->Base))
3475:../../Source/Kernel/rme_kernel.c ****         {
3476:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 189


3477:../../Source/Kernel/rme_kernel.c **** 
3478:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
3479:../../Source/Kernel/rme_kernel.c ****         }
3480:../../Source/Kernel/rme_kernel.c ****         else
3481:../../Source/Kernel/rme_kernel.c ****         {
3482:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3483:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3484:../../Source/Kernel/rme_kernel.c ****         }
3485:../../Source/Kernel/rme_kernel.c **** #endif
3486:../../Source/Kernel/rme_kernel.c ****     }
3487:../../Source/Kernel/rme_kernel.c ****     
3488:../../Source/Kernel/rme_kernel.c ****     /* Analyze the flags - we do not allow expansion of access permissions */
3489:../../Source/Kernel/rme_kernel.c ****     if(((Flag_Dst)&(~Flag_Src))!=0U)
 7202              		.loc 1 3489 21
 7203 04ac 24301BE5 		ldr	r3, [fp, #-36]
 7204 04b0 0320E0E1 		mvn	r2, r3
 7205              		.loc 1 3489 19
 7206 04b4 34301BE5 		ldr	r3, [fp, #-52]
 7207 04b8 023003E0 		and	r3, r3, r2
 7208              		.loc 1 3489 7
 7209 04bc 000053E3 		cmp	r3, #0
 7210 04c0 0100000A 		beq	.L459
3490:../../Source/Kernel/rme_kernel.c ****     {
3491:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3492:../../Source/Kernel/rme_kernel.c **** 
3493:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_PERM;
 7211              		.loc 1 3493 16
 7212 04c4 6730E0E3 		mvn	r3, #103
 7213 04c8 050000EA 		b	.L460
 7214              	.L459:
3494:../../Source/Kernel/rme_kernel.c ****     }
3495:../../Source/Kernel/rme_kernel.c ****     else
3496:../../Source/Kernel/rme_kernel.c ****     {
3497:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3498:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3499:../../Source/Kernel/rme_kernel.c ****     }
3500:../../Source/Kernel/rme_kernel.c **** 
3501:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
3502:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict */
3503:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Page_Map(Pgt_Dst,Paddr_Dst,Pos_Dst,Flag_Dst)<0)
 7215              		.loc 1 3503 8
 7216 04cc 34301BE5 		ldr	r3, [fp, #-52]
 7217 04d0 30201BE5 		ldr	r2, [fp, #-48]
 7218 04d4 10101BE5 		ldr	r1, [fp, #-16]
 7219 04d8 0C001BE5 		ldr	r0, [fp, #-12]
 7220 04dc FEFFFFEB 		bl	__RME_Pgt_Page_Map
3504:../../Source/Kernel/rme_kernel.c ****     {
3505:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3506:../../Source/Kernel/rme_kernel.c **** 
3507:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
3508:../../Source/Kernel/rme_kernel.c ****     }
3509:../../Source/Kernel/rme_kernel.c ****     else
3510:../../Source/Kernel/rme_kernel.c ****     {
3511:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3512:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3513:../../Source/Kernel/rme_kernel.c ****     }
3514:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 190


3515:../../Source/Kernel/rme_kernel.c ****     return 0;
 7221              		.loc 1 3515 12
 7222 04e0 0030A0E3 		mov	r3, #0
 7223              	.L460:
3516:../../Source/Kernel/rme_kernel.c **** }
 7224              		.loc 1 3516 1
 7225 04e4 0300A0E1 		mov	r0, r3
 7226 04e8 04D04BE2 		sub	sp, fp, #4
 7227              		.cfi_def_cfa 13, 8
 7228              		@ sp needed
 7229 04ec 0088BDE8 		pop	{fp, pc}
 7230              		.cfi_endproc
 7231              	.LFE34:
 7233              		.section	.text._RME_Pgt_Rem,"ax",%progbits
 7234              		.align	2
 7235              		.syntax unified
 7236              		.arm
 7238              	_RME_Pgt_Rem:
 7239              	.LFB35:
3517:../../Source/Kernel/rme_kernel.c **** #endif
3518:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Add *************************************************/
3519:../../Source/Kernel/rme_kernel.c **** 
3520:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Rem ******************************************************
3521:../../Source/Kernel/rme_kernel.c **** Description : Remove a page from the page table. We are doing unmapping of a
3522:../../Source/Kernel/rme_kernel.c ****               page.
3523:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3524:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability to the page table.
3525:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
3526:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos - The page table position to unmap from.
3527:../../Source/Kernel/rme_kernel.c **** Output      : None.
3528:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3529:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3530:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3531:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Rem(struct RME_Cap_Cpt* Cpt,
3532:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt,
3533:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Pos)
3534:../../Source/Kernel/rme_kernel.c **** {
 7240              		.loc 1 3534 1
 7241              		.cfi_startproc
 7242              		@ args = 0, pretend = 0, frame = 24
 7243              		@ frame_needed = 1, uses_anonymous_args = 0
 7244 0000 00482DE9 		push	{fp, lr}
 7245              		.cfi_def_cfa_offset 8
 7246              		.cfi_offset 11, -8
 7247              		.cfi_offset 14, -4
 7248 0004 04B08DE2 		add	fp, sp, #4
 7249              		.cfi_def_cfa 11, 4
 7250 0008 18D04DE2 		sub	sp, sp, #24
 7251 000c 10000BE5 		str	r0, [fp, #-16]
 7252 0010 14100BE5 		str	r1, [fp, #-20]
 7253 0014 18200BE5 		str	r2, [fp, #-24]
3535:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Rem;
3536:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3537:../../Source/Kernel/rme_kernel.c ****     
3538:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
3539:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt,RME_CAP_TYPE_CPT,
 7254              		.loc 1 3539 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 191


 7255 0018 14301BE5 		ldr	r3, [fp, #-20]
 7256 001c 803003E2 		and	r3, r3, #128
 7257 0020 000053E3 		cmp	r3, #0
 7258 0024 1C00001A 		bne	.L462
 7259              		.loc 1 3539 5 is_stmt 0 discriminator 1
 7260 0028 10301BE5 		ldr	r3, [fp, #-16]
 7261 002c 142093E5 		ldr	r2, [r3, #20]
 7262 0030 14301BE5 		ldr	r3, [fp, #-20]
 7263 0034 030052E1 		cmp	r2, r3
 7264 0038 0100008A 		bhi	.L463
 7265              		.loc 1 3539 5 discriminator 3
 7266 003c 0230E0E3 		mvn	r3, #2
 7267              		.loc 1 3539 5
 7268 0040 760000EA 		b	.L464
 7269              	.L463:
 7270              		.loc 1 3539 5 discriminator 4
 7271 0044 14301BE5 		ldr	r3, [fp, #-20]
 7272 0048 8322A0E1 		lsl	r2, r3, #5
 7273 004c 10301BE5 		ldr	r3, [fp, #-16]
 7274 0050 0C3093E5 		ldr	r3, [r3, #12]
 7275 0054 033082E0 		add	r3, r2, r3
 7276 0058 08300BE5 		str	r3, [fp, #-8]
 7277 005c 08301BE5 		ldr	r3, [fp, #-8]
 7278 0060 0300A0E1 		mov	r0, r3
 7279 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7280 0068 0C000BE5 		str	r0, [fp, #-12]
 7281              		.loc 1 3539 5 discriminator 1
 7282 006c 0C301BE5 		ldr	r3, [fp, #-12]
 7283 0070 FF3803E2 		and	r3, r3, #16711680
 7284 0074 020853E3 		cmp	r3, #131072
 7285 0078 0100001A 		bne	.L465
 7286              		.loc 1 3539 5 discriminator 5
 7287 007c 0830E0E3 		mvn	r3, #8
 7288              		.loc 1 3539 5
 7289 0080 660000EA 		b	.L464
 7290              	.L465:
 7291              		.loc 1 3539 5 discriminator 6
 7292 0084 0C301BE5 		ldr	r3, [fp, #-12]
 7293 0088 233CA0E1 		lsr	r3, r3, #24
 7294 008c 030053E3 		cmp	r3, #3
 7295 0090 3F00000A 		beq	.L466
 7296              		.loc 1 3539 5 discriminator 7
 7297 0094 0130E0E3 		mvn	r3, #1
 7298              		.loc 1 3539 5
 7299 0098 600000EA 		b	.L464
 7300              	.L462:
 7301              		.loc 1 3539 5 discriminator 2
 7302 009c 14301BE5 		ldr	r3, [fp, #-20]
 7303 00a0 2324A0E1 		lsr	r2, r3, #8
 7304 00a4 10301BE5 		ldr	r3, [fp, #-16]
 7305 00a8 143093E5 		ldr	r3, [r3, #20]
 7306 00ac 030052E1 		cmp	r2, r3
 7307 00b0 0100003A 		bcc	.L467
 7308              		.loc 1 3539 5 discriminator 8
 7309 00b4 0230E0E3 		mvn	r3, #2
 7310              		.loc 1 3539 5
 7311 00b8 580000EA 		b	.L464
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 192


 7312              	.L467:
 7313              		.loc 1 3539 5 discriminator 9
 7314 00bc 14301BE5 		ldr	r3, [fp, #-20]
 7315 00c0 2334A0E1 		lsr	r3, r3, #8
 7316 00c4 8322A0E1 		lsl	r2, r3, #5
 7317 00c8 10301BE5 		ldr	r3, [fp, #-16]
 7318 00cc 0C3093E5 		ldr	r3, [r3, #12]
 7319 00d0 033082E0 		add	r3, r2, r3
 7320 00d4 08300BE5 		str	r3, [fp, #-8]
 7321 00d8 08301BE5 		ldr	r3, [fp, #-8]
 7322 00dc 0300A0E1 		mov	r0, r3
 7323 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7324 00e4 0C000BE5 		str	r0, [fp, #-12]
 7325              		.loc 1 3539 5 discriminator 1
 7326 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 7327 00ec FF3803E2 		and	r3, r3, #16711680
 7328 00f0 020853E3 		cmp	r3, #131072
 7329 00f4 0100001A 		bne	.L468
 7330              		.loc 1 3539 5 discriminator 10
 7331 00f8 0830E0E3 		mvn	r3, #8
 7332              		.loc 1 3539 5
 7333 00fc 470000EA 		b	.L464
 7334              	.L468:
 7335              		.loc 1 3539 5 discriminator 11
 7336 0100 0C301BE5 		ldr	r3, [fp, #-12]
 7337 0104 233CA0E1 		lsr	r3, r3, #24
 7338 0108 030053E3 		cmp	r3, #3
 7339 010c 0100000A 		beq	.L469
 7340              		.loc 1 3539 5 discriminator 12
 7341 0110 0130E0E3 		mvn	r3, #1
 7342              		.loc 1 3539 5
 7343 0114 410000EA 		b	.L464
 7344              	.L469:
 7345              		.loc 1 3539 5 discriminator 13
 7346 0118 14301BE5 		ldr	r3, [fp, #-20]
 7347 011c 7F2003E2 		and	r2, r3, #127
 7348 0120 08301BE5 		ldr	r3, [fp, #-8]
 7349 0124 143093E5 		ldr	r3, [r3, #20]
 7350 0128 030052E1 		cmp	r2, r3
 7351 012c 0100003A 		bcc	.L470
 7352              		.loc 1 3539 5 discriminator 14
 7353 0130 0230E0E3 		mvn	r3, #2
 7354              		.loc 1 3539 5
 7355 0134 390000EA 		b	.L464
 7356              	.L470:
 7357              		.loc 1 3539 5 discriminator 15
 7358 0138 14301BE5 		ldr	r3, [fp, #-20]
 7359 013c 7F3003E2 		and	r3, r3, #127
 7360 0140 8322A0E1 		lsl	r2, r3, #5
 7361 0144 08301BE5 		ldr	r3, [fp, #-8]
 7362 0148 0C3093E5 		ldr	r3, [r3, #12]
 7363 014c 033082E0 		add	r3, r2, r3
 7364 0150 08300BE5 		str	r3, [fp, #-8]
 7365 0154 08301BE5 		ldr	r3, [fp, #-8]
 7366 0158 0300A0E1 		mov	r0, r3
 7367 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7368 0160 0C000BE5 		str	r0, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 193


 7369              		.loc 1 3539 5 discriminator 1
 7370 0164 0C301BE5 		ldr	r3, [fp, #-12]
 7371 0168 FF3803E2 		and	r3, r3, #16711680
 7372 016c 020853E3 		cmp	r3, #131072
 7373 0170 0100001A 		bne	.L471
 7374              		.loc 1 3539 5 discriminator 16
 7375 0174 0830E0E3 		mvn	r3, #8
 7376              		.loc 1 3539 5
 7377 0178 280000EA 		b	.L464
 7378              	.L471:
 7379              		.loc 1 3539 5 discriminator 17
 7380 017c 0C301BE5 		ldr	r3, [fp, #-12]
 7381 0180 233CA0E1 		lsr	r3, r3, #24
 7382 0184 030053E3 		cmp	r3, #3
 7383 0188 0100000A 		beq	.L466
 7384              		.loc 1 3539 5 discriminator 18
 7385 018c 0130E0E3 		mvn	r3, #1
 7386              		.loc 1 3539 5
 7387 0190 220000EA 		b	.L464
 7388              	.L466:
3540:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Rem,Type_Stat);
3541:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
3542:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Rem,RME_PGT_FLAG_REM);
 7389              		.loc 1 3542 5 is_stmt 1
 7390 0194 08301BE5 		ldr	r3, [fp, #-8]
 7391 0198 083093E5 		ldr	r3, [r3, #8]
 7392 019c 043003E2 		and	r3, r3, #4
 7393 01a0 000053E3 		cmp	r3, #0
 7394 01a4 0100001A 		bne	.L472
 7395              		.loc 1 3542 5 is_stmt 0 discriminator 1
 7396 01a8 0630E0E3 		mvn	r3, #6
 7397              		.loc 1 3542 5
 7398 01ac 1B0000EA 		b	.L464
 7399              	.L472:
3543:../../Source/Kernel/rme_kernel.c ****     /* Check the operation range - This is page table specific */
3544:../../Source/Kernel/rme_kernel.c ****     if((Pos>RME_PGT_FLAG_HIGH(Pgt_Rem->Head.Flag))||
 7400              		.loc 1 3544 13 is_stmt 1
 7401 01b0 08301BE5 		ldr	r3, [fp, #-8]
 7402 01b4 083093E5 		ldr	r3, [r3, #8]
 7403 01b8 233AA0E1 		lsr	r3, r3, #20
 7404              		.loc 1 3544 7
 7405 01bc 18201BE5 		ldr	r2, [fp, #-24]
 7406 01c0 030052E1 		cmp	r2, r3
 7407 01c4 0600008A 		bhi	.L473
3545:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Rem->Head.Flag)))
 7408              		.loc 1 3545 13
 7409 01c8 08301BE5 		ldr	r3, [fp, #-8]
 7410 01cc 083093E5 		ldr	r3, [r3, #8]
 7411 01d0 2334A0E1 		lsr	r3, r3, #8
 7412 01d4 5330EBE7 		ubfx	r3, r3, #0, #12
3544:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Rem->Head.Flag)))
 7413              		.loc 1 3544 51 discriminator 1
 7414 01d8 18201BE5 		ldr	r2, [fp, #-24]
 7415 01dc 030052E1 		cmp	r2, r3
 7416 01e0 0100002A 		bcs	.L474
 7417              	.L473:
3546:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 194


3547:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3548:../../Source/Kernel/rme_kernel.c **** 
3549:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 7418              		.loc 1 3549 16
 7419 01e4 0630E0E3 		mvn	r3, #6
 7420 01e8 0C0000EA 		b	.L464
 7421              	.L474:
3550:../../Source/Kernel/rme_kernel.c ****     }
3551:../../Source/Kernel/rme_kernel.c ****     else
3552:../../Source/Kernel/rme_kernel.c ****     {
3553:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3554:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3555:../../Source/Kernel/rme_kernel.c ****     }
3556:../../Source/Kernel/rme_kernel.c **** 
3557:../../Source/Kernel/rme_kernel.c ****     /* See if the unmapping range is allowed */
3558:../../Source/Kernel/rme_kernel.c ****     if((Pos>>RME_PGT_NMORD(Pgt_Rem->Order))!=0U)
 7422              		.loc 1 3558 14
 7423 01ec 08301BE5 		ldr	r3, [fp, #-8]
 7424 01f0 143093E5 		ldr	r3, [r3, #20]
 7425 01f4 7330FFE6 		uxth	r3, r3
 7426              		.loc 1 3558 12
 7427 01f8 18201BE5 		ldr	r2, [fp, #-24]
 7428 01fc 3233A0E1 		lsr	r3, r2, r3
 7429              		.loc 1 3558 7
 7430 0200 000053E3 		cmp	r3, #0
 7431 0204 0100000A 		beq	.L475
3559:../../Source/Kernel/rme_kernel.c ****     {
3560:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3561:../../Source/Kernel/rme_kernel.c **** 
3562:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7432              		.loc 1 3562 16
 7433 0208 6430E0E3 		mvn	r3, #100
 7434 020c 030000EA 		b	.L464
 7435              	.L475:
3563:../../Source/Kernel/rme_kernel.c ****     }
3564:../../Source/Kernel/rme_kernel.c ****     else
3565:../../Source/Kernel/rme_kernel.c ****     {
3566:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3567:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3568:../../Source/Kernel/rme_kernel.c ****     }
3569:../../Source/Kernel/rme_kernel.c **** 
3570:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
3571:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict */
3572:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Page_Unmap(Pgt_Rem,Pos)<0)
 7436              		.loc 1 3572 8
 7437 0210 18101BE5 		ldr	r1, [fp, #-24]
 7438 0214 08001BE5 		ldr	r0, [fp, #-8]
 7439 0218 FEFFFFEB 		bl	__RME_Pgt_Page_Unmap
3573:../../Source/Kernel/rme_kernel.c ****     {
3574:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3575:../../Source/Kernel/rme_kernel.c **** 
3576:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
3577:../../Source/Kernel/rme_kernel.c ****     }
3578:../../Source/Kernel/rme_kernel.c ****     else
3579:../../Source/Kernel/rme_kernel.c ****     {
3580:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3581:../../Source/Kernel/rme_kernel.c ****         /* No action required */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 195


3582:../../Source/Kernel/rme_kernel.c ****     }
3583:../../Source/Kernel/rme_kernel.c **** 
3584:../../Source/Kernel/rme_kernel.c ****     return 0;
 7440              		.loc 1 3584 12
 7441 021c 0030A0E3 		mov	r3, #0
 7442              	.L464:
3585:../../Source/Kernel/rme_kernel.c **** }
 7443              		.loc 1 3585 1
 7444 0220 0300A0E1 		mov	r0, r3
 7445 0224 04D04BE2 		sub	sp, fp, #4
 7446              		.cfi_def_cfa 13, 8
 7447              		@ sp needed
 7448 0228 0088BDE8 		pop	{fp, pc}
 7449              		.cfi_endproc
 7450              	.LFE35:
 7452              		.section	.text._RME_Pgt_Con,"ax",%progbits
 7453              		.align	2
 7454              		.syntax unified
 7455              		.arm
 7457              	_RME_Pgt_Con:
 7458              	.LFB36:
3586:../../Source/Kernel/rme_kernel.c **** #endif
3587:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Rem *************************************************/
3588:../../Source/Kernel/rme_kernel.c **** 
3589:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Con ******************************************************
3590:../../Source/Kernel/rme_kernel.c **** Description : Map a child page table into the parent page table, to construct
3591:../../Source/Kernel/rme_kernel.c ****               an address space tree.
3592:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3593:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Parent - The capability to the parent page 
3594:../../Source/Kernel/rme_kernel.c ****                                          table.
3595:../../Source/Kernel/rme_kernel.c ****                                          2-Level.
3596:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos - The parent page table position to map the child
3597:../../Source/Kernel/rme_kernel.c ****                               page table to.
3598:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Child - The capability to the child page table.
3599:../../Source/Kernel/rme_kernel.c ****                                         2-Level.
3600:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag_Child - Mapping flags.
3601:../../Source/Kernel/rme_kernel.c **** Output      : None.
3602:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3603:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3604:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3605:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Con(struct RME_Cap_Cpt* Cpt,
3606:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Parent,
3607:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Pos,
3608:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Child,
3609:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Flag_Child)
3610:../../Source/Kernel/rme_kernel.c **** {
 7459              		.loc 1 3610 1
 7460              		.cfi_startproc
 7461              		@ args = 4, pretend = 0, frame = 40
 7462              		@ frame_needed = 1, uses_anonymous_args = 0
 7463 0000 00482DE9 		push	{fp, lr}
 7464              		.cfi_def_cfa_offset 8
 7465              		.cfi_offset 11, -8
 7466              		.cfi_offset 14, -4
 7467 0004 04B08DE2 		add	fp, sp, #4
 7468              		.cfi_def_cfa 11, 4
 7469 0008 28D04DE2 		sub	sp, sp, #40
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 196


 7470 000c 20000BE5 		str	r0, [fp, #-32]
 7471 0010 24100BE5 		str	r1, [fp, #-36]
 7472 0014 28200BE5 		str	r2, [fp, #-40]
 7473 0018 2C300BE5 		str	r3, [fp, #-44]
3611:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Parent;
3612:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Child;
3613:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Pgt* Pgt_Root;
3614:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Order_Child;
3615:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Szord_Parent;
3616:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
3617:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Begin_Parent;
3618:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t End_Parent;
3619:../../Source/Kernel/rme_kernel.c **** #endif
3620:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3621:../../Source/Kernel/rme_kernel.c ****     
3622:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
3623:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Parent,RME_CAP_TYPE_PGT,
 7474              		.loc 1 3623 5
 7475 001c 24301BE5 		ldr	r3, [fp, #-36]
 7476 0020 803003E2 		and	r3, r3, #128
 7477 0024 000053E3 		cmp	r3, #0
 7478 0028 1C00001A 		bne	.L477
 7479              		.loc 1 3623 5 is_stmt 0 discriminator 1
 7480 002c 20301BE5 		ldr	r3, [fp, #-32]
 7481 0030 142093E5 		ldr	r2, [r3, #20]
 7482 0034 24301BE5 		ldr	r3, [fp, #-36]
 7483 0038 030052E1 		cmp	r2, r3
 7484 003c 0100008A 		bhi	.L478
 7485              		.loc 1 3623 5 discriminator 3
 7486 0040 0230E0E3 		mvn	r3, #2
 7487              		.loc 1 3623 5
 7488 0044 140100EA 		b	.L479
 7489              	.L478:
 7490              		.loc 1 3623 5 discriminator 4
 7491 0048 24301BE5 		ldr	r3, [fp, #-36]
 7492 004c 8322A0E1 		lsl	r2, r3, #5
 7493 0050 20301BE5 		ldr	r3, [fp, #-32]
 7494 0054 0C3093E5 		ldr	r3, [r3, #12]
 7495 0058 033082E0 		add	r3, r2, r3
 7496 005c 08300BE5 		str	r3, [fp, #-8]
 7497 0060 08301BE5 		ldr	r3, [fp, #-8]
 7498 0064 0300A0E1 		mov	r0, r3
 7499 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7500 006c 10000BE5 		str	r0, [fp, #-16]
 7501              		.loc 1 3623 5 discriminator 1
 7502 0070 10301BE5 		ldr	r3, [fp, #-16]
 7503 0074 FF3803E2 		and	r3, r3, #16711680
 7504 0078 020853E3 		cmp	r3, #131072
 7505 007c 0100001A 		bne	.L480
 7506              		.loc 1 3623 5 discriminator 5
 7507 0080 0830E0E3 		mvn	r3, #8
 7508              		.loc 1 3623 5
 7509 0084 040100EA 		b	.L479
 7510              	.L480:
 7511              		.loc 1 3623 5 discriminator 6
 7512 0088 10301BE5 		ldr	r3, [fp, #-16]
 7513 008c 233CA0E1 		lsr	r3, r3, #24
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 197


 7514 0090 040053E3 		cmp	r3, #4
 7515 0094 3F00000A 		beq	.L481
 7516              		.loc 1 3623 5 discriminator 7
 7517 0098 0130E0E3 		mvn	r3, #1
 7518              		.loc 1 3623 5
 7519 009c FE0000EA 		b	.L479
 7520              	.L477:
 7521              		.loc 1 3623 5 discriminator 2
 7522 00a0 24301BE5 		ldr	r3, [fp, #-36]
 7523 00a4 2324A0E1 		lsr	r2, r3, #8
 7524 00a8 20301BE5 		ldr	r3, [fp, #-32]
 7525 00ac 143093E5 		ldr	r3, [r3, #20]
 7526 00b0 030052E1 		cmp	r2, r3
 7527 00b4 0100003A 		bcc	.L482
 7528              		.loc 1 3623 5 discriminator 8
 7529 00b8 0230E0E3 		mvn	r3, #2
 7530              		.loc 1 3623 5
 7531 00bc F60000EA 		b	.L479
 7532              	.L482:
 7533              		.loc 1 3623 5 discriminator 9
 7534 00c0 24301BE5 		ldr	r3, [fp, #-36]
 7535 00c4 2334A0E1 		lsr	r3, r3, #8
 7536 00c8 8322A0E1 		lsl	r2, r3, #5
 7537 00cc 20301BE5 		ldr	r3, [fp, #-32]
 7538 00d0 0C3093E5 		ldr	r3, [r3, #12]
 7539 00d4 033082E0 		add	r3, r2, r3
 7540 00d8 08300BE5 		str	r3, [fp, #-8]
 7541 00dc 08301BE5 		ldr	r3, [fp, #-8]
 7542 00e0 0300A0E1 		mov	r0, r3
 7543 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7544 00e8 10000BE5 		str	r0, [fp, #-16]
 7545              		.loc 1 3623 5 discriminator 1
 7546 00ec 10301BE5 		ldr	r3, [fp, #-16]
 7547 00f0 FF3803E2 		and	r3, r3, #16711680
 7548 00f4 020853E3 		cmp	r3, #131072
 7549 00f8 0100001A 		bne	.L483
 7550              		.loc 1 3623 5 discriminator 10
 7551 00fc 0830E0E3 		mvn	r3, #8
 7552              		.loc 1 3623 5
 7553 0100 E50000EA 		b	.L479
 7554              	.L483:
 7555              		.loc 1 3623 5 discriminator 11
 7556 0104 10301BE5 		ldr	r3, [fp, #-16]
 7557 0108 233CA0E1 		lsr	r3, r3, #24
 7558 010c 030053E3 		cmp	r3, #3
 7559 0110 0100000A 		beq	.L484
 7560              		.loc 1 3623 5 discriminator 12
 7561 0114 0130E0E3 		mvn	r3, #1
 7562              		.loc 1 3623 5
 7563 0118 DF0000EA 		b	.L479
 7564              	.L484:
 7565              		.loc 1 3623 5 discriminator 13
 7566 011c 24301BE5 		ldr	r3, [fp, #-36]
 7567 0120 7F2003E2 		and	r2, r3, #127
 7568 0124 08301BE5 		ldr	r3, [fp, #-8]
 7569 0128 143093E5 		ldr	r3, [r3, #20]
 7570 012c 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 198


 7571 0130 0100003A 		bcc	.L485
 7572              		.loc 1 3623 5 discriminator 14
 7573 0134 0230E0E3 		mvn	r3, #2
 7574              		.loc 1 3623 5
 7575 0138 D70000EA 		b	.L479
 7576              	.L485:
 7577              		.loc 1 3623 5 discriminator 15
 7578 013c 24301BE5 		ldr	r3, [fp, #-36]
 7579 0140 7F3003E2 		and	r3, r3, #127
 7580 0144 8322A0E1 		lsl	r2, r3, #5
 7581 0148 08301BE5 		ldr	r3, [fp, #-8]
 7582 014c 0C3093E5 		ldr	r3, [r3, #12]
 7583 0150 033082E0 		add	r3, r2, r3
 7584 0154 08300BE5 		str	r3, [fp, #-8]
 7585 0158 08301BE5 		ldr	r3, [fp, #-8]
 7586 015c 0300A0E1 		mov	r0, r3
 7587 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7588 0164 10000BE5 		str	r0, [fp, #-16]
 7589              		.loc 1 3623 5 discriminator 1
 7590 0168 10301BE5 		ldr	r3, [fp, #-16]
 7591 016c FF3803E2 		and	r3, r3, #16711680
 7592 0170 020853E3 		cmp	r3, #131072
 7593 0174 0100001A 		bne	.L486
 7594              		.loc 1 3623 5 discriminator 16
 7595 0178 0830E0E3 		mvn	r3, #8
 7596              		.loc 1 3623 5
 7597 017c C60000EA 		b	.L479
 7598              	.L486:
 7599              		.loc 1 3623 5 discriminator 17
 7600 0180 10301BE5 		ldr	r3, [fp, #-16]
 7601 0184 233CA0E1 		lsr	r3, r3, #24
 7602 0188 040053E3 		cmp	r3, #4
 7603 018c 0100000A 		beq	.L481
 7604              		.loc 1 3623 5 discriminator 18
 7605 0190 0130E0E3 		mvn	r3, #1
 7606              		.loc 1 3623 5
 7607 0194 C00000EA 		b	.L479
 7608              	.L481:
3624:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Parent,Type_Stat);
3625:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Child,RME_CAP_TYPE_PGT,
 7609              		.loc 1 3625 5 is_stmt 1
 7610 0198 2C301BE5 		ldr	r3, [fp, #-44]
 7611 019c 803003E2 		and	r3, r3, #128
 7612 01a0 000053E3 		cmp	r3, #0
 7613 01a4 1C00001A 		bne	.L487
 7614              		.loc 1 3625 5 is_stmt 0 discriminator 1
 7615 01a8 20301BE5 		ldr	r3, [fp, #-32]
 7616 01ac 142093E5 		ldr	r2, [r3, #20]
 7617 01b0 2C301BE5 		ldr	r3, [fp, #-44]
 7618 01b4 030052E1 		cmp	r2, r3
 7619 01b8 0100008A 		bhi	.L488
 7620              		.loc 1 3625 5 discriminator 3
 7621 01bc 0230E0E3 		mvn	r3, #2
 7622              		.loc 1 3625 5
 7623 01c0 B50000EA 		b	.L479
 7624              	.L488:
 7625              		.loc 1 3625 5 discriminator 4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 199


 7626 01c4 2C301BE5 		ldr	r3, [fp, #-44]
 7627 01c8 8322A0E1 		lsl	r2, r3, #5
 7628 01cc 20301BE5 		ldr	r3, [fp, #-32]
 7629 01d0 0C3093E5 		ldr	r3, [r3, #12]
 7630 01d4 033082E0 		add	r3, r2, r3
 7631 01d8 0C300BE5 		str	r3, [fp, #-12]
 7632 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 7633 01e0 0300A0E1 		mov	r0, r3
 7634 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7635 01e8 10000BE5 		str	r0, [fp, #-16]
 7636              		.loc 1 3625 5 discriminator 1
 7637 01ec 10301BE5 		ldr	r3, [fp, #-16]
 7638 01f0 FF3803E2 		and	r3, r3, #16711680
 7639 01f4 020853E3 		cmp	r3, #131072
 7640 01f8 0100001A 		bne	.L489
 7641              		.loc 1 3625 5 discriminator 5
 7642 01fc 0830E0E3 		mvn	r3, #8
 7643              		.loc 1 3625 5
 7644 0200 A50000EA 		b	.L479
 7645              	.L489:
 7646              		.loc 1 3625 5 discriminator 6
 7647 0204 10301BE5 		ldr	r3, [fp, #-16]
 7648 0208 233CA0E1 		lsr	r3, r3, #24
 7649 020c 040053E3 		cmp	r3, #4
 7650 0210 3F00000A 		beq	.L490
 7651              		.loc 1 3625 5 discriminator 7
 7652 0214 0130E0E3 		mvn	r3, #1
 7653              		.loc 1 3625 5
 7654 0218 9F0000EA 		b	.L479
 7655              	.L487:
 7656              		.loc 1 3625 5 discriminator 2
 7657 021c 2C301BE5 		ldr	r3, [fp, #-44]
 7658 0220 2324A0E1 		lsr	r2, r3, #8
 7659 0224 20301BE5 		ldr	r3, [fp, #-32]
 7660 0228 143093E5 		ldr	r3, [r3, #20]
 7661 022c 030052E1 		cmp	r2, r3
 7662 0230 0100003A 		bcc	.L491
 7663              		.loc 1 3625 5 discriminator 8
 7664 0234 0230E0E3 		mvn	r3, #2
 7665              		.loc 1 3625 5
 7666 0238 970000EA 		b	.L479
 7667              	.L491:
 7668              		.loc 1 3625 5 discriminator 9
 7669 023c 2C301BE5 		ldr	r3, [fp, #-44]
 7670 0240 2334A0E1 		lsr	r3, r3, #8
 7671 0244 8322A0E1 		lsl	r2, r3, #5
 7672 0248 20301BE5 		ldr	r3, [fp, #-32]
 7673 024c 0C3093E5 		ldr	r3, [r3, #12]
 7674 0250 033082E0 		add	r3, r2, r3
 7675 0254 0C300BE5 		str	r3, [fp, #-12]
 7676 0258 0C301BE5 		ldr	r3, [fp, #-12]
 7677 025c 0300A0E1 		mov	r0, r3
 7678 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7679 0264 10000BE5 		str	r0, [fp, #-16]
 7680              		.loc 1 3625 5 discriminator 1
 7681 0268 10301BE5 		ldr	r3, [fp, #-16]
 7682 026c FF3803E2 		and	r3, r3, #16711680
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 200


 7683 0270 020853E3 		cmp	r3, #131072
 7684 0274 0100001A 		bne	.L492
 7685              		.loc 1 3625 5 discriminator 10
 7686 0278 0830E0E3 		mvn	r3, #8
 7687              		.loc 1 3625 5
 7688 027c 860000EA 		b	.L479
 7689              	.L492:
 7690              		.loc 1 3625 5 discriminator 11
 7691 0280 10301BE5 		ldr	r3, [fp, #-16]
 7692 0284 233CA0E1 		lsr	r3, r3, #24
 7693 0288 030053E3 		cmp	r3, #3
 7694 028c 0100000A 		beq	.L493
 7695              		.loc 1 3625 5 discriminator 12
 7696 0290 0130E0E3 		mvn	r3, #1
 7697              		.loc 1 3625 5
 7698 0294 800000EA 		b	.L479
 7699              	.L493:
 7700              		.loc 1 3625 5 discriminator 13
 7701 0298 2C301BE5 		ldr	r3, [fp, #-44]
 7702 029c 7F2003E2 		and	r2, r3, #127
 7703 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 7704 02a4 143093E5 		ldr	r3, [r3, #20]
 7705 02a8 030052E1 		cmp	r2, r3
 7706 02ac 0100003A 		bcc	.L494
 7707              		.loc 1 3625 5 discriminator 14
 7708 02b0 0230E0E3 		mvn	r3, #2
 7709              		.loc 1 3625 5
 7710 02b4 780000EA 		b	.L479
 7711              	.L494:
 7712              		.loc 1 3625 5 discriminator 15
 7713 02b8 2C301BE5 		ldr	r3, [fp, #-44]
 7714 02bc 7F3003E2 		and	r3, r3, #127
 7715 02c0 8322A0E1 		lsl	r2, r3, #5
 7716 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 7717 02c8 0C3093E5 		ldr	r3, [r3, #12]
 7718 02cc 033082E0 		add	r3, r2, r3
 7719 02d0 0C300BE5 		str	r3, [fp, #-12]
 7720 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 7721 02d8 0300A0E1 		mov	r0, r3
 7722 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7723 02e0 10000BE5 		str	r0, [fp, #-16]
 7724              		.loc 1 3625 5 discriminator 1
 7725 02e4 10301BE5 		ldr	r3, [fp, #-16]
 7726 02e8 FF3803E2 		and	r3, r3, #16711680
 7727 02ec 020853E3 		cmp	r3, #131072
 7728 02f0 0100001A 		bne	.L495
 7729              		.loc 1 3625 5 discriminator 16
 7730 02f4 0830E0E3 		mvn	r3, #8
 7731              		.loc 1 3625 5
 7732 02f8 670000EA 		b	.L479
 7733              	.L495:
 7734              		.loc 1 3625 5 discriminator 17
 7735 02fc 10301BE5 		ldr	r3, [fp, #-16]
 7736 0300 233CA0E1 		lsr	r3, r3, #24
 7737 0304 040053E3 		cmp	r3, #4
 7738 0308 0100000A 		beq	.L490
 7739              		.loc 1 3625 5 discriminator 18
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 201


 7740 030c 0130E0E3 		mvn	r3, #1
 7741              		.loc 1 3625 5
 7742 0310 610000EA 		b	.L479
 7743              	.L490:
3626:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Child,Type_Stat);
3627:../../Source/Kernel/rme_kernel.c ****     /* Check if both page table caps are not frozen and allows such operations */
3628:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Parent, RME_PGT_FLAG_CON_PARENT);
 7744              		.loc 1 3628 5 is_stmt 1
 7745 0314 08301BE5 		ldr	r3, [fp, #-8]
 7746 0318 083093E5 		ldr	r3, [r3, #8]
 7747 031c 103003E2 		and	r3, r3, #16
 7748 0320 000053E3 		cmp	r3, #0
 7749 0324 0100001A 		bne	.L496
 7750              		.loc 1 3628 5 is_stmt 0 discriminator 1
 7751 0328 0630E0E3 		mvn	r3, #6
 7752              		.loc 1 3628 5
 7753 032c 5A0000EA 		b	.L479
 7754              	.L496:
3629:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Child, RME_PGT_FLAG_CHILD);
 7755              		.loc 1 3629 5 is_stmt 1
 7756 0330 0C301BE5 		ldr	r3, [fp, #-12]
 7757 0334 083093E5 		ldr	r3, [r3, #8]
 7758 0338 083003E2 		and	r3, r3, #8
 7759 033c 000053E3 		cmp	r3, #0
 7760 0340 0100001A 		bne	.L497
 7761              		.loc 1 3629 5 is_stmt 0 discriminator 1
 7762 0344 0630E0E3 		mvn	r3, #6
 7763              		.loc 1 3629 5
 7764 0348 530000EA 		b	.L479
 7765              	.L497:
3630:../../Source/Kernel/rme_kernel.c ****     /* Check the operation range - This is page table specific */
3631:../../Source/Kernel/rme_kernel.c ****     if((Pos>RME_PGT_FLAG_HIGH(Pgt_Parent->Head.Flag))||
 7766              		.loc 1 3631 13 is_stmt 1
 7767 034c 08301BE5 		ldr	r3, [fp, #-8]
 7768 0350 083093E5 		ldr	r3, [r3, #8]
 7769 0354 233AA0E1 		lsr	r3, r3, #20
 7770              		.loc 1 3631 7
 7771 0358 28201BE5 		ldr	r2, [fp, #-40]
 7772 035c 030052E1 		cmp	r2, r3
 7773 0360 0600008A 		bhi	.L498
3632:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Parent->Head.Flag)))
 7774              		.loc 1 3632 13
 7775 0364 08301BE5 		ldr	r3, [fp, #-8]
 7776 0368 083093E5 		ldr	r3, [r3, #8]
 7777 036c 2334A0E1 		lsr	r3, r3, #8
 7778 0370 5330EBE7 		ubfx	r3, r3, #0, #12
3631:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Parent->Head.Flag)))
 7779              		.loc 1 3631 54 discriminator 1
 7780 0374 28201BE5 		ldr	r2, [fp, #-40]
 7781 0378 030052E1 		cmp	r2, r3
 7782 037c 0100002A 		bcs	.L499
 7783              	.L498:
3633:../../Source/Kernel/rme_kernel.c ****     {
3634:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3635:../../Source/Kernel/rme_kernel.c **** 
3636:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 7784              		.loc 1 3636 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 202


 7785 0380 0630E0E3 		mvn	r3, #6
 7786 0384 440000EA 		b	.L479
 7787              	.L499:
3637:../../Source/Kernel/rme_kernel.c ****     }
3638:../../Source/Kernel/rme_kernel.c ****     else
3639:../../Source/Kernel/rme_kernel.c ****     {
3640:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3641:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3642:../../Source/Kernel/rme_kernel.c ****     }
3643:../../Source/Kernel/rme_kernel.c ****     
3644:../../Source/Kernel/rme_kernel.c ****     /* See if the mapping range is allowed */
3645:../../Source/Kernel/rme_kernel.c ****     if((Pos>>RME_PGT_NMORD(Pgt_Parent->Order))!=0U)
 7788              		.loc 1 3645 14
 7789 0388 08301BE5 		ldr	r3, [fp, #-8]
 7790 038c 143093E5 		ldr	r3, [r3, #20]
 7791 0390 7330FFE6 		uxth	r3, r3
 7792              		.loc 1 3645 12
 7793 0394 28201BE5 		ldr	r2, [fp, #-40]
 7794 0398 3233A0E1 		lsr	r3, r2, r3
 7795              		.loc 1 3645 7
 7796 039c 000053E3 		cmp	r3, #0
 7797 03a0 0100000A 		beq	.L500
3646:../../Source/Kernel/rme_kernel.c ****     {
3647:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3648:../../Source/Kernel/rme_kernel.c **** 
3649:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7798              		.loc 1 3649 16
 7799 03a4 6430E0E3 		mvn	r3, #100
 7800 03a8 3B0000EA 		b	.L479
 7801              	.L500:
3650:../../Source/Kernel/rme_kernel.c ****     }
3651:../../Source/Kernel/rme_kernel.c ****     else
3652:../../Source/Kernel/rme_kernel.c ****     {
3653:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3654:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3655:../../Source/Kernel/rme_kernel.c ****     }
3656:../../Source/Kernel/rme_kernel.c ****     
3657:../../Source/Kernel/rme_kernel.c ****     /* See if the child table falls within one slot of the parent table */
3658:../../Source/Kernel/rme_kernel.c ****     Order_Child=RME_PGT_NMORD(Pgt_Child->Order)+RME_PGT_SZORD(Pgt_Child->Order);
 7802              		.loc 1 3658 17
 7803 03ac 0C301BE5 		ldr	r3, [fp, #-12]
 7804 03b0 143093E5 		ldr	r3, [r3, #20]
 7805 03b4 7320FFE6 		uxth	r2, r3
 7806              		.loc 1 3658 49
 7807 03b8 0C301BE5 		ldr	r3, [fp, #-12]
 7808 03bc 143093E5 		ldr	r3, [r3, #20]
 7809 03c0 2338A0E1 		lsr	r3, r3, #16
 7810              		.loc 1 3658 16
 7811 03c4 033082E0 		add	r3, r2, r3
 7812 03c8 14300BE5 		str	r3, [fp, #-20]
3659:../../Source/Kernel/rme_kernel.c ****     Szord_Parent=RME_PGT_SZORD(Pgt_Parent->Order);
 7813              		.loc 1 3659 18
 7814 03cc 08301BE5 		ldr	r3, [fp, #-8]
 7815 03d0 143093E5 		ldr	r3, [r3, #20]
 7816              		.loc 1 3659 17
 7817 03d4 2338A0E1 		lsr	r3, r3, #16
 7818 03d8 18300BE5 		str	r3, [fp, #-24]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 203


3660:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent<Order_Child)
 7819              		.loc 1 3660 7
 7820 03dc 18201BE5 		ldr	r2, [fp, #-24]
 7821 03e0 14301BE5 		ldr	r3, [fp, #-20]
 7822 03e4 030052E1 		cmp	r2, r3
 7823 03e8 0100002A 		bcs	.L501
3661:../../Source/Kernel/rme_kernel.c ****     {
3662:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3663:../../Source/Kernel/rme_kernel.c ****         
3664:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7824              		.loc 1 3664 16
 7825 03ec 6430E0E3 		mvn	r3, #100
 7826 03f0 290000EA 		b	.L479
 7827              	.L501:
3665:../../Source/Kernel/rme_kernel.c ****     }
3666:../../Source/Kernel/rme_kernel.c ****     else
3667:../../Source/Kernel/rme_kernel.c ****     {
3668:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3669:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3670:../../Source/Kernel/rme_kernel.c ****     }
3671:../../Source/Kernel/rme_kernel.c **** 
3672:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_PHYS_ENABLE!=0U)
3673:../../Source/Kernel/rme_kernel.c ****     /* Check if the child falls into the correct slot */
3674:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent<RME_WORD_BIT)
3675:../../Source/Kernel/rme_kernel.c ****     {
3676:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3677:../../Source/Kernel/rme_kernel.c ****         
3678:../../Source/Kernel/rme_kernel.c ****         /* Check if the virtual address mapping is correct - note that the child
3679:../../Source/Kernel/rme_kernel.c ****          * could also be a top-level page table. Whether constructing a top into 
3680:../../Source/Kernel/rme_kernel.c ****          * another top is allowed is HAL-defined. */
3681:../../Source/Kernel/rme_kernel.c ****         Begin_Parent=RME_PGT_BASE(Pgt_Parent->Base)+(Pos<<Szord_Parent);
3682:../../Source/Kernel/rme_kernel.c ****         if(RME_PGT_BASE(Pgt_Child->Base)<Begin_Parent)
3683:../../Source/Kernel/rme_kernel.c ****         {
3684:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3685:../../Source/Kernel/rme_kernel.c ****             
3686:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PGT_ADDR;
3687:../../Source/Kernel/rme_kernel.c ****         }
3688:../../Source/Kernel/rme_kernel.c ****         else
3689:../../Source/Kernel/rme_kernel.c ****         {
3690:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3691:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3692:../../Source/Kernel/rme_kernel.c ****         }
3693:../../Source/Kernel/rme_kernel.c ****         
3694:../../Source/Kernel/rme_kernel.c ****         End_Parent=Begin_Parent+RME_POW2(Szord_Parent);
3695:../../Source/Kernel/rme_kernel.c ****         
3696:../../Source/Kernel/rme_kernel.c ****         /* If this is zero, then the parent table's slot expands to the end of 
3697:../../Source/Kernel/rme_kernel.c ****          * memory, and we are sure that overflow won't happen because start
3698:../../Source/Kernel/rme_kernel.c ****          * address is always aligned to the total order of the child table. 
3699:../../Source/Kernel/rme_kernel.c ****          * No UB for Order_Child here because Szord_Parent>=Order_Child */
3700:../../Source/Kernel/rme_kernel.c ****         if(End_Parent!=0U)
3701:../../Source/Kernel/rme_kernel.c ****         {
3702:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3703:../../Source/Kernel/rme_kernel.c ****             
3704:../../Source/Kernel/rme_kernel.c ****             if((RME_PGT_BASE(Pgt_Child->Base)+RME_POW2(Order_Child))>End_Parent)
3705:../../Source/Kernel/rme_kernel.c ****             {
3706:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
3707:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 204


3708:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_PGT_ADDR;
3709:../../Source/Kernel/rme_kernel.c ****             }
3710:../../Source/Kernel/rme_kernel.c ****             else
3711:../../Source/Kernel/rme_kernel.c ****             {
3712:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
3713:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
3714:../../Source/Kernel/rme_kernel.c ****             }
3715:../../Source/Kernel/rme_kernel.c ****         }
3716:../../Source/Kernel/rme_kernel.c ****         else
3717:../../Source/Kernel/rme_kernel.c ****         {
3718:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3719:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3720:../../Source/Kernel/rme_kernel.c ****         }
3721:../../Source/Kernel/rme_kernel.c ****     }
3722:../../Source/Kernel/rme_kernel.c ****     /* Parent is full range, check exempt */
3723:../../Source/Kernel/rme_kernel.c ****     else
3724:../../Source/Kernel/rme_kernel.c ****     {
3725:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3726:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3727:../../Source/Kernel/rme_kernel.c ****     }
3728:../../Source/Kernel/rme_kernel.c **** #else
3729:../../Source/Kernel/rme_kernel.c ****     /* Force no path compression when virtual mappings are enabled */
3730:../../Source/Kernel/rme_kernel.c ****     if(Szord_Parent!=Order_Child)
 7828              		.loc 1 3730 7
 7829 03f4 18201BE5 		ldr	r2, [fp, #-24]
 7830 03f8 14301BE5 		ldr	r3, [fp, #-20]
 7831 03fc 030052E1 		cmp	r2, r3
 7832 0400 0100000A 		beq	.L502
3731:../../Source/Kernel/rme_kernel.c ****     {
3732:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3733:../../Source/Kernel/rme_kernel.c **** 
3734:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 7833              		.loc 1 3734 16
 7834 0404 6430E0E3 		mvn	r3, #100
 7835 0408 230000EA 		b	.L479
 7836              	.L502:
3735:../../Source/Kernel/rme_kernel.c ****     }
3736:../../Source/Kernel/rme_kernel.c ****     else
3737:../../Source/Kernel/rme_kernel.c ****     {
3738:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3739:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3740:../../Source/Kernel/rme_kernel.c ****     }
3741:../../Source/Kernel/rme_kernel.c **** #endif
3742:../../Source/Kernel/rme_kernel.c **** 
3743:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
3744:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict */
3745:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Pgdir_Map(Pgt_Parent,Pos,Pgt_Child,Flag_Child)<0)
 7837              		.loc 1 3745 8
 7838 040c 04309BE5 		ldr	r3, [fp, #4]
 7839 0410 0C201BE5 		ldr	r2, [fp, #-12]
 7840 0414 28101BE5 		ldr	r1, [fp, #-40]
 7841 0418 08001BE5 		ldr	r0, [fp, #-8]
 7842 041c FEFFFFEB 		bl	__RME_Pgt_Pgdir_Map
3746:../../Source/Kernel/rme_kernel.c ****     {
3747:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3748:../../Source/Kernel/rme_kernel.c **** 
3749:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 205


3750:../../Source/Kernel/rme_kernel.c ****     }
3751:../../Source/Kernel/rme_kernel.c ****     else
3752:../../Source/Kernel/rme_kernel.c ****     {
3753:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3754:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3755:../../Source/Kernel/rme_kernel.c ****     }
3756:../../Source/Kernel/rme_kernel.c ****     
3757:../../Source/Kernel/rme_kernel.c ****     /* Increase refcnt for both parent/child */
3758:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Parent,struct RME_Cap_Pgt*);
 7843              		.loc 1 3758 14
 7844 0420 08301BE5 		ldr	r3, [fp, #-8]
 7845 0424 003093E5 		ldr	r3, [r3]
 7846 0428 7330FFE6 		uxth	r3, r3
 7847 042c 000053E3 		cmp	r3, #0
 7848 0430 0200000A 		beq	.L503
 7849              		.loc 1 3758 14 is_stmt 0 discriminator 1
 7850 0434 08301BE5 		ldr	r3, [fp, #-8]
 7851 0438 043093E5 		ldr	r3, [r3, #4]
 7852 043c 000000EA 		b	.L504
 7853              	.L503:
 7854              		.loc 1 3758 14 discriminator 2
 7855 0440 08301BE5 		ldr	r3, [fp, #-8]
 7856              	.L504:
 7857              		.loc 1 3758 13 is_stmt 1 discriminator 4
 7858 0444 1C300BE5 		str	r3, [fp, #-28]
3759:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),1);
 7859              		.loc 1 3759 5
 7860 0448 1C301BE5 		ldr	r3, [fp, #-28]
 7861 044c 043083E2 		add	r3, r3, #4
 7862 0450 0110A0E3 		mov	r1, #1
 7863 0454 0300A0E1 		mov	r0, r3
 7864 0458 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3760:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Child,struct RME_Cap_Pgt*);
 7865              		.loc 1 3760 14
 7866 045c 0C301BE5 		ldr	r3, [fp, #-12]
 7867 0460 003093E5 		ldr	r3, [r3]
 7868 0464 7330FFE6 		uxth	r3, r3
 7869 0468 000053E3 		cmp	r3, #0
 7870 046c 0200000A 		beq	.L505
 7871              		.loc 1 3760 14 is_stmt 0 discriminator 1
 7872 0470 0C301BE5 		ldr	r3, [fp, #-12]
 7873 0474 043093E5 		ldr	r3, [r3, #4]
 7874 0478 000000EA 		b	.L506
 7875              	.L505:
 7876              		.loc 1 3760 14 discriminator 2
 7877 047c 0C301BE5 		ldr	r3, [fp, #-12]
 7878              	.L506:
 7879              		.loc 1 3760 13 is_stmt 1 discriminator 4
 7880 0480 1C300BE5 		str	r3, [fp, #-28]
3761:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),1);
 7881              		.loc 1 3761 5
 7882 0484 1C301BE5 		ldr	r3, [fp, #-28]
 7883 0488 043083E2 		add	r3, r3, #4
 7884 048c 0110A0E3 		mov	r1, #1
 7885 0490 0300A0E1 		mov	r0, r3
 7886 0494 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3762:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 206


3763:../../Source/Kernel/rme_kernel.c ****     return 0;
 7887              		.loc 1 3763 12
 7888 0498 0030A0E3 		mov	r3, #0
 7889              	.L479:
3764:../../Source/Kernel/rme_kernel.c **** }
 7890              		.loc 1 3764 1
 7891 049c 0300A0E1 		mov	r0, r3
 7892 04a0 04D04BE2 		sub	sp, fp, #4
 7893              		.cfi_def_cfa 13, 8
 7894              		@ sp needed
 7895 04a4 0088BDE8 		pop	{fp, pc}
 7896              		.cfi_endproc
 7897              	.LFE36:
 7899              		.section	.text._RME_Pgt_Des,"ax",%progbits
 7900              		.align	2
 7901              		.syntax unified
 7902              		.arm
 7904              	_RME_Pgt_Des:
 7905              	.LFB37:
3765:../../Source/Kernel/rme_kernel.c **** #endif
3766:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Con *************************************************/
3767:../../Source/Kernel/rme_kernel.c **** 
3768:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Pgt_Des ******************************************************
3769:../../Source/Kernel/rme_kernel.c **** Description : Unmap a child page table from the parent page table, destructing
3770:../../Source/Kernel/rme_kernel.c ****               the address space tree.
3771:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
3772:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Parent - The capability to the parent page
3773:../../Source/Kernel/rme_kernel.c ****                                          table.
3774:../../Source/Kernel/rme_kernel.c ****                                          2-Level.
3775:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Pos - The parent page table position to position unmap
3776:../../Source/Kernel/rme_kernel.c ****                               the child page table from. The child page table
3777:../../Source/Kernel/rme_kernel.c ****                               must be there for the destruction to succeed.
3778:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt_Child - The capability to the child page table.
3779:../../Source/Kernel/rme_kernel.c ****                                         2-Level.
3780:../../Source/Kernel/rme_kernel.c **** Output      : None.
3781:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3782:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3783:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
3784:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Pgt_Des(struct RME_Cap_Cpt* Cpt, 
3785:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Parent,
3786:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Pos,
3787:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt_Child)
3788:../../Source/Kernel/rme_kernel.c **** {
 7906              		.loc 1 3788 1
 7907              		.cfi_startproc
 7908              		@ args = 0, pretend = 0, frame = 32
 7909              		@ frame_needed = 1, uses_anonymous_args = 0
 7910 0000 00482DE9 		push	{fp, lr}
 7911              		.cfi_def_cfa_offset 8
 7912              		.cfi_offset 11, -8
 7913              		.cfi_offset 14, -4
 7914 0004 04B08DE2 		add	fp, sp, #4
 7915              		.cfi_def_cfa 11, 4
 7916 0008 20D04DE2 		sub	sp, sp, #32
 7917 000c 18000BE5 		str	r0, [fp, #-24]
 7918 0010 1C100BE5 		str	r1, [fp, #-28]
 7919 0014 20200BE5 		str	r2, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 207


 7920 0018 24300BE5 		str	r3, [fp, #-36]
3789:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Parent;
3790:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Child;
3791:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Root;
3792:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
3793:../../Source/Kernel/rme_kernel.c ****     
3794:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
3795:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Parent,RME_CAP_TYPE_CPT,
 7921              		.loc 1 3795 5
 7922 001c 1C301BE5 		ldr	r3, [fp, #-28]
 7923 0020 803003E2 		and	r3, r3, #128
 7924 0024 000053E3 		cmp	r3, #0
 7925 0028 1C00001A 		bne	.L508
 7926              		.loc 1 3795 5 is_stmt 0 discriminator 1
 7927 002c 18301BE5 		ldr	r3, [fp, #-24]
 7928 0030 142093E5 		ldr	r2, [r3, #20]
 7929 0034 1C301BE5 		ldr	r3, [fp, #-28]
 7930 0038 030052E1 		cmp	r2, r3
 7931 003c 0100008A 		bhi	.L509
 7932              		.loc 1 3795 5 discriminator 3
 7933 0040 0230E0E3 		mvn	r3, #2
 7934              		.loc 1 3795 5
 7935 0044 000100EA 		b	.L510
 7936              	.L509:
 7937              		.loc 1 3795 5 discriminator 4
 7938 0048 1C301BE5 		ldr	r3, [fp, #-28]
 7939 004c 8322A0E1 		lsl	r2, r3, #5
 7940 0050 18301BE5 		ldr	r3, [fp, #-24]
 7941 0054 0C3093E5 		ldr	r3, [r3, #12]
 7942 0058 033082E0 		add	r3, r2, r3
 7943 005c 08300BE5 		str	r3, [fp, #-8]
 7944 0060 08301BE5 		ldr	r3, [fp, #-8]
 7945 0064 0300A0E1 		mov	r0, r3
 7946 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7947 006c 10000BE5 		str	r0, [fp, #-16]
 7948              		.loc 1 3795 5 discriminator 1
 7949 0070 10301BE5 		ldr	r3, [fp, #-16]
 7950 0074 FF3803E2 		and	r3, r3, #16711680
 7951 0078 020853E3 		cmp	r3, #131072
 7952 007c 0100001A 		bne	.L511
 7953              		.loc 1 3795 5 discriminator 5
 7954 0080 0830E0E3 		mvn	r3, #8
 7955              		.loc 1 3795 5
 7956 0084 F00000EA 		b	.L510
 7957              	.L511:
 7958              		.loc 1 3795 5 discriminator 6
 7959 0088 10301BE5 		ldr	r3, [fp, #-16]
 7960 008c 233CA0E1 		lsr	r3, r3, #24
 7961 0090 030053E3 		cmp	r3, #3
 7962 0094 3F00000A 		beq	.L512
 7963              		.loc 1 3795 5 discriminator 7
 7964 0098 0130E0E3 		mvn	r3, #1
 7965              		.loc 1 3795 5
 7966 009c EA0000EA 		b	.L510
 7967              	.L508:
 7968              		.loc 1 3795 5 discriminator 2
 7969 00a0 1C301BE5 		ldr	r3, [fp, #-28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 208


 7970 00a4 2324A0E1 		lsr	r2, r3, #8
 7971 00a8 18301BE5 		ldr	r3, [fp, #-24]
 7972 00ac 143093E5 		ldr	r3, [r3, #20]
 7973 00b0 030052E1 		cmp	r2, r3
 7974 00b4 0100003A 		bcc	.L513
 7975              		.loc 1 3795 5 discriminator 8
 7976 00b8 0230E0E3 		mvn	r3, #2
 7977              		.loc 1 3795 5
 7978 00bc E20000EA 		b	.L510
 7979              	.L513:
 7980              		.loc 1 3795 5 discriminator 9
 7981 00c0 1C301BE5 		ldr	r3, [fp, #-28]
 7982 00c4 2334A0E1 		lsr	r3, r3, #8
 7983 00c8 8322A0E1 		lsl	r2, r3, #5
 7984 00cc 18301BE5 		ldr	r3, [fp, #-24]
 7985 00d0 0C3093E5 		ldr	r3, [r3, #12]
 7986 00d4 033082E0 		add	r3, r2, r3
 7987 00d8 08300BE5 		str	r3, [fp, #-8]
 7988 00dc 08301BE5 		ldr	r3, [fp, #-8]
 7989 00e0 0300A0E1 		mov	r0, r3
 7990 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 7991 00e8 10000BE5 		str	r0, [fp, #-16]
 7992              		.loc 1 3795 5 discriminator 1
 7993 00ec 10301BE5 		ldr	r3, [fp, #-16]
 7994 00f0 FF3803E2 		and	r3, r3, #16711680
 7995 00f4 020853E3 		cmp	r3, #131072
 7996 00f8 0100001A 		bne	.L514
 7997              		.loc 1 3795 5 discriminator 10
 7998 00fc 0830E0E3 		mvn	r3, #8
 7999              		.loc 1 3795 5
 8000 0100 D10000EA 		b	.L510
 8001              	.L514:
 8002              		.loc 1 3795 5 discriminator 11
 8003 0104 10301BE5 		ldr	r3, [fp, #-16]
 8004 0108 233CA0E1 		lsr	r3, r3, #24
 8005 010c 030053E3 		cmp	r3, #3
 8006 0110 0100000A 		beq	.L515
 8007              		.loc 1 3795 5 discriminator 12
 8008 0114 0130E0E3 		mvn	r3, #1
 8009              		.loc 1 3795 5
 8010 0118 CB0000EA 		b	.L510
 8011              	.L515:
 8012              		.loc 1 3795 5 discriminator 13
 8013 011c 1C301BE5 		ldr	r3, [fp, #-28]
 8014 0120 7F2003E2 		and	r2, r3, #127
 8015 0124 08301BE5 		ldr	r3, [fp, #-8]
 8016 0128 143093E5 		ldr	r3, [r3, #20]
 8017 012c 030052E1 		cmp	r2, r3
 8018 0130 0100003A 		bcc	.L516
 8019              		.loc 1 3795 5 discriminator 14
 8020 0134 0230E0E3 		mvn	r3, #2
 8021              		.loc 1 3795 5
 8022 0138 C30000EA 		b	.L510
 8023              	.L516:
 8024              		.loc 1 3795 5 discriminator 15
 8025 013c 1C301BE5 		ldr	r3, [fp, #-28]
 8026 0140 7F3003E2 		and	r3, r3, #127
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 209


 8027 0144 8322A0E1 		lsl	r2, r3, #5
 8028 0148 08301BE5 		ldr	r3, [fp, #-8]
 8029 014c 0C3093E5 		ldr	r3, [r3, #12]
 8030 0150 033082E0 		add	r3, r2, r3
 8031 0154 08300BE5 		str	r3, [fp, #-8]
 8032 0158 08301BE5 		ldr	r3, [fp, #-8]
 8033 015c 0300A0E1 		mov	r0, r3
 8034 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 8035 0164 10000BE5 		str	r0, [fp, #-16]
 8036              		.loc 1 3795 5 discriminator 1
 8037 0168 10301BE5 		ldr	r3, [fp, #-16]
 8038 016c FF3803E2 		and	r3, r3, #16711680
 8039 0170 020853E3 		cmp	r3, #131072
 8040 0174 0100001A 		bne	.L517
 8041              		.loc 1 3795 5 discriminator 16
 8042 0178 0830E0E3 		mvn	r3, #8
 8043              		.loc 1 3795 5
 8044 017c B20000EA 		b	.L510
 8045              	.L517:
 8046              		.loc 1 3795 5 discriminator 17
 8047 0180 10301BE5 		ldr	r3, [fp, #-16]
 8048 0184 233CA0E1 		lsr	r3, r3, #24
 8049 0188 030053E3 		cmp	r3, #3
 8050 018c 0100000A 		beq	.L512
 8051              		.loc 1 3795 5 discriminator 18
 8052 0190 0130E0E3 		mvn	r3, #1
 8053              		.loc 1 3795 5
 8054 0194 AC0000EA 		b	.L510
 8055              	.L512:
3796:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Parent,Type_Stat);
3797:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt_Child,RME_CAP_TYPE_CPT,
 8056              		.loc 1 3797 5 is_stmt 1
 8057 0198 24301BE5 		ldr	r3, [fp, #-36]
 8058 019c 803003E2 		and	r3, r3, #128
 8059 01a0 000053E3 		cmp	r3, #0
 8060 01a4 1C00001A 		bne	.L518
 8061              		.loc 1 3797 5 is_stmt 0 discriminator 1
 8062 01a8 18301BE5 		ldr	r3, [fp, #-24]
 8063 01ac 142093E5 		ldr	r2, [r3, #20]
 8064 01b0 24301BE5 		ldr	r3, [fp, #-36]
 8065 01b4 030052E1 		cmp	r2, r3
 8066 01b8 0100008A 		bhi	.L519
 8067              		.loc 1 3797 5 discriminator 3
 8068 01bc 0230E0E3 		mvn	r3, #2
 8069              		.loc 1 3797 5
 8070 01c0 A10000EA 		b	.L510
 8071              	.L519:
 8072              		.loc 1 3797 5 discriminator 4
 8073 01c4 24301BE5 		ldr	r3, [fp, #-36]
 8074 01c8 8322A0E1 		lsl	r2, r3, #5
 8075 01cc 18301BE5 		ldr	r3, [fp, #-24]
 8076 01d0 0C3093E5 		ldr	r3, [r3, #12]
 8077 01d4 033082E0 		add	r3, r2, r3
 8078 01d8 0C300BE5 		str	r3, [fp, #-12]
 8079 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 8080 01e0 0300A0E1 		mov	r0, r3
 8081 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 210


 8082 01e8 10000BE5 		str	r0, [fp, #-16]
 8083              		.loc 1 3797 5 discriminator 1
 8084 01ec 10301BE5 		ldr	r3, [fp, #-16]
 8085 01f0 FF3803E2 		and	r3, r3, #16711680
 8086 01f4 020853E3 		cmp	r3, #131072
 8087 01f8 0100001A 		bne	.L520
 8088              		.loc 1 3797 5 discriminator 5
 8089 01fc 0830E0E3 		mvn	r3, #8
 8090              		.loc 1 3797 5
 8091 0200 910000EA 		b	.L510
 8092              	.L520:
 8093              		.loc 1 3797 5 discriminator 6
 8094 0204 10301BE5 		ldr	r3, [fp, #-16]
 8095 0208 233CA0E1 		lsr	r3, r3, #24
 8096 020c 030053E3 		cmp	r3, #3
 8097 0210 3F00000A 		beq	.L521
 8098              		.loc 1 3797 5 discriminator 7
 8099 0214 0130E0E3 		mvn	r3, #1
 8100              		.loc 1 3797 5
 8101 0218 8B0000EA 		b	.L510
 8102              	.L518:
 8103              		.loc 1 3797 5 discriminator 2
 8104 021c 24301BE5 		ldr	r3, [fp, #-36]
 8105 0220 2324A0E1 		lsr	r2, r3, #8
 8106 0224 18301BE5 		ldr	r3, [fp, #-24]
 8107 0228 143093E5 		ldr	r3, [r3, #20]
 8108 022c 030052E1 		cmp	r2, r3
 8109 0230 0100003A 		bcc	.L522
 8110              		.loc 1 3797 5 discriminator 8
 8111 0234 0230E0E3 		mvn	r3, #2
 8112              		.loc 1 3797 5
 8113 0238 830000EA 		b	.L510
 8114              	.L522:
 8115              		.loc 1 3797 5 discriminator 9
 8116 023c 24301BE5 		ldr	r3, [fp, #-36]
 8117 0240 2334A0E1 		lsr	r3, r3, #8
 8118 0244 8322A0E1 		lsl	r2, r3, #5
 8119 0248 18301BE5 		ldr	r3, [fp, #-24]
 8120 024c 0C3093E5 		ldr	r3, [r3, #12]
 8121 0250 033082E0 		add	r3, r2, r3
 8122 0254 0C300BE5 		str	r3, [fp, #-12]
 8123 0258 0C301BE5 		ldr	r3, [fp, #-12]
 8124 025c 0300A0E1 		mov	r0, r3
 8125 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 8126 0264 10000BE5 		str	r0, [fp, #-16]
 8127              		.loc 1 3797 5 discriminator 1
 8128 0268 10301BE5 		ldr	r3, [fp, #-16]
 8129 026c FF3803E2 		and	r3, r3, #16711680
 8130 0270 020853E3 		cmp	r3, #131072
 8131 0274 0100001A 		bne	.L523
 8132              		.loc 1 3797 5 discriminator 10
 8133 0278 0830E0E3 		mvn	r3, #8
 8134              		.loc 1 3797 5
 8135 027c 720000EA 		b	.L510
 8136              	.L523:
 8137              		.loc 1 3797 5 discriminator 11
 8138 0280 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 211


 8139 0284 233CA0E1 		lsr	r3, r3, #24
 8140 0288 030053E3 		cmp	r3, #3
 8141 028c 0100000A 		beq	.L524
 8142              		.loc 1 3797 5 discriminator 12
 8143 0290 0130E0E3 		mvn	r3, #1
 8144              		.loc 1 3797 5
 8145 0294 6C0000EA 		b	.L510
 8146              	.L524:
 8147              		.loc 1 3797 5 discriminator 13
 8148 0298 24301BE5 		ldr	r3, [fp, #-36]
 8149 029c 7F2003E2 		and	r2, r3, #127
 8150 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 8151 02a4 143093E5 		ldr	r3, [r3, #20]
 8152 02a8 030052E1 		cmp	r2, r3
 8153 02ac 0100003A 		bcc	.L525
 8154              		.loc 1 3797 5 discriminator 14
 8155 02b0 0230E0E3 		mvn	r3, #2
 8156              		.loc 1 3797 5
 8157 02b4 640000EA 		b	.L510
 8158              	.L525:
 8159              		.loc 1 3797 5 discriminator 15
 8160 02b8 24301BE5 		ldr	r3, [fp, #-36]
 8161 02bc 7F3003E2 		and	r3, r3, #127
 8162 02c0 8322A0E1 		lsl	r2, r3, #5
 8163 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 8164 02c8 0C3093E5 		ldr	r3, [r3, #12]
 8165 02cc 033082E0 		add	r3, r2, r3
 8166 02d0 0C300BE5 		str	r3, [fp, #-12]
 8167 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 8168 02d8 0300A0E1 		mov	r0, r3
 8169 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 8170 02e0 10000BE5 		str	r0, [fp, #-16]
 8171              		.loc 1 3797 5 discriminator 1
 8172 02e4 10301BE5 		ldr	r3, [fp, #-16]
 8173 02e8 FF3803E2 		and	r3, r3, #16711680
 8174 02ec 020853E3 		cmp	r3, #131072
 8175 02f0 0100001A 		bne	.L526
 8176              		.loc 1 3797 5 discriminator 16
 8177 02f4 0830E0E3 		mvn	r3, #8
 8178              		.loc 1 3797 5
 8179 02f8 530000EA 		b	.L510
 8180              	.L526:
 8181              		.loc 1 3797 5 discriminator 17
 8182 02fc 10301BE5 		ldr	r3, [fp, #-16]
 8183 0300 233CA0E1 		lsr	r3, r3, #24
 8184 0304 030053E3 		cmp	r3, #3
 8185 0308 0100000A 		beq	.L521
 8186              		.loc 1 3797 5 discriminator 18
 8187 030c 0130E0E3 		mvn	r3, #1
 8188              		.loc 1 3797 5
 8189 0310 4D0000EA 		b	.L510
 8190              	.L521:
3798:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Child,Type_Stat);
3799:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
3800:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Parent, RME_PGT_FLAG_DES_PARENT);
 8191              		.loc 1 3800 5 is_stmt 1
 8192 0314 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 212


 8193 0318 083093E5 		ldr	r3, [r3, #8]
 8194 031c 203003E2 		and	r3, r3, #32
 8195 0320 000053E3 		cmp	r3, #0
 8196 0324 0100001A 		bne	.L527
 8197              		.loc 1 3800 5 is_stmt 0 discriminator 1
 8198 0328 0630E0E3 		mvn	r3, #6
 8199              		.loc 1 3800 5
 8200 032c 460000EA 		b	.L510
 8201              	.L527:
3801:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Child, RME_PGT_FLAG_CHILD);
 8202              		.loc 1 3801 5 is_stmt 1
 8203 0330 0C301BE5 		ldr	r3, [fp, #-12]
 8204 0334 083093E5 		ldr	r3, [r3, #8]
 8205 0338 083003E2 		and	r3, r3, #8
 8206 033c 000053E3 		cmp	r3, #0
 8207 0340 0100001A 		bne	.L528
 8208              		.loc 1 3801 5 is_stmt 0 discriminator 1
 8209 0344 0630E0E3 		mvn	r3, #6
 8210              		.loc 1 3801 5
 8211 0348 3F0000EA 		b	.L510
 8212              	.L528:
3802:../../Source/Kernel/rme_kernel.c ****     /* Check the operation range - This is page table specific */
3803:../../Source/Kernel/rme_kernel.c ****     if((Pos>RME_PGT_FLAG_HIGH(Pgt_Parent->Head.Flag))||
 8213              		.loc 1 3803 13 is_stmt 1
 8214 034c 08301BE5 		ldr	r3, [fp, #-8]
 8215 0350 083093E5 		ldr	r3, [r3, #8]
 8216 0354 233AA0E1 		lsr	r3, r3, #20
 8217              		.loc 1 3803 7
 8218 0358 20201BE5 		ldr	r2, [fp, #-32]
 8219 035c 030052E1 		cmp	r2, r3
 8220 0360 0600008A 		bhi	.L529
3804:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Parent->Head.Flag)))
 8221              		.loc 1 3804 13
 8222 0364 08301BE5 		ldr	r3, [fp, #-8]
 8223 0368 083093E5 		ldr	r3, [r3, #8]
 8224 036c 2334A0E1 		lsr	r3, r3, #8
 8225 0370 5330EBE7 		ubfx	r3, r3, #0, #12
3803:../../Source/Kernel/rme_kernel.c ****        (Pos<RME_PGT_FLAG_LOW(Pgt_Parent->Head.Flag)))
 8226              		.loc 1 3803 54 discriminator 1
 8227 0374 20201BE5 		ldr	r2, [fp, #-32]
 8228 0378 030052E1 		cmp	r2, r3
 8229 037c 0100002A 		bcs	.L530
 8230              	.L529:
3805:../../Source/Kernel/rme_kernel.c ****     {
3806:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3807:../../Source/Kernel/rme_kernel.c **** 
3808:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 8231              		.loc 1 3808 16
 8232 0380 0630E0E3 		mvn	r3, #6
 8233 0384 300000EA 		b	.L510
 8234              	.L530:
3809:../../Source/Kernel/rme_kernel.c ****     }
3810:../../Source/Kernel/rme_kernel.c ****     else
3811:../../Source/Kernel/rme_kernel.c ****     {
3812:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3813:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3814:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 213


3815:../../Source/Kernel/rme_kernel.c **** 
3816:../../Source/Kernel/rme_kernel.c ****     /* See if the unmapping range is allowed */
3817:../../Source/Kernel/rme_kernel.c ****     if((Pos>>RME_PGT_NMORD(Pgt_Parent->Order))!=0U)
 8235              		.loc 1 3817 14
 8236 0388 08301BE5 		ldr	r3, [fp, #-8]
 8237 038c 143093E5 		ldr	r3, [r3, #20]
 8238 0390 7330FFE6 		uxth	r3, r3
 8239              		.loc 1 3817 12
 8240 0394 20201BE5 		ldr	r2, [fp, #-32]
 8241 0398 3233A0E1 		lsr	r3, r2, r3
 8242              		.loc 1 3817 7
 8243 039c 000053E3 		cmp	r3, #0
 8244 03a0 0100000A 		beq	.L531
3818:../../Source/Kernel/rme_kernel.c ****     {
3819:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3820:../../Source/Kernel/rme_kernel.c **** 
3821:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_ADDR;
 8245              		.loc 1 3821 16
 8246 03a4 6430E0E3 		mvn	r3, #100
 8247 03a8 270000EA 		b	.L510
 8248              	.L531:
3822:../../Source/Kernel/rme_kernel.c ****     }
3823:../../Source/Kernel/rme_kernel.c ****     else
3824:../../Source/Kernel/rme_kernel.c ****     {
3825:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3826:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3827:../../Source/Kernel/rme_kernel.c ****     }
3828:../../Source/Kernel/rme_kernel.c **** 
3829:../../Source/Kernel/rme_kernel.c ****     /* Actually do the mapping - This work is passed down to the HAL. 
3830:../../Source/Kernel/rme_kernel.c ****      * Under multi-core, HAL should use CAS to avoid a conflict. Also,
3831:../../Source/Kernel/rme_kernel.c ****      * the HAL needs to guarantee that the Child is actually mapped there,
3832:../../Source/Kernel/rme_kernel.c ****      * and use that as the old value in CAS */
3833:../../Source/Kernel/rme_kernel.c ****     if(__RME_Pgt_Pgdir_Unmap(Pgt_Parent,Pos,Pgt_Child)<0)
 8249              		.loc 1 3833 8
 8250 03ac 0C201BE5 		ldr	r2, [fp, #-12]
 8251 03b0 20101BE5 		ldr	r1, [fp, #-32]
 8252 03b4 08001BE5 		ldr	r0, [fp, #-8]
 8253 03b8 FEFFFFEB 		bl	__RME_Pgt_Pgdir_Unmap
 8254 03bc 0030A0E1 		mov	r3, r0
 8255              		.loc 1 3833 7 discriminator 1
 8256 03c0 000053E3 		cmp	r3, #0
 8257 03c4 010000AA 		bge	.L532
3834:../../Source/Kernel/rme_kernel.c ****     {
3835:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3836:../../Source/Kernel/rme_kernel.c **** 
3837:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PGT_MAP;
 8258              		.loc 1 3837 16
 8259 03c8 6530E0E3 		mvn	r3, #101
 8260 03cc 1E0000EA 		b	.L510
 8261              	.L532:
3838:../../Source/Kernel/rme_kernel.c ****     }
3839:../../Source/Kernel/rme_kernel.c ****     else
3840:../../Source/Kernel/rme_kernel.c ****     {
3841:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3842:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3843:../../Source/Kernel/rme_kernel.c ****     }
3844:../../Source/Kernel/rme_kernel.c ****     
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 214


3845:../../Source/Kernel/rme_kernel.c ****     /* Decrease refcnt for both parent/child */
3846:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Parent,struct RME_Cap_Pgt*);
 8262              		.loc 1 3846 14
 8263 03d0 08301BE5 		ldr	r3, [fp, #-8]
 8264 03d4 003093E5 		ldr	r3, [r3]
 8265 03d8 7330FFE6 		uxth	r3, r3
 8266 03dc 000053E3 		cmp	r3, #0
 8267 03e0 0200000A 		beq	.L533
 8268              		.loc 1 3846 14 is_stmt 0 discriminator 1
 8269 03e4 08301BE5 		ldr	r3, [fp, #-8]
 8270 03e8 043093E5 		ldr	r3, [r3, #4]
 8271 03ec 000000EA 		b	.L534
 8272              	.L533:
 8273              		.loc 1 3846 14 discriminator 2
 8274 03f0 08301BE5 		ldr	r3, [fp, #-8]
 8275              	.L534:
 8276              		.loc 1 3846 13 is_stmt 1 discriminator 4
 8277 03f4 14300BE5 		str	r3, [fp, #-20]
3847:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),-1);
 8278              		.loc 1 3847 5
 8279 03f8 14301BE5 		ldr	r3, [fp, #-20]
 8280 03fc 043083E2 		add	r3, r3, #4
 8281 0400 0010E0E3 		mvn	r1, #0
 8282 0404 0300A0E1 		mov	r0, r3
 8283 0408 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3848:../../Source/Kernel/rme_kernel.c ****     Pgt_Root=RME_CAP_CONV_ROOT(Pgt_Child,struct RME_Cap_Pgt*);
 8284              		.loc 1 3848 14
 8285 040c 0C301BE5 		ldr	r3, [fp, #-12]
 8286 0410 003093E5 		ldr	r3, [r3]
 8287 0414 7330FFE6 		uxth	r3, r3
 8288 0418 000053E3 		cmp	r3, #0
 8289 041c 0200000A 		beq	.L535
 8290              		.loc 1 3848 14 is_stmt 0 discriminator 1
 8291 0420 0C301BE5 		ldr	r3, [fp, #-12]
 8292 0424 043093E5 		ldr	r3, [r3, #4]
 8293 0428 000000EA 		b	.L536
 8294              	.L535:
 8295              		.loc 1 3848 14 discriminator 2
 8296 042c 0C301BE5 		ldr	r3, [fp, #-12]
 8297              	.L536:
 8298              		.loc 1 3848 13 is_stmt 1 discriminator 4
 8299 0430 14300BE5 		str	r3, [fp, #-20]
3849:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Root->Head.Root_Ref),-1);
 8300              		.loc 1 3849 5
 8301 0434 14301BE5 		ldr	r3, [fp, #-20]
 8302 0438 043083E2 		add	r3, r3, #4
 8303 043c 0010E0E3 		mvn	r1, #0
 8304 0440 0300A0E1 		mov	r0, r3
 8305 0444 FEFFFFEB 		bl	_RME_Fetch_Add_Single
3850:../../Source/Kernel/rme_kernel.c **** 
3851:../../Source/Kernel/rme_kernel.c ****     return 0;
 8306              		.loc 1 3851 12
 8307 0448 0030A0E3 		mov	r3, #0
 8308              	.L510:
3852:../../Source/Kernel/rme_kernel.c **** }
 8309              		.loc 1 3852 1
 8310 044c 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 215


 8311 0450 04D04BE2 		sub	sp, fp, #4
 8312              		.cfi_def_cfa 13, 8
 8313              		@ sp needed
 8314 0454 0088BDE8 		pop	{fp, pc}
 8315              		.cfi_endproc
 8316              	.LFE37:
 8318              		.section	.text._RME_Kot_Init,"ax",%progbits
 8319              		.align	2
 8320              		.global	_RME_Kot_Init
 8321              		.syntax unified
 8322              		.arm
 8324              	_RME_Kot_Init:
 8325              	.LFB38:
3853:../../Source/Kernel/rme_kernel.c **** #endif
3854:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Pgt_Des *************************************************/
3855:../../Source/Kernel/rme_kernel.c **** 
3856:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kot_Init *****************************************************
3857:../../Source/Kernel/rme_kernel.c **** Description : Initialize the kernel object table according to the total kernel
3858:../../Source/Kernel/rme_kernel.c ****               memory size, which decides the number of words in the table.
3859:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Words - the number of words in the table.
3860:../../Source/Kernel/rme_kernel.c **** Output      : None.
3861:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If the number of words are is not sufficient to hold 
3862:../../Source/Kernel/rme_kernel.c ****                           all kernel memory, -1; else 0.
3863:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3864:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kot_Init(rme_ptr_t Word)
3865:../../Source/Kernel/rme_kernel.c **** {
 8326              		.loc 1 3865 1
 8327              		.cfi_startproc
 8328              		@ args = 0, pretend = 0, frame = 16
 8329              		@ frame_needed = 1, uses_anonymous_args = 0
 8330              		@ link register save eliminated.
 8331 0000 04B02DE5 		str	fp, [sp, #-4]!
 8332              		.cfi_def_cfa_offset 4
 8333              		.cfi_offset 11, -4
 8334 0004 00B08DE2 		add	fp, sp, #0
 8335              		.cfi_def_cfa_register 11
 8336 0008 14D04DE2 		sub	sp, sp, #20
 8337 000c 10000BE5 		str	r0, [fp, #-16]
3866:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
3867:../../Source/Kernel/rme_kernel.c ****     
3868:../../Source/Kernel/rme_kernel.c ****     if(Word<RME_KOT_WORD_NUM)
 8338              		.loc 1 3868 7
 8339 0010 10301BE5 		ldr	r3, [fp, #-16]
 8340 0014 020653E3 		cmp	r3, #2097152
 8341 0018 0100002A 		bcs	.L538
3869:../../Source/Kernel/rme_kernel.c ****     {
3870:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3871:../../Source/Kernel/rme_kernel.c **** 
3872:../../Source/Kernel/rme_kernel.c ****         return -1;
 8342              		.loc 1 3872 16
 8343 001c 0030E0E3 		mvn	r3, #0
 8344 0020 0F0000EA 		b	.L539
 8345              	.L538:
3873:../../Source/Kernel/rme_kernel.c ****     }
3874:../../Source/Kernel/rme_kernel.c ****     else
3875:../../Source/Kernel/rme_kernel.c ****     {
3876:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 216


3877:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3878:../../Source/Kernel/rme_kernel.c ****     }
3879:../../Source/Kernel/rme_kernel.c **** 
3880:../../Source/Kernel/rme_kernel.c ****     /* Zero out the whole table */
3881:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Word;Count++)
 8346              		.loc 1 3881 14
 8347 0024 0030A0E3 		mov	r3, #0
 8348 0028 08300BE5 		str	r3, [fp, #-8]
 8349              		.loc 1 3881 5
 8350 002c 070000EA 		b	.L540
 8351              	.L541:
3882:../../Source/Kernel/rme_kernel.c ****     {
3883:../../Source/Kernel/rme_kernel.c ****         RME_KOT_VA_BASE[Count]=0U;
 8352              		.loc 1 3883 31
 8353 0030 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8354 0034 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8355 0038 08201BE5 		ldr	r2, [fp, #-8]
 8356 003c 0010A0E3 		mov	r1, #0
 8357 0040 021183E7 		str	r1, [r3, r2, lsl #2]
3881:../../Source/Kernel/rme_kernel.c ****     {
 8358              		.loc 1 3881 34 discriminator 3
 8359 0044 08301BE5 		ldr	r3, [fp, #-8]
 8360 0048 013083E2 		add	r3, r3, #1
 8361 004c 08300BE5 		str	r3, [fp, #-8]
 8362              	.L540:
3881:../../Source/Kernel/rme_kernel.c ****     {
 8363              		.loc 1 3881 23 discriminator 1
 8364 0050 08201BE5 		ldr	r2, [fp, #-8]
 8365 0054 10301BE5 		ldr	r3, [fp, #-16]
 8366 0058 030052E1 		cmp	r2, r3
 8367 005c F3FFFF3A 		bcc	.L541
3884:../../Source/Kernel/rme_kernel.c ****     }
3885:../../Source/Kernel/rme_kernel.c **** 
3886:../../Source/Kernel/rme_kernel.c ****     return 0;
 8368              		.loc 1 3886 12
 8369 0060 0030A0E3 		mov	r3, #0
 8370              	.L539:
3887:../../Source/Kernel/rme_kernel.c **** }
 8371              		.loc 1 3887 1
 8372 0064 0300A0E1 		mov	r0, r3
 8373 0068 00D08BE2 		add	sp, fp, #0
 8374              		.cfi_def_cfa_register 13
 8375              		@ sp needed
 8376 006c 04B09DE4 		ldr	fp, [sp], #4
 8377              		.cfi_restore 11
 8378              		.cfi_def_cfa_offset 0
 8379 0070 1EFF2FE1 		bx	lr
 8380              		.cfi_endproc
 8381              	.LFE38:
 8383              		.section	.text._RME_Kot_Mark,"ax",%progbits
 8384              		.align	2
 8385              		.global	_RME_Kot_Mark
 8386              		.syntax unified
 8387              		.arm
 8389              	_RME_Kot_Mark:
 8390              	.LFB39:
3888:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kot_Init ************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 217


3889:../../Source/Kernel/rme_kernel.c **** 
3890:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kot_Mark *****************************************************
3891:../../Source/Kernel/rme_kernel.c **** Description : Populate the kernel object bitmap contiguously.
3892:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Kaddr - The kernel virtual address.
3893:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size - The size of the memory to populate.
3894:../../Source/Kernel/rme_kernel.c **** Output      : None.
3895:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
3896:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
3897:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kot_Mark(rme_ptr_t Kaddr,
3898:../../Source/Kernel/rme_kernel.c ****                         rme_ptr_t Size)
3899:../../Source/Kernel/rme_kernel.c **** {
 8391              		.loc 1 3899 1
 8392              		.cfi_startproc
 8393              		@ args = 0, pretend = 0, frame = 40
 8394              		@ frame_needed = 1, uses_anonymous_args = 0
 8395 0000 00482DE9 		push	{fp, lr}
 8396              		.cfi_def_cfa_offset 8
 8397              		.cfi_offset 11, -8
 8398              		.cfi_offset 14, -4
 8399 0004 04B08DE2 		add	fp, sp, #4
 8400              		.cfi_def_cfa 11, 4
 8401 0008 28D04DE2 		sub	sp, sp, #40
 8402 000c 28000BE5 		str	r0, [fp, #-40]
 8403 0010 2C100BE5 		str	r1, [fp, #-44]
3900:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
3901:../../Source/Kernel/rme_kernel.c ****     /* The old value */
3902:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Old_Val;
3903:../../Source/Kernel/rme_kernel.c ****     /* Whether we need to undo our operations because of CAS failure */
3904:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Undo;
3905:../../Source/Kernel/rme_kernel.c ****     /* The actual word to start the marking */
3906:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Start;
3907:../../Source/Kernel/rme_kernel.c ****     /* The actual word to end the marking */
3908:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t End;
3909:../../Source/Kernel/rme_kernel.c ****     /* The mask at the begin word */
3910:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Mask_Begin;
3911:../../Source/Kernel/rme_kernel.c ****     /* The mask at the end word */
3912:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Mask_End;
3913:../../Source/Kernel/rme_kernel.c **** 
3914:../../Source/Kernel/rme_kernel.c ****     /* Check if the marking is well aligned */
3915:../../Source/Kernel/rme_kernel.c ****     if((Kaddr&RME_MASK_END(RME_KOM_SLOT_ORDER-1U))!=0U)
 8404              		.loc 1 3915 14
 8405 0014 28301BE5 		ldr	r3, [fp, #-40]
 8406 0018 0F3003E2 		and	r3, r3, #15
 8407              		.loc 1 3915 7
 8408 001c 000053E3 		cmp	r3, #0
 8409 0020 0100000A 		beq	.L543
3916:../../Source/Kernel/rme_kernel.c ****     {
3917:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3918:../../Source/Kernel/rme_kernel.c **** 
3919:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_KOT_BMP;
 8410              		.loc 1 3919 16
 8411 0024 0030E0E3 		mvn	r3, #0
 8412 0028 C20000EA 		b	.L544
 8413              	.L543:
3920:../../Source/Kernel/rme_kernel.c ****     }
3921:../../Source/Kernel/rme_kernel.c ****     else
3922:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 218


3923:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3924:../../Source/Kernel/rme_kernel.c ****         /* No action required */
3925:../../Source/Kernel/rme_kernel.c ****     }
3926:../../Source/Kernel/rme_kernel.c ****     
3927:../../Source/Kernel/rme_kernel.c ****     /* Round the marking to RME_KOM_SLOT_ORDER boundary, and rely on compiler for optimization */
3928:../../Source/Kernel/rme_kernel.c ****     Start=(Kaddr-RME_KOM_VA_BASE)>>RME_KOM_SLOT_ORDER;
 8414              		.loc 1 3928 17
 8415 002c 28301BE5 		ldr	r3, [fp, #-40]
 8416 0030 7F3483E2 		add	r3, r3, #2130706432
 8417              		.loc 1 3928 10
 8418 0034 2332A0E1 		lsr	r3, r3, #4
 8419 0038 10300BE5 		str	r3, [fp, #-16]
3929:../../Source/Kernel/rme_kernel.c ****     Mask_Begin=RME_MASK_BEGIN(Start&RME_MASK_END(RME_WORD_ORDER-1U));
 8420              		.loc 1 3929 16
 8421 003c 10301BE5 		ldr	r3, [fp, #-16]
 8422 0040 1F3003E2 		and	r3, r3, #31
 8423              		.loc 1 3929 15
 8424 0044 0020E0E3 		mvn	r2, #0
 8425 0048 1233A0E1 		lsl	r3, r2, r3
 8426 004c 14300BE5 		str	r3, [fp, #-20]
3930:../../Source/Kernel/rme_kernel.c ****     Start=Start>>RME_WORD_ORDER;
 8427              		.loc 1 3930 10
 8428 0050 10301BE5 		ldr	r3, [fp, #-16]
 8429 0054 A332A0E1 		lsr	r3, r3, #5
 8430 0058 10300BE5 		str	r3, [fp, #-16]
3931:../../Source/Kernel/rme_kernel.c ****     
3932:../../Source/Kernel/rme_kernel.c ****     End=(Kaddr+Size-1U-RME_KOM_VA_BASE)>>RME_KOM_SLOT_ORDER;
 8431              		.loc 1 3932 15
 8432 005c 28201BE5 		ldr	r2, [fp, #-40]
 8433 0060 2C301BE5 		ldr	r3, [fp, #-44]
 8434 0064 033082E0 		add	r3, r2, r3
 8435              		.loc 1 3932 23
 8436 0068 7F3483E2 		add	r3, r3, #2130706432
 8437 006c 013043E2 		sub	r3, r3, #1
 8438              		.loc 1 3932 8
 8439 0070 2332A0E1 		lsr	r3, r3, #4
 8440 0074 18300BE5 		str	r3, [fp, #-24]
3933:../../Source/Kernel/rme_kernel.c ****     Mask_End=RME_MASK_END(End&RME_MASK_END(RME_WORD_ORDER-1U));
 8441              		.loc 1 3933 14
 8442 0078 18301BE5 		ldr	r3, [fp, #-24]
 8443 007c 0330E0E1 		mvn	r3, r3
 8444 0080 1F3003E2 		and	r3, r3, #31
 8445              		.loc 1 3933 13
 8446 0084 0020E0E3 		mvn	r2, #0
 8447 0088 3233A0E1 		lsr	r3, r2, r3
 8448 008c 1C300BE5 		str	r3, [fp, #-28]
3934:../../Source/Kernel/rme_kernel.c ****     End=End>>RME_WORD_ORDER;
 8449              		.loc 1 3934 8
 8450 0090 18301BE5 		ldr	r3, [fp, #-24]
 8451 0094 A332A0E1 		lsr	r3, r3, #5
 8452 0098 18300BE5 		str	r3, [fp, #-24]
3935:../../Source/Kernel/rme_kernel.c ****     
3936:../../Source/Kernel/rme_kernel.c ****     /* See if the start and end are in the same word */
3937:../../Source/Kernel/rme_kernel.c ****     if(Start==End)
 8453              		.loc 1 3937 7
 8454 009c 10201BE5 		ldr	r2, [fp, #-16]
 8455 00a0 18301BE5 		ldr	r3, [fp, #-24]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 219


 8456 00a4 030052E1 		cmp	r2, r3
 8457 00a8 1F00001A 		bne	.L545
3938:../../Source/Kernel/rme_kernel.c ****     {
3939:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3940:../../Source/Kernel/rme_kernel.c **** 
3941:../../Source/Kernel/rme_kernel.c ****         /* Someone already populated something here */
3942:../../Source/Kernel/rme_kernel.c ****         Old_Val=RME_KOT_VA_BASE[Start];
 8458              		.loc 1 3942 16
 8459 00ac 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8460 00b0 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8461 00b4 10201BE5 		ldr	r2, [fp, #-16]
 8462 00b8 023193E7 		ldr	r3, [r3, r2, lsl #2]
 8463 00bc 20300BE5 		str	r3, [fp, #-32]
3943:../../Source/Kernel/rme_kernel.c ****         if((Old_Val&(Mask_Begin&Mask_End))!=0U)
 8464              		.loc 1 3943 32
 8465 00c0 14201BE5 		ldr	r2, [fp, #-20]
 8466 00c4 1C301BE5 		ldr	r3, [fp, #-28]
 8467 00c8 032002E0 		and	r2, r2, r3
 8468              		.loc 1 3943 20
 8469 00cc 20301BE5 		ldr	r3, [fp, #-32]
 8470 00d0 023003E0 		and	r3, r3, r2
 8471              		.loc 1 3943 11
 8472 00d4 000053E3 		cmp	r3, #0
 8473 00d8 0100000A 		beq	.L546
3944:../../Source/Kernel/rme_kernel.c ****         {
3945:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3946:../../Source/Kernel/rme_kernel.c **** 
3947:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8474              		.loc 1 3947 20
 8475 00dc 0030E0E3 		mvn	r3, #0
 8476 00e0 940000EA 		b	.L544
 8477              	.L546:
3948:../../Source/Kernel/rme_kernel.c ****         }
3949:../../Source/Kernel/rme_kernel.c ****         else
3950:../../Source/Kernel/rme_kernel.c ****         {
3951:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3952:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3953:../../Source/Kernel/rme_kernel.c ****         }
3954:../../Source/Kernel/rme_kernel.c ****         
3955:../../Source/Kernel/rme_kernel.c ****         /* Check done, do the marking with CAS */
3956:../../Source/Kernel/rme_kernel.c ****         if(RME_COMP_SWAP(&RME_KOT_VA_BASE[Start],
 8478              		.loc 1 3956 12
 8479 00e4 10301BE5 		ldr	r3, [fp, #-16]
 8480 00e8 0321A0E1 		lsl	r2, r3, #2
 8481 00ec 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8482 00f0 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8483 00f4 030082E0 		add	r0, r2, r3
 8484 00f8 14201BE5 		ldr	r2, [fp, #-20]
 8485 00fc 1C301BE5 		ldr	r3, [fp, #-28]
 8486 0100 032002E0 		and	r2, r2, r3
 8487 0104 20301BE5 		ldr	r3, [fp, #-32]
 8488 0108 033082E1 		orr	r3, r2, r3
 8489 010c 0320A0E1 		mov	r2, r3
 8490 0110 20101BE5 		ldr	r1, [fp, #-32]
 8491 0114 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 8492 0118 0030A0E1 		mov	r3, r0
 8493              		.loc 1 3956 11 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 220


 8494 011c 000053E3 		cmp	r3, #0
 8495 0120 8300001A 		bne	.L547
3957:../../Source/Kernel/rme_kernel.c ****                          Old_Val,
3958:../../Source/Kernel/rme_kernel.c ****                          Old_Val|(Mask_Begin&Mask_End))==RME_CASFAIL)
3959:../../Source/Kernel/rme_kernel.c ****         {
3960:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3961:../../Source/Kernel/rme_kernel.c **** 
3962:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8496              		.loc 1 3962 20
 8497 0124 0030E0E3 		mvn	r3, #0
 8498 0128 820000EA 		b	.L544
 8499              	.L545:
3963:../../Source/Kernel/rme_kernel.c ****         }
3964:../../Source/Kernel/rme_kernel.c ****         else
3965:../../Source/Kernel/rme_kernel.c ****         {
3966:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3967:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3968:../../Source/Kernel/rme_kernel.c ****         }
3969:../../Source/Kernel/rme_kernel.c ****     }
3970:../../Source/Kernel/rme_kernel.c ****     else
3971:../../Source/Kernel/rme_kernel.c ****     {
3972:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
3973:../../Source/Kernel/rme_kernel.c ****         
3974:../../Source/Kernel/rme_kernel.c ****         Undo=0U;
 8500              		.loc 1 3974 13
 8501 012c 0030A0E3 		mov	r3, #0
 8502 0130 0C300BE5 		str	r3, [fp, #-12]
3975:../../Source/Kernel/rme_kernel.c ****         /* Check&Mark the start */
3976:../../Source/Kernel/rme_kernel.c ****         Old_Val=RME_KOT_VA_BASE[Start];
 8503              		.loc 1 3976 16
 8504 0134 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8505 0138 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8506 013c 10201BE5 		ldr	r2, [fp, #-16]
 8507 0140 023193E7 		ldr	r3, [r3, r2, lsl #2]
 8508 0144 20300BE5 		str	r3, [fp, #-32]
3977:../../Source/Kernel/rme_kernel.c ****         if((Old_Val&Mask_Begin)!=0U)
 8509              		.loc 1 3977 20
 8510 0148 20201BE5 		ldr	r2, [fp, #-32]
 8511 014c 14301BE5 		ldr	r3, [fp, #-20]
 8512 0150 023003E0 		and	r3, r3, r2
 8513              		.loc 1 3977 11
 8514 0154 000053E3 		cmp	r3, #0
 8515 0158 0100000A 		beq	.L548
3978:../../Source/Kernel/rme_kernel.c ****         {
3979:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3980:../../Source/Kernel/rme_kernel.c **** 
3981:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8516              		.loc 1 3981 20
 8517 015c 0030E0E3 		mvn	r3, #0
 8518 0160 740000EA 		b	.L544
 8519              	.L548:
3982:../../Source/Kernel/rme_kernel.c ****         }
3983:../../Source/Kernel/rme_kernel.c ****         else
3984:../../Source/Kernel/rme_kernel.c ****         {
3985:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3986:../../Source/Kernel/rme_kernel.c ****             /* No action required */
3987:../../Source/Kernel/rme_kernel.c ****         }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 221


3988:../../Source/Kernel/rme_kernel.c ****         
3989:../../Source/Kernel/rme_kernel.c ****         if(RME_COMP_SWAP(&RME_KOT_VA_BASE[Start],
 8520              		.loc 1 3989 12
 8521 0164 10301BE5 		ldr	r3, [fp, #-16]
 8522 0168 0321A0E1 		lsl	r2, r3, #2
 8523 016c 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8524 0170 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8525 0174 030082E0 		add	r0, r2, r3
 8526 0178 20201BE5 		ldr	r2, [fp, #-32]
 8527 017c 14301BE5 		ldr	r3, [fp, #-20]
 8528 0180 033082E1 		orr	r3, r2, r3
 8529 0184 0320A0E1 		mov	r2, r3
 8530 0188 20101BE5 		ldr	r1, [fp, #-32]
 8531 018c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 8532 0190 0030A0E1 		mov	r3, r0
 8533              		.loc 1 3989 11 discriminator 1
 8534 0194 000053E3 		cmp	r3, #0
 8535 0198 0100001A 		bne	.L549
3990:../../Source/Kernel/rme_kernel.c ****                          Old_Val,
3991:../../Source/Kernel/rme_kernel.c ****                          Old_Val|Mask_Begin)==RME_CASFAIL)
3992:../../Source/Kernel/rme_kernel.c ****         {
3993:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
3994:../../Source/Kernel/rme_kernel.c **** 
3995:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8536              		.loc 1 3995 20
 8537 019c 0030E0E3 		mvn	r3, #0
 8538 01a0 640000EA 		b	.L544
 8539              	.L549:
3996:../../Source/Kernel/rme_kernel.c ****         }
3997:../../Source/Kernel/rme_kernel.c ****         else
3998:../../Source/Kernel/rme_kernel.c ****         {
3999:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4000:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4001:../../Source/Kernel/rme_kernel.c ****         }
4002:../../Source/Kernel/rme_kernel.c ****         
4003:../../Source/Kernel/rme_kernel.c ****         /* Check&Mark the middle */
4004:../../Source/Kernel/rme_kernel.c ****         for(Count=Start+1U;Count<End;Count++)
 8540              		.loc 1 4004 18
 8541 01a4 10301BE5 		ldr	r3, [fp, #-16]
 8542 01a8 013083E2 		add	r3, r3, #1
 8543 01ac 08300BE5 		str	r3, [fp, #-8]
 8544              		.loc 1 4004 9
 8545 01b0 1C0000EA 		b	.L550
 8546              	.L554:
4005:../../Source/Kernel/rme_kernel.c ****         {
4006:../../Source/Kernel/rme_kernel.c ****             Old_Val=RME_KOT_VA_BASE[Count];
 8547              		.loc 1 4006 20
 8548 01b4 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8549 01b8 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8550 01bc 08201BE5 		ldr	r2, [fp, #-8]
 8551 01c0 023193E7 		ldr	r3, [r3, r2, lsl #2]
 8552 01c4 20300BE5 		str	r3, [fp, #-32]
4007:../../Source/Kernel/rme_kernel.c ****             if(Old_Val!=0U)
 8553              		.loc 1 4007 15
 8554 01c8 20301BE5 		ldr	r3, [fp, #-32]
 8555 01cc 000053E3 		cmp	r3, #0
 8556 01d0 0200000A 		beq	.L551
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 222


4008:../../Source/Kernel/rme_kernel.c ****             {
4009:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4010:../../Source/Kernel/rme_kernel.c **** 
4011:../../Source/Kernel/rme_kernel.c ****                 Undo=1U;
 8557              		.loc 1 4011 21
 8558 01d4 0130A0E3 		mov	r3, #1
 8559 01d8 0C300BE5 		str	r3, [fp, #-12]
4012:../../Source/Kernel/rme_kernel.c ****                 break;
 8560              		.loc 1 4012 17
 8561 01dc 150000EA 		b	.L552
 8562              	.L551:
4013:../../Source/Kernel/rme_kernel.c ****             }
4014:../../Source/Kernel/rme_kernel.c ****             else
4015:../../Source/Kernel/rme_kernel.c ****             {
4016:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4017:../../Source/Kernel/rme_kernel.c ****                 
4018:../../Source/Kernel/rme_kernel.c ****                 if(RME_COMP_SWAP(&RME_KOT_VA_BASE[Count],
 8563              		.loc 1 4018 20
 8564 01e0 08301BE5 		ldr	r3, [fp, #-8]
 8565 01e4 0321A0E1 		lsl	r2, r3, #2
 8566 01e8 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8567 01ec 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8568 01f0 033082E0 		add	r3, r2, r3
 8569 01f4 0020E0E3 		mvn	r2, #0
 8570 01f8 20101BE5 		ldr	r1, [fp, #-32]
 8571 01fc 0300A0E1 		mov	r0, r3
 8572 0200 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 8573 0204 0030A0E1 		mov	r3, r0
 8574              		.loc 1 4018 19 discriminator 1
 8575 0208 000053E3 		cmp	r3, #0
 8576 020c 0200001A 		bne	.L553
4019:../../Source/Kernel/rme_kernel.c ****                                  Old_Val,
4020:../../Source/Kernel/rme_kernel.c ****                                  RME_MASK_FULL)==RME_CASFAIL)
4021:../../Source/Kernel/rme_kernel.c ****                 {
4022:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
4023:../../Source/Kernel/rme_kernel.c ****                     
4024:../../Source/Kernel/rme_kernel.c ****                     Undo=1U;
 8577              		.loc 1 4024 25
 8578 0210 0130A0E3 		mov	r3, #1
 8579 0214 0C300BE5 		str	r3, [fp, #-12]
4025:../../Source/Kernel/rme_kernel.c ****                     break;
 8580              		.loc 1 4025 21
 8581 0218 060000EA 		b	.L552
 8582              	.L553:
4004:../../Source/Kernel/rme_kernel.c ****         {
 8583              		.loc 1 4004 43 discriminator 2
 8584 021c 08301BE5 		ldr	r3, [fp, #-8]
 8585 0220 013083E2 		add	r3, r3, #1
 8586 0224 08300BE5 		str	r3, [fp, #-8]
 8587              	.L550:
4004:../../Source/Kernel/rme_kernel.c ****         {
 8588              		.loc 1 4004 33 discriminator 1
 8589 0228 08201BE5 		ldr	r2, [fp, #-8]
 8590 022c 18301BE5 		ldr	r3, [fp, #-24]
 8591 0230 030052E1 		cmp	r2, r3
 8592 0234 DEFFFF3A 		bcc	.L554
 8593              	.L552:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 223


4026:../../Source/Kernel/rme_kernel.c ****                 }
4027:../../Source/Kernel/rme_kernel.c ****                 else
4028:../../Source/Kernel/rme_kernel.c ****                 {
4029:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
4030:../../Source/Kernel/rme_kernel.c ****                     /* No action required */
4031:../../Source/Kernel/rme_kernel.c ****                 }
4032:../../Source/Kernel/rme_kernel.c ****             }
4033:../../Source/Kernel/rme_kernel.c ****         }
4034:../../Source/Kernel/rme_kernel.c ****         
4035:../../Source/Kernel/rme_kernel.c ****         /* See if the middle part failed. If yes, we skip the end marking */
4036:../../Source/Kernel/rme_kernel.c ****         if(Undo==0U)
 8594              		.loc 1 4036 11
 8595 0238 0C301BE5 		ldr	r3, [fp, #-12]
 8596 023c 000053E3 		cmp	r3, #0
 8597 0240 1C00001A 		bne	.L555
4037:../../Source/Kernel/rme_kernel.c ****         {
4038:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4039:../../Source/Kernel/rme_kernel.c **** 
4040:../../Source/Kernel/rme_kernel.c ****             /* Check&Mark the end */
4041:../../Source/Kernel/rme_kernel.c ****             Old_Val=RME_KOT_VA_BASE[End];
 8598              		.loc 1 4041 20
 8599 0244 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8600 0248 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8601 024c 18201BE5 		ldr	r2, [fp, #-24]
 8602 0250 023193E7 		ldr	r3, [r3, r2, lsl #2]
 8603 0254 20300BE5 		str	r3, [fp, #-32]
4042:../../Source/Kernel/rme_kernel.c ****             if((Old_Val&Mask_End)!=0U)
 8604              		.loc 1 4042 24
 8605 0258 20201BE5 		ldr	r2, [fp, #-32]
 8606 025c 1C301BE5 		ldr	r3, [fp, #-28]
 8607 0260 023003E0 		and	r3, r3, r2
 8608              		.loc 1 4042 15
 8609 0264 000053E3 		cmp	r3, #0
 8610 0268 0200000A 		beq	.L556
4043:../../Source/Kernel/rme_kernel.c ****             {
4044:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4045:../../Source/Kernel/rme_kernel.c **** 
4046:../../Source/Kernel/rme_kernel.c ****                 Undo=1U;
 8611              		.loc 1 4046 21
 8612 026c 0130A0E3 		mov	r3, #1
 8613 0270 0C300BE5 		str	r3, [fp, #-12]
 8614 0274 0F0000EA 		b	.L555
 8615              	.L556:
4047:../../Source/Kernel/rme_kernel.c ****             }
4048:../../Source/Kernel/rme_kernel.c ****             else
4049:../../Source/Kernel/rme_kernel.c ****             {
4050:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4051:../../Source/Kernel/rme_kernel.c **** 
4052:../../Source/Kernel/rme_kernel.c ****                 if(RME_COMP_SWAP(&RME_KOT_VA_BASE[End],
 8616              		.loc 1 4052 20
 8617 0278 18301BE5 		ldr	r3, [fp, #-24]
 8618 027c 0321A0E1 		lsl	r2, r3, #2
 8619 0280 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8620 0284 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8621 0288 030082E0 		add	r0, r2, r3
 8622 028c 20201BE5 		ldr	r2, [fp, #-32]
 8623 0290 1C301BE5 		ldr	r3, [fp, #-28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 224


 8624 0294 033082E1 		orr	r3, r2, r3
 8625 0298 0320A0E1 		mov	r2, r3
 8626 029c 20101BE5 		ldr	r1, [fp, #-32]
 8627 02a0 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 8628 02a4 0030A0E1 		mov	r3, r0
 8629              		.loc 1 4052 19 discriminator 1
 8630 02a8 000053E3 		cmp	r3, #0
 8631 02ac 0100001A 		bne	.L555
4053:../../Source/Kernel/rme_kernel.c ****                                  Old_Val,
4054:../../Source/Kernel/rme_kernel.c ****                                  Old_Val|Mask_End)==RME_CASFAIL)
4055:../../Source/Kernel/rme_kernel.c ****                 {
4056:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
4057:../../Source/Kernel/rme_kernel.c **** 
4058:../../Source/Kernel/rme_kernel.c ****                     Undo=1U;
 8632              		.loc 1 4058 25
 8633 02b0 0130A0E3 		mov	r3, #1
 8634 02b4 0C300BE5 		str	r3, [fp, #-12]
 8635              	.L555:
4059:../../Source/Kernel/rme_kernel.c ****                 }
4060:../../Source/Kernel/rme_kernel.c ****                 else
4061:../../Source/Kernel/rme_kernel.c ****                 {
4062:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
4063:../../Source/Kernel/rme_kernel.c ****                     /* No action required */
4064:../../Source/Kernel/rme_kernel.c ****                 }
4065:../../Source/Kernel/rme_kernel.c ****             }
4066:../../Source/Kernel/rme_kernel.c ****         }
4067:../../Source/Kernel/rme_kernel.c ****         else
4068:../../Source/Kernel/rme_kernel.c ****         {
4069:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4070:../../Source/Kernel/rme_kernel.c ****         }
4071:../../Source/Kernel/rme_kernel.c ****         
4072:../../Source/Kernel/rme_kernel.c ****         /* See if we need to undo. If yes, proceed to unroll and return error */
4073:../../Source/Kernel/rme_kernel.c ****         if(Undo!=0U)
 8636              		.loc 1 4073 11
 8637 02b8 0C301BE5 		ldr	r3, [fp, #-12]
 8638 02bc 000053E3 		cmp	r3, #0
 8639 02c0 1B00000A 		beq	.L547
4074:../../Source/Kernel/rme_kernel.c ****         {
4075:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4076:../../Source/Kernel/rme_kernel.c **** 
4077:../../Source/Kernel/rme_kernel.c ****             /* Undo the middle part - no CAS neeeded, write back is always atomic */
4078:../../Source/Kernel/rme_kernel.c ****             for(Count--;Count>Start;Count--)
 8640              		.loc 1 4078 22
 8641 02c4 08301BE5 		ldr	r3, [fp, #-8]
 8642 02c8 013043E2 		sub	r3, r3, #1
 8643 02cc 08300BE5 		str	r3, [fp, #-8]
 8644              		.loc 1 4078 13
 8645 02d0 070000EA 		b	.L557
 8646              	.L558:
4079:../../Source/Kernel/rme_kernel.c ****             {
4080:../../Source/Kernel/rme_kernel.c ****                 RME_KOT_VA_BASE[Count]=0U;
 8647              		.loc 1 4080 39
 8648 02d4 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8649 02d8 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8650 02dc 08201BE5 		ldr	r2, [fp, #-8]
 8651 02e0 0010A0E3 		mov	r1, #0
 8652 02e4 021183E7 		str	r1, [r3, r2, lsl #2]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 225


4078:../../Source/Kernel/rme_kernel.c ****             {
 8653              		.loc 1 4078 42 discriminator 3
 8654 02e8 08301BE5 		ldr	r3, [fp, #-8]
 8655 02ec 013043E2 		sub	r3, r3, #1
 8656 02f0 08300BE5 		str	r3, [fp, #-8]
 8657              	.L557:
4078:../../Source/Kernel/rme_kernel.c ****             {
 8658              		.loc 1 4078 30 discriminator 1
 8659 02f4 08201BE5 		ldr	r2, [fp, #-8]
 8660 02f8 10301BE5 		ldr	r3, [fp, #-16]
 8661 02fc 030052E1 		cmp	r2, r3
 8662 0300 F3FFFF8A 		bhi	.L558
4081:../../Source/Kernel/rme_kernel.c ****             }
4082:../../Source/Kernel/rme_kernel.c ****             /* Undo the first word - need atomic instructions */
4083:../../Source/Kernel/rme_kernel.c ****             RME_FETCH_AND(&(RME_KOT_VA_BASE[Start]),~Mask_Begin);
 8663              		.loc 1 4083 13
 8664 0304 10301BE5 		ldr	r3, [fp, #-16]
 8665 0308 0321A0E1 		lsl	r2, r3, #2
 8666 030c 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8667 0310 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8668 0314 032082E0 		add	r2, r2, r3
 8669 0318 14301BE5 		ldr	r3, [fp, #-20]
 8670 031c 0330E0E1 		mvn	r3, r3
 8671 0320 0310A0E1 		mov	r1, r3
 8672 0324 0200A0E1 		mov	r0, r2
 8673 0328 FEFFFFEB 		bl	_RME_Fetch_And_Single
4084:../../Source/Kernel/rme_kernel.c ****             /* Return failure */
4085:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8674              		.loc 1 4085 20
 8675 032c 0030E0E3 		mvn	r3, #0
 8676 0330 000000EA 		b	.L544
 8677              	.L547:
4086:../../Source/Kernel/rme_kernel.c ****         }
4087:../../Source/Kernel/rme_kernel.c ****         else
4088:../../Source/Kernel/rme_kernel.c ****         {
4089:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4090:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4091:../../Source/Kernel/rme_kernel.c ****         }
4092:../../Source/Kernel/rme_kernel.c ****     }
4093:../../Source/Kernel/rme_kernel.c **** 
4094:../../Source/Kernel/rme_kernel.c ****     return 0;
 8678              		.loc 1 4094 12
 8679 0334 0030A0E3 		mov	r3, #0
 8680              	.L544:
4095:../../Source/Kernel/rme_kernel.c **** }
 8681              		.loc 1 4095 1
 8682 0338 0300A0E1 		mov	r0, r3
 8683 033c 04D04BE2 		sub	sp, fp, #4
 8684              		.cfi_def_cfa 13, 8
 8685              		@ sp needed
 8686 0340 0088BDE8 		pop	{fp, pc}
 8687              		.cfi_endproc
 8688              	.LFE39:
 8690              		.section	.text._RME_Kot_Erase,"ax",%progbits
 8691              		.align	2
 8692              		.global	_RME_Kot_Erase
 8693              		.syntax unified
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 226


 8694              		.arm
 8696              	_RME_Kot_Erase:
 8697              	.LFB40:
4096:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kot_Mark ************************************************/
4097:../../Source/Kernel/rme_kernel.c **** 
4098:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kot_Erase ****************************************************
4099:../../Source/Kernel/rme_kernel.c **** Description : Depopulate the kernel object bitmap contiguously. We do not need 
4100:../../Source/Kernel/rme_kernel.c ****               CAS on erasure operations.
4101:../../Source/Kernel/rme_kernel.c **** Input       : rme_ptr_t Kaddr - The kernel virtual address.
4102:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Size - The size of the memory to depopulate.
4103:../../Source/Kernel/rme_kernel.c **** Output      : None.
4104:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4105:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4106:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kot_Erase(rme_ptr_t Kaddr,
4107:../../Source/Kernel/rme_kernel.c ****                          rme_ptr_t Size)
4108:../../Source/Kernel/rme_kernel.c **** {
 8698              		.loc 1 4108 1
 8699              		.cfi_startproc
 8700              		@ args = 0, pretend = 0, frame = 32
 8701              		@ frame_needed = 1, uses_anonymous_args = 0
 8702 0000 00482DE9 		push	{fp, lr}
 8703              		.cfi_def_cfa_offset 8
 8704              		.cfi_offset 11, -8
 8705              		.cfi_offset 14, -4
 8706 0004 04B08DE2 		add	fp, sp, #4
 8707              		.cfi_def_cfa 11, 4
 8708 0008 20D04DE2 		sub	sp, sp, #32
 8709 000c 20000BE5 		str	r0, [fp, #-32]
 8710 0010 24100BE5 		str	r1, [fp, #-36]
4109:../../Source/Kernel/rme_kernel.c ****     /* The actual word to start the marking */
4110:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Start;
4111:../../Source/Kernel/rme_kernel.c ****     /* The actual word to end the marking */
4112:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t End;
4113:../../Source/Kernel/rme_kernel.c ****     /* The mask at the begin word */
4114:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Mask_Begin;
4115:../../Source/Kernel/rme_kernel.c ****     /* The mask at the end word */
4116:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Mask_End;
4117:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
4118:../../Source/Kernel/rme_kernel.c **** 
4119:../../Source/Kernel/rme_kernel.c ****     /* Check if the marking is well aligned */
4120:../../Source/Kernel/rme_kernel.c ****     if((Kaddr&RME_MASK_END(RME_KOM_SLOT_ORDER-1U))!=0U)
 8711              		.loc 1 4120 14
 8712 0014 20301BE5 		ldr	r3, [fp, #-32]
 8713 0018 0F3003E2 		and	r3, r3, #15
 8714              		.loc 1 4120 7
 8715 001c 000053E3 		cmp	r3, #0
 8716 0020 0100000A 		beq	.L560
4121:../../Source/Kernel/rme_kernel.c ****     {
4122:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4123:../../Source/Kernel/rme_kernel.c **** 
4124:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_KOT_BMP;
 8717              		.loc 1 4124 16
 8718 0024 0030E0E3 		mvn	r3, #0
 8719 0028 8A0000EA 		b	.L561
 8720              	.L560:
4125:../../Source/Kernel/rme_kernel.c ****     }
4126:../../Source/Kernel/rme_kernel.c ****     else
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 227


4127:../../Source/Kernel/rme_kernel.c ****     {
4128:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4129:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4130:../../Source/Kernel/rme_kernel.c ****     }
4131:../../Source/Kernel/rme_kernel.c ****     
4132:../../Source/Kernel/rme_kernel.c ****     /* Round the marking to RME_KOM_SLOT_ORDER boundary, and rely on compiler for optimization */
4133:../../Source/Kernel/rme_kernel.c ****     Start=(Kaddr-RME_KOM_VA_BASE)>>RME_KOM_SLOT_ORDER;
 8721              		.loc 1 4133 17
 8722 002c 20301BE5 		ldr	r3, [fp, #-32]
 8723 0030 7F3483E2 		add	r3, r3, #2130706432
 8724              		.loc 1 4133 10
 8725 0034 2332A0E1 		lsr	r3, r3, #4
 8726 0038 0C300BE5 		str	r3, [fp, #-12]
4134:../../Source/Kernel/rme_kernel.c ****     Mask_Begin=RME_MASK_BEGIN(Start&RME_MASK_END(RME_WORD_ORDER-1U));
 8727              		.loc 1 4134 16
 8728 003c 0C301BE5 		ldr	r3, [fp, #-12]
 8729 0040 1F3003E2 		and	r3, r3, #31
 8730              		.loc 1 4134 15
 8731 0044 0020E0E3 		mvn	r2, #0
 8732 0048 1233A0E1 		lsl	r3, r2, r3
 8733 004c 10300BE5 		str	r3, [fp, #-16]
4135:../../Source/Kernel/rme_kernel.c ****     Start=Start>>RME_WORD_ORDER;
 8734              		.loc 1 4135 10
 8735 0050 0C301BE5 		ldr	r3, [fp, #-12]
 8736 0054 A332A0E1 		lsr	r3, r3, #5
 8737 0058 0C300BE5 		str	r3, [fp, #-12]
4136:../../Source/Kernel/rme_kernel.c ****     
4137:../../Source/Kernel/rme_kernel.c ****     End=(Kaddr+Size-1U-RME_KOM_VA_BASE)>>RME_KOM_SLOT_ORDER;
 8738              		.loc 1 4137 15
 8739 005c 20201BE5 		ldr	r2, [fp, #-32]
 8740 0060 24301BE5 		ldr	r3, [fp, #-36]
 8741 0064 033082E0 		add	r3, r2, r3
 8742              		.loc 1 4137 23
 8743 0068 7F3483E2 		add	r3, r3, #2130706432
 8744 006c 013043E2 		sub	r3, r3, #1
 8745              		.loc 1 4137 8
 8746 0070 2332A0E1 		lsr	r3, r3, #4
 8747 0074 14300BE5 		str	r3, [fp, #-20]
4138:../../Source/Kernel/rme_kernel.c ****     Mask_End=RME_MASK_END(End&RME_MASK_END(RME_WORD_ORDER-1U));
 8748              		.loc 1 4138 14
 8749 0078 14301BE5 		ldr	r3, [fp, #-20]
 8750 007c 0330E0E1 		mvn	r3, r3
 8751 0080 1F3003E2 		and	r3, r3, #31
 8752              		.loc 1 4138 13
 8753 0084 0020E0E3 		mvn	r2, #0
 8754 0088 3233A0E1 		lsr	r3, r2, r3
 8755 008c 18300BE5 		str	r3, [fp, #-24]
4139:../../Source/Kernel/rme_kernel.c ****     End=End>>RME_WORD_ORDER;
 8756              		.loc 1 4139 8
 8757 0090 14301BE5 		ldr	r3, [fp, #-20]
 8758 0094 A332A0E1 		lsr	r3, r3, #5
 8759 0098 14300BE5 		str	r3, [fp, #-20]
4140:../../Source/Kernel/rme_kernel.c ****     
4141:../../Source/Kernel/rme_kernel.c ****     /* See if the start and end are in the same word */
4142:../../Source/Kernel/rme_kernel.c ****     if(Start==End)
 8760              		.loc 1 4142 7
 8761 009c 0C201BE5 		ldr	r2, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 228


 8762 00a0 14301BE5 		ldr	r3, [fp, #-20]
 8763 00a4 030052E1 		cmp	r2, r3
 8764 00a8 1A00001A 		bne	.L562
4143:../../Source/Kernel/rme_kernel.c ****     {
4144:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4145:../../Source/Kernel/rme_kernel.c **** 
4146:../../Source/Kernel/rme_kernel.c ****         /* This address range is not fully populated */
4147:../../Source/Kernel/rme_kernel.c ****         if((RME_KOT_VA_BASE[Start]&(Mask_Begin&Mask_End))!=(Mask_Begin&Mask_End))
 8765              		.loc 1 4147 28
 8766 00ac 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8767 00b0 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8768 00b4 0C201BE5 		ldr	r2, [fp, #-12]
 8769 00b8 022193E7 		ldr	r2, [r3, r2, lsl #2]
 8770              		.loc 1 4147 47
 8771 00bc 10101BE5 		ldr	r1, [fp, #-16]
 8772 00c0 18301BE5 		ldr	r3, [fp, #-24]
 8773 00c4 013003E0 		and	r3, r3, r1
 8774              		.loc 1 4147 35
 8775 00c8 032002E0 		and	r2, r2, r3
 8776              		.loc 1 4147 71
 8777 00cc 10101BE5 		ldr	r1, [fp, #-16]
 8778 00d0 18301BE5 		ldr	r3, [fp, #-24]
 8779 00d4 013003E0 		and	r3, r3, r1
 8780              		.loc 1 4147 11
 8781 00d8 030052E1 		cmp	r2, r3
 8782 00dc 0100000A 		beq	.L563
4148:../../Source/Kernel/rme_kernel.c ****         {
4149:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4150:../../Source/Kernel/rme_kernel.c **** 
4151:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8783              		.loc 1 4151 20
 8784 00e0 0030E0E3 		mvn	r3, #0
 8785 00e4 5B0000EA 		b	.L561
 8786              	.L563:
4152:../../Source/Kernel/rme_kernel.c ****         }
4153:../../Source/Kernel/rme_kernel.c ****         else
4154:../../Source/Kernel/rme_kernel.c ****         {
4155:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4156:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4157:../../Source/Kernel/rme_kernel.c ****         }
4158:../../Source/Kernel/rme_kernel.c **** 
4159:../../Source/Kernel/rme_kernel.c ****         /* Check done, do the unmarking - need atomic operations */
4160:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_AND(&(RME_KOT_VA_BASE[Start]),~(Mask_Begin&Mask_End));
 8787              		.loc 1 4160 9
 8788 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 8789 00ec 0321A0E1 		lsl	r2, r3, #2
 8790 00f0 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8791 00f4 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8792 00f8 030082E0 		add	r0, r2, r3
 8793 00fc 10201BE5 		ldr	r2, [fp, #-16]
 8794 0100 18301BE5 		ldr	r3, [fp, #-24]
 8795 0104 023003E0 		and	r3, r3, r2
 8796 0108 0330E0E1 		mvn	r3, r3
 8797 010c 0310A0E1 		mov	r1, r3
 8798 0110 FEFFFFEB 		bl	_RME_Fetch_And_Single
 8799 0114 4E0000EA 		b	.L564
 8800              	.L562:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 229


4161:../../Source/Kernel/rme_kernel.c ****     }
4162:../../Source/Kernel/rme_kernel.c ****     else
4163:../../Source/Kernel/rme_kernel.c ****     {
4164:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4165:../../Source/Kernel/rme_kernel.c **** 
4166:../../Source/Kernel/rme_kernel.c ****         /* Check the start */
4167:../../Source/Kernel/rme_kernel.c ****         if((RME_KOT_VA_BASE[Start]&Mask_Begin)!=Mask_Begin)
 8801              		.loc 1 4167 28
 8802 0118 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8803 011c 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8804 0120 0C201BE5 		ldr	r2, [fp, #-12]
 8805 0124 022193E7 		ldr	r2, [r3, r2, lsl #2]
 8806              		.loc 1 4167 35
 8807 0128 10301BE5 		ldr	r3, [fp, #-16]
 8808 012c 023003E0 		and	r3, r3, r2
 8809              		.loc 1 4167 11
 8810 0130 10201BE5 		ldr	r2, [fp, #-16]
 8811 0134 030052E1 		cmp	r2, r3
 8812 0138 0100000A 		beq	.L565
4168:../../Source/Kernel/rme_kernel.c ****         {
4169:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4170:../../Source/Kernel/rme_kernel.c **** 
4171:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8813              		.loc 1 4171 20
 8814 013c 0030E0E3 		mvn	r3, #0
 8815 0140 440000EA 		b	.L561
 8816              	.L565:
4172:../../Source/Kernel/rme_kernel.c ****         }
4173:../../Source/Kernel/rme_kernel.c ****         else
4174:../../Source/Kernel/rme_kernel.c ****         {
4175:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4176:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4177:../../Source/Kernel/rme_kernel.c ****         }
4178:../../Source/Kernel/rme_kernel.c ****         
4179:../../Source/Kernel/rme_kernel.c ****         /* Check the middle */
4180:../../Source/Kernel/rme_kernel.c ****         for(Count=Start+1U;Count<End-1U;Count++)
 8817              		.loc 1 4180 18
 8818 0144 0C301BE5 		ldr	r3, [fp, #-12]
 8819 0148 013083E2 		add	r3, r3, #1
 8820 014c 08300BE5 		str	r3, [fp, #-8]
 8821              		.loc 1 4180 9
 8822 0150 0A0000EA 		b	.L566
 8823              	.L568:
4181:../../Source/Kernel/rme_kernel.c ****         {
4182:../../Source/Kernel/rme_kernel.c ****             if(RME_KOT_VA_BASE[Count]!=RME_MASK_FULL)
 8824              		.loc 1 4182 31
 8825 0154 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8826 0158 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8827 015c 08201BE5 		ldr	r2, [fp, #-8]
 8828 0160 023193E7 		ldr	r3, [r3, r2, lsl #2]
 8829              		.loc 1 4182 15
 8830 0164 010073E3 		cmn	r3, #1
 8831 0168 0100000A 		beq	.L567
4183:../../Source/Kernel/rme_kernel.c ****             {
4184:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4185:../../Source/Kernel/rme_kernel.c **** 
4186:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_KOT_BMP;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 230


 8832              		.loc 1 4186 24
 8833 016c 0030E0E3 		mvn	r3, #0
 8834 0170 380000EA 		b	.L561
 8835              	.L567:
4180:../../Source/Kernel/rme_kernel.c ****         {
 8836              		.loc 1 4180 46 discriminator 2
 8837 0174 08301BE5 		ldr	r3, [fp, #-8]
 8838 0178 013083E2 		add	r3, r3, #1
 8839 017c 08300BE5 		str	r3, [fp, #-8]
 8840              	.L566:
4180:../../Source/Kernel/rme_kernel.c ****         {
 8841              		.loc 1 4180 37 discriminator 1
 8842 0180 14301BE5 		ldr	r3, [fp, #-20]
 8843 0184 013043E2 		sub	r3, r3, #1
4180:../../Source/Kernel/rme_kernel.c ****         {
 8844              		.loc 1 4180 33 discriminator 1
 8845 0188 08201BE5 		ldr	r2, [fp, #-8]
 8846 018c 030052E1 		cmp	r2, r3
 8847 0190 EFFFFF3A 		bcc	.L568
4187:../../Source/Kernel/rme_kernel.c ****             }
4188:../../Source/Kernel/rme_kernel.c ****             else
4189:../../Source/Kernel/rme_kernel.c ****             {
4190:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
4191:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
4192:../../Source/Kernel/rme_kernel.c ****             }
4193:../../Source/Kernel/rme_kernel.c ****         }
4194:../../Source/Kernel/rme_kernel.c **** 
4195:../../Source/Kernel/rme_kernel.c ****         /* Check the end */
4196:../../Source/Kernel/rme_kernel.c ****         if((RME_KOT_VA_BASE[End]&Mask_End)!=Mask_End)
 8848              		.loc 1 4196 28
 8849 0194 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8850 0198 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8851 019c 14201BE5 		ldr	r2, [fp, #-20]
 8852 01a0 022193E7 		ldr	r2, [r3, r2, lsl #2]
 8853              		.loc 1 4196 33
 8854 01a4 18301BE5 		ldr	r3, [fp, #-24]
 8855 01a8 023003E0 		and	r3, r3, r2
 8856              		.loc 1 4196 11
 8857 01ac 18201BE5 		ldr	r2, [fp, #-24]
 8858 01b0 030052E1 		cmp	r2, r3
 8859 01b4 0100000A 		beq	.L569
4197:../../Source/Kernel/rme_kernel.c ****         {
4198:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4199:../../Source/Kernel/rme_kernel.c **** 
4200:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_KOT_BMP;
 8860              		.loc 1 4200 20
 8861 01b8 0030E0E3 		mvn	r3, #0
 8862 01bc 250000EA 		b	.L561
 8863              	.L569:
4201:../../Source/Kernel/rme_kernel.c ****         }
4202:../../Source/Kernel/rme_kernel.c ****         else
4203:../../Source/Kernel/rme_kernel.c ****         {
4204:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4205:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4206:../../Source/Kernel/rme_kernel.c ****         }
4207:../../Source/Kernel/rme_kernel.c ****         
4208:../../Source/Kernel/rme_kernel.c ****         /* Erase the start - make it atomic */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 231


4209:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_AND(&(RME_KOT_VA_BASE[Start]),~Mask_Begin);
 8864              		.loc 1 4209 9
 8865 01c0 0C301BE5 		ldr	r3, [fp, #-12]
 8866 01c4 0321A0E1 		lsl	r2, r3, #2
 8867 01c8 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8868 01cc 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8869 01d0 032082E0 		add	r2, r2, r3
 8870 01d4 10301BE5 		ldr	r3, [fp, #-16]
 8871 01d8 0330E0E1 		mvn	r3, r3
 8872 01dc 0310A0E1 		mov	r1, r3
 8873 01e0 0200A0E1 		mov	r0, r2
 8874 01e4 FEFFFFEB 		bl	_RME_Fetch_And_Single
4210:../../Source/Kernel/rme_kernel.c ****         /* Erase the middle - do not need atomics here */
4211:../../Source/Kernel/rme_kernel.c ****         for(Count=Start+1U;Count<End-1U;Count++)
 8875              		.loc 1 4211 18
 8876 01e8 0C301BE5 		ldr	r3, [fp, #-12]
 8877 01ec 013083E2 		add	r3, r3, #1
 8878 01f0 08300BE5 		str	r3, [fp, #-8]
 8879              		.loc 1 4211 9
 8880 01f4 070000EA 		b	.L570
 8881              	.L571:
4212:../../Source/Kernel/rme_kernel.c ****         {
4213:../../Source/Kernel/rme_kernel.c ****             RME_KOT_VA_BASE[Count]=0U;
 8882              		.loc 1 4213 35
 8883 01f8 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8884 01fc 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8885 0200 08201BE5 		ldr	r2, [fp, #-8]
 8886 0204 0010A0E3 		mov	r1, #0
 8887 0208 021183E7 		str	r1, [r3, r2, lsl #2]
4211:../../Source/Kernel/rme_kernel.c ****         {
 8888              		.loc 1 4211 46 discriminator 3
 8889 020c 08301BE5 		ldr	r3, [fp, #-8]
 8890 0210 013083E2 		add	r3, r3, #1
 8891 0214 08300BE5 		str	r3, [fp, #-8]
 8892              	.L570:
4211:../../Source/Kernel/rme_kernel.c ****         {
 8893              		.loc 1 4211 37 discriminator 1
 8894 0218 14301BE5 		ldr	r3, [fp, #-20]
 8895 021c 013043E2 		sub	r3, r3, #1
4211:../../Source/Kernel/rme_kernel.c ****         {
 8896              		.loc 1 4211 33 discriminator 1
 8897 0220 08201BE5 		ldr	r2, [fp, #-8]
 8898 0224 030052E1 		cmp	r2, r3
 8899 0228 F2FFFF3A 		bcc	.L571
4214:../../Source/Kernel/rme_kernel.c ****         }
4215:../../Source/Kernel/rme_kernel.c ****         /* Erase the end - make it atomic */
4216:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_AND(&(RME_KOT_VA_BASE[End]),~Mask_End);
 8900              		.loc 1 4216 9
 8901 022c 14301BE5 		ldr	r3, [fp, #-20]
 8902 0230 0321A0E1 		lsl	r2, r3, #2
 8903 0234 003000E3 		movw	r3, #:lower16:RME_A7A_Kot
 8904 0238 003040E3 		movt	r3, #:upper16:RME_A7A_Kot
 8905 023c 032082E0 		add	r2, r2, r3
 8906 0240 18301BE5 		ldr	r3, [fp, #-24]
 8907 0244 0330E0E1 		mvn	r3, r3
 8908 0248 0310A0E1 		mov	r1, r3
 8909 024c 0200A0E1 		mov	r0, r2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 232


 8910 0250 FEFFFFEB 		bl	_RME_Fetch_And_Single
 8911              	.L564:
4217:../../Source/Kernel/rme_kernel.c ****     }
4218:../../Source/Kernel/rme_kernel.c **** 
4219:../../Source/Kernel/rme_kernel.c ****     return 0;
 8912              		.loc 1 4219 12
 8913 0254 0030A0E3 		mov	r3, #0
 8914              	.L561:
4220:../../Source/Kernel/rme_kernel.c **** }
 8915              		.loc 1 4220 1
 8916 0258 0300A0E1 		mov	r0, r3
 8917 025c 04D04BE2 		sub	sp, fp, #4
 8918              		.cfi_def_cfa 13, 8
 8919              		@ sp needed
 8920 0260 0088BDE8 		pop	{fp, pc}
 8921              		.cfi_endproc
 8922              	.LFE40:
 8924              		.section	.text._RME_Kom_Boot_Crt,"ax",%progbits
 8925              		.align	2
 8926              		.global	_RME_Kom_Boot_Crt
 8927              		.syntax unified
 8928              		.arm
 8930              	_RME_Kom_Boot_Crt:
 8931              	.LFB41:
4221:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kot_Erase ***********************************************/
4222:../../Source/Kernel/rme_kernel.c **** 
4223:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kom_Boot_Crt *************************************************
4224:../../Source/Kernel/rme_kernel.c **** Description : Create boot-time kernel memory capability. Kernel memory allow
4225:../../Source/Kernel/rme_kernel.c ****               you to create specific types of kernel objects in a specific 
4226:../../Source/Kernel/rme_kernel.c ****               kernel memory range. The initial kernel memory capability's
4227:../../Source/Kernel/rme_kernel.c ****               content is supplied by the kernel according to config.
4228:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
4229:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the captbl that may contain
4230:../../Source/Kernel/rme_kernel.c ****                                   the cap to kernel function.
4231:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4232:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kom - The capability to the kernel memory.
4233:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
4234:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Begin - The begin address of the kernel memory, aligned
4235:../../Source/Kernel/rme_kernel.c ****                                 to kotbl granularity.
4236:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t End - The end address of the kernel memory, aligned to
4237:../../Source/Kernel/rme_kernel.c ****                               kotbl granularity, then -1.
4238:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Flag - The operation flags for this kernel memory. Set
4239:../../Source/Kernel/rme_kernel.c ****                                acoording to your needs.
4240:../../Source/Kernel/rme_kernel.c **** Output      : None.
4241:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4242:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4243:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kom_Boot_Crt(struct RME_Cap_Cpt* Cpt,
4244:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
4245:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Kom,
4246:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Begin,
4247:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t End,
4248:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Flag)
4249:../../Source/Kernel/rme_kernel.c **** {
 8932              		.loc 1 4249 1
 8933              		.cfi_startproc
 8934              		@ args = 8, pretend = 0, frame = 40
 8935              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 233


 8936 0000 00482DE9 		push	{fp, lr}
 8937              		.cfi_def_cfa_offset 8
 8938              		.cfi_offset 11, -8
 8939              		.cfi_offset 14, -4
 8940 0004 04B08DE2 		add	fp, sp, #4
 8941              		.cfi_def_cfa 11, 4
 8942 0008 28D04DE2 		sub	sp, sp, #40
 8943 000c 20000BE5 		str	r0, [fp, #-32]
 8944 0010 24100BE5 		str	r1, [fp, #-36]
 8945 0014 28200BE5 		str	r2, [fp, #-40]
 8946 0018 2C300BE5 		str	r3, [fp, #-44]
4250:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
4251:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Kom* Kom_Crt;
4252:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Kom_Begin;
4253:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Kom_End;
4254:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4255:../../Source/Kernel/rme_kernel.c ****     
4256:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
4257:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 8947              		.loc 1 4257 5
 8948 001c 24301BE5 		ldr	r3, [fp, #-36]
 8949 0020 803003E2 		and	r3, r3, #128
 8950 0024 000053E3 		cmp	r3, #0
 8951 0028 1C00001A 		bne	.L573
 8952              		.loc 1 4257 5 is_stmt 0 discriminator 1
 8953 002c 20301BE5 		ldr	r3, [fp, #-32]
 8954 0030 142093E5 		ldr	r2, [r3, #20]
 8955 0034 24301BE5 		ldr	r3, [fp, #-36]
 8956 0038 030052E1 		cmp	r2, r3
 8957 003c 0100008A 		bhi	.L574
 8958              		.loc 1 4257 5 discriminator 3
 8959 0040 0230E0E3 		mvn	r3, #2
 8960              		.loc 1 4257 5
 8961 0044 9F0000EA 		b	.L575
 8962              	.L574:
 8963              		.loc 1 4257 5 discriminator 4
 8964 0048 24301BE5 		ldr	r3, [fp, #-36]
 8965 004c 8322A0E1 		lsl	r2, r3, #5
 8966 0050 20301BE5 		ldr	r3, [fp, #-32]
 8967 0054 0C3093E5 		ldr	r3, [r3, #12]
 8968 0058 033082E0 		add	r3, r2, r3
 8969 005c 08300BE5 		str	r3, [fp, #-8]
 8970 0060 08301BE5 		ldr	r3, [fp, #-8]
 8971 0064 0300A0E1 		mov	r0, r3
 8972 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 8973 006c 0C000BE5 		str	r0, [fp, #-12]
 8974              		.loc 1 4257 5 discriminator 1
 8975 0070 0C301BE5 		ldr	r3, [fp, #-12]
 8976 0074 FF3803E2 		and	r3, r3, #16711680
 8977 0078 020853E3 		cmp	r3, #131072
 8978 007c 0100001A 		bne	.L576
 8979              		.loc 1 4257 5 discriminator 5
 8980 0080 0830E0E3 		mvn	r3, #8
 8981              		.loc 1 4257 5
 8982 0084 8F0000EA 		b	.L575
 8983              	.L576:
 8984              		.loc 1 4257 5 discriminator 6
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 234


 8985 0088 0C301BE5 		ldr	r3, [fp, #-12]
 8986 008c 233CA0E1 		lsr	r3, r3, #24
 8987 0090 030053E3 		cmp	r3, #3
 8988 0094 3F00000A 		beq	.L577
 8989              		.loc 1 4257 5 discriminator 7
 8990 0098 0130E0E3 		mvn	r3, #1
 8991              		.loc 1 4257 5
 8992 009c 890000EA 		b	.L575
 8993              	.L573:
 8994              		.loc 1 4257 5 discriminator 2
 8995 00a0 24301BE5 		ldr	r3, [fp, #-36]
 8996 00a4 2324A0E1 		lsr	r2, r3, #8
 8997 00a8 20301BE5 		ldr	r3, [fp, #-32]
 8998 00ac 143093E5 		ldr	r3, [r3, #20]
 8999 00b0 030052E1 		cmp	r2, r3
 9000 00b4 0100003A 		bcc	.L578
 9001              		.loc 1 4257 5 discriminator 8
 9002 00b8 0230E0E3 		mvn	r3, #2
 9003              		.loc 1 4257 5
 9004 00bc 810000EA 		b	.L575
 9005              	.L578:
 9006              		.loc 1 4257 5 discriminator 9
 9007 00c0 24301BE5 		ldr	r3, [fp, #-36]
 9008 00c4 2334A0E1 		lsr	r3, r3, #8
 9009 00c8 8322A0E1 		lsl	r2, r3, #5
 9010 00cc 20301BE5 		ldr	r3, [fp, #-32]
 9011 00d0 0C3093E5 		ldr	r3, [r3, #12]
 9012 00d4 033082E0 		add	r3, r2, r3
 9013 00d8 08300BE5 		str	r3, [fp, #-8]
 9014 00dc 08301BE5 		ldr	r3, [fp, #-8]
 9015 00e0 0300A0E1 		mov	r0, r3
 9016 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 9017 00e8 0C000BE5 		str	r0, [fp, #-12]
 9018              		.loc 1 4257 5 discriminator 1
 9019 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 9020 00f0 FF3803E2 		and	r3, r3, #16711680
 9021 00f4 020853E3 		cmp	r3, #131072
 9022 00f8 0100001A 		bne	.L579
 9023              		.loc 1 4257 5 discriminator 10
 9024 00fc 0830E0E3 		mvn	r3, #8
 9025              		.loc 1 4257 5
 9026 0100 700000EA 		b	.L575
 9027              	.L579:
 9028              		.loc 1 4257 5 discriminator 11
 9029 0104 0C301BE5 		ldr	r3, [fp, #-12]
 9030 0108 233CA0E1 		lsr	r3, r3, #24
 9031 010c 030053E3 		cmp	r3, #3
 9032 0110 0100000A 		beq	.L580
 9033              		.loc 1 4257 5 discriminator 12
 9034 0114 0130E0E3 		mvn	r3, #1
 9035              		.loc 1 4257 5
 9036 0118 6A0000EA 		b	.L575
 9037              	.L580:
 9038              		.loc 1 4257 5 discriminator 13
 9039 011c 24301BE5 		ldr	r3, [fp, #-36]
 9040 0120 7F2003E2 		and	r2, r3, #127
 9041 0124 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 235


 9042 0128 143093E5 		ldr	r3, [r3, #20]
 9043 012c 030052E1 		cmp	r2, r3
 9044 0130 0100003A 		bcc	.L581
 9045              		.loc 1 4257 5 discriminator 14
 9046 0134 0230E0E3 		mvn	r3, #2
 9047              		.loc 1 4257 5
 9048 0138 620000EA 		b	.L575
 9049              	.L581:
 9050              		.loc 1 4257 5 discriminator 15
 9051 013c 24301BE5 		ldr	r3, [fp, #-36]
 9052 0140 7F3003E2 		and	r3, r3, #127
 9053 0144 8322A0E1 		lsl	r2, r3, #5
 9054 0148 08301BE5 		ldr	r3, [fp, #-8]
 9055 014c 0C3093E5 		ldr	r3, [r3, #12]
 9056 0150 033082E0 		add	r3, r2, r3
 9057 0154 08300BE5 		str	r3, [fp, #-8]
 9058 0158 08301BE5 		ldr	r3, [fp, #-8]
 9059 015c 0300A0E1 		mov	r0, r3
 9060 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 9061 0164 0C000BE5 		str	r0, [fp, #-12]
 9062              		.loc 1 4257 5 discriminator 1
 9063 0168 0C301BE5 		ldr	r3, [fp, #-12]
 9064 016c FF3803E2 		and	r3, r3, #16711680
 9065 0170 020853E3 		cmp	r3, #131072
 9066 0174 0100001A 		bne	.L582
 9067              		.loc 1 4257 5 discriminator 16
 9068 0178 0830E0E3 		mvn	r3, #8
 9069              		.loc 1 4257 5
 9070 017c 510000EA 		b	.L575
 9071              	.L582:
 9072              		.loc 1 4257 5 discriminator 17
 9073 0180 0C301BE5 		ldr	r3, [fp, #-12]
 9074 0184 233CA0E1 		lsr	r3, r3, #24
 9075 0188 030053E3 		cmp	r3, #3
 9076 018c 0100000A 		beq	.L577
 9077              		.loc 1 4257 5 discriminator 18
 9078 0190 0130E0E3 		mvn	r3, #1
 9079              		.loc 1 4257 5
 9080 0194 4B0000EA 		b	.L575
 9081              	.L577:
4258:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
4259:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
4260:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 9082              		.loc 1 4260 5 is_stmt 1
 9083 0198 08301BE5 		ldr	r3, [fp, #-8]
 9084 019c 083093E5 		ldr	r3, [r3, #8]
 9085 01a0 013003E2 		and	r3, r3, #1
 9086 01a4 000053E3 		cmp	r3, #0
 9087 01a8 0100001A 		bne	.L583
 9088              		.loc 1 4260 5 is_stmt 0 discriminator 1
 9089 01ac 0630E0E3 		mvn	r3, #6
 9090              		.loc 1 4260 5
 9091 01b0 440000EA 		b	.L575
 9092              	.L583:
4261:../../Source/Kernel/rme_kernel.c **** 
4262:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
4263:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Kom,struct RME_Cap_Kom*,Kom_Crt);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 236


 9093              		.loc 1 4263 5 is_stmt 1
 9094 01b4 08301BE5 		ldr	r3, [fp, #-8]
 9095 01b8 142093E5 		ldr	r2, [r3, #20]
 9096 01bc 28301BE5 		ldr	r3, [fp, #-40]
 9097 01c0 030052E1 		cmp	r2, r3
 9098 01c4 0100008A 		bhi	.L584
 9099              		.loc 1 4263 5 is_stmt 0 discriminator 1
 9100 01c8 0230E0E3 		mvn	r3, #2
 9101              		.loc 1 4263 5
 9102 01cc 3D0000EA 		b	.L575
 9103              	.L584:
 9104              		.loc 1 4263 5 discriminator 2
 9105 01d0 28301BE5 		ldr	r3, [fp, #-40]
 9106 01d4 8322A0E1 		lsl	r2, r3, #5
 9107 01d8 08301BE5 		ldr	r3, [fp, #-8]
 9108 01dc 0C3093E5 		ldr	r3, [r3, #12]
 9109 01e0 033082E0 		add	r3, r2, r3
 9110 01e4 10300BE5 		str	r3, [fp, #-16]
4264:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
4265:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Kom_Crt);
 9111              		.loc 1 4265 5 is_stmt 1
 9112 01e8 10301BE5 		ldr	r3, [fp, #-16]
 9113 01ec 0128A0E3 		mov	r2, #65536
 9114 01f0 0010A0E3 		mov	r1, #0
 9115 01f4 0300A0E1 		mov	r0, r3
 9116 01f8 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 9117 01fc 0030A0E1 		mov	r3, r0
 9118              		.loc 1 4265 5 is_stmt 0 discriminator 1
 9119 0200 000053E3 		cmp	r3, #0
 9120 0204 0100001A 		bne	.L585
 9121 0208 0430E0E3 		mvn	r3, #4
 9122              		.loc 1 4265 5
 9123 020c 2D0000EA 		b	.L575
 9124              	.L585:
 9125              		.loc 1 4265 5 discriminator 2
 9126 0210 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 9127 0214 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 9128 0218 002093E5 		ldr	r2, [r3]
 9129 021c 10301BE5 		ldr	r3, [fp, #-16]
 9130 0220 102083E5 		str	r2, [r3, #16]
4266:../../Source/Kernel/rme_kernel.c ****     
4267:../../Source/Kernel/rme_kernel.c ****     /* Align addresses */
4268:../../Source/Kernel/rme_kernel.c **** #if(RME_KOM_SLOT_ORDER>6U)
4269:../../Source/Kernel/rme_kernel.c ****     Kom_End=RME_ROUND_DOWN(End+1U,RME_KOM_SLOT_ORDER);
4270:../../Source/Kernel/rme_kernel.c ****     Kom_Begin=RME_ROUND_UP(Start,RME_KOM_SLOT_ORDER);
4271:../../Source/Kernel/rme_kernel.c **** #else
4272:../../Source/Kernel/rme_kernel.c ****     Kom_End=RME_ROUND_DOWN(End+1U,6U);
 9131              		.loc 1 4272 13 is_stmt 1
 9132 0224 04309BE5 		ldr	r3, [fp, #4]
 9133 0228 013083E2 		add	r3, r3, #1
 9134              		.loc 1 4272 12
 9135 022c 3F30C3E3 		bic	r3, r3, #63
 9136 0230 14300BE5 		str	r3, [fp, #-20]
4273:../../Source/Kernel/rme_kernel.c ****     Kom_Begin=RME_ROUND_UP(Begin,6U);
 9137              		.loc 1 4273 15
 9138 0234 2C301BE5 		ldr	r3, [fp, #-44]
 9139 0238 3F3083E2 		add	r3, r3, #63
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 237


 9140              		.loc 1 4273 14
 9141 023c 3F30C3E3 		bic	r3, r3, #63
 9142 0240 18300BE5 		str	r3, [fp, #-24]
4274:../../Source/Kernel/rme_kernel.c **** #endif
4275:../../Source/Kernel/rme_kernel.c **** 
4276:../../Source/Kernel/rme_kernel.c ****     /* Must at least allow creation of something */
4277:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Flag!=0U);
 9143              		.loc 1 4277 5
 9144 0244 08309BE5 		ldr	r3, [fp, #8]
 9145 0248 000053E3 		cmp	r3, #0
 9146 024c 0800001A 		bne	.L586
 9147              		.loc 1 4277 5 is_stmt 0 discriminator 1
 9148 0250 003000E3 		movw	r3, #:lower16:.LC6
 9149 0254 003040E3 		movt	r3, #:upper16:.LC6
 9150 0258 002000E3 		movw	r2, #:lower16:.LC7
 9151 025c 002040E3 		movt	r2, #:upper16:.LC7
 9152 0260 B51001E3 		movw	r1, #4277
 9153 0264 000000E3 		movw	r0, #:lower16:.LC8
 9154 0268 000040E3 		movt	r0, #:upper16:.LC8
 9155 026c FEFFFFEB 		bl	RME_Log
 9156              	.L587:
 9157              		.loc 1 4277 5
 9158 0270 FEFFFFEA 		b	.L587
 9159              	.L586:
4278:../../Source/Kernel/rme_kernel.c **** 
4279:../../Source/Kernel/rme_kernel.c ****     /* Header init */
4280:../../Source/Kernel/rme_kernel.c ****     Kom_Crt->Head.Root_Ref=1U;
 9160              		.loc 1 4280 27 is_stmt 1
 9161 0274 10301BE5 		ldr	r3, [fp, #-16]
 9162 0278 0120A0E3 		mov	r2, #1
 9163 027c 042083E5 		str	r2, [r3, #4]
4281:../../Source/Kernel/rme_kernel.c ****     Kom_Crt->Head.Object=0U;
 9164              		.loc 1 4281 25
 9165 0280 10301BE5 		ldr	r3, [fp, #-16]
 9166 0284 0020A0E3 		mov	r2, #0
 9167 0288 0C2083E5 		str	r2, [r3, #12]
4282:../../Source/Kernel/rme_kernel.c ****     Kom_Crt->Head.Flag=Flag;
 9168              		.loc 1 4282 23
 9169 028c 10301BE5 		ldr	r3, [fp, #-16]
 9170 0290 08209BE5 		ldr	r2, [fp, #8]
 9171 0294 082083E5 		str	r2, [r3, #8]
4283:../../Source/Kernel/rme_kernel.c ****     
4284:../../Source/Kernel/rme_kernel.c ****     /* Info init */
4285:../../Source/Kernel/rme_kernel.c ****     Kom_Crt->Begin=Kom_Begin;
 9172              		.loc 1 4285 19
 9173 0298 10301BE5 		ldr	r3, [fp, #-16]
 9174 029c 18201BE5 		ldr	r2, [fp, #-24]
 9175 02a0 142083E5 		str	r2, [r3, #20]
4286:../../Source/Kernel/rme_kernel.c ****     Kom_Crt->End=Kom_End-1U;
 9176              		.loc 1 4286 25
 9177 02a4 14301BE5 		ldr	r3, [fp, #-20]
 9178 02a8 012043E2 		sub	r2, r3, #1
 9179              		.loc 1 4286 17
 9180 02ac 10301BE5 		ldr	r3, [fp, #-16]
 9181 02b0 182083E5 		str	r2, [r3, #24]
4287:../../Source/Kernel/rme_kernel.c **** 
4288:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 238


4289:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Kom_Crt->Head.Type_Stat),
 9182              		.loc 1 4289 5
 9183 02b4 10301BE5 		ldr	r3, [fp, #-16]
 9184 02b8 0214A0E3 		mov	r1, #33554432
 9185 02bc 0300A0E1 		mov	r0, r3
 9186 02c0 FEFFFFEB 		bl	__RME_A7A_Write_Release
4290:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_KOM,
4291:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
4292:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
4293:../../Source/Kernel/rme_kernel.c **** 
4294:../../Source/Kernel/rme_kernel.c ****     return 0;
 9187              		.loc 1 4294 12
 9188 02c4 0030A0E3 		mov	r3, #0
 9189              	.L575:
4295:../../Source/Kernel/rme_kernel.c **** }
 9190              		.loc 1 4295 1
 9191 02c8 0300A0E1 		mov	r0, r3
 9192 02cc 04D04BE2 		sub	sp, fp, #4
 9193              		.cfi_def_cfa 13, 8
 9194              		@ sp needed
 9195 02d0 0088BDE8 		pop	{fp, pc}
 9196              		.cfi_endproc
 9197              	.LFE41:
 9199              		.section	.text._RME_CPU_Local_Init,"ax",%progbits
 9200              		.align	2
 9201              		.global	_RME_CPU_Local_Init
 9202              		.syntax unified
 9203              		.arm
 9205              	_RME_CPU_Local_Init:
 9206              	.LFB42:
4296:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kom_Boot_Crt ********************************************/
4297:../../Source/Kernel/rme_kernel.c **** 
4298:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_CPU_Local_Init ***********************************************
4299:../../Source/Kernel/rme_kernel.c **** Description : Initialize the CPU-local data structure.
4300:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_CPU_Local* Local - The pointer to the per-CPU values.
4301:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t CPUID - The CPUID of the CPU.
4302:../../Source/Kernel/rme_kernel.c **** Output      : None.
4303:../../Source/Kernel/rme_kernel.c **** Return      : None.
4304:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4305:../../Source/Kernel/rme_kernel.c **** void _RME_CPU_Local_Init(struct RME_CPU_Local* Local,
4306:../../Source/Kernel/rme_kernel.c ****                          rme_ptr_t CPUID)
4307:../../Source/Kernel/rme_kernel.c **** {
 9207              		.loc 1 4307 1
 9208              		.cfi_startproc
 9209              		@ args = 0, pretend = 0, frame = 16
 9210              		@ frame_needed = 1, uses_anonymous_args = 0
 9211 0000 00482DE9 		push	{fp, lr}
 9212              		.cfi_def_cfa_offset 8
 9213              		.cfi_offset 11, -8
 9214              		.cfi_offset 14, -4
 9215 0004 04B08DE2 		add	fp, sp, #4
 9216              		.cfi_def_cfa 11, 4
 9217 0008 10D04DE2 		sub	sp, sp, #16
 9218 000c 10000BE5 		str	r0, [fp, #-16]
 9219 0010 14100BE5 		str	r1, [fp, #-20]
4308:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Prio_Cnt;
4309:../../Source/Kernel/rme_kernel.c ****     
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 239


4310:../../Source/Kernel/rme_kernel.c ****     Local->CPUID=CPUID;
 9220              		.loc 1 4310 17
 9221 0014 10301BE5 		ldr	r3, [fp, #-16]
 9222 0018 14201BE5 		ldr	r2, [fp, #-20]
 9223 001c 002083E5 		str	r2, [r3]
4311:../../Source/Kernel/rme_kernel.c ****     Local->Thd_Cur=RME_NULL;
 9224              		.loc 1 4311 19
 9225 0020 10301BE5 		ldr	r3, [fp, #-16]
 9226 0024 0020A0E3 		mov	r2, #0
 9227 0028 042083E5 		str	r2, [r3, #4]
4312:../../Source/Kernel/rme_kernel.c ****     Local->Sig_Vct=RME_NULL;
 9228              		.loc 1 4312 19
 9229 002c 10301BE5 		ldr	r3, [fp, #-16]
 9230 0030 0020A0E3 		mov	r2, #0
 9231 0034 0C2083E5 		str	r2, [r3, #12]
4313:../../Source/Kernel/rme_kernel.c ****     Local->Sig_Tim=RME_NULL;
 9232              		.loc 1 4313 19
 9233 0038 10301BE5 		ldr	r3, [fp, #-16]
 9234 003c 0020A0E3 		mov	r2, #0
 9235 0040 082083E5 		str	r2, [r3, #8]
4314:../../Source/Kernel/rme_kernel.c ****     
4315:../../Source/Kernel/rme_kernel.c ****     /* Initialize the run-queue and bitmap */
4316:../../Source/Kernel/rme_kernel.c ****     for(Prio_Cnt=0U;Prio_Cnt<RME_PREEMPT_PRIO_NUM;Prio_Cnt++)
 9236              		.loc 1 4316 17
 9237 0044 0030A0E3 		mov	r3, #0
 9238 0048 08300BE5 		str	r3, [fp, #-8]
 9239              		.loc 1 4316 5
 9240 004c 100000EA 		b	.L589
 9241              	.L590:
4317:../../Source/Kernel/rme_kernel.c ****     {
4318:../../Source/Kernel/rme_kernel.c ****         Local->Run.Bitmap[Prio_Cnt>>RME_WORD_ORDER]=0U;
 9242              		.loc 1 4318 35
 9243 0050 08301BE5 		ldr	r3, [fp, #-8]
 9244 0054 A322A0E1 		lsr	r2, r3, #5
 9245              		.loc 1 4318 52
 9246 0058 10301BE5 		ldr	r3, [fp, #-16]
 9247 005c 042082E2 		add	r2, r2, #4
 9248 0060 0010A0E3 		mov	r1, #0
 9249 0064 021183E7 		str	r1, [r3, r2, lsl #2]
4319:../../Source/Kernel/rme_kernel.c ****         _RME_List_Crt(&(Local->Run.List[Prio_Cnt]));
 9250              		.loc 1 4319 9
 9251 0068 08301BE5 		ldr	r3, [fp, #-8]
 9252 006c 023083E2 		add	r3, r3, #2
 9253 0070 8331A0E1 		lsl	r3, r3, #3
 9254 0074 10201BE5 		ldr	r2, [fp, #-16]
 9255 0078 033082E0 		add	r3, r2, r3
 9256 007c 043083E2 		add	r3, r3, #4
 9257 0080 0300A0E1 		mov	r0, r3
 9258 0084 FEFFFFEB 		bl	_RME_List_Crt
4316:../../Source/Kernel/rme_kernel.c ****     {
 9259              		.loc 1 4316 59 discriminator 3
 9260 0088 08301BE5 		ldr	r3, [fp, #-8]
 9261 008c 013083E2 		add	r3, r3, #1
 9262 0090 08300BE5 		str	r3, [fp, #-8]
 9263              	.L589:
4316:../../Source/Kernel/rme_kernel.c ****     {
 9264              		.loc 1 4316 29 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 240


 9265 0094 08301BE5 		ldr	r3, [fp, #-8]
 9266 0098 1F0053E3 		cmp	r3, #31
 9267 009c EBFFFF9A 		bls	.L590
4320:../../Source/Kernel/rme_kernel.c ****     }
4321:../../Source/Kernel/rme_kernel.c **** }
 9268              		.loc 1 4321 1
 9269 00a0 00F020E3 		nop
 9270 00a4 00F020E3 		nop
 9271 00a8 04D04BE2 		sub	sp, fp, #4
 9272              		.cfi_def_cfa 13, 8
 9273              		@ sp needed
 9274 00ac 0088BDE8 		pop	{fp, pc}
 9275              		.cfi_endproc
 9276              	.LFE42:
 9278              		.section	.rodata
 9279 0075 000000   		.align	2
 9280              	.LC9:
 9281 0078 41747465 		.ascii	"Attempted to kill init thread.\000"
 9281      6D707465 
 9281      6420746F 
 9281      206B696C 
 9281      6C20696E 
 9282              		.section	.text._RME_Thd_Fatal,"ax",%progbits
 9283              		.align	2
 9284              		.global	_RME_Thd_Fatal
 9285              		.syntax unified
 9286              		.arm
 9288              	_RME_Thd_Fatal:
 9289              	.LFB43:
4322:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_CPU_Local_Init ******************************************/
4323:../../Source/Kernel/rme_kernel.c **** 
4324:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Fatal ***************************************************
4325:../../Source/Kernel/rme_kernel.c **** Description : The fatal fault handler of RME. This handler will be called by
4326:../../Source/Kernel/rme_kernel.c ****               the ISR that handles the exceptions. This indicates that a fatal
4327:../../Source/Kernel/rme_kernel.c ****               exception has happened and we need to see if this thread is in a
4328:../../Source/Kernel/rme_kernel.c ****               synchronous invocation. If yes, we stop the invocation, and
4329:../../Source/Kernel/rme_kernel.c ****               possibly return a fault value to the old register set. If not, we
4330:../../Source/Kernel/rme_kernel.c ****               just kill the thread. If the thread is killed, a notification
4331:../../Source/Kernel/rme_kernel.c ****               will be sent to its scheduler. An Exec_Set is required to clear
4332:../../Source/Kernel/rme_kernel.c ****               the exception pending status of the thread.
4333:../../Source/Kernel/rme_kernel.c ****               Some processors may raise some exceptions that are difficult to
4334:../../Source/Kernel/rme_kernel.c ****               attribute to a particular thread, either due to the fact that
4335:../../Source/Kernel/rme_kernel.c ****               they are asynchronous, or they are derived from exception entry.
4336:../../Source/Kernel/rme_kernel.c ****               A good example is ARMv7-M: its autostacking feature derives fault
4337:../../Source/Kernel/rme_kernel.c ****               from exception entry, and some of its bus faults are asynchronous
4338:../../Source/Kernel/rme_kernel.c ****               and can cross context boundaries. RME requires that all these
4339:../../Source/Kernel/rme_kernel.c ****               exceptions be dropped rather than handled; or there will be 
4340:../../Source/Kernel/rme_kernel.c ****               integrity and availability compromises.
4341:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
4342:../../Source/Kernel/rme_kernel.c **** Output      : struct RME_Reg_Struct* Reg - The updated register set.
4343:../../Source/Kernel/rme_kernel.c **** Return      : None.
4344:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4345:../../Source/Kernel/rme_kernel.c **** void _RME_Thd_Fatal(struct RME_Reg_Struct* Reg)
4346:../../Source/Kernel/rme_kernel.c **** {
 9290              		.loc 1 4346 1
 9291              		.cfi_startproc
 9292              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 241


 9293              		@ frame_needed = 1, uses_anonymous_args = 0
 9294 0000 00482DE9 		push	{fp, lr}
 9295              		.cfi_def_cfa_offset 8
 9296              		.cfi_offset 11, -8
 9297              		.cfi_offset 14, -4
 9298 0004 04B08DE2 		add	fp, sp, #4
 9299              		.cfi_def_cfa 11, 4
 9300 0008 10D04DE2 		sub	sp, sp, #16
 9301 000c 10000BE5 		str	r0, [fp, #-16]
4347:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
4348:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
4349:../../Source/Kernel/rme_kernel.c ****     
4350:../../Source/Kernel/rme_kernel.c ****     /* Attempt to return from the invocation, from fault */
4351:../../Source/Kernel/rme_kernel.c ****     if(_RME_Inv_Ret(Reg,0U,1U)!=0)
 9302              		.loc 1 4351 8
 9303 0010 0120A0E3 		mov	r2, #1
 9304 0014 0010A0E3 		mov	r1, #0
 9305 0018 10001BE5 		ldr	r0, [fp, #-16]
 9306 001c FEFFFFEB 		bl	_RME_Inv_Ret
 9307 0020 0030A0E1 		mov	r3, r0
 9308              		.loc 1 4351 7 discriminator 1
 9309 0024 000053E3 		cmp	r3, #0
 9310 0028 2C00000A 		beq	.L597
4352:../../Source/Kernel/rme_kernel.c ****     {
4353:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4354:../../Source/Kernel/rme_kernel.c **** 
4355:../../Source/Kernel/rme_kernel.c ****         /* Return failure - report the exception */
4356:../../Source/Kernel/rme_kernel.c ****         Local=RME_CPU_LOCAL();
 9311              		.loc 1 4356 14
 9312 002c 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 9313 0030 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 9314 0034 08300BE5 		str	r3, [fp, #-8]
4357:../../Source/Kernel/rme_kernel.c ****         Thd_Cur=Local->Thd_Cur;
 9315              		.loc 1 4357 16
 9316 0038 08301BE5 		ldr	r3, [fp, #-8]
 9317 003c 043093E5 		ldr	r3, [r3, #4]
 9318 0040 0C300BE5 		str	r3, [fp, #-12]
4358:../../Source/Kernel/rme_kernel.c ****         
4359:../../Source/Kernel/rme_kernel.c ****         /* Init thread shall never have exceptions */
4360:../../Source/Kernel/rme_kernel.c ****         if(Thd_Cur->Sched.Slice==RME_THD_INIT_TIME)
 9319              		.loc 1 4360 26
 9320 0044 0C301BE5 		ldr	r3, [fp, #-12]
 9321 0048 183093E5 		ldr	r3, [r3, #24]
 9322              		.loc 1 4360 11
 9323 004c 060173E3 		cmn	r3, #-2147483647
 9324 0050 0B00001A 		bne	.L593
4361:../../Source/Kernel/rme_kernel.c ****         {
4362:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4363:../../Source/Kernel/rme_kernel.c ****             
4364:../../Source/Kernel/rme_kernel.c ****             RME_DBG_S("Attempted to kill init thread.");
 9325              		.loc 1 4364 13
 9326 0054 000000E3 		movw	r0, #:lower16:.LC9
 9327 0058 000040E3 		movt	r0, #:upper16:.LC9
 9328 005c FEFFFFEB 		bl	RME_Str_Print
4365:../../Source/Kernel/rme_kernel.c ****             RME_ASSERT(0U);
 9329              		.loc 1 4365 13 discriminator 1
 9330 0060 003000E3 		movw	r3, #:lower16:.LC6
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 242


 9331 0064 003040E3 		movt	r3, #:upper16:.LC6
 9332 0068 002000E3 		movw	r2, #:lower16:.LC7
 9333 006c 002040E3 		movt	r2, #:upper16:.LC7
 9334 0070 0D1101E3 		movw	r1, #4365
 9335 0074 000000E3 		movw	r0, #:lower16:.LC8
 9336 0078 000040E3 		movt	r0, #:upper16:.LC8
 9337 007c FEFFFFEB 		bl	RME_Log
 9338              	.L594:
 9339              		.loc 1 4365 13 is_stmt 0
 9340 0080 FEFFFFEA 		b	.L594
 9341              	.L593:
4366:../../Source/Kernel/rme_kernel.c ****         }
4367:../../Source/Kernel/rme_kernel.c ****         else
4368:../../Source/Kernel/rme_kernel.c ****         {
4369:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4370:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4371:../../Source/Kernel/rme_kernel.c ****         }
4372:../../Source/Kernel/rme_kernel.c ****         
4373:../../Source/Kernel/rme_kernel.c ****         /* We must be running at this point to trigger a synchronous exception */
4374:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(Thd_Cur->Sched.State==RME_THD_READY);
 9342              		.loc 1 4374 9 is_stmt 1
 9343 0084 0C301BE5 		ldr	r3, [fp, #-12]
 9344 0088 1C3093E5 		ldr	r3, [r3, #28]
 9345 008c 000053E3 		cmp	r3, #0
 9346 0090 0800000A 		beq	.L595
 9347              		.loc 1 4374 9 is_stmt 0 discriminator 1
 9348 0094 003000E3 		movw	r3, #:lower16:.LC6
 9349 0098 003040E3 		movt	r3, #:upper16:.LC6
 9350 009c 002000E3 		movw	r2, #:lower16:.LC7
 9351 00a0 002040E3 		movt	r2, #:upper16:.LC7
 9352 00a4 161101E3 		movw	r1, #4374
 9353 00a8 000000E3 		movw	r0, #:lower16:.LC8
 9354 00ac 000040E3 		movt	r0, #:upper16:.LC8
 9355 00b0 FEFFFFEB 		bl	RME_Log
 9356              	.L596:
 9357              		.loc 1 4374 9
 9358 00b4 FEFFFFEA 		b	.L596
 9359              	.L595:
4375:../../Source/Kernel/rme_kernel.c ****         
4376:../../Source/Kernel/rme_kernel.c ****         /* Remove from runqueue */
4377:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Del(Thd_Cur);
 9360              		.loc 1 4377 9 is_stmt 1
 9361 00b8 0C001BE5 		ldr	r0, [fp, #-12]
 9362 00bc FEFFFFEB 		bl	_RME_Run_Del
4378:../../Source/Kernel/rme_kernel.c ****         
4379:../../Source/Kernel/rme_kernel.c ****         /* Exception pending and notify parent */
4380:../../Source/Kernel/rme_kernel.c ****         Thd_Cur->Sched.State=RME_THD_EXCPEND;
 9363              		.loc 1 4380 29
 9364 00c0 0C301BE5 		ldr	r3, [fp, #-12]
 9365 00c4 0320A0E3 		mov	r2, #3
 9366 00c8 1C2083E5 		str	r2, [r3, #28]
4381:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Notif(Thd_Cur);
 9367              		.loc 1 4381 9
 9368 00cc 0C001BE5 		ldr	r0, [fp, #-12]
 9369 00d0 FEFFFFEB 		bl	_RME_Run_Notif
4382:../../Source/Kernel/rme_kernel.c ****         
4383:../../Source/Kernel/rme_kernel.c ****         /* All kernel send complete, now pick the highest priority thread to run */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 243


4384:../../Source/Kernel/rme_kernel.c ****         _RME_Kern_High(Reg,Local);
 9370              		.loc 1 4384 9
 9371 00d4 08101BE5 		ldr	r1, [fp, #-8]
 9372 00d8 10001BE5 		ldr	r0, [fp, #-16]
 9373 00dc FEFFFFEB 		bl	_RME_Kern_High
 9374              	.L597:
4385:../../Source/Kernel/rme_kernel.c ****     }
4386:../../Source/Kernel/rme_kernel.c ****     else
4387:../../Source/Kernel/rme_kernel.c ****     {
4388:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4389:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4390:../../Source/Kernel/rme_kernel.c ****     }
4391:../../Source/Kernel/rme_kernel.c **** }
 9375              		.loc 1 4391 1
 9376 00e0 00F020E3 		nop
 9377 00e4 04D04BE2 		sub	sp, fp, #4
 9378              		.cfi_def_cfa 13, 8
 9379              		@ sp needed
 9380 00e8 0088BDE8 		pop	{fp, pc}
 9381              		.cfi_endproc
 9382              	.LFE43:
 9384              		.section	.text._RME_Run_Ins,"ax",%progbits
 9385              		.align	2
 9386              		.syntax unified
 9387              		.arm
 9389              	_RME_Run_Ins:
 9390              	.LFB44:
4392:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Fatal ***********************************************/
4393:../../Source/Kernel/rme_kernel.c **** 
4394:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Run_Ins ******************************************************
4395:../../Source/Kernel/rme_kernel.c **** Description : Insert a thread into the runqueue. In this function we do not
4396:../../Source/Kernel/rme_kernel.c ****               check if the thread is on the current core, or is runnable,
4397:../../Source/Kernel/rme_kernel.c ****               because it should have been checked by someone else.
4398:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Thd_Struct* Thd - The thread to insert.
4399:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t CPUID - The cpu to consult.
4400:../../Source/Kernel/rme_kernel.c **** Output      : None.
4401:../../Source/Kernel/rme_kernel.c **** Return      : None.
4402:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4403:../../Source/Kernel/rme_kernel.c **** static void _RME_Run_Ins(struct RME_Thd_Struct* Thd)
4404:../../Source/Kernel/rme_kernel.c **** {
 9391              		.loc 1 4404 1
 9392              		.cfi_startproc
 9393              		@ args = 0, pretend = 0, frame = 16
 9394              		@ frame_needed = 1, uses_anonymous_args = 0
 9395 0000 00482DE9 		push	{fp, lr}
 9396              		.cfi_def_cfa_offset 8
 9397              		.cfi_offset 11, -8
 9398              		.cfi_offset 14, -4
 9399 0004 04B08DE2 		add	fp, sp, #4
 9400              		.cfi_def_cfa 11, 4
 9401 0008 10D04DE2 		sub	sp, sp, #16
 9402 000c 10000BE5 		str	r0, [fp, #-16]
4405:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Prio;
4406:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
4407:../../Source/Kernel/rme_kernel.c ****     
4408:../../Source/Kernel/rme_kernel.c ****     Prio=Thd->Sched.Prio;
 9403              		.loc 1 4408 9
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 244


 9404 0010 10301BE5 		ldr	r3, [fp, #-16]
 9405 0014 203093E5 		ldr	r3, [r3, #32]
 9406 0018 08300BE5 		str	r3, [fp, #-8]
4409:../../Source/Kernel/rme_kernel.c ****     Local=Thd->Sched.Local;
 9407              		.loc 1 4409 10
 9408 001c 10301BE5 		ldr	r3, [fp, #-16]
 9409 0020 143093E5 		ldr	r3, [r3, #20]
 9410 0024 0C300BE5 		str	r3, [fp, #-12]
4410:../../Source/Kernel/rme_kernel.c ****     
4411:../../Source/Kernel/rme_kernel.c ****     /* It can't be free or there must be an error */
4412:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Local!=RME_THD_FREE);
 9411              		.loc 1 4412 5
 9412 0028 0C301BE5 		ldr	r3, [fp, #-12]
 9413 002c 010073E3 		cmn	r3, #1
 9414 0030 0800001A 		bne	.L599
 9415              		.loc 1 4412 5 is_stmt 0 discriminator 1
 9416 0034 003000E3 		movw	r3, #:lower16:.LC6
 9417 0038 003040E3 		movt	r3, #:upper16:.LC6
 9418 003c 002000E3 		movw	r2, #:lower16:.LC7
 9419 0040 002040E3 		movt	r2, #:upper16:.LC7
 9420 0044 3C1101E3 		movw	r1, #4412
 9421 0048 000000E3 		movw	r0, #:lower16:.LC8
 9422 004c 000040E3 		movt	r0, #:upper16:.LC8
 9423 0050 FEFFFFEB 		bl	RME_Log
 9424              	.L600:
 9425              		.loc 1 4412 5
 9426 0054 FEFFFFEA 		b	.L600
 9427              	.L599:
4413:../../Source/Kernel/rme_kernel.c ****     
4414:../../Source/Kernel/rme_kernel.c ****     /* Insert this thread into the runqueue */
4415:../../Source/Kernel/rme_kernel.c ****     _RME_List_Ins(&(Thd->Sched.Run),
 9428              		.loc 1 4415 5 is_stmt 1
 9429 0058 10001BE5 		ldr	r0, [fp, #-16]
 9430 005c 0C201BE5 		ldr	r2, [fp, #-12]
 9431 0060 08301BE5 		ldr	r3, [fp, #-8]
 9432 0064 023083E2 		add	r3, r3, #2
 9433 0068 8331A0E1 		lsl	r3, r3, #3
 9434 006c 033082E0 		add	r3, r2, r3
 9435 0070 081093E5 		ldr	r1, [r3, #8]
 9436 0074 08301BE5 		ldr	r3, [fp, #-8]
 9437 0078 023083E2 		add	r3, r3, #2
 9438 007c 8331A0E1 		lsl	r3, r3, #3
 9439 0080 0C201BE5 		ldr	r2, [fp, #-12]
 9440 0084 033082E0 		add	r3, r2, r3
 9441 0088 043083E2 		add	r3, r3, #4
 9442 008c 0320A0E1 		mov	r2, r3
 9443 0090 FEFFFFEB 		bl	_RME_List_Ins
4416:../../Source/Kernel/rme_kernel.c ****                   Local->Run.List[Prio].Prev,
4417:../../Source/Kernel/rme_kernel.c ****                   &(Local->Run.List[Prio]));
4418:../../Source/Kernel/rme_kernel.c ****     
4419:../../Source/Kernel/rme_kernel.c ****     /* Set the bit in the bitmap */
4420:../../Source/Kernel/rme_kernel.c ****     RME_BITMAP_SET(Local->Run.Bitmap,Prio);
 9444              		.loc 1 4420 5
 9445 0094 08301BE5 		ldr	r3, [fp, #-8]
 9446 0098 A322A0E1 		lsr	r2, r3, #5
 9447 009c 0C301BE5 		ldr	r3, [fp, #-12]
 9448 00a0 042082E2 		add	r2, r2, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 245


 9449 00a4 021193E7 		ldr	r1, [r3, r2, lsl #2]
 9450 00a8 08301BE5 		ldr	r3, [fp, #-8]
 9451 00ac 1F3003E2 		and	r3, r3, #31
 9452 00b0 0120A0E3 		mov	r2, #1
 9453 00b4 1233A0E1 		lsl	r3, r2, r3
 9454 00b8 08201BE5 		ldr	r2, [fp, #-8]
 9455 00bc A222A0E1 		lsr	r2, r2, #5
 9456 00c0 031081E1 		orr	r1, r1, r3
 9457 00c4 0C301BE5 		ldr	r3, [fp, #-12]
 9458 00c8 042082E2 		add	r2, r2, #4
 9459 00cc 021183E7 		str	r1, [r3, r2, lsl #2]
4421:../../Source/Kernel/rme_kernel.c **** }
 9460              		.loc 1 4421 1
 9461 00d0 00F020E3 		nop
 9462 00d4 04D04BE2 		sub	sp, fp, #4
 9463              		.cfi_def_cfa 13, 8
 9464              		@ sp needed
 9465 00d8 0088BDE8 		pop	{fp, pc}
 9466              		.cfi_endproc
 9467              	.LFE44:
 9469              		.section	.text._RME_Run_Del,"ax",%progbits
 9470              		.align	2
 9471              		.syntax unified
 9472              		.arm
 9474              	_RME_Run_Del:
 9475              	.LFB45:
4422:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Run_Ins *************************************************/
4423:../../Source/Kernel/rme_kernel.c **** 
4424:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Run_Del ******************************************************
4425:../../Source/Kernel/rme_kernel.c **** Description : Delete a thread from the runqueue.
4426:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Thd_Struct* Thd - The thread to delete.
4427:../../Source/Kernel/rme_kernel.c **** Output      : None.
4428:../../Source/Kernel/rme_kernel.c **** Return      : None.
4429:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4430:../../Source/Kernel/rme_kernel.c **** static void _RME_Run_Del(struct RME_Thd_Struct* Thd)
4431:../../Source/Kernel/rme_kernel.c **** {
 9476              		.loc 1 4431 1
 9477              		.cfi_startproc
 9478              		@ args = 0, pretend = 0, frame = 16
 9479              		@ frame_needed = 1, uses_anonymous_args = 0
 9480 0000 00482DE9 		push	{fp, lr}
 9481              		.cfi_def_cfa_offset 8
 9482              		.cfi_offset 11, -8
 9483              		.cfi_offset 14, -4
 9484 0004 04B08DE2 		add	fp, sp, #4
 9485              		.cfi_def_cfa 11, 4
 9486 0008 10D04DE2 		sub	sp, sp, #16
 9487 000c 10000BE5 		str	r0, [fp, #-16]
4432:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Prio;
4433:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
4434:../../Source/Kernel/rme_kernel.c ****     
4435:../../Source/Kernel/rme_kernel.c ****     Prio=Thd->Sched.Prio;
 9488              		.loc 1 4435 9
 9489 0010 10301BE5 		ldr	r3, [fp, #-16]
 9490 0014 203093E5 		ldr	r3, [r3, #32]
 9491 0018 08300BE5 		str	r3, [fp, #-8]
4436:../../Source/Kernel/rme_kernel.c ****     Local=Thd->Sched.Local;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 246


 9492              		.loc 1 4436 10
 9493 001c 10301BE5 		ldr	r3, [fp, #-16]
 9494 0020 143093E5 		ldr	r3, [r3, #20]
 9495 0024 0C300BE5 		str	r3, [fp, #-12]
4437:../../Source/Kernel/rme_kernel.c ****     /* It can't be free or there must be an error */
4438:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Local!=RME_THD_FREE);
 9496              		.loc 1 4438 5
 9497 0028 0C301BE5 		ldr	r3, [fp, #-12]
 9498 002c 010073E3 		cmn	r3, #1
 9499 0030 0800001A 		bne	.L602
 9500              		.loc 1 4438 5 is_stmt 0 discriminator 1
 9501 0034 003000E3 		movw	r3, #:lower16:.LC6
 9502 0038 003040E3 		movt	r3, #:upper16:.LC6
 9503 003c 002000E3 		movw	r2, #:lower16:.LC7
 9504 0040 002040E3 		movt	r2, #:upper16:.LC7
 9505 0044 561101E3 		movw	r1, #4438
 9506 0048 000000E3 		movw	r0, #:lower16:.LC8
 9507 004c 000040E3 		movt	r0, #:upper16:.LC8
 9508 0050 FEFFFFEB 		bl	RME_Log
 9509              	.L603:
 9510              		.loc 1 4438 5
 9511 0054 FEFFFFEA 		b	.L603
 9512              	.L602:
4439:../../Source/Kernel/rme_kernel.c ****     
4440:../../Source/Kernel/rme_kernel.c ****     /* Delete this thread from the runqueue */
4441:../../Source/Kernel/rme_kernel.c ****     _RME_List_Del(Thd->Sched.Run.Prev,Thd->Sched.Run.Next);
 9513              		.loc 1 4441 5 is_stmt 1
 9514 0058 10301BE5 		ldr	r3, [fp, #-16]
 9515 005c 042093E5 		ldr	r2, [r3, #4]
 9516 0060 10301BE5 		ldr	r3, [fp, #-16]
 9517 0064 003093E5 		ldr	r3, [r3]
 9518 0068 0310A0E1 		mov	r1, r3
 9519 006c 0200A0E1 		mov	r0, r2
 9520 0070 FEFFFFEB 		bl	_RME_List_Del
4442:../../Source/Kernel/rme_kernel.c ****     
4443:../../Source/Kernel/rme_kernel.c ****     /* See if there are any thread on this priority level */
4444:../../Source/Kernel/rme_kernel.c ****     if(Local->Run.List[Prio].Next==&(Local->Run.List[Prio]))
 9521              		.loc 1 4444 29
 9522 0074 0C201BE5 		ldr	r2, [fp, #-12]
 9523 0078 08301BE5 		ldr	r3, [fp, #-8]
 9524 007c 023083E2 		add	r3, r3, #2
 9525 0080 8331A0E1 		lsl	r3, r3, #3
 9526 0084 033082E0 		add	r3, r2, r3
 9527 0088 042093E5 		ldr	r2, [r3, #4]
 9528              		.loc 1 4444 36
 9529 008c 08301BE5 		ldr	r3, [fp, #-8]
 9530 0090 023083E2 		add	r3, r3, #2
 9531 0094 8331A0E1 		lsl	r3, r3, #3
 9532 0098 0C101BE5 		ldr	r1, [fp, #-12]
 9533 009c 033081E0 		add	r3, r1, r3
 9534 00a0 043083E2 		add	r3, r3, #4
 9535              		.loc 1 4444 7
 9536 00a4 030052E1 		cmp	r2, r3
 9537 00a8 0F00001A 		bne	.L605
4445:../../Source/Kernel/rme_kernel.c ****     {
4446:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4447:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 247


4448:../../Source/Kernel/rme_kernel.c ****         /* Nothing running, clear the bit in the bitmap */
4449:../../Source/Kernel/rme_kernel.c ****         RME_BITMAP_CLR(Local->Run.Bitmap,Prio);
 9538              		.loc 1 4449 9
 9539 00ac 08301BE5 		ldr	r3, [fp, #-8]
 9540 00b0 A322A0E1 		lsr	r2, r3, #5
 9541 00b4 0C301BE5 		ldr	r3, [fp, #-12]
 9542 00b8 042082E2 		add	r2, r2, #4
 9543 00bc 021193E7 		ldr	r1, [r3, r2, lsl #2]
 9544 00c0 08301BE5 		ldr	r3, [fp, #-8]
 9545 00c4 1F3003E2 		and	r3, r3, #31
 9546 00c8 0120A0E3 		mov	r2, #1
 9547 00cc 1233A0E1 		lsl	r3, r2, r3
 9548 00d0 0330E0E1 		mvn	r3, r3
 9549 00d4 08201BE5 		ldr	r2, [fp, #-8]
 9550 00d8 A222A0E1 		lsr	r2, r2, #5
 9551 00dc 031001E0 		and	r1, r1, r3
 9552 00e0 0C301BE5 		ldr	r3, [fp, #-12]
 9553 00e4 042082E2 		add	r2, r2, #4
 9554 00e8 021183E7 		str	r1, [r3, r2, lsl #2]
 9555              	.L605:
4450:../../Source/Kernel/rme_kernel.c ****     }
4451:../../Source/Kernel/rme_kernel.c ****     else
4452:../../Source/Kernel/rme_kernel.c ****     {
4453:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4454:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4455:../../Source/Kernel/rme_kernel.c ****     }
4456:../../Source/Kernel/rme_kernel.c **** }
 9556              		.loc 1 4456 1
 9557 00ec 00F020E3 		nop
 9558 00f0 04D04BE2 		sub	sp, fp, #4
 9559              		.cfi_def_cfa 13, 8
 9560              		@ sp needed
 9561 00f4 0088BDE8 		pop	{fp, pc}
 9562              		.cfi_endproc
 9563              	.LFE45:
 9565              		.section	.text._RME_Run_High,"ax",%progbits
 9566              		.align	2
 9567              		.syntax unified
 9568              		.arm
 9570              	_RME_Run_High:
 9571              	.LFB46:
4457:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Run_Del *************************************************/
4458:../../Source/Kernel/rme_kernel.c **** 
4459:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Run_High *****************************************************
4460:../../Source/Kernel/rme_kernel.c **** Description : Find the thread with the highest priority on the core.
4461:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_CPU_Local* Local - The CPU-local data structure.
4462:../../Source/Kernel/rme_kernel.c **** Output      : None.
4463:../../Source/Kernel/rme_kernel.c **** Return      : struct RME_Thd_Struct* - The thread returned.
4464:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4465:../../Source/Kernel/rme_kernel.c **** static struct RME_Thd_Struct* _RME_Run_High(struct RME_CPU_Local* Local)
4466:../../Source/Kernel/rme_kernel.c **** {
 9572              		.loc 1 4466 1
 9573              		.cfi_startproc
 9574              		@ args = 0, pretend = 0, frame = 16
 9575              		@ frame_needed = 1, uses_anonymous_args = 0
 9576 0000 00482DE9 		push	{fp, lr}
 9577              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 248


 9578              		.cfi_offset 11, -8
 9579              		.cfi_offset 14, -4
 9580 0004 04B08DE2 		add	fp, sp, #4
 9581              		.cfi_def_cfa 11, 4
 9582 0008 10D04DE2 		sub	sp, sp, #16
 9583 000c 10000BE5 		str	r0, [fp, #-16]
4467:../../Source/Kernel/rme_kernel.c ****     rme_cnt_t Count;
4468:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Prio;
4469:../../Source/Kernel/rme_kernel.c ****     
4470:../../Source/Kernel/rme_kernel.c ****     /* We start looking for preemption priority levels from the highest */
4471:../../Source/Kernel/rme_kernel.c ****     for(Count=(rme_cnt_t)(RME_PRIO_WORD_NUM-1U);Count>=0;Count--)
 9584              		.loc 1 4471 14
 9585 0010 0030A0E3 		mov	r3, #0
 9586 0014 08300BE5 		str	r3, [fp, #-8]
 9587              		.loc 1 4471 5
 9588 0018 080000EA 		b	.L607
 9589              	.L610:
4472:../../Source/Kernel/rme_kernel.c ****     {
4473:../../Source/Kernel/rme_kernel.c ****         if(Local->Run.Bitmap[Count]!=0U)
 9590              		.loc 1 4473 29
 9591 001c 10301BE5 		ldr	r3, [fp, #-16]
 9592 0020 08201BE5 		ldr	r2, [fp, #-8]
 9593 0024 042082E2 		add	r2, r2, #4
 9594 0028 023193E7 		ldr	r3, [r3, r2, lsl #2]
 9595              		.loc 1 4473 11
 9596 002c 000053E3 		cmp	r3, #0
 9597 0030 0600001A 		bne	.L614
4471:../../Source/Kernel/rme_kernel.c ****     {
 9598              		.loc 1 4471 63 discriminator 2
 9599 0034 08301BE5 		ldr	r3, [fp, #-8]
 9600 0038 013043E2 		sub	r3, r3, #1
 9601 003c 08300BE5 		str	r3, [fp, #-8]
 9602              	.L607:
4471:../../Source/Kernel/rme_kernel.c ****     {
 9603              		.loc 1 4471 54 discriminator 1
 9604 0040 08301BE5 		ldr	r3, [fp, #-8]
 9605 0044 000053E3 		cmp	r3, #0
 9606 0048 F3FFFFAA 		bge	.L610
 9607 004c 000000EA 		b	.L609
 9608              	.L614:
4474:../../Source/Kernel/rme_kernel.c ****         {
4475:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4476:../../Source/Kernel/rme_kernel.c ****             
4477:../../Source/Kernel/rme_kernel.c ****             break;
 9609              		.loc 1 4477 13
 9610 0050 00F020E3 		nop
 9611              	.L609:
4478:../../Source/Kernel/rme_kernel.c ****         }
4479:../../Source/Kernel/rme_kernel.c ****         else
4480:../../Source/Kernel/rme_kernel.c ****         {
4481:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
4482:../../Source/Kernel/rme_kernel.c ****             /* No action required */
4483:../../Source/Kernel/rme_kernel.c ****         }
4484:../../Source/Kernel/rme_kernel.c ****     }
4485:../../Source/Kernel/rme_kernel.c ****     
4486:../../Source/Kernel/rme_kernel.c ****     /* It must be possible to find one thread per core */
4487:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Count>=0);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 249


 9612              		.loc 1 4487 5
 9613 0054 08301BE5 		ldr	r3, [fp, #-8]
 9614 0058 000053E3 		cmp	r3, #0
 9615 005c 080000AA 		bge	.L611
 9616              		.loc 1 4487 5 is_stmt 0 discriminator 1
 9617 0060 003000E3 		movw	r3, #:lower16:.LC6
 9618 0064 003040E3 		movt	r3, #:upper16:.LC6
 9619 0068 002000E3 		movw	r2, #:lower16:.LC7
 9620 006c 002040E3 		movt	r2, #:upper16:.LC7
 9621 0070 871101E3 		movw	r1, #4487
 9622 0074 000000E3 		movw	r0, #:lower16:.LC8
 9623 0078 000040E3 		movt	r0, #:upper16:.LC8
 9624 007c FEFFFFEB 		bl	RME_Log
 9625              	.L612:
 9626              		.loc 1 4487 5
 9627 0080 FEFFFFEA 		b	.L612
 9628              	.L611:
4488:../../Source/Kernel/rme_kernel.c **** 
4489:../../Source/Kernel/rme_kernel.c ****     /* Get the first "1"'s position in the word */
4490:../../Source/Kernel/rme_kernel.c ****     Prio=RME_MSB_GET(Local->Run.Bitmap[Count]);
 9629              		.loc 1 4490 10 is_stmt 1
 9630 0084 10301BE5 		ldr	r3, [fp, #-16]
 9631 0088 08201BE5 		ldr	r2, [fp, #-8]
 9632 008c 042082E2 		add	r2, r2, #4
 9633 0090 023193E7 		ldr	r3, [r3, r2, lsl #2]
 9634 0094 0300A0E1 		mov	r0, r3
 9635 0098 FEFFFFEB 		bl	__RME_A7A_MSB_Get
 9636 009c 0C000BE5 		str	r0, [fp, #-12]
4491:../../Source/Kernel/rme_kernel.c ****     Prio+=((rme_ptr_t)Count)<<RME_WORD_ORDER;
 9637              		.loc 1 4491 29
 9638 00a0 08301BE5 		ldr	r3, [fp, #-8]
 9639 00a4 8332A0E1 		lsl	r3, r3, #5
 9640              		.loc 1 4491 9
 9641 00a8 0C201BE5 		ldr	r2, [fp, #-12]
 9642 00ac 033082E0 		add	r3, r2, r3
 9643 00b0 0C300BE5 		str	r3, [fp, #-12]
4492:../../Source/Kernel/rme_kernel.c **** 
4493:../../Source/Kernel/rme_kernel.c ****     /* Now there is something at this priority level. Get it and start to run */
4494:../../Source/Kernel/rme_kernel.c ****     return (struct RME_Thd_Struct*)(Local->Run.List[Prio].Next);
 9644              		.loc 1 4494 12
 9645 00b4 10201BE5 		ldr	r2, [fp, #-16]
 9646 00b8 0C301BE5 		ldr	r3, [fp, #-12]
 9647 00bc 023083E2 		add	r3, r3, #2
 9648 00c0 8331A0E1 		lsl	r3, r3, #3
 9649 00c4 033082E0 		add	r3, r2, r3
 9650 00c8 043093E5 		ldr	r3, [r3, #4]
4495:../../Source/Kernel/rme_kernel.c **** }
 9651              		.loc 1 4495 1
 9652 00cc 0300A0E1 		mov	r0, r3
 9653 00d0 04D04BE2 		sub	sp, fp, #4
 9654              		.cfi_def_cfa 13, 8
 9655              		@ sp needed
 9656 00d4 0088BDE8 		pop	{fp, pc}
 9657              		.cfi_endproc
 9658              	.LFE46:
 9660              		.section	.text._RME_Run_Notif,"ax",%progbits
 9661              		.align	2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 250


 9662              		.syntax unified
 9663              		.arm
 9665              	_RME_Run_Notif:
 9666              	.LFB47:
4496:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Run_High ************************************************/
4497:../../Source/Kernel/rme_kernel.c **** 
4498:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Run_Notif ****************************************************
4499:../../Source/Kernel/rme_kernel.c **** Description : Send a notification to the thread's parent, to notify that this 
4500:../../Source/Kernel/rme_kernel.c ****               thread is currently out of time, or have a fault.
4501:../../Source/Kernel/rme_kernel.c ****               This function includes kernel send, so we need to call 
4502:../../Source/Kernel/rme_kernel.c ****               _RME_Kern_High after this. The only exception being the
4503:../../Source/Kernel/rme_kernel.c ****               _RME_Thd_Swt system call, which we use a more optimized routine.
4504:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Thd_Struct* Thd - The thread to send notification for.
4505:../../Source/Kernel/rme_kernel.c **** Output      : None.
4506:../../Source/Kernel/rme_kernel.c **** Return      : None.
4507:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4508:../../Source/Kernel/rme_kernel.c **** static void _RME_Run_Notif(struct RME_Thd_Struct* Thd)
4509:../../Source/Kernel/rme_kernel.c **** {
 9667              		.loc 1 4509 1
 9668              		.cfi_startproc
 9669              		@ args = 0, pretend = 0, frame = 16
 9670              		@ frame_needed = 1, uses_anonymous_args = 0
 9671 0000 00482DE9 		push	{fp, lr}
 9672              		.cfi_def_cfa_offset 8
 9673              		.cfi_offset 11, -8
 9674              		.cfi_offset 14, -4
 9675 0004 04B08DE2 		add	fp, sp, #4
 9676              		.cfi_def_cfa 11, 4
 9677 0008 10D04DE2 		sub	sp, sp, #16
 9678 000c 10000BE5 		str	r0, [fp, #-16]
4510:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Sched_Thd;
4511:../../Source/Kernel/rme_kernel.c ****     
4512:../../Source/Kernel/rme_kernel.c ****     Sched_Thd=Thd->Sched.Sched_Thd;
 9679              		.loc 1 4512 14
 9680 0010 10301BE5 		ldr	r3, [fp, #-16]
 9681 0014 343093E5 		ldr	r3, [r3, #52]
 9682 0018 08300BE5 		str	r3, [fp, #-8]
4513:../../Source/Kernel/rme_kernel.c ****     
4514:../../Source/Kernel/rme_kernel.c ****     /* See if there is already a notification. If yes, do not do the send again */
4515:../../Source/Kernel/rme_kernel.c ****     if(Thd->Sched.Notif.Next==&(Thd->Sched.Notif))
 9683              		.loc 1 4515 24
 9684 001c 10301BE5 		ldr	r3, [fp, #-16]
 9685 0020 082093E5 		ldr	r2, [r3, #8]
 9686              		.loc 1 4515 31
 9687 0024 10301BE5 		ldr	r3, [fp, #-16]
 9688 0028 083083E2 		add	r3, r3, #8
 9689              		.loc 1 4515 7
 9690 002c 030052E1 		cmp	r2, r3
 9691 0030 0700001A 		bne	.L616
4516:../../Source/Kernel/rme_kernel.c ****     {
4517:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4518:../../Source/Kernel/rme_kernel.c **** 
4519:../../Source/Kernel/rme_kernel.c ****         _RME_List_Ins(&(Thd->Sched.Notif), 
 9692              		.loc 1 4519 9
 9693 0034 10301BE5 		ldr	r3, [fp, #-16]
 9694 0038 080083E2 		add	r0, r3, #8
 9695 003c 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 251


 9696 0040 401093E5 		ldr	r1, [r3, #64]
 9697 0044 08301BE5 		ldr	r3, [fp, #-8]
 9698 0048 3C3083E2 		add	r3, r3, #60
 9699 004c 0320A0E1 		mov	r2, r3
 9700 0050 FEFFFFEB 		bl	_RME_List_Ins
 9701              	.L616:
4520:../../Source/Kernel/rme_kernel.c ****                       Sched_Thd->Sched.Event.Prev,&(Sched_Thd->Sched.Event));
4521:../../Source/Kernel/rme_kernel.c ****     }
4522:../../Source/Kernel/rme_kernel.c ****     else
4523:../../Source/Kernel/rme_kernel.c ****     {
4524:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4525:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4526:../../Source/Kernel/rme_kernel.c ****     }
4527:../../Source/Kernel/rme_kernel.c **** 
4528:../../Source/Kernel/rme_kernel.c ****     /* If this guy have an endpoint, send to it */
4529:../../Source/Kernel/rme_kernel.c ****     if(Thd->Sched.Sched_Sig!=0U)
 9702              		.loc 1 4529 18
 9703 0054 10301BE5 		ldr	r3, [fp, #-16]
 9704 0058 383093E5 		ldr	r3, [r3, #56]
 9705              		.loc 1 4529 7
 9706 005c 000053E3 		cmp	r3, #0
 9707 0060 0300000A 		beq	.L618
4530:../../Source/Kernel/rme_kernel.c ****     {
4531:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4532:../../Source/Kernel/rme_kernel.c ****         _RME_Kern_Snd(Thd->Sched.Sched_Sig);
 9708              		.loc 1 4532 9
 9709 0064 10301BE5 		ldr	r3, [fp, #-16]
 9710 0068 383093E5 		ldr	r3, [r3, #56]
 9711 006c 0300A0E1 		mov	r0, r3
 9712 0070 FEFFFFEB 		bl	_RME_Kern_Snd
 9713              	.L618:
4533:../../Source/Kernel/rme_kernel.c ****     }
4534:../../Source/Kernel/rme_kernel.c ****     else
4535:../../Source/Kernel/rme_kernel.c ****     {
4536:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4537:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4538:../../Source/Kernel/rme_kernel.c ****     }
4539:../../Source/Kernel/rme_kernel.c **** }
 9714              		.loc 1 4539 1
 9715 0074 00F020E3 		nop
 9716 0078 04D04BE2 		sub	sp, fp, #4
 9717              		.cfi_def_cfa 13, 8
 9718              		@ sp needed
 9719 007c 0088BDE8 		pop	{fp, pc}
 9720              		.cfi_endproc
 9721              	.LFE47:
 9723              		.section	.text._RME_Thd_Pgt,"ax",%progbits
 9724              		.align	2
 9725              		.global	_RME_Thd_Pgt
 9726              		.syntax unified
 9727              		.arm
 9729              	_RME_Thd_Pgt:
 9730              	.LFB48:
4540:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Run_Notif ***********************************************/
4541:../../Source/Kernel/rme_kernel.c **** 
4542:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Pgt ******************************************************
4543:../../Source/Kernel/rme_kernel.c **** Description : Get a thread's page table. 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 252


4544:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Thd_Struct* Thd - The thread.
4545:../../Source/Kernel/rme_kernel.c **** Output      : None.
4546:../../Source/Kernel/rme_kernel.c **** Return      : struct RME_Cap_Pgt* / rme_ptr_t - The page table.
4547:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4548:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4549:../../Source/Kernel/rme_kernel.c **** struct RME_Cap_Pgt* _RME_Thd_Pgt(struct RME_Thd_Struct* Thd)
4550:../../Source/Kernel/rme_kernel.c **** #else
4551:../../Source/Kernel/rme_kernel.c **** rme_ptr_t _RME_Thd_Pgt(struct RME_Thd_Struct* Thd)
4552:../../Source/Kernel/rme_kernel.c **** #endif
4553:../../Source/Kernel/rme_kernel.c **** {
 9731              		.loc 1 4553 1
 9732              		.cfi_startproc
 9733              		@ args = 0, pretend = 0, frame = 16
 9734              		@ frame_needed = 1, uses_anonymous_args = 0
 9735              		@ link register save eliminated.
 9736 0000 04B02DE5 		str	fp, [sp, #-4]!
 9737              		.cfi_def_cfa_offset 4
 9738              		.cfi_offset 11, -4
 9739 0004 00B08DE2 		add	fp, sp, #0
 9740              		.cfi_def_cfa_register 11
 9741 0008 14D04DE2 		sub	sp, sp, #20
 9742 000c 10000BE5 		str	r0, [fp, #-16]
4554:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Inv_Top;
4555:../../Source/Kernel/rme_kernel.c ****     
4556:../../Source/Kernel/rme_kernel.c ****     Inv_Top=RME_INVSTK_TOP(Thd);
 9743              		.loc 1 4556 13
 9744 0010 10301BE5 		ldr	r3, [fp, #-16]
 9745 0014 4C2093E5 		ldr	r2, [r3, #76]
 9746 0018 10301BE5 		ldr	r3, [fp, #-16]
 9747 001c 4C3083E2 		add	r3, r3, #76
 9748 0020 030052E1 		cmp	r2, r3
 9749 0024 0200000A 		beq	.L620
 9750              		.loc 1 4556 13 is_stmt 0 discriminator 1
 9751 0028 10301BE5 		ldr	r3, [fp, #-16]
 9752 002c 4C3093E5 		ldr	r3, [r3, #76]
 9753 0030 000000EA 		b	.L621
 9754              	.L620:
 9755              		.loc 1 4556 13 discriminator 2
 9756 0034 0030A0E3 		mov	r3, #0
 9757              	.L621:
 9758              		.loc 1 4556 12 is_stmt 1 discriminator 4
 9759 0038 08300BE5 		str	r3, [fp, #-8]
4557:../../Source/Kernel/rme_kernel.c ****     
4558:../../Source/Kernel/rme_kernel.c ****     if(Inv_Top==RME_NULL)
 9760              		.loc 1 4558 7
 9761 003c 08301BE5 		ldr	r3, [fp, #-8]
 9762 0040 000053E3 		cmp	r3, #0
 9763 0044 0300001A 		bne	.L622
4559:../../Source/Kernel/rme_kernel.c ****     {
4560:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4561:../../Source/Kernel/rme_kernel.c **** 
4562:../../Source/Kernel/rme_kernel.c ****         return Thd->Sched.Prc->Pgt;
 9764              		.loc 1 4562 26
 9765 0048 10301BE5 		ldr	r3, [fp, #-16]
 9766 004c 2C3093E5 		ldr	r3, [r3, #44]
 9767              		.loc 1 4562 30
 9768 0050 183093E5 		ldr	r3, [r3, #24]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 253


 9769 0054 020000EA 		b	.L623
 9770              	.L622:
4563:../../Source/Kernel/rme_kernel.c ****     }
4564:../../Source/Kernel/rme_kernel.c ****     else
4565:../../Source/Kernel/rme_kernel.c ****     {
4566:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4567:../../Source/Kernel/rme_kernel.c **** 
4568:../../Source/Kernel/rme_kernel.c ****         return Inv_Top->Prc->Pgt;
 9771              		.loc 1 4568 23
 9772 0058 08301BE5 		ldr	r3, [fp, #-8]
 9773 005c 083093E5 		ldr	r3, [r3, #8]
 9774              		.loc 1 4568 28
 9775 0060 183093E5 		ldr	r3, [r3, #24]
 9776              	.L623:
4569:../../Source/Kernel/rme_kernel.c ****     }
4570:../../Source/Kernel/rme_kernel.c **** }
 9777              		.loc 1 4570 1
 9778 0064 0300A0E1 		mov	r0, r3
 9779 0068 00D08BE2 		add	sp, fp, #0
 9780              		.cfi_def_cfa_register 13
 9781              		@ sp needed
 9782 006c 04B09DE4 		ldr	fp, [sp], #4
 9783              		.cfi_restore 11
 9784              		.cfi_def_cfa_offset 0
 9785 0070 1EFF2FE1 		bx	lr
 9786              		.cfi_endproc
 9787              	.LFE48:
 9789              		.section	.text._RME_Run_Swt,"ax",%progbits
 9790              		.align	2
 9791              		.syntax unified
 9792              		.arm
 9794              	_RME_Run_Swt:
 9795              	.LFB49:
4571:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Pgt *************************************************/
4572:../../Source/Kernel/rme_kernel.c **** 
4573:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Run_Swt ******************************************************
4574:../../Source/Kernel/rme_kernel.c **** Description : Switch the register set and page table to another thread. 
4575:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
4576:../../Source/Kernel/rme_kernel.c ****               struct RME_Thd_Struct* Thd_Cur - The current thread.
4577:../../Source/Kernel/rme_kernel.c ****               struct RME_Thd_Struct* Thd_New - The next thread.
4578:../../Source/Kernel/rme_kernel.c **** Output      : None.
4579:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - Always 0.
4580:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4581:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Run_Swt(struct RME_Reg_Struct* Reg,
4582:../../Source/Kernel/rme_kernel.c ****                               struct RME_Thd_Struct* Thd_Cur, 
4583:../../Source/Kernel/rme_kernel.c ****                               struct RME_Thd_Struct* Thd_New)
4584:../../Source/Kernel/rme_kernel.c **** {
 9796              		.loc 1 4584 1
 9797              		.cfi_startproc
 9798              		@ args = 0, pretend = 0, frame = 32
 9799              		@ frame_needed = 1, uses_anonymous_args = 0
 9800 0000 00482DE9 		push	{fp, lr}
 9801              		.cfi_def_cfa_offset 8
 9802              		.cfi_offset 11, -8
 9803              		.cfi_offset 14, -4
 9804 0004 04B08DE2 		add	fp, sp, #4
 9805              		.cfi_def_cfa 11, 4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 254


 9806 0008 20D04DE2 		sub	sp, sp, #32
 9807 000c 18000BE5 		str	r0, [fp, #-24]
 9808 0010 1C100BE5 		str	r1, [fp, #-28]
 9809 0014 20200BE5 		str	r2, [fp, #-32]
4585:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4586:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Cur;
4587:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_New;
4588:../../Source/Kernel/rme_kernel.c **** #else
4589:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Pgt_Cur;
4590:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Pgt_New;
4591:../../Source/Kernel/rme_kernel.c **** #endif
4592:../../Source/Kernel/rme_kernel.c ****     struct RME_Reg_Struct* Reg_Cur;
4593:../../Source/Kernel/rme_kernel.c ****     struct RME_Reg_Struct* Reg_New;
4594:../../Source/Kernel/rme_kernel.c ****     
4595:../../Source/Kernel/rme_kernel.c ****     Reg_Cur=&(Thd_Cur->Ctx.Reg->Reg);
 9810              		.loc 1 4595 27
 9811 0018 1C301BE5 		ldr	r3, [fp, #-28]
 9812 001c 483093E5 		ldr	r3, [r3, #72]
 9813              		.loc 1 4595 12
 9814 0020 08300BE5 		str	r3, [fp, #-8]
4596:../../Source/Kernel/rme_kernel.c ****     Reg_New=&(Thd_New->Ctx.Reg->Reg);
 9815              		.loc 1 4596 27
 9816 0024 20301BE5 		ldr	r3, [fp, #-32]
 9817 0028 483093E5 		ldr	r3, [r3, #72]
 9818              		.loc 1 4596 12
 9819 002c 0C300BE5 		str	r3, [fp, #-12]
4597:../../Source/Kernel/rme_kernel.c ****     
4598:../../Source/Kernel/rme_kernel.c ****     /* Save register context */
4599:../../Source/Kernel/rme_kernel.c ****     __RME_Thd_Reg_Copy(Reg_Cur,Reg);
 9820              		.loc 1 4599 5
 9821 0030 18101BE5 		ldr	r1, [fp, #-24]
 9822 0034 08001BE5 		ldr	r0, [fp, #-8]
 9823 0038 FEFFFFEB 		bl	__RME_Thd_Reg_Copy
4600:../../Source/Kernel/rme_kernel.c ****     
4601:../../Source/Kernel/rme_kernel.c ****     /* If coprocessor is enabled, handle coprocessor context as well */
4602:../../Source/Kernel/rme_kernel.c **** #if(RME_COP_NUM!=0U)
4603:../../Source/Kernel/rme_kernel.c ****     __RME_Thd_Cop_Swap(RME_THD_ATTR(Thd_New->Ctx.Hyp_Attr),
4604:../../Source/Kernel/rme_kernel.c ****                        RME_THD_IS_HYP(Thd_New->Ctx.Hyp_Attr),
4605:../../Source/Kernel/rme_kernel.c ****                        Reg_New,Thd_New->Ctx.Reg->Cop,
4606:../../Source/Kernel/rme_kernel.c ****                        RME_THD_ATTR(Thd_Cur->Ctx.Hyp_Attr),
4607:../../Source/Kernel/rme_kernel.c ****                        RME_THD_IS_HYP(Thd_Cur->Ctx.Hyp_Attr),
4608:../../Source/Kernel/rme_kernel.c ****                        Reg_Cur,Thd_Cur->Ctx.Reg->Cop);
4609:../../Source/Kernel/rme_kernel.c **** #endif
4610:../../Source/Kernel/rme_kernel.c **** 
4611:../../Source/Kernel/rme_kernel.c ****     /* Load register context */
4612:../../Source/Kernel/rme_kernel.c ****     __RME_Thd_Reg_Copy(Reg,Reg_New);
 9824              		.loc 1 4612 5
 9825 003c 0C101BE5 		ldr	r1, [fp, #-12]
 9826 0040 18001BE5 		ldr	r0, [fp, #-24]
 9827 0044 FEFFFFEB 		bl	__RME_Thd_Reg_Copy
4613:../../Source/Kernel/rme_kernel.c **** 
4614:../../Source/Kernel/rme_kernel.c ****     /* Are we going to switch page tables? If yes, we change it now */
4615:../../Source/Kernel/rme_kernel.c ****     Pgt_Cur=_RME_Thd_Pgt(Thd_Cur);
 9828              		.loc 1 4615 13
 9829 0048 1C001BE5 		ldr	r0, [fp, #-28]
 9830 004c FEFFFFEB 		bl	_RME_Thd_Pgt
 9831 0050 10000BE5 		str	r0, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 255


4616:../../Source/Kernel/rme_kernel.c ****     Pgt_New=_RME_Thd_Pgt(Thd_New);
 9832              		.loc 1 4616 13
 9833 0054 20001BE5 		ldr	r0, [fp, #-32]
 9834 0058 FEFFFFEB 		bl	_RME_Thd_Pgt
 9835 005c 14000BE5 		str	r0, [fp, #-20]
4617:../../Source/Kernel/rme_kernel.c ****     
4618:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4619:../../Source/Kernel/rme_kernel.c ****     /* The page tables here must be root cap */
4620:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_CAP_IS_ROOT(Pgt_Cur)!=0U);
 9836              		.loc 1 4620 5
 9837 0060 10301BE5 		ldr	r3, [fp, #-16]
 9838 0064 003093E5 		ldr	r3, [r3]
 9839 0068 7330FFE6 		uxth	r3, r3
 9840 006c 000053E3 		cmp	r3, #0
 9841 0070 0800000A 		beq	.L625
 9842              		.loc 1 4620 5 is_stmt 0 discriminator 1
 9843 0074 003000E3 		movw	r3, #:lower16:.LC6
 9844 0078 003040E3 		movt	r3, #:upper16:.LC6
 9845 007c 002000E3 		movw	r2, #:lower16:.LC7
 9846 0080 002040E3 		movt	r2, #:upper16:.LC7
 9847 0084 0C1201E3 		movw	r1, #4620
 9848 0088 000000E3 		movw	r0, #:lower16:.LC8
 9849 008c 000040E3 		movt	r0, #:upper16:.LC8
 9850 0090 FEFFFFEB 		bl	RME_Log
 9851              	.L626:
 9852              		.loc 1 4620 5
 9853 0094 FEFFFFEA 		b	.L626
 9854              	.L625:
4621:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_CAP_IS_ROOT(Pgt_New)!=0U);
 9855              		.loc 1 4621 5 is_stmt 1
 9856 0098 14301BE5 		ldr	r3, [fp, #-20]
 9857 009c 003093E5 		ldr	r3, [r3]
 9858 00a0 7330FFE6 		uxth	r3, r3
 9859 00a4 000053E3 		cmp	r3, #0
 9860 00a8 0800000A 		beq	.L627
 9861              		.loc 1 4621 5 is_stmt 0 discriminator 1
 9862 00ac 003000E3 		movw	r3, #:lower16:.LC6
 9863 00b0 003040E3 		movt	r3, #:upper16:.LC6
 9864 00b4 002000E3 		movw	r2, #:lower16:.LC7
 9865 00b8 002040E3 		movt	r2, #:upper16:.LC7
 9866 00bc 0D1201E3 		movw	r1, #4621
 9867 00c0 000000E3 		movw	r0, #:lower16:.LC8
 9868 00c4 000040E3 		movt	r0, #:upper16:.LC8
 9869 00c8 FEFFFFEB 		bl	RME_Log
 9870              	.L628:
 9871              		.loc 1 4621 5
 9872 00cc FEFFFFEA 		b	.L628
 9873              	.L627:
4622:../../Source/Kernel/rme_kernel.c **** #endif
4623:../../Source/Kernel/rme_kernel.c ****     
4624:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4625:../../Source/Kernel/rme_kernel.c ****     if(RME_CAP_GETOBJ(Pgt_Cur,rme_ptr_t)!=RME_CAP_GETOBJ(Pgt_New,rme_ptr_t))
 9874              		.loc 1 4625 8 is_stmt 1
 9875 00d0 10301BE5 		ldr	r3, [fp, #-16]
 9876 00d4 0C2093E5 		ldr	r2, [r3, #12]
 9877              		.loc 1 4625 43
 9878 00d8 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 256


 9879 00dc 0C3093E5 		ldr	r3, [r3, #12]
 9880              		.loc 1 4625 7
 9881 00e0 030052E1 		cmp	r2, r3
 9882 00e4 0100000A 		beq	.L629
4626:../../Source/Kernel/rme_kernel.c **** #else
4627:../../Source/Kernel/rme_kernel.c ****     if(Pgt_Cur!=Pgt_New)
4628:../../Source/Kernel/rme_kernel.c **** #endif
4629:../../Source/Kernel/rme_kernel.c ****     {
4630:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4631:../../Source/Kernel/rme_kernel.c ****         
4632:../../Source/Kernel/rme_kernel.c ****         __RME_Pgt_Set(Pgt_New);
 9883              		.loc 1 4632 9
 9884 00e8 14001BE5 		ldr	r0, [fp, #-20]
 9885 00ec FEFFFFEB 		bl	__RME_Pgt_Set
 9886              	.L629:
4633:../../Source/Kernel/rme_kernel.c ****     }
4634:../../Source/Kernel/rme_kernel.c ****     else
4635:../../Source/Kernel/rme_kernel.c ****     {
4636:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4637:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4638:../../Source/Kernel/rme_kernel.c ****     }
4639:../../Source/Kernel/rme_kernel.c **** 
4640:../../Source/Kernel/rme_kernel.c ****     return 0;
 9887              		.loc 1 4640 12
 9888 00f0 0030A0E3 		mov	r3, #0
4641:../../Source/Kernel/rme_kernel.c **** }
 9889              		.loc 1 4641 1
 9890 00f4 0300A0E1 		mov	r0, r3
 9891 00f8 04D04BE2 		sub	sp, fp, #4
 9892              		.cfi_def_cfa 13, 8
 9893              		@ sp needed
 9894 00fc 0088BDE8 		pop	{fp, pc}
 9895              		.cfi_endproc
 9896              	.LFE49:
 9898              		.section	.text._RME_Prc_Boot_Crt,"ax",%progbits
 9899              		.align	2
 9900              		.global	_RME_Prc_Boot_Crt
 9901              		.syntax unified
 9902              		.arm
 9904              	_RME_Prc_Boot_Crt:
 9905              	.LFB50:
4642:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Run_Swt *************************************************/
4643:../../Source/Kernel/rme_kernel.c **** 
4644:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Prc_Boot_Crt *************************************************
4645:../../Source/Kernel/rme_kernel.c **** Description : Create a process. A process is in fact a protection domain
4646:../../Source/Kernel/rme_kernel.c ****               associated with a set of capabilities.
4647:../../Source/Kernel/rme_kernel.c ****               This function does not require a kernel memory capability, and is
4648:../../Source/Kernel/rme_kernel.c ****               only used to create the first process at boot-time.
4649:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
4650:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Crt - The capability to the capability table to
4651:../../Source/Kernel/rme_kernel.c ****                                       put this process capability in.
4652:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
4653:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability slot that you want this newly
4654:../../Source/Kernel/rme_kernel.c ****                                   created process capability to be in.
4655:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
4656:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
4657:../../Source/Kernel/rme_kernel.c ****                                   for this process.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 257


4658:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4659:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability to the page table to use for
4660:../../Source/Kernel/rme_kernel.c ****                                   this process.
4661:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4662:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raw_Pgt - Alternate user-supplied page table physical
4663:../../Source/Kernel/rme_kernel.c ****                                   address.
4664:../../Source/Kernel/rme_kernel.c **** Output      : None.
4665:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4666:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4667:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4668:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Prc_Boot_Crt(struct RME_Cap_Cpt* Cpt,
4669:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt_Crt,
4670:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Prc,
4671:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
4672:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Pgt)
4673:../../Source/Kernel/rme_kernel.c **** #else
4674:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Prc_Boot_Crt(struct RME_Cap_Cpt* Cpt,
4675:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt_Crt,
4676:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Prc,
4677:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
4678:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Raw_Pgt)
4679:../../Source/Kernel/rme_kernel.c **** #endif
4680:../../Source/Kernel/rme_kernel.c **** {
 9906              		.loc 1 4680 1
 9907              		.cfi_startproc
 9908              		@ args = 4, pretend = 0, frame = 48
 9909              		@ frame_needed = 1, uses_anonymous_args = 0
 9910 0000 00482DE9 		push	{fp, lr}
 9911              		.cfi_def_cfa_offset 8
 9912              		.cfi_offset 11, -8
 9913              		.cfi_offset 14, -4
 9914 0004 04B08DE2 		add	fp, sp, #4
 9915              		.cfi_def_cfa 11, 4
 9916 0008 30D04DE2 		sub	sp, sp, #48
 9917 000c 28000BE5 		str	r0, [fp, #-40]
 9918 0010 2C100BE5 		str	r1, [fp, #-44]
 9919 0014 30200BE5 		str	r2, [fp, #-48]
 9920 0018 34300BE5 		str	r3, [fp, #-52]
4681:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Crt;
4682:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
4683:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4684:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Op;
4685:../../Source/Kernel/rme_kernel.c **** #endif
4686:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Crt;
4687:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Prc_Cpt;
4688:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4689:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Prc_Pgt;
4690:../../Source/Kernel/rme_kernel.c **** #endif
4691:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4692:../../Source/Kernel/rme_kernel.c ****     
4693:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
4694:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Crt,RME_CAP_TYPE_CPT,
 9921              		.loc 1 4694 5
 9922 001c 2C301BE5 		ldr	r3, [fp, #-44]
 9923 0020 803003E2 		and	r3, r3, #128
 9924 0024 000053E3 		cmp	r3, #0
 9925 0028 1C00001A 		bne	.L632
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 258


 9926              		.loc 1 4694 5 is_stmt 0 discriminator 1
 9927 002c 28301BE5 		ldr	r3, [fp, #-40]
 9928 0030 142093E5 		ldr	r2, [r3, #20]
 9929 0034 2C301BE5 		ldr	r3, [fp, #-44]
 9930 0038 030052E1 		cmp	r2, r3
 9931 003c 0100008A 		bhi	.L633
 9932              		.loc 1 4694 5 discriminator 3
 9933 0040 0230E0E3 		mvn	r3, #2
 9934              		.loc 1 4694 5
 9935 0044 740100EA 		b	.L634
 9936              	.L633:
 9937              		.loc 1 4694 5 discriminator 4
 9938 0048 2C301BE5 		ldr	r3, [fp, #-44]
 9939 004c 8322A0E1 		lsl	r2, r3, #5
 9940 0050 28301BE5 		ldr	r3, [fp, #-40]
 9941 0054 0C3093E5 		ldr	r3, [r3, #12]
 9942 0058 033082E0 		add	r3, r2, r3
 9943 005c 08300BE5 		str	r3, [fp, #-8]
 9944 0060 08301BE5 		ldr	r3, [fp, #-8]
 9945 0064 0300A0E1 		mov	r0, r3
 9946 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 9947 006c 14000BE5 		str	r0, [fp, #-20]
 9948              		.loc 1 4694 5 discriminator 1
 9949 0070 14301BE5 		ldr	r3, [fp, #-20]
 9950 0074 FF3803E2 		and	r3, r3, #16711680
 9951 0078 020853E3 		cmp	r3, #131072
 9952 007c 0100001A 		bne	.L635
 9953              		.loc 1 4694 5 discriminator 5
 9954 0080 0830E0E3 		mvn	r3, #8
 9955              		.loc 1 4694 5
 9956 0084 640100EA 		b	.L634
 9957              	.L635:
 9958              		.loc 1 4694 5 discriminator 6
 9959 0088 14301BE5 		ldr	r3, [fp, #-20]
 9960 008c 233CA0E1 		lsr	r3, r3, #24
 9961 0090 030053E3 		cmp	r3, #3
 9962 0094 3F00000A 		beq	.L636
 9963              		.loc 1 4694 5 discriminator 7
 9964 0098 0130E0E3 		mvn	r3, #1
 9965              		.loc 1 4694 5
 9966 009c 5E0100EA 		b	.L634
 9967              	.L632:
 9968              		.loc 1 4694 5 discriminator 2
 9969 00a0 2C301BE5 		ldr	r3, [fp, #-44]
 9970 00a4 2324A0E1 		lsr	r2, r3, #8
 9971 00a8 28301BE5 		ldr	r3, [fp, #-40]
 9972 00ac 143093E5 		ldr	r3, [r3, #20]
 9973 00b0 030052E1 		cmp	r2, r3
 9974 00b4 0100003A 		bcc	.L637
 9975              		.loc 1 4694 5 discriminator 8
 9976 00b8 0230E0E3 		mvn	r3, #2
 9977              		.loc 1 4694 5
 9978 00bc 560100EA 		b	.L634
 9979              	.L637:
 9980              		.loc 1 4694 5 discriminator 9
 9981 00c0 2C301BE5 		ldr	r3, [fp, #-44]
 9982 00c4 2334A0E1 		lsr	r3, r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 259


 9983 00c8 8322A0E1 		lsl	r2, r3, #5
 9984 00cc 28301BE5 		ldr	r3, [fp, #-40]
 9985 00d0 0C3093E5 		ldr	r3, [r3, #12]
 9986 00d4 033082E0 		add	r3, r2, r3
 9987 00d8 08300BE5 		str	r3, [fp, #-8]
 9988 00dc 08301BE5 		ldr	r3, [fp, #-8]
 9989 00e0 0300A0E1 		mov	r0, r3
 9990 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 9991 00e8 14000BE5 		str	r0, [fp, #-20]
 9992              		.loc 1 4694 5 discriminator 1
 9993 00ec 14301BE5 		ldr	r3, [fp, #-20]
 9994 00f0 FF3803E2 		and	r3, r3, #16711680
 9995 00f4 020853E3 		cmp	r3, #131072
 9996 00f8 0100001A 		bne	.L638
 9997              		.loc 1 4694 5 discriminator 10
 9998 00fc 0830E0E3 		mvn	r3, #8
 9999              		.loc 1 4694 5
 10000 0100 450100EA 		b	.L634
 10001              	.L638:
 10002              		.loc 1 4694 5 discriminator 11
 10003 0104 14301BE5 		ldr	r3, [fp, #-20]
 10004 0108 233CA0E1 		lsr	r3, r3, #24
 10005 010c 030053E3 		cmp	r3, #3
 10006 0110 0100000A 		beq	.L639
 10007              		.loc 1 4694 5 discriminator 12
 10008 0114 0130E0E3 		mvn	r3, #1
 10009              		.loc 1 4694 5
 10010 0118 3F0100EA 		b	.L634
 10011              	.L639:
 10012              		.loc 1 4694 5 discriminator 13
 10013 011c 2C301BE5 		ldr	r3, [fp, #-44]
 10014 0120 7F2003E2 		and	r2, r3, #127
 10015 0124 08301BE5 		ldr	r3, [fp, #-8]
 10016 0128 143093E5 		ldr	r3, [r3, #20]
 10017 012c 030052E1 		cmp	r2, r3
 10018 0130 0100003A 		bcc	.L640
 10019              		.loc 1 4694 5 discriminator 14
 10020 0134 0230E0E3 		mvn	r3, #2
 10021              		.loc 1 4694 5
 10022 0138 370100EA 		b	.L634
 10023              	.L640:
 10024              		.loc 1 4694 5 discriminator 15
 10025 013c 2C301BE5 		ldr	r3, [fp, #-44]
 10026 0140 7F3003E2 		and	r3, r3, #127
 10027 0144 8322A0E1 		lsl	r2, r3, #5
 10028 0148 08301BE5 		ldr	r3, [fp, #-8]
 10029 014c 0C3093E5 		ldr	r3, [r3, #12]
 10030 0150 033082E0 		add	r3, r2, r3
 10031 0154 08300BE5 		str	r3, [fp, #-8]
 10032 0158 08301BE5 		ldr	r3, [fp, #-8]
 10033 015c 0300A0E1 		mov	r0, r3
 10034 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10035 0164 14000BE5 		str	r0, [fp, #-20]
 10036              		.loc 1 4694 5 discriminator 1
 10037 0168 14301BE5 		ldr	r3, [fp, #-20]
 10038 016c FF3803E2 		and	r3, r3, #16711680
 10039 0170 020853E3 		cmp	r3, #131072
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 260


 10040 0174 0100001A 		bne	.L641
 10041              		.loc 1 4694 5 discriminator 16
 10042 0178 0830E0E3 		mvn	r3, #8
 10043              		.loc 1 4694 5
 10044 017c 260100EA 		b	.L634
 10045              	.L641:
 10046              		.loc 1 4694 5 discriminator 17
 10047 0180 14301BE5 		ldr	r3, [fp, #-20]
 10048 0184 233CA0E1 		lsr	r3, r3, #24
 10049 0188 030053E3 		cmp	r3, #3
 10050 018c 0100000A 		beq	.L636
 10051              		.loc 1 4694 5 discriminator 18
 10052 0190 0130E0E3 		mvn	r3, #1
 10053              		.loc 1 4694 5
 10054 0194 200100EA 		b	.L634
 10055              	.L636:
4695:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Crt,Type_Stat);
4696:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 10056              		.loc 1 4696 5 is_stmt 1
 10057 0198 34301BE5 		ldr	r3, [fp, #-52]
 10058 019c 803003E2 		and	r3, r3, #128
 10059 01a0 000053E3 		cmp	r3, #0
 10060 01a4 1C00001A 		bne	.L642
 10061              		.loc 1 4696 5 is_stmt 0 discriminator 1
 10062 01a8 28301BE5 		ldr	r3, [fp, #-40]
 10063 01ac 142093E5 		ldr	r2, [r3, #20]
 10064 01b0 34301BE5 		ldr	r3, [fp, #-52]
 10065 01b4 030052E1 		cmp	r2, r3
 10066 01b8 0100008A 		bhi	.L643
 10067              		.loc 1 4696 5 discriminator 3
 10068 01bc 0230E0E3 		mvn	r3, #2
 10069              		.loc 1 4696 5
 10070 01c0 150100EA 		b	.L634
 10071              	.L643:
 10072              		.loc 1 4696 5 discriminator 4
 10073 01c4 34301BE5 		ldr	r3, [fp, #-52]
 10074 01c8 8322A0E1 		lsl	r2, r3, #5
 10075 01cc 28301BE5 		ldr	r3, [fp, #-40]
 10076 01d0 0C3093E5 		ldr	r3, [r3, #12]
 10077 01d4 033082E0 		add	r3, r2, r3
 10078 01d8 0C300BE5 		str	r3, [fp, #-12]
 10079 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 10080 01e0 0300A0E1 		mov	r0, r3
 10081 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10082 01e8 14000BE5 		str	r0, [fp, #-20]
 10083              		.loc 1 4696 5 discriminator 1
 10084 01ec 14301BE5 		ldr	r3, [fp, #-20]
 10085 01f0 FF3803E2 		and	r3, r3, #16711680
 10086 01f4 020853E3 		cmp	r3, #131072
 10087 01f8 0100001A 		bne	.L644
 10088              		.loc 1 4696 5 discriminator 5
 10089 01fc 0830E0E3 		mvn	r3, #8
 10090              		.loc 1 4696 5
 10091 0200 050100EA 		b	.L634
 10092              	.L644:
 10093              		.loc 1 4696 5 discriminator 6
 10094 0204 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 261


 10095 0208 233CA0E1 		lsr	r3, r3, #24
 10096 020c 030053E3 		cmp	r3, #3
 10097 0210 3F00000A 		beq	.L645
 10098              		.loc 1 4696 5 discriminator 7
 10099 0214 0130E0E3 		mvn	r3, #1
 10100              		.loc 1 4696 5
 10101 0218 FF0000EA 		b	.L634
 10102              	.L642:
 10103              		.loc 1 4696 5 discriminator 2
 10104 021c 34301BE5 		ldr	r3, [fp, #-52]
 10105 0220 2324A0E1 		lsr	r2, r3, #8
 10106 0224 28301BE5 		ldr	r3, [fp, #-40]
 10107 0228 143093E5 		ldr	r3, [r3, #20]
 10108 022c 030052E1 		cmp	r2, r3
 10109 0230 0100003A 		bcc	.L646
 10110              		.loc 1 4696 5 discriminator 8
 10111 0234 0230E0E3 		mvn	r3, #2
 10112              		.loc 1 4696 5
 10113 0238 F70000EA 		b	.L634
 10114              	.L646:
 10115              		.loc 1 4696 5 discriminator 9
 10116 023c 34301BE5 		ldr	r3, [fp, #-52]
 10117 0240 2334A0E1 		lsr	r3, r3, #8
 10118 0244 8322A0E1 		lsl	r2, r3, #5
 10119 0248 28301BE5 		ldr	r3, [fp, #-40]
 10120 024c 0C3093E5 		ldr	r3, [r3, #12]
 10121 0250 033082E0 		add	r3, r2, r3
 10122 0254 0C300BE5 		str	r3, [fp, #-12]
 10123 0258 0C301BE5 		ldr	r3, [fp, #-12]
 10124 025c 0300A0E1 		mov	r0, r3
 10125 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10126 0264 14000BE5 		str	r0, [fp, #-20]
 10127              		.loc 1 4696 5 discriminator 1
 10128 0268 14301BE5 		ldr	r3, [fp, #-20]
 10129 026c FF3803E2 		and	r3, r3, #16711680
 10130 0270 020853E3 		cmp	r3, #131072
 10131 0274 0100001A 		bne	.L647
 10132              		.loc 1 4696 5 discriminator 10
 10133 0278 0830E0E3 		mvn	r3, #8
 10134              		.loc 1 4696 5
 10135 027c E60000EA 		b	.L634
 10136              	.L647:
 10137              		.loc 1 4696 5 discriminator 11
 10138 0280 14301BE5 		ldr	r3, [fp, #-20]
 10139 0284 233CA0E1 		lsr	r3, r3, #24
 10140 0288 030053E3 		cmp	r3, #3
 10141 028c 0100000A 		beq	.L648
 10142              		.loc 1 4696 5 discriminator 12
 10143 0290 0130E0E3 		mvn	r3, #1
 10144              		.loc 1 4696 5
 10145 0294 E00000EA 		b	.L634
 10146              	.L648:
 10147              		.loc 1 4696 5 discriminator 13
 10148 0298 34301BE5 		ldr	r3, [fp, #-52]
 10149 029c 7F2003E2 		and	r2, r3, #127
 10150 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 10151 02a4 143093E5 		ldr	r3, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 262


 10152 02a8 030052E1 		cmp	r2, r3
 10153 02ac 0100003A 		bcc	.L649
 10154              		.loc 1 4696 5 discriminator 14
 10155 02b0 0230E0E3 		mvn	r3, #2
 10156              		.loc 1 4696 5
 10157 02b4 D80000EA 		b	.L634
 10158              	.L649:
 10159              		.loc 1 4696 5 discriminator 15
 10160 02b8 34301BE5 		ldr	r3, [fp, #-52]
 10161 02bc 7F3003E2 		and	r3, r3, #127
 10162 02c0 8322A0E1 		lsl	r2, r3, #5
 10163 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 10164 02c8 0C3093E5 		ldr	r3, [r3, #12]
 10165 02cc 033082E0 		add	r3, r2, r3
 10166 02d0 0C300BE5 		str	r3, [fp, #-12]
 10167 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 10168 02d8 0300A0E1 		mov	r0, r3
 10169 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10170 02e0 14000BE5 		str	r0, [fp, #-20]
 10171              		.loc 1 4696 5 discriminator 1
 10172 02e4 14301BE5 		ldr	r3, [fp, #-20]
 10173 02e8 FF3803E2 		and	r3, r3, #16711680
 10174 02ec 020853E3 		cmp	r3, #131072
 10175 02f0 0100001A 		bne	.L650
 10176              		.loc 1 4696 5 discriminator 16
 10177 02f4 0830E0E3 		mvn	r3, #8
 10178              		.loc 1 4696 5
 10179 02f8 C70000EA 		b	.L634
 10180              	.L650:
 10181              		.loc 1 4696 5 discriminator 17
 10182 02fc 14301BE5 		ldr	r3, [fp, #-20]
 10183 0300 233CA0E1 		lsr	r3, r3, #24
 10184 0304 030053E3 		cmp	r3, #3
 10185 0308 0100000A 		beq	.L645
 10186              		.loc 1 4696 5 discriminator 18
 10187 030c 0130E0E3 		mvn	r3, #1
 10188              		.loc 1 4696 5
 10189 0310 C10000EA 		b	.L634
 10190              	.L645:
4697:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
4698:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4699:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt,RME_CAP_TYPE_PGT,
 10191              		.loc 1 4699 5 is_stmt 1
 10192 0314 04309BE5 		ldr	r3, [fp, #4]
 10193 0318 803003E2 		and	r3, r3, #128
 10194 031c 000053E3 		cmp	r3, #0
 10195 0320 1C00001A 		bne	.L651
 10196              		.loc 1 4699 5 is_stmt 0 discriminator 1
 10197 0324 28301BE5 		ldr	r3, [fp, #-40]
 10198 0328 142093E5 		ldr	r2, [r3, #20]
 10199 032c 04309BE5 		ldr	r3, [fp, #4]
 10200 0330 030052E1 		cmp	r2, r3
 10201 0334 0100008A 		bhi	.L652
 10202              		.loc 1 4699 5 discriminator 3
 10203 0338 0230E0E3 		mvn	r3, #2
 10204              		.loc 1 4699 5
 10205 033c B60000EA 		b	.L634
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 263


 10206              	.L652:
 10207              		.loc 1 4699 5 discriminator 4
 10208 0340 04309BE5 		ldr	r3, [fp, #4]
 10209 0344 8322A0E1 		lsl	r2, r3, #5
 10210 0348 28301BE5 		ldr	r3, [fp, #-40]
 10211 034c 0C3093E5 		ldr	r3, [r3, #12]
 10212 0350 033082E0 		add	r3, r2, r3
 10213 0354 10300BE5 		str	r3, [fp, #-16]
 10214 0358 10301BE5 		ldr	r3, [fp, #-16]
 10215 035c 0300A0E1 		mov	r0, r3
 10216 0360 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10217 0364 14000BE5 		str	r0, [fp, #-20]
 10218              		.loc 1 4699 5 discriminator 1
 10219 0368 14301BE5 		ldr	r3, [fp, #-20]
 10220 036c FF3803E2 		and	r3, r3, #16711680
 10221 0370 020853E3 		cmp	r3, #131072
 10222 0374 0100001A 		bne	.L653
 10223              		.loc 1 4699 5 discriminator 5
 10224 0378 0830E0E3 		mvn	r3, #8
 10225              		.loc 1 4699 5
 10226 037c A60000EA 		b	.L634
 10227              	.L653:
 10228              		.loc 1 4699 5 discriminator 6
 10229 0380 14301BE5 		ldr	r3, [fp, #-20]
 10230 0384 233CA0E1 		lsr	r3, r3, #24
 10231 0388 040053E3 		cmp	r3, #4
 10232 038c 3F00000A 		beq	.L654
 10233              		.loc 1 4699 5 discriminator 7
 10234 0390 0130E0E3 		mvn	r3, #1
 10235              		.loc 1 4699 5
 10236 0394 A00000EA 		b	.L634
 10237              	.L651:
 10238              		.loc 1 4699 5 discriminator 2
 10239 0398 04309BE5 		ldr	r3, [fp, #4]
 10240 039c 2324A0E1 		lsr	r2, r3, #8
 10241 03a0 28301BE5 		ldr	r3, [fp, #-40]
 10242 03a4 143093E5 		ldr	r3, [r3, #20]
 10243 03a8 030052E1 		cmp	r2, r3
 10244 03ac 0100003A 		bcc	.L655
 10245              		.loc 1 4699 5 discriminator 8
 10246 03b0 0230E0E3 		mvn	r3, #2
 10247              		.loc 1 4699 5
 10248 03b4 980000EA 		b	.L634
 10249              	.L655:
 10250              		.loc 1 4699 5 discriminator 9
 10251 03b8 04309BE5 		ldr	r3, [fp, #4]
 10252 03bc 2334A0E1 		lsr	r3, r3, #8
 10253 03c0 8322A0E1 		lsl	r2, r3, #5
 10254 03c4 28301BE5 		ldr	r3, [fp, #-40]
 10255 03c8 0C3093E5 		ldr	r3, [r3, #12]
 10256 03cc 033082E0 		add	r3, r2, r3
 10257 03d0 10300BE5 		str	r3, [fp, #-16]
 10258 03d4 10301BE5 		ldr	r3, [fp, #-16]
 10259 03d8 0300A0E1 		mov	r0, r3
 10260 03dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10261 03e0 14000BE5 		str	r0, [fp, #-20]
 10262              		.loc 1 4699 5 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 264


 10263 03e4 14301BE5 		ldr	r3, [fp, #-20]
 10264 03e8 FF3803E2 		and	r3, r3, #16711680
 10265 03ec 020853E3 		cmp	r3, #131072
 10266 03f0 0100001A 		bne	.L656
 10267              		.loc 1 4699 5 discriminator 10
 10268 03f4 0830E0E3 		mvn	r3, #8
 10269              		.loc 1 4699 5
 10270 03f8 870000EA 		b	.L634
 10271              	.L656:
 10272              		.loc 1 4699 5 discriminator 11
 10273 03fc 14301BE5 		ldr	r3, [fp, #-20]
 10274 0400 233CA0E1 		lsr	r3, r3, #24
 10275 0404 030053E3 		cmp	r3, #3
 10276 0408 0100000A 		beq	.L657
 10277              		.loc 1 4699 5 discriminator 12
 10278 040c 0130E0E3 		mvn	r3, #1
 10279              		.loc 1 4699 5
 10280 0410 810000EA 		b	.L634
 10281              	.L657:
 10282              		.loc 1 4699 5 discriminator 13
 10283 0414 04309BE5 		ldr	r3, [fp, #4]
 10284 0418 7F2003E2 		and	r2, r3, #127
 10285 041c 10301BE5 		ldr	r3, [fp, #-16]
 10286 0420 143093E5 		ldr	r3, [r3, #20]
 10287 0424 030052E1 		cmp	r2, r3
 10288 0428 0100003A 		bcc	.L658
 10289              		.loc 1 4699 5 discriminator 14
 10290 042c 0230E0E3 		mvn	r3, #2
 10291              		.loc 1 4699 5
 10292 0430 790000EA 		b	.L634
 10293              	.L658:
 10294              		.loc 1 4699 5 discriminator 15
 10295 0434 04309BE5 		ldr	r3, [fp, #4]
 10296 0438 7F3003E2 		and	r3, r3, #127
 10297 043c 8322A0E1 		lsl	r2, r3, #5
 10298 0440 10301BE5 		ldr	r3, [fp, #-16]
 10299 0444 0C3093E5 		ldr	r3, [r3, #12]
 10300 0448 033082E0 		add	r3, r2, r3
 10301 044c 10300BE5 		str	r3, [fp, #-16]
 10302 0450 10301BE5 		ldr	r3, [fp, #-16]
 10303 0454 0300A0E1 		mov	r0, r3
 10304 0458 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10305 045c 14000BE5 		str	r0, [fp, #-20]
 10306              		.loc 1 4699 5 discriminator 1
 10307 0460 14301BE5 		ldr	r3, [fp, #-20]
 10308 0464 FF3803E2 		and	r3, r3, #16711680
 10309 0468 020853E3 		cmp	r3, #131072
 10310 046c 0100001A 		bne	.L659
 10311              		.loc 1 4699 5 discriminator 16
 10312 0470 0830E0E3 		mvn	r3, #8
 10313              		.loc 1 4699 5
 10314 0474 680000EA 		b	.L634
 10315              	.L659:
 10316              		.loc 1 4699 5 discriminator 17
 10317 0478 14301BE5 		ldr	r3, [fp, #-20]
 10318 047c 233CA0E1 		lsr	r3, r3, #24
 10319 0480 040053E3 		cmp	r3, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 265


 10320 0484 0100000A 		beq	.L654
 10321              		.loc 1 4699 5 discriminator 18
 10322 0488 0130E0E3 		mvn	r3, #1
 10323              		.loc 1 4699 5
 10324 048c 620000EA 		b	.L634
 10325              	.L654:
4700:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Op,Type_Stat);
4701:../../Source/Kernel/rme_kernel.c **** #endif
4702:../../Source/Kernel/rme_kernel.c ****     /* Check if the captbl is not frozen and allows such operations */
4703:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Crt,RME_CPT_FLAG_CRT);
 10326              		.loc 1 4703 5 is_stmt 1
 10327 0490 08301BE5 		ldr	r3, [fp, #-8]
 10328 0494 083093E5 		ldr	r3, [r3, #8]
 10329 0498 013003E2 		and	r3, r3, #1
 10330 049c 000053E3 		cmp	r3, #0
 10331 04a0 0100001A 		bne	.L660
 10332              		.loc 1 4703 5 is_stmt 0 discriminator 1
 10333 04a4 0630E0E3 		mvn	r3, #6
 10334              		.loc 1 4703 5
 10335 04a8 5B0000EA 		b	.L634
 10336              	.L660:
4704:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_PRC_CRT);
 10337              		.loc 1 4704 5 is_stmt 1
 10338 04ac 0C301BE5 		ldr	r3, [fp, #-12]
 10339 04b0 083093E5 		ldr	r3, [r3, #8]
 10340 04b4 403003E2 		and	r3, r3, #64
 10341 04b8 000053E3 		cmp	r3, #0
 10342 04bc 0100001A 		bne	.L661
 10343              		.loc 1 4704 5 is_stmt 0 discriminator 1
 10344 04c0 0630E0E3 		mvn	r3, #6
 10345              		.loc 1 4704 5
 10346 04c4 540000EA 		b	.L634
 10347              	.L661:
4705:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4706:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Op,RME_PGT_FLAG_PRC_CRT);
 10348              		.loc 1 4706 5 is_stmt 1
 10349 04c8 10301BE5 		ldr	r3, [fp, #-16]
 10350 04cc 083093E5 		ldr	r3, [r3, #8]
 10351 04d0 403003E2 		and	r3, r3, #64
 10352 04d4 000053E3 		cmp	r3, #0
 10353 04d8 0100001A 		bne	.L662
 10354              		.loc 1 4706 5 is_stmt 0 discriminator 1
 10355 04dc 0630E0E3 		mvn	r3, #6
 10356              		.loc 1 4706 5
 10357 04e0 4D0000EA 		b	.L634
 10358              	.L662:
4707:../../Source/Kernel/rme_kernel.c **** #endif
4708:../../Source/Kernel/rme_kernel.c ****     
4709:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
4710:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Crt,Cap_Prc,struct RME_Cap_Prc*,Prc_Crt);
 10359              		.loc 1 4710 5 is_stmt 1
 10360 04e4 08301BE5 		ldr	r3, [fp, #-8]
 10361 04e8 142093E5 		ldr	r2, [r3, #20]
 10362 04ec 30301BE5 		ldr	r3, [fp, #-48]
 10363 04f0 030052E1 		cmp	r2, r3
 10364 04f4 0100008A 		bhi	.L663
 10365              		.loc 1 4710 5 is_stmt 0 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 266


 10366 04f8 0230E0E3 		mvn	r3, #2
 10367              		.loc 1 4710 5
 10368 04fc 460000EA 		b	.L634
 10369              	.L663:
 10370              		.loc 1 4710 5 discriminator 2
 10371 0500 30301BE5 		ldr	r3, [fp, #-48]
 10372 0504 8322A0E1 		lsl	r2, r3, #5
 10373 0508 08301BE5 		ldr	r3, [fp, #-8]
 10374 050c 0C3093E5 		ldr	r3, [r3, #12]
 10375 0510 033082E0 		add	r3, r2, r3
 10376 0514 18300BE5 		str	r3, [fp, #-24]
4711:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
4712:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Prc_Crt);
 10377              		.loc 1 4712 5 is_stmt 1
 10378 0518 18301BE5 		ldr	r3, [fp, #-24]
 10379 051c 0128A0E3 		mov	r2, #65536
 10380 0520 0010A0E3 		mov	r1, #0
 10381 0524 0300A0E1 		mov	r0, r3
 10382 0528 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 10383 052c 0030A0E1 		mov	r3, r0
 10384              		.loc 1 4712 5 is_stmt 0 discriminator 1
 10385 0530 000053E3 		cmp	r3, #0
 10386 0534 0100001A 		bne	.L664
 10387 0538 0430E0E3 		mvn	r3, #4
 10388              		.loc 1 4712 5
 10389 053c 360000EA 		b	.L634
 10390              	.L664:
 10391              		.loc 1 4712 5 discriminator 2
 10392 0540 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 10393 0544 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 10394 0548 002093E5 		ldr	r2, [r3]
 10395 054c 18301BE5 		ldr	r3, [fp, #-24]
 10396 0550 102083E5 		str	r2, [r3, #16]
4713:../../Source/Kernel/rme_kernel.c **** 
4714:../../Source/Kernel/rme_kernel.c ****     /* Header init */
4715:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Root_Ref=1U;
 10397              		.loc 1 4715 27 is_stmt 1
 10398 0554 18301BE5 		ldr	r3, [fp, #-24]
 10399 0558 0120A0E3 		mov	r2, #1
 10400 055c 042083E5 		str	r2, [r3, #4]
4716:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Object=0U;
 10401              		.loc 1 4716 25
 10402 0560 18301BE5 		ldr	r3, [fp, #-24]
 10403 0564 0020A0E3 		mov	r2, #0
 10404 0568 0C2083E5 		str	r2, [r3, #12]
4717:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Flag=RME_PRC_FLAG_INV|RME_PRC_FLAG_THD;
 10405              		.loc 1 4717 23
 10406 056c 18301BE5 		ldr	r3, [fp, #-24]
 10407 0570 0320A0E3 		mov	r2, #3
 10408 0574 082083E5 		str	r2, [r3, #8]
4718:../../Source/Kernel/rme_kernel.c **** 
4719:../../Source/Kernel/rme_kernel.c ****     /* Info init */
4720:../../Source/Kernel/rme_kernel.c ****     Prc_Cpt=RME_CAP_CONV_ROOT(Cpt_Op,struct RME_Cap_Cpt*);
 10409              		.loc 1 4720 13
 10410 0578 0C301BE5 		ldr	r3, [fp, #-12]
 10411 057c 003093E5 		ldr	r3, [r3]
 10412 0580 7330FFE6 		uxth	r3, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 267


 10413 0584 000053E3 		cmp	r3, #0
 10414 0588 0200000A 		beq	.L665
 10415              		.loc 1 4720 13 is_stmt 0 discriminator 1
 10416 058c 0C301BE5 		ldr	r3, [fp, #-12]
 10417 0590 043093E5 		ldr	r3, [r3, #4]
 10418 0594 000000EA 		b	.L666
 10419              	.L665:
 10420              		.loc 1 4720 13 discriminator 2
 10421 0598 0C301BE5 		ldr	r3, [fp, #-12]
 10422              	.L666:
 10423              		.loc 1 4720 12 is_stmt 1 discriminator 4
 10424 059c 1C300BE5 		str	r3, [fp, #-28]
4721:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4722:../../Source/Kernel/rme_kernel.c ****     Prc_Pgt=RME_CAP_CONV_ROOT(Pgt_Op,struct RME_Cap_Pgt*);
 10425              		.loc 1 4722 13
 10426 05a0 10301BE5 		ldr	r3, [fp, #-16]
 10427 05a4 003093E5 		ldr	r3, [r3]
 10428 05a8 7330FFE6 		uxth	r3, r3
 10429 05ac 000053E3 		cmp	r3, #0
 10430 05b0 0200000A 		beq	.L667
 10431              		.loc 1 4722 13 is_stmt 0 discriminator 1
 10432 05b4 10301BE5 		ldr	r3, [fp, #-16]
 10433 05b8 043093E5 		ldr	r3, [r3, #4]
 10434 05bc 000000EA 		b	.L668
 10435              	.L667:
 10436              		.loc 1 4722 13 discriminator 2
 10437 05c0 10301BE5 		ldr	r3, [fp, #-16]
 10438              	.L668:
 10439              		.loc 1 4722 12 is_stmt 1 discriminator 4
 10440 05c4 20300BE5 		str	r3, [fp, #-32]
4723:../../Source/Kernel/rme_kernel.c **** #endif
4724:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Cpt=Prc_Cpt;
 10441              		.loc 1 4724 17
 10442 05c8 18301BE5 		ldr	r3, [fp, #-24]
 10443 05cc 1C201BE5 		ldr	r2, [fp, #-28]
 10444 05d0 142083E5 		str	r2, [r3, #20]
4725:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4726:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Pgt=Prc_Pgt;
 10445              		.loc 1 4726 17
 10446 05d4 18301BE5 		ldr	r3, [fp, #-24]
 10447 05d8 20201BE5 		ldr	r2, [fp, #-32]
 10448 05dc 182083E5 		str	r2, [r3, #24]
4727:../../Source/Kernel/rme_kernel.c **** #else
4728:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Pgt=Raw_Pgt;
4729:../../Source/Kernel/rme_kernel.c **** #endif
4730:../../Source/Kernel/rme_kernel.c ****     
4731:../../Source/Kernel/rme_kernel.c ****     /* Reference objects */
4732:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Cpt->Head.Root_Ref),1U);
 10449              		.loc 1 4732 5
 10450 05e0 1C301BE5 		ldr	r3, [fp, #-28]
 10451 05e4 043083E2 		add	r3, r3, #4
 10452 05e8 0110A0E3 		mov	r1, #1
 10453 05ec 0300A0E1 		mov	r0, r3
 10454 05f0 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4733:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4734:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Pgt->Head.Root_Ref),1U);
 10455              		.loc 1 4734 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 268


 10456 05f4 20301BE5 		ldr	r3, [fp, #-32]
 10457 05f8 043083E2 		add	r3, r3, #4
 10458 05fc 0110A0E3 		mov	r1, #1
 10459 0600 0300A0E1 		mov	r0, r3
 10460 0604 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4735:../../Source/Kernel/rme_kernel.c **** #endif
4736:../../Source/Kernel/rme_kernel.c **** 
4737:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
4738:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Prc_Crt->Head.Type_Stat),
 10461              		.loc 1 4738 5
 10462 0608 18301BE5 		ldr	r3, [fp, #-24]
 10463 060c 0514A0E3 		mov	r1, #83886080
 10464 0610 0300A0E1 		mov	r0, r3
 10465 0614 FEFFFFEB 		bl	__RME_A7A_Write_Release
4739:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_PRC,
4740:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
4741:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
4742:../../Source/Kernel/rme_kernel.c **** 
4743:../../Source/Kernel/rme_kernel.c ****     return 0;
 10466              		.loc 1 4743 12
 10467 0618 0030A0E3 		mov	r3, #0
 10468              	.L634:
4744:../../Source/Kernel/rme_kernel.c **** }
 10469              		.loc 1 4744 1
 10470 061c 0300A0E1 		mov	r0, r3
 10471 0620 04D04BE2 		sub	sp, fp, #4
 10472              		.cfi_def_cfa 13, 8
 10473              		@ sp needed
 10474 0624 0088BDE8 		pop	{fp, pc}
 10475              		.cfi_endproc
 10476              	.LFE50:
 10478              		.section	.text._RME_Prc_Crt,"ax",%progbits
 10479              		.align	2
 10480              		.syntax unified
 10481              		.arm
 10483              	_RME_Prc_Crt:
 10484              	.LFB51:
4745:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Prc_Boot_Crt ********************************************/
4746:../../Source/Kernel/rme_kernel.c **** 
4747:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Prc_Crt ******************************************************
4748:../../Source/Kernel/rme_kernel.c **** Description : Create a process. A process is in fact a protection domain
4749:../../Source/Kernel/rme_kernel.c ****               associated with a set of capabilities.
4750:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
4751:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt_Crt - The capability to the capability table to
4752:../../Source/Kernel/rme_kernel.c ****                                       put this process capability in.
4753:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
4754:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability slot that you want this newly
4755:../../Source/Kernel/rme_kernel.c ****                                   created process capability to be in.
4756:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
4757:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
4758:../../Source/Kernel/rme_kernel.c ****                                   for this process.
4759:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4760:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability to the page table to use for
4761:../../Source/Kernel/rme_kernel.c ****                                   this process.
4762:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4763:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raw_Pgt - Alternate user-supplied page table physical
4764:../../Source/Kernel/rme_kernel.c ****                                   address.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 269


4765:../../Source/Kernel/rme_kernel.c **** Output      : None.
4766:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4767:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4768:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4769:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Crt(struct RME_Cap_Cpt* Cpt,
4770:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Crt,
4771:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
4772:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
4773:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt)
4774:../../Source/Kernel/rme_kernel.c **** #else
4775:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Crt(struct RME_Cap_Cpt* Cpt,
4776:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt_Crt,
4777:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
4778:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
4779:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raw_Pgt)
4780:../../Source/Kernel/rme_kernel.c **** #endif
4781:../../Source/Kernel/rme_kernel.c **** {
 10485              		.loc 1 4781 1
 10486              		.cfi_startproc
 10487              		@ args = 4, pretend = 0, frame = 48
 10488              		@ frame_needed = 1, uses_anonymous_args = 0
 10489 0000 00482DE9 		push	{fp, lr}
 10490              		.cfi_def_cfa_offset 8
 10491              		.cfi_offset 11, -8
 10492              		.cfi_offset 14, -4
 10493 0004 04B08DE2 		add	fp, sp, #4
 10494              		.cfi_def_cfa 11, 4
 10495 0008 30D04DE2 		sub	sp, sp, #48
 10496 000c 28000BE5 		str	r0, [fp, #-40]
 10497 0010 2C100BE5 		str	r1, [fp, #-44]
 10498 0014 30200BE5 		str	r2, [fp, #-48]
 10499 0018 34300BE5 		str	r3, [fp, #-52]
4782:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Crt;
4783:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
4784:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4785:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Op;
4786:../../Source/Kernel/rme_kernel.c **** #endif
4787:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Crt;
4788:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Prc_Cpt;
4789:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4790:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Prc_Pgt;
4791:../../Source/Kernel/rme_kernel.c **** #endif
4792:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4793:../../Source/Kernel/rme_kernel.c ****     
4794:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
4795:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt_Crt,RME_CAP_TYPE_CPT,
 10500              		.loc 1 4795 5
 10501 001c 2C301BE5 		ldr	r3, [fp, #-44]
 10502 0020 803003E2 		and	r3, r3, #128
 10503 0024 000053E3 		cmp	r3, #0
 10504 0028 1C00001A 		bne	.L670
 10505              		.loc 1 4795 5 is_stmt 0 discriminator 1
 10506 002c 28301BE5 		ldr	r3, [fp, #-40]
 10507 0030 142093E5 		ldr	r2, [r3, #20]
 10508 0034 2C301BE5 		ldr	r3, [fp, #-44]
 10509 0038 030052E1 		cmp	r2, r3
 10510 003c 0100008A 		bhi	.L671
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 270


 10511              		.loc 1 4795 5 discriminator 3
 10512 0040 0230E0E3 		mvn	r3, #2
 10513              		.loc 1 4795 5
 10514 0044 740100EA 		b	.L672
 10515              	.L671:
 10516              		.loc 1 4795 5 discriminator 4
 10517 0048 2C301BE5 		ldr	r3, [fp, #-44]
 10518 004c 8322A0E1 		lsl	r2, r3, #5
 10519 0050 28301BE5 		ldr	r3, [fp, #-40]
 10520 0054 0C3093E5 		ldr	r3, [r3, #12]
 10521 0058 033082E0 		add	r3, r2, r3
 10522 005c 08300BE5 		str	r3, [fp, #-8]
 10523 0060 08301BE5 		ldr	r3, [fp, #-8]
 10524 0064 0300A0E1 		mov	r0, r3
 10525 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10526 006c 14000BE5 		str	r0, [fp, #-20]
 10527              		.loc 1 4795 5 discriminator 1
 10528 0070 14301BE5 		ldr	r3, [fp, #-20]
 10529 0074 FF3803E2 		and	r3, r3, #16711680
 10530 0078 020853E3 		cmp	r3, #131072
 10531 007c 0100001A 		bne	.L673
 10532              		.loc 1 4795 5 discriminator 5
 10533 0080 0830E0E3 		mvn	r3, #8
 10534              		.loc 1 4795 5
 10535 0084 640100EA 		b	.L672
 10536              	.L673:
 10537              		.loc 1 4795 5 discriminator 6
 10538 0088 14301BE5 		ldr	r3, [fp, #-20]
 10539 008c 233CA0E1 		lsr	r3, r3, #24
 10540 0090 030053E3 		cmp	r3, #3
 10541 0094 3F00000A 		beq	.L674
 10542              		.loc 1 4795 5 discriminator 7
 10543 0098 0130E0E3 		mvn	r3, #1
 10544              		.loc 1 4795 5
 10545 009c 5E0100EA 		b	.L672
 10546              	.L670:
 10547              		.loc 1 4795 5 discriminator 2
 10548 00a0 2C301BE5 		ldr	r3, [fp, #-44]
 10549 00a4 2324A0E1 		lsr	r2, r3, #8
 10550 00a8 28301BE5 		ldr	r3, [fp, #-40]
 10551 00ac 143093E5 		ldr	r3, [r3, #20]
 10552 00b0 030052E1 		cmp	r2, r3
 10553 00b4 0100003A 		bcc	.L675
 10554              		.loc 1 4795 5 discriminator 8
 10555 00b8 0230E0E3 		mvn	r3, #2
 10556              		.loc 1 4795 5
 10557 00bc 560100EA 		b	.L672
 10558              	.L675:
 10559              		.loc 1 4795 5 discriminator 9
 10560 00c0 2C301BE5 		ldr	r3, [fp, #-44]
 10561 00c4 2334A0E1 		lsr	r3, r3, #8
 10562 00c8 8322A0E1 		lsl	r2, r3, #5
 10563 00cc 28301BE5 		ldr	r3, [fp, #-40]
 10564 00d0 0C3093E5 		ldr	r3, [r3, #12]
 10565 00d4 033082E0 		add	r3, r2, r3
 10566 00d8 08300BE5 		str	r3, [fp, #-8]
 10567 00dc 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 271


 10568 00e0 0300A0E1 		mov	r0, r3
 10569 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10570 00e8 14000BE5 		str	r0, [fp, #-20]
 10571              		.loc 1 4795 5 discriminator 1
 10572 00ec 14301BE5 		ldr	r3, [fp, #-20]
 10573 00f0 FF3803E2 		and	r3, r3, #16711680
 10574 00f4 020853E3 		cmp	r3, #131072
 10575 00f8 0100001A 		bne	.L676
 10576              		.loc 1 4795 5 discriminator 10
 10577 00fc 0830E0E3 		mvn	r3, #8
 10578              		.loc 1 4795 5
 10579 0100 450100EA 		b	.L672
 10580              	.L676:
 10581              		.loc 1 4795 5 discriminator 11
 10582 0104 14301BE5 		ldr	r3, [fp, #-20]
 10583 0108 233CA0E1 		lsr	r3, r3, #24
 10584 010c 030053E3 		cmp	r3, #3
 10585 0110 0100000A 		beq	.L677
 10586              		.loc 1 4795 5 discriminator 12
 10587 0114 0130E0E3 		mvn	r3, #1
 10588              		.loc 1 4795 5
 10589 0118 3F0100EA 		b	.L672
 10590              	.L677:
 10591              		.loc 1 4795 5 discriminator 13
 10592 011c 2C301BE5 		ldr	r3, [fp, #-44]
 10593 0120 7F2003E2 		and	r2, r3, #127
 10594 0124 08301BE5 		ldr	r3, [fp, #-8]
 10595 0128 143093E5 		ldr	r3, [r3, #20]
 10596 012c 030052E1 		cmp	r2, r3
 10597 0130 0100003A 		bcc	.L678
 10598              		.loc 1 4795 5 discriminator 14
 10599 0134 0230E0E3 		mvn	r3, #2
 10600              		.loc 1 4795 5
 10601 0138 370100EA 		b	.L672
 10602              	.L678:
 10603              		.loc 1 4795 5 discriminator 15
 10604 013c 2C301BE5 		ldr	r3, [fp, #-44]
 10605 0140 7F3003E2 		and	r3, r3, #127
 10606 0144 8322A0E1 		lsl	r2, r3, #5
 10607 0148 08301BE5 		ldr	r3, [fp, #-8]
 10608 014c 0C3093E5 		ldr	r3, [r3, #12]
 10609 0150 033082E0 		add	r3, r2, r3
 10610 0154 08300BE5 		str	r3, [fp, #-8]
 10611 0158 08301BE5 		ldr	r3, [fp, #-8]
 10612 015c 0300A0E1 		mov	r0, r3
 10613 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10614 0164 14000BE5 		str	r0, [fp, #-20]
 10615              		.loc 1 4795 5 discriminator 1
 10616 0168 14301BE5 		ldr	r3, [fp, #-20]
 10617 016c FF3803E2 		and	r3, r3, #16711680
 10618 0170 020853E3 		cmp	r3, #131072
 10619 0174 0100001A 		bne	.L679
 10620              		.loc 1 4795 5 discriminator 16
 10621 0178 0830E0E3 		mvn	r3, #8
 10622              		.loc 1 4795 5
 10623 017c 260100EA 		b	.L672
 10624              	.L679:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 272


 10625              		.loc 1 4795 5 discriminator 17
 10626 0180 14301BE5 		ldr	r3, [fp, #-20]
 10627 0184 233CA0E1 		lsr	r3, r3, #24
 10628 0188 030053E3 		cmp	r3, #3
 10629 018c 0100000A 		beq	.L674
 10630              		.loc 1 4795 5 discriminator 18
 10631 0190 0130E0E3 		mvn	r3, #1
 10632              		.loc 1 4795 5
 10633 0194 200100EA 		b	.L672
 10634              	.L674:
4796:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Crt,Type_Stat);
4797:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 10635              		.loc 1 4797 5 is_stmt 1
 10636 0198 34301BE5 		ldr	r3, [fp, #-52]
 10637 019c 803003E2 		and	r3, r3, #128
 10638 01a0 000053E3 		cmp	r3, #0
 10639 01a4 1C00001A 		bne	.L680
 10640              		.loc 1 4797 5 is_stmt 0 discriminator 1
 10641 01a8 28301BE5 		ldr	r3, [fp, #-40]
 10642 01ac 142093E5 		ldr	r2, [r3, #20]
 10643 01b0 34301BE5 		ldr	r3, [fp, #-52]
 10644 01b4 030052E1 		cmp	r2, r3
 10645 01b8 0100008A 		bhi	.L681
 10646              		.loc 1 4797 5 discriminator 3
 10647 01bc 0230E0E3 		mvn	r3, #2
 10648              		.loc 1 4797 5
 10649 01c0 150100EA 		b	.L672
 10650              	.L681:
 10651              		.loc 1 4797 5 discriminator 4
 10652 01c4 34301BE5 		ldr	r3, [fp, #-52]
 10653 01c8 8322A0E1 		lsl	r2, r3, #5
 10654 01cc 28301BE5 		ldr	r3, [fp, #-40]
 10655 01d0 0C3093E5 		ldr	r3, [r3, #12]
 10656 01d4 033082E0 		add	r3, r2, r3
 10657 01d8 0C300BE5 		str	r3, [fp, #-12]
 10658 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 10659 01e0 0300A0E1 		mov	r0, r3
 10660 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10661 01e8 14000BE5 		str	r0, [fp, #-20]
 10662              		.loc 1 4797 5 discriminator 1
 10663 01ec 14301BE5 		ldr	r3, [fp, #-20]
 10664 01f0 FF3803E2 		and	r3, r3, #16711680
 10665 01f4 020853E3 		cmp	r3, #131072
 10666 01f8 0100001A 		bne	.L682
 10667              		.loc 1 4797 5 discriminator 5
 10668 01fc 0830E0E3 		mvn	r3, #8
 10669              		.loc 1 4797 5
 10670 0200 050100EA 		b	.L672
 10671              	.L682:
 10672              		.loc 1 4797 5 discriminator 6
 10673 0204 14301BE5 		ldr	r3, [fp, #-20]
 10674 0208 233CA0E1 		lsr	r3, r3, #24
 10675 020c 030053E3 		cmp	r3, #3
 10676 0210 3F00000A 		beq	.L683
 10677              		.loc 1 4797 5 discriminator 7
 10678 0214 0130E0E3 		mvn	r3, #1
 10679              		.loc 1 4797 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 273


 10680 0218 FF0000EA 		b	.L672
 10681              	.L680:
 10682              		.loc 1 4797 5 discriminator 2
 10683 021c 34301BE5 		ldr	r3, [fp, #-52]
 10684 0220 2324A0E1 		lsr	r2, r3, #8
 10685 0224 28301BE5 		ldr	r3, [fp, #-40]
 10686 0228 143093E5 		ldr	r3, [r3, #20]
 10687 022c 030052E1 		cmp	r2, r3
 10688 0230 0100003A 		bcc	.L684
 10689              		.loc 1 4797 5 discriminator 8
 10690 0234 0230E0E3 		mvn	r3, #2
 10691              		.loc 1 4797 5
 10692 0238 F70000EA 		b	.L672
 10693              	.L684:
 10694              		.loc 1 4797 5 discriminator 9
 10695 023c 34301BE5 		ldr	r3, [fp, #-52]
 10696 0240 2334A0E1 		lsr	r3, r3, #8
 10697 0244 8322A0E1 		lsl	r2, r3, #5
 10698 0248 28301BE5 		ldr	r3, [fp, #-40]
 10699 024c 0C3093E5 		ldr	r3, [r3, #12]
 10700 0250 033082E0 		add	r3, r2, r3
 10701 0254 0C300BE5 		str	r3, [fp, #-12]
 10702 0258 0C301BE5 		ldr	r3, [fp, #-12]
 10703 025c 0300A0E1 		mov	r0, r3
 10704 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10705 0264 14000BE5 		str	r0, [fp, #-20]
 10706              		.loc 1 4797 5 discriminator 1
 10707 0268 14301BE5 		ldr	r3, [fp, #-20]
 10708 026c FF3803E2 		and	r3, r3, #16711680
 10709 0270 020853E3 		cmp	r3, #131072
 10710 0274 0100001A 		bne	.L685
 10711              		.loc 1 4797 5 discriminator 10
 10712 0278 0830E0E3 		mvn	r3, #8
 10713              		.loc 1 4797 5
 10714 027c E60000EA 		b	.L672
 10715              	.L685:
 10716              		.loc 1 4797 5 discriminator 11
 10717 0280 14301BE5 		ldr	r3, [fp, #-20]
 10718 0284 233CA0E1 		lsr	r3, r3, #24
 10719 0288 030053E3 		cmp	r3, #3
 10720 028c 0100000A 		beq	.L686
 10721              		.loc 1 4797 5 discriminator 12
 10722 0290 0130E0E3 		mvn	r3, #1
 10723              		.loc 1 4797 5
 10724 0294 E00000EA 		b	.L672
 10725              	.L686:
 10726              		.loc 1 4797 5 discriminator 13
 10727 0298 34301BE5 		ldr	r3, [fp, #-52]
 10728 029c 7F2003E2 		and	r2, r3, #127
 10729 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 10730 02a4 143093E5 		ldr	r3, [r3, #20]
 10731 02a8 030052E1 		cmp	r2, r3
 10732 02ac 0100003A 		bcc	.L687
 10733              		.loc 1 4797 5 discriminator 14
 10734 02b0 0230E0E3 		mvn	r3, #2
 10735              		.loc 1 4797 5
 10736 02b4 D80000EA 		b	.L672
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 274


 10737              	.L687:
 10738              		.loc 1 4797 5 discriminator 15
 10739 02b8 34301BE5 		ldr	r3, [fp, #-52]
 10740 02bc 7F3003E2 		and	r3, r3, #127
 10741 02c0 8322A0E1 		lsl	r2, r3, #5
 10742 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 10743 02c8 0C3093E5 		ldr	r3, [r3, #12]
 10744 02cc 033082E0 		add	r3, r2, r3
 10745 02d0 0C300BE5 		str	r3, [fp, #-12]
 10746 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 10747 02d8 0300A0E1 		mov	r0, r3
 10748 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10749 02e0 14000BE5 		str	r0, [fp, #-20]
 10750              		.loc 1 4797 5 discriminator 1
 10751 02e4 14301BE5 		ldr	r3, [fp, #-20]
 10752 02e8 FF3803E2 		and	r3, r3, #16711680
 10753 02ec 020853E3 		cmp	r3, #131072
 10754 02f0 0100001A 		bne	.L688
 10755              		.loc 1 4797 5 discriminator 16
 10756 02f4 0830E0E3 		mvn	r3, #8
 10757              		.loc 1 4797 5
 10758 02f8 C70000EA 		b	.L672
 10759              	.L688:
 10760              		.loc 1 4797 5 discriminator 17
 10761 02fc 14301BE5 		ldr	r3, [fp, #-20]
 10762 0300 233CA0E1 		lsr	r3, r3, #24
 10763 0304 030053E3 		cmp	r3, #3
 10764 0308 0100000A 		beq	.L683
 10765              		.loc 1 4797 5 discriminator 18
 10766 030c 0130E0E3 		mvn	r3, #1
 10767              		.loc 1 4797 5
 10768 0310 C10000EA 		b	.L672
 10769              	.L683:
4798:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
4799:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4800:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt,RME_CAP_TYPE_PGT,
 10770              		.loc 1 4800 5 is_stmt 1
 10771 0314 04309BE5 		ldr	r3, [fp, #4]
 10772 0318 803003E2 		and	r3, r3, #128
 10773 031c 000053E3 		cmp	r3, #0
 10774 0320 1C00001A 		bne	.L689
 10775              		.loc 1 4800 5 is_stmt 0 discriminator 1
 10776 0324 28301BE5 		ldr	r3, [fp, #-40]
 10777 0328 142093E5 		ldr	r2, [r3, #20]
 10778 032c 04309BE5 		ldr	r3, [fp, #4]
 10779 0330 030052E1 		cmp	r2, r3
 10780 0334 0100008A 		bhi	.L690
 10781              		.loc 1 4800 5 discriminator 3
 10782 0338 0230E0E3 		mvn	r3, #2
 10783              		.loc 1 4800 5
 10784 033c B60000EA 		b	.L672
 10785              	.L690:
 10786              		.loc 1 4800 5 discriminator 4
 10787 0340 04309BE5 		ldr	r3, [fp, #4]
 10788 0344 8322A0E1 		lsl	r2, r3, #5
 10789 0348 28301BE5 		ldr	r3, [fp, #-40]
 10790 034c 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 275


 10791 0350 033082E0 		add	r3, r2, r3
 10792 0354 10300BE5 		str	r3, [fp, #-16]
 10793 0358 10301BE5 		ldr	r3, [fp, #-16]
 10794 035c 0300A0E1 		mov	r0, r3
 10795 0360 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10796 0364 14000BE5 		str	r0, [fp, #-20]
 10797              		.loc 1 4800 5 discriminator 1
 10798 0368 14301BE5 		ldr	r3, [fp, #-20]
 10799 036c FF3803E2 		and	r3, r3, #16711680
 10800 0370 020853E3 		cmp	r3, #131072
 10801 0374 0100001A 		bne	.L691
 10802              		.loc 1 4800 5 discriminator 5
 10803 0378 0830E0E3 		mvn	r3, #8
 10804              		.loc 1 4800 5
 10805 037c A60000EA 		b	.L672
 10806              	.L691:
 10807              		.loc 1 4800 5 discriminator 6
 10808 0380 14301BE5 		ldr	r3, [fp, #-20]
 10809 0384 233CA0E1 		lsr	r3, r3, #24
 10810 0388 040053E3 		cmp	r3, #4
 10811 038c 3F00000A 		beq	.L692
 10812              		.loc 1 4800 5 discriminator 7
 10813 0390 0130E0E3 		mvn	r3, #1
 10814              		.loc 1 4800 5
 10815 0394 A00000EA 		b	.L672
 10816              	.L689:
 10817              		.loc 1 4800 5 discriminator 2
 10818 0398 04309BE5 		ldr	r3, [fp, #4]
 10819 039c 2324A0E1 		lsr	r2, r3, #8
 10820 03a0 28301BE5 		ldr	r3, [fp, #-40]
 10821 03a4 143093E5 		ldr	r3, [r3, #20]
 10822 03a8 030052E1 		cmp	r2, r3
 10823 03ac 0100003A 		bcc	.L693
 10824              		.loc 1 4800 5 discriminator 8
 10825 03b0 0230E0E3 		mvn	r3, #2
 10826              		.loc 1 4800 5
 10827 03b4 980000EA 		b	.L672
 10828              	.L693:
 10829              		.loc 1 4800 5 discriminator 9
 10830 03b8 04309BE5 		ldr	r3, [fp, #4]
 10831 03bc 2334A0E1 		lsr	r3, r3, #8
 10832 03c0 8322A0E1 		lsl	r2, r3, #5
 10833 03c4 28301BE5 		ldr	r3, [fp, #-40]
 10834 03c8 0C3093E5 		ldr	r3, [r3, #12]
 10835 03cc 033082E0 		add	r3, r2, r3
 10836 03d0 10300BE5 		str	r3, [fp, #-16]
 10837 03d4 10301BE5 		ldr	r3, [fp, #-16]
 10838 03d8 0300A0E1 		mov	r0, r3
 10839 03dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10840 03e0 14000BE5 		str	r0, [fp, #-20]
 10841              		.loc 1 4800 5 discriminator 1
 10842 03e4 14301BE5 		ldr	r3, [fp, #-20]
 10843 03e8 FF3803E2 		and	r3, r3, #16711680
 10844 03ec 020853E3 		cmp	r3, #131072
 10845 03f0 0100001A 		bne	.L694
 10846              		.loc 1 4800 5 discriminator 10
 10847 03f4 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 276


 10848              		.loc 1 4800 5
 10849 03f8 870000EA 		b	.L672
 10850              	.L694:
 10851              		.loc 1 4800 5 discriminator 11
 10852 03fc 14301BE5 		ldr	r3, [fp, #-20]
 10853 0400 233CA0E1 		lsr	r3, r3, #24
 10854 0404 030053E3 		cmp	r3, #3
 10855 0408 0100000A 		beq	.L695
 10856              		.loc 1 4800 5 discriminator 12
 10857 040c 0130E0E3 		mvn	r3, #1
 10858              		.loc 1 4800 5
 10859 0410 810000EA 		b	.L672
 10860              	.L695:
 10861              		.loc 1 4800 5 discriminator 13
 10862 0414 04309BE5 		ldr	r3, [fp, #4]
 10863 0418 7F2003E2 		and	r2, r3, #127
 10864 041c 10301BE5 		ldr	r3, [fp, #-16]
 10865 0420 143093E5 		ldr	r3, [r3, #20]
 10866 0424 030052E1 		cmp	r2, r3
 10867 0428 0100003A 		bcc	.L696
 10868              		.loc 1 4800 5 discriminator 14
 10869 042c 0230E0E3 		mvn	r3, #2
 10870              		.loc 1 4800 5
 10871 0430 790000EA 		b	.L672
 10872              	.L696:
 10873              		.loc 1 4800 5 discriminator 15
 10874 0434 04309BE5 		ldr	r3, [fp, #4]
 10875 0438 7F3003E2 		and	r3, r3, #127
 10876 043c 8322A0E1 		lsl	r2, r3, #5
 10877 0440 10301BE5 		ldr	r3, [fp, #-16]
 10878 0444 0C3093E5 		ldr	r3, [r3, #12]
 10879 0448 033082E0 		add	r3, r2, r3
 10880 044c 10300BE5 		str	r3, [fp, #-16]
 10881 0450 10301BE5 		ldr	r3, [fp, #-16]
 10882 0454 0300A0E1 		mov	r0, r3
 10883 0458 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 10884 045c 14000BE5 		str	r0, [fp, #-20]
 10885              		.loc 1 4800 5 discriminator 1
 10886 0460 14301BE5 		ldr	r3, [fp, #-20]
 10887 0464 FF3803E2 		and	r3, r3, #16711680
 10888 0468 020853E3 		cmp	r3, #131072
 10889 046c 0100001A 		bne	.L697
 10890              		.loc 1 4800 5 discriminator 16
 10891 0470 0830E0E3 		mvn	r3, #8
 10892              		.loc 1 4800 5
 10893 0474 680000EA 		b	.L672
 10894              	.L697:
 10895              		.loc 1 4800 5 discriminator 17
 10896 0478 14301BE5 		ldr	r3, [fp, #-20]
 10897 047c 233CA0E1 		lsr	r3, r3, #24
 10898 0480 040053E3 		cmp	r3, #4
 10899 0484 0100000A 		beq	.L692
 10900              		.loc 1 4800 5 discriminator 18
 10901 0488 0130E0E3 		mvn	r3, #1
 10902              		.loc 1 4800 5
 10903 048c 620000EA 		b	.L672
 10904              	.L692:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 277


4801:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_Op,Type_Stat);
4802:../../Source/Kernel/rme_kernel.c **** #endif
4803:../../Source/Kernel/rme_kernel.c ****     /* Check if the captbl is not frozen and allows such operations */
4804:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Crt,RME_CPT_FLAG_CRT);
 10905              		.loc 1 4804 5 is_stmt 1
 10906 0490 08301BE5 		ldr	r3, [fp, #-8]
 10907 0494 083093E5 		ldr	r3, [r3, #8]
 10908 0498 013003E2 		and	r3, r3, #1
 10909 049c 000053E3 		cmp	r3, #0
 10910 04a0 0100001A 		bne	.L698
 10911              		.loc 1 4804 5 is_stmt 0 discriminator 1
 10912 04a4 0630E0E3 		mvn	r3, #6
 10913              		.loc 1 4804 5
 10914 04a8 5B0000EA 		b	.L672
 10915              	.L698:
4805:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_PRC_CRT);
 10916              		.loc 1 4805 5 is_stmt 1
 10917 04ac 0C301BE5 		ldr	r3, [fp, #-12]
 10918 04b0 083093E5 		ldr	r3, [r3, #8]
 10919 04b4 403003E2 		and	r3, r3, #64
 10920 04b8 000053E3 		cmp	r3, #0
 10921 04bc 0100001A 		bne	.L699
 10922              		.loc 1 4805 5 is_stmt 0 discriminator 1
 10923 04c0 0630E0E3 		mvn	r3, #6
 10924              		.loc 1 4805 5
 10925 04c4 540000EA 		b	.L672
 10926              	.L699:
4806:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4807:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_Op,RME_PGT_FLAG_PRC_CRT);
 10927              		.loc 1 4807 5 is_stmt 1
 10928 04c8 10301BE5 		ldr	r3, [fp, #-16]
 10929 04cc 083093E5 		ldr	r3, [r3, #8]
 10930 04d0 403003E2 		and	r3, r3, #64
 10931 04d4 000053E3 		cmp	r3, #0
 10932 04d8 0100001A 		bne	.L700
 10933              		.loc 1 4807 5 is_stmt 0 discriminator 1
 10934 04dc 0630E0E3 		mvn	r3, #6
 10935              		.loc 1 4807 5
 10936 04e0 4D0000EA 		b	.L672
 10937              	.L700:
4808:../../Source/Kernel/rme_kernel.c **** #endif
4809:../../Source/Kernel/rme_kernel.c ****     
4810:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
4811:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Crt,Cap_Prc,struct RME_Cap_Prc*,Prc_Crt);
 10938              		.loc 1 4811 5 is_stmt 1
 10939 04e4 08301BE5 		ldr	r3, [fp, #-8]
 10940 04e8 142093E5 		ldr	r2, [r3, #20]
 10941 04ec 30301BE5 		ldr	r3, [fp, #-48]
 10942 04f0 030052E1 		cmp	r2, r3
 10943 04f4 0100008A 		bhi	.L701
 10944              		.loc 1 4811 5 is_stmt 0 discriminator 1
 10945 04f8 0230E0E3 		mvn	r3, #2
 10946              		.loc 1 4811 5
 10947 04fc 460000EA 		b	.L672
 10948              	.L701:
 10949              		.loc 1 4811 5 discriminator 2
 10950 0500 30301BE5 		ldr	r3, [fp, #-48]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 278


 10951 0504 8322A0E1 		lsl	r2, r3, #5
 10952 0508 08301BE5 		ldr	r3, [fp, #-8]
 10953 050c 0C3093E5 		ldr	r3, [r3, #12]
 10954 0510 033082E0 		add	r3, r2, r3
 10955 0514 18300BE5 		str	r3, [fp, #-24]
4812:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
4813:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Prc_Crt);
 10956              		.loc 1 4813 5 is_stmt 1
 10957 0518 18301BE5 		ldr	r3, [fp, #-24]
 10958 051c 0128A0E3 		mov	r2, #65536
 10959 0520 0010A0E3 		mov	r1, #0
 10960 0524 0300A0E1 		mov	r0, r3
 10961 0528 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 10962 052c 0030A0E1 		mov	r3, r0
 10963              		.loc 1 4813 5 is_stmt 0 discriminator 1
 10964 0530 000053E3 		cmp	r3, #0
 10965 0534 0100001A 		bne	.L702
 10966 0538 0430E0E3 		mvn	r3, #4
 10967              		.loc 1 4813 5
 10968 053c 360000EA 		b	.L672
 10969              	.L702:
 10970              		.loc 1 4813 5 discriminator 2
 10971 0540 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 10972 0544 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 10973 0548 002093E5 		ldr	r2, [r3]
 10974 054c 18301BE5 		ldr	r3, [fp, #-24]
 10975 0550 102083E5 		str	r2, [r3, #16]
4814:../../Source/Kernel/rme_kernel.c ****     
4815:../../Source/Kernel/rme_kernel.c ****     /* Header init */
4816:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Root_Ref=0U;
 10976              		.loc 1 4816 27 is_stmt 1
 10977 0554 18301BE5 		ldr	r3, [fp, #-24]
 10978 0558 0020A0E3 		mov	r2, #0
 10979 055c 042083E5 		str	r2, [r3, #4]
4817:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Object=0U;
 10980              		.loc 1 4817 25
 10981 0560 18301BE5 		ldr	r3, [fp, #-24]
 10982 0564 0020A0E3 		mov	r2, #0
 10983 0568 0C2083E5 		str	r2, [r3, #12]
4818:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Head.Flag=RME_PRC_FLAG_ALL;
 10984              		.loc 1 4818 23
 10985 056c 18301BE5 		ldr	r3, [fp, #-24]
 10986 0570 0F20A0E3 		mov	r2, #15
 10987 0574 082083E5 		str	r2, [r3, #8]
4819:../../Source/Kernel/rme_kernel.c ****     
4820:../../Source/Kernel/rme_kernel.c ****     /* Info init */
4821:../../Source/Kernel/rme_kernel.c ****     Prc_Cpt=RME_CAP_CONV_ROOT(Cpt_Op,struct RME_Cap_Cpt*);
 10988              		.loc 1 4821 13
 10989 0578 0C301BE5 		ldr	r3, [fp, #-12]
 10990 057c 003093E5 		ldr	r3, [r3]
 10991 0580 7330FFE6 		uxth	r3, r3
 10992 0584 000053E3 		cmp	r3, #0
 10993 0588 0200000A 		beq	.L703
 10994              		.loc 1 4821 13 is_stmt 0 discriminator 1
 10995 058c 0C301BE5 		ldr	r3, [fp, #-12]
 10996 0590 043093E5 		ldr	r3, [r3, #4]
 10997 0594 000000EA 		b	.L704
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 279


 10998              	.L703:
 10999              		.loc 1 4821 13 discriminator 2
 11000 0598 0C301BE5 		ldr	r3, [fp, #-12]
 11001              	.L704:
 11002              		.loc 1 4821 12 is_stmt 1 discriminator 4
 11003 059c 1C300BE5 		str	r3, [fp, #-28]
4822:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4823:../../Source/Kernel/rme_kernel.c ****     Prc_Pgt=RME_CAP_CONV_ROOT(Pgt_Op,struct RME_Cap_Pgt*);
 11004              		.loc 1 4823 13
 11005 05a0 10301BE5 		ldr	r3, [fp, #-16]
 11006 05a4 003093E5 		ldr	r3, [r3]
 11007 05a8 7330FFE6 		uxth	r3, r3
 11008 05ac 000053E3 		cmp	r3, #0
 11009 05b0 0200000A 		beq	.L705
 11010              		.loc 1 4823 13 is_stmt 0 discriminator 1
 11011 05b4 10301BE5 		ldr	r3, [fp, #-16]
 11012 05b8 043093E5 		ldr	r3, [r3, #4]
 11013 05bc 000000EA 		b	.L706
 11014              	.L705:
 11015              		.loc 1 4823 13 discriminator 2
 11016 05c0 10301BE5 		ldr	r3, [fp, #-16]
 11017              	.L706:
 11018              		.loc 1 4823 12 is_stmt 1 discriminator 4
 11019 05c4 20300BE5 		str	r3, [fp, #-32]
4824:../../Source/Kernel/rme_kernel.c **** #endif
4825:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Cpt=Prc_Cpt;
 11020              		.loc 1 4825 17
 11021 05c8 18301BE5 		ldr	r3, [fp, #-24]
 11022 05cc 1C201BE5 		ldr	r2, [fp, #-28]
 11023 05d0 142083E5 		str	r2, [r3, #20]
4826:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4827:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Pgt=Prc_Pgt;
 11024              		.loc 1 4827 17
 11025 05d4 18301BE5 		ldr	r3, [fp, #-24]
 11026 05d8 20201BE5 		ldr	r2, [fp, #-32]
 11027 05dc 182083E5 		str	r2, [r3, #24]
4828:../../Source/Kernel/rme_kernel.c **** #else
4829:../../Source/Kernel/rme_kernel.c ****     Prc_Crt->Pgt=Raw_Pgt;
4830:../../Source/Kernel/rme_kernel.c **** #endif
4831:../../Source/Kernel/rme_kernel.c ****     
4832:../../Source/Kernel/rme_kernel.c ****     /* Reference objects */
4833:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Cpt->Head.Root_Ref),1U);
 11028              		.loc 1 4833 5
 11029 05e0 1C301BE5 		ldr	r3, [fp, #-28]
 11030 05e4 043083E2 		add	r3, r3, #4
 11031 05e8 0110A0E3 		mov	r1, #1
 11032 05ec 0300A0E1 		mov	r0, r3
 11033 05f0 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4834:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4835:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Pgt->Head.Root_Ref),1U);
 11034              		.loc 1 4835 5
 11035 05f4 20301BE5 		ldr	r3, [fp, #-32]
 11036 05f8 043083E2 		add	r3, r3, #4
 11037 05fc 0110A0E3 		mov	r1, #1
 11038 0600 0300A0E1 		mov	r0, r3
 11039 0604 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4836:../../Source/Kernel/rme_kernel.c **** #endif
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 280


4837:../../Source/Kernel/rme_kernel.c **** 
4838:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
4839:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Prc_Crt->Head.Type_Stat),
 11040              		.loc 1 4839 5
 11041 0608 18301BE5 		ldr	r3, [fp, #-24]
 11042 060c 0514A0E3 		mov	r1, #83886080
 11043 0610 0300A0E1 		mov	r0, r3
 11044 0614 FEFFFFEB 		bl	__RME_A7A_Write_Release
4840:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_PRC,
4841:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
4842:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
4843:../../Source/Kernel/rme_kernel.c **** 
4844:../../Source/Kernel/rme_kernel.c ****     return 0;
 11045              		.loc 1 4844 12
 11046 0618 0030A0E3 		mov	r3, #0
 11047              	.L672:
4845:../../Source/Kernel/rme_kernel.c **** }
 11048              		.loc 1 4845 1
 11049 061c 0300A0E1 		mov	r0, r3
 11050 0620 04D04BE2 		sub	sp, fp, #4
 11051              		.cfi_def_cfa 13, 8
 11052              		@ sp needed
 11053 0624 0088BDE8 		pop	{fp, pc}
 11054              		.cfi_endproc
 11055              	.LFE51:
 11057              		.section	.text._RME_Prc_Del,"ax",%progbits
 11058              		.align	2
 11059              		.syntax unified
 11060              		.arm
 11062              	_RME_Prc_Del:
 11063              	.LFB52:
4846:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Prc_Crt *************************************************/
4847:../../Source/Kernel/rme_kernel.c **** 
4848:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Prc_Del ******************************************************
4849:../../Source/Kernel/rme_kernel.c **** Description : Delete a process.
4850:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The capability table.
4851:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table.
4852:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4853:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process.
4854:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
4855:../../Source/Kernel/rme_kernel.c **** Output      : None.
4856:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4857:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4858:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Del(struct RME_Cap_Cpt* Cpt,
4859:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
4860:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc)
4861:../../Source/Kernel/rme_kernel.c **** {
 11064              		.loc 1 4861 1
 11065              		.cfi_startproc
 11066              		@ args = 0, pretend = 0, frame = 40
 11067              		@ frame_needed = 1, uses_anonymous_args = 0
 11068 0000 00482DE9 		push	{fp, lr}
 11069              		.cfi_def_cfa_offset 8
 11070              		.cfi_offset 11, -8
 11071              		.cfi_offset 14, -4
 11072 0004 04B08DE2 		add	fp, sp, #4
 11073              		.cfi_def_cfa 11, 4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 281


 11074 0008 28D04DE2 		sub	sp, sp, #40
 11075 000c 20000BE5 		str	r0, [fp, #-32]
 11076 0010 24100BE5 		str	r1, [fp, #-36]
 11077 0014 28200BE5 		str	r2, [fp, #-40]
4862:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
4863:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Del;
4864:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4865:../../Source/Kernel/rme_kernel.c ****     /* For deletion use */
4866:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Prc_Cpt;
4867:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4868:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Prc_Pgt;
4869:../../Source/Kernel/rme_kernel.c **** #endif
4870:../../Source/Kernel/rme_kernel.c **** 
4871:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
4872:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 11078              		.loc 1 4872 5
 11079 0018 24301BE5 		ldr	r3, [fp, #-36]
 11080 001c 803003E2 		and	r3, r3, #128
 11081 0020 000053E3 		cmp	r3, #0
 11082 0024 1C00001A 		bne	.L708
 11083              		.loc 1 4872 5 is_stmt 0 discriminator 1
 11084 0028 20301BE5 		ldr	r3, [fp, #-32]
 11085 002c 142093E5 		ldr	r2, [r3, #20]
 11086 0030 24301BE5 		ldr	r3, [fp, #-36]
 11087 0034 030052E1 		cmp	r2, r3
 11088 0038 0100008A 		bhi	.L709
 11089              		.loc 1 4872 5 discriminator 3
 11090 003c 0230E0E3 		mvn	r3, #2
 11091              		.loc 1 4872 5
 11092 0040 BC0000EA 		b	.L710
 11093              	.L709:
 11094              		.loc 1 4872 5 discriminator 4
 11095 0044 24301BE5 		ldr	r3, [fp, #-36]
 11096 0048 8322A0E1 		lsl	r2, r3, #5
 11097 004c 20301BE5 		ldr	r3, [fp, #-32]
 11098 0050 0C3093E5 		ldr	r3, [r3, #12]
 11099 0054 033082E0 		add	r3, r2, r3
 11100 0058 08300BE5 		str	r3, [fp, #-8]
 11101 005c 08301BE5 		ldr	r3, [fp, #-8]
 11102 0060 0300A0E1 		mov	r0, r3
 11103 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11104 0068 0C000BE5 		str	r0, [fp, #-12]
 11105              		.loc 1 4872 5 discriminator 1
 11106 006c 0C301BE5 		ldr	r3, [fp, #-12]
 11107 0070 FF3803E2 		and	r3, r3, #16711680
 11108 0074 020853E3 		cmp	r3, #131072
 11109 0078 0100001A 		bne	.L711
 11110              		.loc 1 4872 5 discriminator 5
 11111 007c 0830E0E3 		mvn	r3, #8
 11112              		.loc 1 4872 5
 11113 0080 AC0000EA 		b	.L710
 11114              	.L711:
 11115              		.loc 1 4872 5 discriminator 6
 11116 0084 0C301BE5 		ldr	r3, [fp, #-12]
 11117 0088 233CA0E1 		lsr	r3, r3, #24
 11118 008c 030053E3 		cmp	r3, #3
 11119 0090 3F00000A 		beq	.L712
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 282


 11120              		.loc 1 4872 5 discriminator 7
 11121 0094 0130E0E3 		mvn	r3, #1
 11122              		.loc 1 4872 5
 11123 0098 A60000EA 		b	.L710
 11124              	.L708:
 11125              		.loc 1 4872 5 discriminator 2
 11126 009c 24301BE5 		ldr	r3, [fp, #-36]
 11127 00a0 2324A0E1 		lsr	r2, r3, #8
 11128 00a4 20301BE5 		ldr	r3, [fp, #-32]
 11129 00a8 143093E5 		ldr	r3, [r3, #20]
 11130 00ac 030052E1 		cmp	r2, r3
 11131 00b0 0100003A 		bcc	.L713
 11132              		.loc 1 4872 5 discriminator 8
 11133 00b4 0230E0E3 		mvn	r3, #2
 11134              		.loc 1 4872 5
 11135 00b8 9E0000EA 		b	.L710
 11136              	.L713:
 11137              		.loc 1 4872 5 discriminator 9
 11138 00bc 24301BE5 		ldr	r3, [fp, #-36]
 11139 00c0 2334A0E1 		lsr	r3, r3, #8
 11140 00c4 8322A0E1 		lsl	r2, r3, #5
 11141 00c8 20301BE5 		ldr	r3, [fp, #-32]
 11142 00cc 0C3093E5 		ldr	r3, [r3, #12]
 11143 00d0 033082E0 		add	r3, r2, r3
 11144 00d4 08300BE5 		str	r3, [fp, #-8]
 11145 00d8 08301BE5 		ldr	r3, [fp, #-8]
 11146 00dc 0300A0E1 		mov	r0, r3
 11147 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11148 00e4 0C000BE5 		str	r0, [fp, #-12]
 11149              		.loc 1 4872 5 discriminator 1
 11150 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 11151 00ec FF3803E2 		and	r3, r3, #16711680
 11152 00f0 020853E3 		cmp	r3, #131072
 11153 00f4 0100001A 		bne	.L714
 11154              		.loc 1 4872 5 discriminator 10
 11155 00f8 0830E0E3 		mvn	r3, #8
 11156              		.loc 1 4872 5
 11157 00fc 8D0000EA 		b	.L710
 11158              	.L714:
 11159              		.loc 1 4872 5 discriminator 11
 11160 0100 0C301BE5 		ldr	r3, [fp, #-12]
 11161 0104 233CA0E1 		lsr	r3, r3, #24
 11162 0108 030053E3 		cmp	r3, #3
 11163 010c 0100000A 		beq	.L715
 11164              		.loc 1 4872 5 discriminator 12
 11165 0110 0130E0E3 		mvn	r3, #1
 11166              		.loc 1 4872 5
 11167 0114 870000EA 		b	.L710
 11168              	.L715:
 11169              		.loc 1 4872 5 discriminator 13
 11170 0118 24301BE5 		ldr	r3, [fp, #-36]
 11171 011c 7F2003E2 		and	r2, r3, #127
 11172 0120 08301BE5 		ldr	r3, [fp, #-8]
 11173 0124 143093E5 		ldr	r3, [r3, #20]
 11174 0128 030052E1 		cmp	r2, r3
 11175 012c 0100003A 		bcc	.L716
 11176              		.loc 1 4872 5 discriminator 14
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 283


 11177 0130 0230E0E3 		mvn	r3, #2
 11178              		.loc 1 4872 5
 11179 0134 7F0000EA 		b	.L710
 11180              	.L716:
 11181              		.loc 1 4872 5 discriminator 15
 11182 0138 24301BE5 		ldr	r3, [fp, #-36]
 11183 013c 7F3003E2 		and	r3, r3, #127
 11184 0140 8322A0E1 		lsl	r2, r3, #5
 11185 0144 08301BE5 		ldr	r3, [fp, #-8]
 11186 0148 0C3093E5 		ldr	r3, [r3, #12]
 11187 014c 033082E0 		add	r3, r2, r3
 11188 0150 08300BE5 		str	r3, [fp, #-8]
 11189 0154 08301BE5 		ldr	r3, [fp, #-8]
 11190 0158 0300A0E1 		mov	r0, r3
 11191 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11192 0160 0C000BE5 		str	r0, [fp, #-12]
 11193              		.loc 1 4872 5 discriminator 1
 11194 0164 0C301BE5 		ldr	r3, [fp, #-12]
 11195 0168 FF3803E2 		and	r3, r3, #16711680
 11196 016c 020853E3 		cmp	r3, #131072
 11197 0170 0100001A 		bne	.L717
 11198              		.loc 1 4872 5 discriminator 16
 11199 0174 0830E0E3 		mvn	r3, #8
 11200              		.loc 1 4872 5
 11201 0178 6E0000EA 		b	.L710
 11202              	.L717:
 11203              		.loc 1 4872 5 discriminator 17
 11204 017c 0C301BE5 		ldr	r3, [fp, #-12]
 11205 0180 233CA0E1 		lsr	r3, r3, #24
 11206 0184 030053E3 		cmp	r3, #3
 11207 0188 0100000A 		beq	.L712
 11208              		.loc 1 4872 5 discriminator 18
 11209 018c 0130E0E3 		mvn	r3, #1
 11210              		.loc 1 4872 5
 11211 0190 680000EA 		b	.L710
 11212              	.L712:
4873:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
4874:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
4875:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 11213              		.loc 1 4875 5 is_stmt 1
 11214 0194 08301BE5 		ldr	r3, [fp, #-8]
 11215 0198 083093E5 		ldr	r3, [r3, #8]
 11216 019c 023003E2 		and	r3, r3, #2
 11217 01a0 000053E3 		cmp	r3, #0
 11218 01a4 0100001A 		bne	.L718
 11219              		.loc 1 4875 5 is_stmt 0 discriminator 1
 11220 01a8 0630E0E3 		mvn	r3, #6
 11221              		.loc 1 4875 5
 11222 01ac 610000EA 		b	.L710
 11223              	.L718:
4876:../../Source/Kernel/rme_kernel.c **** 
4877:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
4878:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Prc,struct RME_Cap_Prc*,Prc_Del);
 11224              		.loc 1 4878 5 is_stmt 1
 11225 01b0 08301BE5 		ldr	r3, [fp, #-8]
 11226 01b4 142093E5 		ldr	r2, [r3, #20]
 11227 01b8 28301BE5 		ldr	r3, [fp, #-40]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 284


 11228 01bc 030052E1 		cmp	r2, r3
 11229 01c0 0100008A 		bhi	.L719
 11230              		.loc 1 4878 5 is_stmt 0 discriminator 1
 11231 01c4 0230E0E3 		mvn	r3, #2
 11232              		.loc 1 4878 5
 11233 01c8 5A0000EA 		b	.L710
 11234              	.L719:
 11235              		.loc 1 4878 5 discriminator 2
 11236 01cc 28301BE5 		ldr	r3, [fp, #-40]
 11237 01d0 8322A0E1 		lsl	r2, r3, #5
 11238 01d4 08301BE5 		ldr	r3, [fp, #-8]
 11239 01d8 0C3093E5 		ldr	r3, [r3, #12]
 11240 01dc 033082E0 		add	r3, r2, r3
 11241 01e0 10300BE5 		str	r3, [fp, #-16]
4879:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
4880:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Prc_Del,Type_Stat,RME_CAP_TYPE_PRC);
 11242              		.loc 1 4880 5 is_stmt 1
 11243 01e4 10301BE5 		ldr	r3, [fp, #-16]
 11244 01e8 0300A0E1 		mov	r0, r3
 11245 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11246 01f0 0C000BE5 		str	r0, [fp, #-12]
 11247              		.loc 1 4880 5 is_stmt 0 discriminator 1
 11248 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 11249 01f8 FF3803E2 		and	r3, r3, #16711680
 11250 01fc 020853E3 		cmp	r3, #131072
 11251 0200 0100000A 		beq	.L720
 11252 0204 0830E0E3 		mvn	r3, #8
 11253              		.loc 1 4880 5
 11254 0208 4A0000EA 		b	.L710
 11255              	.L720:
 11256              		.loc 1 4880 5 discriminator 2
 11257 020c 0C301BE5 		ldr	r3, [fp, #-12]
 11258 0210 233CA0E1 		lsr	r3, r3, #24
 11259 0214 050053E3 		cmp	r3, #5
 11260 0218 0100000A 		beq	.L721
 11261              		.loc 1 4880 5 discriminator 3
 11262 021c 0130E0E3 		mvn	r3, #1
 11263              		.loc 1 4880 5
 11264 0220 440000EA 		b	.L710
 11265              	.L721:
 11266              		.loc 1 4880 5 discriminator 4
 11267 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 11268 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 11269 022c 002093E5 		ldr	r2, [r3]
 11270 0230 10301BE5 		ldr	r3, [fp, #-16]
 11271 0234 103093E5 		ldr	r3, [r3, #16]
 11272 0238 0310A0E1 		mov	r1, r3
 11273 023c 0200A0E1 		mov	r0, r2
 11274 0240 FEFFFFEB 		bl	_RME_Diff
 11275 0244 0030A0E1 		mov	r3, r0
 11276              		.loc 1 4880 5 discriminator 1
 11277 0248 0A0053E3 		cmp	r3, #10
 11278 024c 0100008A 		bhi	.L722
 11279              		.loc 1 4880 5 discriminator 5
 11280 0250 0730E0E3 		mvn	r3, #7
 11281              		.loc 1 4880 5
 11282 0254 370000EA 		b	.L710
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 285


 11283              	.L722:
 11284              		.loc 1 4880 5 discriminator 6
 11285 0258 10301BE5 		ldr	r3, [fp, #-16]
 11286 025c 043093E5 		ldr	r3, [r3, #4]
 11287 0260 000053E3 		cmp	r3, #0
 11288 0264 0B00000A 		beq	.L723
 11289              		.loc 1 4880 5 discriminator 7
 11290 0268 0C301BE5 		ldr	r3, [fp, #-12]
 11291 026c 7330FFE6 		uxth	r3, r3
 11292 0270 000053E3 		cmp	r3, #0
 11293 0274 0500001A 		bne	.L724
 11294              		.loc 1 4880 5 discriminator 9
 11295 0278 10001BE5 		ldr	r0, [fp, #-16]
 11296 027c 0C301BE5 		ldr	r3, [fp, #-12]
 11297 0280 FF38C3E3 		bic	r3, r3, #16711680
 11298 0284 0320A0E1 		mov	r2, r3
 11299 0288 0C101BE5 		ldr	r1, [fp, #-12]
 11300 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 11301              	.L724:
 11302              		.loc 1 4880 5 discriminator 11
 11303 0290 0530E0E3 		mvn	r3, #5
 11304              		.loc 1 4880 5
 11305 0294 270000EA 		b	.L710
 11306              	.L723:
 11307              		.loc 1 4880 5 discriminator 8
 11308 0298 0C301BE5 		ldr	r3, [fp, #-12]
 11309 029c 7330FFE6 		uxth	r3, r3
 11310 02a0 000053E3 		cmp	r3, #0
 11311 02a4 0800000A 		beq	.L725
 11312              		.loc 1 4880 5 discriminator 12
 11313 02a8 003000E3 		movw	r3, #:lower16:.LC6
 11314 02ac 003040E3 		movt	r3, #:upper16:.LC6
 11315 02b0 002000E3 		movw	r2, #:lower16:.LC7
 11316 02b4 002040E3 		movt	r2, #:upper16:.LC7
 11317 02b8 101301E3 		movw	r1, #4880
 11318 02bc 000000E3 		movw	r0, #:lower16:.LC8
 11319 02c0 000040E3 		movt	r0, #:upper16:.LC8
 11320 02c4 FEFFFFEB 		bl	RME_Log
 11321              	.L726:
 11322              		.loc 1 4880 5
 11323 02c8 FEFFFFEA 		b	.L726
 11324              	.L725:
4881:../../Source/Kernel/rme_kernel.c **** 
4882:../../Source/Kernel/rme_kernel.c ****     /* Remember for deletion */
4883:../../Source/Kernel/rme_kernel.c ****     Prc_Cpt=Prc_Del->Cpt;
 11325              		.loc 1 4883 12 is_stmt 1
 11326 02cc 10301BE5 		ldr	r3, [fp, #-16]
 11327 02d0 143093E5 		ldr	r3, [r3, #20]
 11328 02d4 14300BE5 		str	r3, [fp, #-20]
4884:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4885:../../Source/Kernel/rme_kernel.c ****     Prc_Pgt=Prc_Del->Pgt;
 11329              		.loc 1 4885 12
 11330 02d8 10301BE5 		ldr	r3, [fp, #-16]
 11331 02dc 183093E5 		ldr	r3, [r3, #24]
 11332 02e0 18300BE5 		str	r3, [fp, #-24]
4886:../../Source/Kernel/rme_kernel.c **** #endif
4887:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 286


4888:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
4889:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Prc_Del,Type_Stat);
 11333              		.loc 1 4889 5
 11334 02e4 10301BE5 		ldr	r3, [fp, #-16]
 11335 02e8 0020A0E3 		mov	r2, #0
 11336 02ec 0C101BE5 		ldr	r1, [fp, #-12]
 11337 02f0 0300A0E1 		mov	r0, r3
 11338 02f4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 11339 02f8 0030A0E1 		mov	r3, r0
 11340              		.loc 1 4889 5 is_stmt 0 discriminator 1
 11341 02fc 000053E3 		cmp	r3, #0
 11342 0300 0100001A 		bne	.L727
 11343 0304 0030E0E3 		mvn	r3, #0
 11344              		.loc 1 4889 5
 11345 0308 0A0000EA 		b	.L710
 11346              	.L727:
4890:../../Source/Kernel/rme_kernel.c **** 
4891:../../Source/Kernel/rme_kernel.c ****     /* Dereference caps */
4892:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Cpt->Head.Root_Ref),-1);
 11347              		.loc 1 4892 5 is_stmt 1
 11348 030c 14301BE5 		ldr	r3, [fp, #-20]
 11349 0310 043083E2 		add	r3, r3, #4
 11350 0314 0010E0E3 		mvn	r1, #0
 11351 0318 0300A0E1 		mov	r0, r3
 11352 031c FEFFFFEB 		bl	_RME_Fetch_Add_Single
4893:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4894:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Pgt->Head.Root_Ref),-1);
 11353              		.loc 1 4894 5
 11354 0320 18301BE5 		ldr	r3, [fp, #-24]
 11355 0324 043083E2 		add	r3, r3, #4
 11356 0328 0010E0E3 		mvn	r1, #0
 11357 032c 0300A0E1 		mov	r0, r3
 11358 0330 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4895:../../Source/Kernel/rme_kernel.c **** #endif
4896:../../Source/Kernel/rme_kernel.c ****     
4897:../../Source/Kernel/rme_kernel.c ****     return 0;
 11359              		.loc 1 4897 12
 11360 0334 0030A0E3 		mov	r3, #0
 11361              	.L710:
4898:../../Source/Kernel/rme_kernel.c **** }
 11362              		.loc 1 4898 1
 11363 0338 0300A0E1 		mov	r0, r3
 11364 033c 04D04BE2 		sub	sp, fp, #4
 11365              		.cfi_def_cfa 13, 8
 11366              		@ sp needed
 11367 0340 0088BDE8 		pop	{fp, pc}
 11368              		.cfi_endproc
 11369              	.LFE52:
 11371              		.section	.text._RME_Prc_Cpt,"ax",%progbits
 11372              		.align	2
 11373              		.syntax unified
 11374              		.arm
 11376              	_RME_Prc_Cpt:
 11377              	.LFB53:
4899:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Prc_Del *************************************************/
4900:../../Source/Kernel/rme_kernel.c **** 
4901:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Prc_Cpt ******************************************************
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 287


4902:../../Source/Kernel/rme_kernel.c **** Description : Change a process's capability table.
4903:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
4904:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process that have been
4905:../../Source/Kernel/rme_kernel.c ****                                   created already.
4906:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4907:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
4908:../../Source/Kernel/rme_kernel.c ****                                   for this process.
4909:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4910:../../Source/Kernel/rme_kernel.c **** Output      : None.
4911:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4912:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4913:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Cpt(struct RME_Cap_Cpt* Cpt,
4914:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
4915:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt)
4916:../../Source/Kernel/rme_kernel.c **** {
 11378              		.loc 1 4916 1
 11379              		.cfi_startproc
 11380              		@ args = 0, pretend = 0, frame = 32
 11381              		@ frame_needed = 1, uses_anonymous_args = 0
 11382 0000 00482DE9 		push	{fp, lr}
 11383              		.cfi_def_cfa_offset 8
 11384              		.cfi_offset 11, -8
 11385              		.cfi_offset 14, -4
 11386 0004 04B08DE2 		add	fp, sp, #4
 11387              		.cfi_def_cfa 11, 4
 11388 0008 20D04DE2 		sub	sp, sp, #32
 11389 000c 18000BE5 		str	r0, [fp, #-24]
 11390 0010 1C100BE5 		str	r1, [fp, #-28]
 11391 0014 20200BE5 		str	r2, [fp, #-32]
4917:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Op;
4918:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_New;
4919:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Old;
4920:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4921:../../Source/Kernel/rme_kernel.c ****     
4922:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
4923:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Prc,RME_CAP_TYPE_PRC,
 11392              		.loc 1 4923 5
 11393 0018 1C301BE5 		ldr	r3, [fp, #-28]
 11394 001c 803003E2 		and	r3, r3, #128
 11395 0020 000053E3 		cmp	r3, #0
 11396 0024 1C00001A 		bne	.L729
 11397              		.loc 1 4923 5 is_stmt 0 discriminator 1
 11398 0028 18301BE5 		ldr	r3, [fp, #-24]
 11399 002c 142093E5 		ldr	r2, [r3, #20]
 11400 0030 1C301BE5 		ldr	r3, [fp, #-28]
 11401 0034 030052E1 		cmp	r2, r3
 11402 0038 0100008A 		bhi	.L730
 11403              		.loc 1 4923 5 discriminator 3
 11404 003c 0230E0E3 		mvn	r3, #2
 11405              		.loc 1 4923 5
 11406 0040 E30000EA 		b	.L731
 11407              	.L730:
 11408              		.loc 1 4923 5 discriminator 4
 11409 0044 1C301BE5 		ldr	r3, [fp, #-28]
 11410 0048 8322A0E1 		lsl	r2, r3, #5
 11411 004c 18301BE5 		ldr	r3, [fp, #-24]
 11412 0050 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 288


 11413 0054 033082E0 		add	r3, r2, r3
 11414 0058 08300BE5 		str	r3, [fp, #-8]
 11415 005c 08301BE5 		ldr	r3, [fp, #-8]
 11416 0060 0300A0E1 		mov	r0, r3
 11417 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11418 0068 10000BE5 		str	r0, [fp, #-16]
 11419              		.loc 1 4923 5 discriminator 1
 11420 006c 10301BE5 		ldr	r3, [fp, #-16]
 11421 0070 FF3803E2 		and	r3, r3, #16711680
 11422 0074 020853E3 		cmp	r3, #131072
 11423 0078 0100001A 		bne	.L732
 11424              		.loc 1 4923 5 discriminator 5
 11425 007c 0830E0E3 		mvn	r3, #8
 11426              		.loc 1 4923 5
 11427 0080 D30000EA 		b	.L731
 11428              	.L732:
 11429              		.loc 1 4923 5 discriminator 6
 11430 0084 10301BE5 		ldr	r3, [fp, #-16]
 11431 0088 233CA0E1 		lsr	r3, r3, #24
 11432 008c 050053E3 		cmp	r3, #5
 11433 0090 3F00000A 		beq	.L733
 11434              		.loc 1 4923 5 discriminator 7
 11435 0094 0130E0E3 		mvn	r3, #1
 11436              		.loc 1 4923 5
 11437 0098 CD0000EA 		b	.L731
 11438              	.L729:
 11439              		.loc 1 4923 5 discriminator 2
 11440 009c 1C301BE5 		ldr	r3, [fp, #-28]
 11441 00a0 2324A0E1 		lsr	r2, r3, #8
 11442 00a4 18301BE5 		ldr	r3, [fp, #-24]
 11443 00a8 143093E5 		ldr	r3, [r3, #20]
 11444 00ac 030052E1 		cmp	r2, r3
 11445 00b0 0100003A 		bcc	.L734
 11446              		.loc 1 4923 5 discriminator 8
 11447 00b4 0230E0E3 		mvn	r3, #2
 11448              		.loc 1 4923 5
 11449 00b8 C50000EA 		b	.L731
 11450              	.L734:
 11451              		.loc 1 4923 5 discriminator 9
 11452 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 11453 00c0 2334A0E1 		lsr	r3, r3, #8
 11454 00c4 8322A0E1 		lsl	r2, r3, #5
 11455 00c8 18301BE5 		ldr	r3, [fp, #-24]
 11456 00cc 0C3093E5 		ldr	r3, [r3, #12]
 11457 00d0 033082E0 		add	r3, r2, r3
 11458 00d4 08300BE5 		str	r3, [fp, #-8]
 11459 00d8 08301BE5 		ldr	r3, [fp, #-8]
 11460 00dc 0300A0E1 		mov	r0, r3
 11461 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11462 00e4 10000BE5 		str	r0, [fp, #-16]
 11463              		.loc 1 4923 5 discriminator 1
 11464 00e8 10301BE5 		ldr	r3, [fp, #-16]
 11465 00ec FF3803E2 		and	r3, r3, #16711680
 11466 00f0 020853E3 		cmp	r3, #131072
 11467 00f4 0100001A 		bne	.L735
 11468              		.loc 1 4923 5 discriminator 10
 11469 00f8 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 289


 11470              		.loc 1 4923 5
 11471 00fc B40000EA 		b	.L731
 11472              	.L735:
 11473              		.loc 1 4923 5 discriminator 11
 11474 0100 10301BE5 		ldr	r3, [fp, #-16]
 11475 0104 233CA0E1 		lsr	r3, r3, #24
 11476 0108 030053E3 		cmp	r3, #3
 11477 010c 0100000A 		beq	.L736
 11478              		.loc 1 4923 5 discriminator 12
 11479 0110 0130E0E3 		mvn	r3, #1
 11480              		.loc 1 4923 5
 11481 0114 AE0000EA 		b	.L731
 11482              	.L736:
 11483              		.loc 1 4923 5 discriminator 13
 11484 0118 1C301BE5 		ldr	r3, [fp, #-28]
 11485 011c 7F2003E2 		and	r2, r3, #127
 11486 0120 08301BE5 		ldr	r3, [fp, #-8]
 11487 0124 143093E5 		ldr	r3, [r3, #20]
 11488 0128 030052E1 		cmp	r2, r3
 11489 012c 0100003A 		bcc	.L737
 11490              		.loc 1 4923 5 discriminator 14
 11491 0130 0230E0E3 		mvn	r3, #2
 11492              		.loc 1 4923 5
 11493 0134 A60000EA 		b	.L731
 11494              	.L737:
 11495              		.loc 1 4923 5 discriminator 15
 11496 0138 1C301BE5 		ldr	r3, [fp, #-28]
 11497 013c 7F3003E2 		and	r3, r3, #127
 11498 0140 8322A0E1 		lsl	r2, r3, #5
 11499 0144 08301BE5 		ldr	r3, [fp, #-8]
 11500 0148 0C3093E5 		ldr	r3, [r3, #12]
 11501 014c 033082E0 		add	r3, r2, r3
 11502 0150 08300BE5 		str	r3, [fp, #-8]
 11503 0154 08301BE5 		ldr	r3, [fp, #-8]
 11504 0158 0300A0E1 		mov	r0, r3
 11505 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11506 0160 10000BE5 		str	r0, [fp, #-16]
 11507              		.loc 1 4923 5 discriminator 1
 11508 0164 10301BE5 		ldr	r3, [fp, #-16]
 11509 0168 FF3803E2 		and	r3, r3, #16711680
 11510 016c 020853E3 		cmp	r3, #131072
 11511 0170 0100001A 		bne	.L738
 11512              		.loc 1 4923 5 discriminator 16
 11513 0174 0830E0E3 		mvn	r3, #8
 11514              		.loc 1 4923 5
 11515 0178 950000EA 		b	.L731
 11516              	.L738:
 11517              		.loc 1 4923 5 discriminator 17
 11518 017c 10301BE5 		ldr	r3, [fp, #-16]
 11519 0180 233CA0E1 		lsr	r3, r3, #24
 11520 0184 050053E3 		cmp	r3, #5
 11521 0188 0100000A 		beq	.L733
 11522              		.loc 1 4923 5 discriminator 18
 11523 018c 0130E0E3 		mvn	r3, #1
 11524              		.loc 1 4923 5
 11525 0190 8F0000EA 		b	.L731
 11526              	.L733:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 290


4924:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Prc*,Prc_Op,Type_Stat); 
4925:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 11527              		.loc 1 4925 5 is_stmt 1
 11528 0194 20301BE5 		ldr	r3, [fp, #-32]
 11529 0198 803003E2 		and	r3, r3, #128
 11530 019c 000053E3 		cmp	r3, #0
 11531 01a0 1C00001A 		bne	.L739
 11532              		.loc 1 4925 5 is_stmt 0 discriminator 1
 11533 01a4 18301BE5 		ldr	r3, [fp, #-24]
 11534 01a8 142093E5 		ldr	r2, [r3, #20]
 11535 01ac 20301BE5 		ldr	r3, [fp, #-32]
 11536 01b0 030052E1 		cmp	r2, r3
 11537 01b4 0100008A 		bhi	.L740
 11538              		.loc 1 4925 5 discriminator 3
 11539 01b8 0230E0E3 		mvn	r3, #2
 11540              		.loc 1 4925 5
 11541 01bc 840000EA 		b	.L731
 11542              	.L740:
 11543              		.loc 1 4925 5 discriminator 4
 11544 01c0 20301BE5 		ldr	r3, [fp, #-32]
 11545 01c4 8322A0E1 		lsl	r2, r3, #5
 11546 01c8 18301BE5 		ldr	r3, [fp, #-24]
 11547 01cc 0C3093E5 		ldr	r3, [r3, #12]
 11548 01d0 033082E0 		add	r3, r2, r3
 11549 01d4 0C300BE5 		str	r3, [fp, #-12]
 11550 01d8 0C301BE5 		ldr	r3, [fp, #-12]
 11551 01dc 0300A0E1 		mov	r0, r3
 11552 01e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11553 01e4 10000BE5 		str	r0, [fp, #-16]
 11554              		.loc 1 4925 5 discriminator 1
 11555 01e8 10301BE5 		ldr	r3, [fp, #-16]
 11556 01ec FF3803E2 		and	r3, r3, #16711680
 11557 01f0 020853E3 		cmp	r3, #131072
 11558 01f4 0100001A 		bne	.L741
 11559              		.loc 1 4925 5 discriminator 5
 11560 01f8 0830E0E3 		mvn	r3, #8
 11561              		.loc 1 4925 5
 11562 01fc 740000EA 		b	.L731
 11563              	.L741:
 11564              		.loc 1 4925 5 discriminator 6
 11565 0200 10301BE5 		ldr	r3, [fp, #-16]
 11566 0204 233CA0E1 		lsr	r3, r3, #24
 11567 0208 030053E3 		cmp	r3, #3
 11568 020c 3F00000A 		beq	.L742
 11569              		.loc 1 4925 5 discriminator 7
 11570 0210 0130E0E3 		mvn	r3, #1
 11571              		.loc 1 4925 5
 11572 0214 6E0000EA 		b	.L731
 11573              	.L739:
 11574              		.loc 1 4925 5 discriminator 2
 11575 0218 20301BE5 		ldr	r3, [fp, #-32]
 11576 021c 2324A0E1 		lsr	r2, r3, #8
 11577 0220 18301BE5 		ldr	r3, [fp, #-24]
 11578 0224 143093E5 		ldr	r3, [r3, #20]
 11579 0228 030052E1 		cmp	r2, r3
 11580 022c 0100003A 		bcc	.L743
 11581              		.loc 1 4925 5 discriminator 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 291


 11582 0230 0230E0E3 		mvn	r3, #2
 11583              		.loc 1 4925 5
 11584 0234 660000EA 		b	.L731
 11585              	.L743:
 11586              		.loc 1 4925 5 discriminator 9
 11587 0238 20301BE5 		ldr	r3, [fp, #-32]
 11588 023c 2334A0E1 		lsr	r3, r3, #8
 11589 0240 8322A0E1 		lsl	r2, r3, #5
 11590 0244 18301BE5 		ldr	r3, [fp, #-24]
 11591 0248 0C3093E5 		ldr	r3, [r3, #12]
 11592 024c 033082E0 		add	r3, r2, r3
 11593 0250 0C300BE5 		str	r3, [fp, #-12]
 11594 0254 0C301BE5 		ldr	r3, [fp, #-12]
 11595 0258 0300A0E1 		mov	r0, r3
 11596 025c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11597 0260 10000BE5 		str	r0, [fp, #-16]
 11598              		.loc 1 4925 5 discriminator 1
 11599 0264 10301BE5 		ldr	r3, [fp, #-16]
 11600 0268 FF3803E2 		and	r3, r3, #16711680
 11601 026c 020853E3 		cmp	r3, #131072
 11602 0270 0100001A 		bne	.L744
 11603              		.loc 1 4925 5 discriminator 10
 11604 0274 0830E0E3 		mvn	r3, #8
 11605              		.loc 1 4925 5
 11606 0278 550000EA 		b	.L731
 11607              	.L744:
 11608              		.loc 1 4925 5 discriminator 11
 11609 027c 10301BE5 		ldr	r3, [fp, #-16]
 11610 0280 233CA0E1 		lsr	r3, r3, #24
 11611 0284 030053E3 		cmp	r3, #3
 11612 0288 0100000A 		beq	.L745
 11613              		.loc 1 4925 5 discriminator 12
 11614 028c 0130E0E3 		mvn	r3, #1
 11615              		.loc 1 4925 5
 11616 0290 4F0000EA 		b	.L731
 11617              	.L745:
 11618              		.loc 1 4925 5 discriminator 13
 11619 0294 20301BE5 		ldr	r3, [fp, #-32]
 11620 0298 7F2003E2 		and	r2, r3, #127
 11621 029c 0C301BE5 		ldr	r3, [fp, #-12]
 11622 02a0 143093E5 		ldr	r3, [r3, #20]
 11623 02a4 030052E1 		cmp	r2, r3
 11624 02a8 0100003A 		bcc	.L746
 11625              		.loc 1 4925 5 discriminator 14
 11626 02ac 0230E0E3 		mvn	r3, #2
 11627              		.loc 1 4925 5
 11628 02b0 470000EA 		b	.L731
 11629              	.L746:
 11630              		.loc 1 4925 5 discriminator 15
 11631 02b4 20301BE5 		ldr	r3, [fp, #-32]
 11632 02b8 7F3003E2 		and	r3, r3, #127
 11633 02bc 8322A0E1 		lsl	r2, r3, #5
 11634 02c0 0C301BE5 		ldr	r3, [fp, #-12]
 11635 02c4 0C3093E5 		ldr	r3, [r3, #12]
 11636 02c8 033082E0 		add	r3, r2, r3
 11637 02cc 0C300BE5 		str	r3, [fp, #-12]
 11638 02d0 0C301BE5 		ldr	r3, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 292


 11639 02d4 0300A0E1 		mov	r0, r3
 11640 02d8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11641 02dc 10000BE5 		str	r0, [fp, #-16]
 11642              		.loc 1 4925 5 discriminator 1
 11643 02e0 10301BE5 		ldr	r3, [fp, #-16]
 11644 02e4 FF3803E2 		and	r3, r3, #16711680
 11645 02e8 020853E3 		cmp	r3, #131072
 11646 02ec 0100001A 		bne	.L747
 11647              		.loc 1 4925 5 discriminator 16
 11648 02f0 0830E0E3 		mvn	r3, #8
 11649              		.loc 1 4925 5
 11650 02f4 360000EA 		b	.L731
 11651              	.L747:
 11652              		.loc 1 4925 5 discriminator 17
 11653 02f8 10301BE5 		ldr	r3, [fp, #-16]
 11654 02fc 233CA0E1 		lsr	r3, r3, #24
 11655 0300 030053E3 		cmp	r3, #3
 11656 0304 0100000A 		beq	.L742
 11657              		.loc 1 4925 5 discriminator 18
 11658 0308 0130E0E3 		mvn	r3, #1
 11659              		.loc 1 4925 5
 11660 030c 300000EA 		b	.L731
 11661              	.L742:
4926:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_New,Type_Stat);     
4927:../../Source/Kernel/rme_kernel.c ****     /* Check if the target caps is not frozen and allows such operations */
4928:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Prc_Op,RME_PRC_FLAG_CPT);
 11662              		.loc 1 4928 5 is_stmt 1
 11663 0310 08301BE5 		ldr	r3, [fp, #-8]
 11664 0314 083093E5 		ldr	r3, [r3, #8]
 11665 0318 043003E2 		and	r3, r3, #4
 11666 031c 000053E3 		cmp	r3, #0
 11667 0320 0100001A 		bne	.L748
 11668              		.loc 1 4928 5 is_stmt 0 discriminator 1
 11669 0324 0630E0E3 		mvn	r3, #6
 11670              		.loc 1 4928 5
 11671 0328 290000EA 		b	.L731
 11672              	.L748:
4929:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_New,RME_CPT_FLAG_PRC_CPT);
 11673              		.loc 1 4929 5 is_stmt 1
 11674 032c 0C301BE5 		ldr	r3, [fp, #-12]
 11675 0330 083093E5 		ldr	r3, [r3, #8]
 11676 0334 803003E2 		and	r3, r3, #128
 11677 0338 000053E3 		cmp	r3, #0
 11678 033c 0100001A 		bne	.L749
 11679              		.loc 1 4929 5 is_stmt 0 discriminator 1
 11680 0340 0630E0E3 		mvn	r3, #6
 11681              		.loc 1 4929 5
 11682 0344 220000EA 		b	.L731
 11683              	.L749:
4930:../../Source/Kernel/rme_kernel.c ****     
4931:../../Source/Kernel/rme_kernel.c ****     /* Convert to root */
4932:../../Source/Kernel/rme_kernel.c ****     Cpt_New=RME_CAP_CONV_ROOT(Cpt_New,struct RME_Cap_Cpt*);
 11684              		.loc 1 4932 13 is_stmt 1
 11685 0348 0C301BE5 		ldr	r3, [fp, #-12]
 11686 034c 003093E5 		ldr	r3, [r3]
 11687 0350 7330FFE6 		uxth	r3, r3
 11688 0354 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 293


 11689 0358 0200000A 		beq	.L750
 11690              		.loc 1 4932 13 is_stmt 0 discriminator 1
 11691 035c 0C301BE5 		ldr	r3, [fp, #-12]
 11692 0360 043093E5 		ldr	r3, [r3, #4]
 11693 0364 000000EA 		b	.L751
 11694              	.L750:
 11695              		.loc 1 4932 13 discriminator 2
 11696 0368 0C301BE5 		ldr	r3, [fp, #-12]
 11697              	.L751:
 11698              		.loc 1 4932 12 is_stmt 1 discriminator 4
 11699 036c 0C300BE5 		str	r3, [fp, #-12]
4933:../../Source/Kernel/rme_kernel.c ****     
4934:../../Source/Kernel/rme_kernel.c ****     /* Commit the change */
4935:../../Source/Kernel/rme_kernel.c ****     Cpt_Old=Prc_Op->Cpt;
 11700              		.loc 1 4935 12
 11701 0370 08301BE5 		ldr	r3, [fp, #-8]
 11702 0374 143093E5 		ldr	r3, [r3, #20]
 11703 0378 14300BE5 		str	r3, [fp, #-20]
4936:../../Source/Kernel/rme_kernel.c ****     if(RME_COMP_SWAP((rme_ptr_t*)(&(Prc_Op->Cpt)),
 11704              		.loc 1 4936 8
 11705 037c 08301BE5 		ldr	r3, [fp, #-8]
 11706 0380 143083E2 		add	r3, r3, #20
 11707 0384 14101BE5 		ldr	r1, [fp, #-20]
 11708 0388 0C201BE5 		ldr	r2, [fp, #-12]
 11709 038c 0300A0E1 		mov	r0, r3
 11710 0390 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 11711 0394 0030A0E1 		mov	r3, r0
 11712              		.loc 1 4936 7 discriminator 1
 11713 0398 000053E3 		cmp	r3, #0
 11714 039c 0100001A 		bne	.L752
4937:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Cpt_Old,(rme_ptr_t)Cpt_New)==RME_CASFAIL)
4938:../../Source/Kernel/rme_kernel.c ****     {
4939:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4940:../../Source/Kernel/rme_kernel.c ****         
4941:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_CONFLICT;
 11715              		.loc 1 4941 16
 11716 03a0 C930E0E3 		mvn	r3, #201
 11717 03a4 0A0000EA 		b	.L731
 11718              	.L752:
4942:../../Source/Kernel/rme_kernel.c ****     }
4943:../../Source/Kernel/rme_kernel.c ****     else
4944:../../Source/Kernel/rme_kernel.c ****     {
4945:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
4946:../../Source/Kernel/rme_kernel.c ****         /* No action required */
4947:../../Source/Kernel/rme_kernel.c ****     }
4948:../../Source/Kernel/rme_kernel.c ****     
4949:../../Source/Kernel/rme_kernel.c ****     /* Reference new table and dereference the old table */
4950:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Cpt_New->Head.Root_Ref),1);
 11719              		.loc 1 4950 5
 11720 03a8 0C301BE5 		ldr	r3, [fp, #-12]
 11721 03ac 043083E2 		add	r3, r3, #4
 11722 03b0 0110A0E3 		mov	r1, #1
 11723 03b4 0300A0E1 		mov	r0, r3
 11724 03b8 FEFFFFEB 		bl	_RME_Fetch_Add_Single
4951:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Cpt_Old->Head.Root_Ref),-1);
 11725              		.loc 1 4951 5
 11726 03bc 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 294


 11727 03c0 043083E2 		add	r3, r3, #4
 11728 03c4 0010E0E3 		mvn	r1, #0
 11729 03c8 0300A0E1 		mov	r0, r3
 11730 03cc FEFFFFEB 		bl	_RME_Fetch_Add_Single
4952:../../Source/Kernel/rme_kernel.c **** 
4953:../../Source/Kernel/rme_kernel.c ****     return 0;
 11731              		.loc 1 4953 12
 11732 03d0 0030A0E3 		mov	r3, #0
 11733              	.L731:
4954:../../Source/Kernel/rme_kernel.c **** }
 11734              		.loc 1 4954 1
 11735 03d4 0300A0E1 		mov	r0, r3
 11736 03d8 04D04BE2 		sub	sp, fp, #4
 11737              		.cfi_def_cfa 13, 8
 11738              		@ sp needed
 11739 03dc 0088BDE8 		pop	{fp, pc}
 11740              		.cfi_endproc
 11741              	.LFE53:
 11743              		.section	.text._RME_Prc_Pgt,"ax",%progbits
 11744              		.align	2
 11745              		.syntax unified
 11746              		.arm
 11748              	_RME_Prc_Pgt:
 11749              	.LFB54:
4955:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Prc_Cpt *************************************************/
4956:../../Source/Kernel/rme_kernel.c **** 
4957:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Prc_Pgt ******************************************************
4958:../../Source/Kernel/rme_kernel.c **** Description : Change a process's page table.
4959:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
4960:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process that have been
4961:../../Source/Kernel/rme_kernel.c ****                                   created already.
4962:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4963:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Pgt - The capability to the page table to use for
4964:../../Source/Kernel/rme_kernel.c ****                                   this process.
4965:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
4966:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raw_Pgt - Alternate user-supplied page table physical
4967:../../Source/Kernel/rme_kernel.c ****                                   address.
4968:../../Source/Kernel/rme_kernel.c **** Output      : None.
4969:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
4970:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
4971:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4972:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Pgt(struct RME_Cap_Cpt* Cpt,
4973:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
4974:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Pgt)
4975:../../Source/Kernel/rme_kernel.c **** #else
4976:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Prc_Pgt(struct RME_Cap_Cpt* Cpt,
4977:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
4978:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raw_Pgt)
4979:../../Source/Kernel/rme_kernel.c **** #endif
4980:../../Source/Kernel/rme_kernel.c **** {
 11750              		.loc 1 4980 1
 11751              		.cfi_startproc
 11752              		@ args = 0, pretend = 0, frame = 32
 11753              		@ frame_needed = 1, uses_anonymous_args = 0
 11754 0000 00482DE9 		push	{fp, lr}
 11755              		.cfi_def_cfa_offset 8
 11756              		.cfi_offset 11, -8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 295


 11757              		.cfi_offset 14, -4
 11758 0004 04B08DE2 		add	fp, sp, #4
 11759              		.cfi_def_cfa 11, 4
 11760 0008 20D04DE2 		sub	sp, sp, #32
 11761 000c 18000BE5 		str	r0, [fp, #-24]
 11762 0010 1C100BE5 		str	r1, [fp, #-28]
 11763 0014 20200BE5 		str	r2, [fp, #-32]
4981:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Op;
4982:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4983:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_New;
4984:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Pgt* Pgt_Old;
4985:../../Source/Kernel/rme_kernel.c **** #else
4986:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Pgt_Old;
4987:../../Source/Kernel/rme_kernel.c **** #endif
4988:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
4989:../../Source/Kernel/rme_kernel.c ****     
4990:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
4991:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Prc,RME_CAP_TYPE_PRC,
 11764              		.loc 1 4991 5
 11765 0018 1C301BE5 		ldr	r3, [fp, #-28]
 11766 001c 803003E2 		and	r3, r3, #128
 11767 0020 000053E3 		cmp	r3, #0
 11768 0024 1C00001A 		bne	.L754
 11769              		.loc 1 4991 5 is_stmt 0 discriminator 1
 11770 0028 18301BE5 		ldr	r3, [fp, #-24]
 11771 002c 142093E5 		ldr	r2, [r3, #20]
 11772 0030 1C301BE5 		ldr	r3, [fp, #-28]
 11773 0034 030052E1 		cmp	r2, r3
 11774 0038 0100008A 		bhi	.L755
 11775              		.loc 1 4991 5 discriminator 3
 11776 003c 0230E0E3 		mvn	r3, #2
 11777              		.loc 1 4991 5
 11778 0040 E30000EA 		b	.L756
 11779              	.L755:
 11780              		.loc 1 4991 5 discriminator 4
 11781 0044 1C301BE5 		ldr	r3, [fp, #-28]
 11782 0048 8322A0E1 		lsl	r2, r3, #5
 11783 004c 18301BE5 		ldr	r3, [fp, #-24]
 11784 0050 0C3093E5 		ldr	r3, [r3, #12]
 11785 0054 033082E0 		add	r3, r2, r3
 11786 0058 08300BE5 		str	r3, [fp, #-8]
 11787 005c 08301BE5 		ldr	r3, [fp, #-8]
 11788 0060 0300A0E1 		mov	r0, r3
 11789 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11790 0068 10000BE5 		str	r0, [fp, #-16]
 11791              		.loc 1 4991 5 discriminator 1
 11792 006c 10301BE5 		ldr	r3, [fp, #-16]
 11793 0070 FF3803E2 		and	r3, r3, #16711680
 11794 0074 020853E3 		cmp	r3, #131072
 11795 0078 0100001A 		bne	.L757
 11796              		.loc 1 4991 5 discriminator 5
 11797 007c 0830E0E3 		mvn	r3, #8
 11798              		.loc 1 4991 5
 11799 0080 D30000EA 		b	.L756
 11800              	.L757:
 11801              		.loc 1 4991 5 discriminator 6
 11802 0084 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 296


 11803 0088 233CA0E1 		lsr	r3, r3, #24
 11804 008c 050053E3 		cmp	r3, #5
 11805 0090 3F00000A 		beq	.L758
 11806              		.loc 1 4991 5 discriminator 7
 11807 0094 0130E0E3 		mvn	r3, #1
 11808              		.loc 1 4991 5
 11809 0098 CD0000EA 		b	.L756
 11810              	.L754:
 11811              		.loc 1 4991 5 discriminator 2
 11812 009c 1C301BE5 		ldr	r3, [fp, #-28]
 11813 00a0 2324A0E1 		lsr	r2, r3, #8
 11814 00a4 18301BE5 		ldr	r3, [fp, #-24]
 11815 00a8 143093E5 		ldr	r3, [r3, #20]
 11816 00ac 030052E1 		cmp	r2, r3
 11817 00b0 0100003A 		bcc	.L759
 11818              		.loc 1 4991 5 discriminator 8
 11819 00b4 0230E0E3 		mvn	r3, #2
 11820              		.loc 1 4991 5
 11821 00b8 C50000EA 		b	.L756
 11822              	.L759:
 11823              		.loc 1 4991 5 discriminator 9
 11824 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 11825 00c0 2334A0E1 		lsr	r3, r3, #8
 11826 00c4 8322A0E1 		lsl	r2, r3, #5
 11827 00c8 18301BE5 		ldr	r3, [fp, #-24]
 11828 00cc 0C3093E5 		ldr	r3, [r3, #12]
 11829 00d0 033082E0 		add	r3, r2, r3
 11830 00d4 08300BE5 		str	r3, [fp, #-8]
 11831 00d8 08301BE5 		ldr	r3, [fp, #-8]
 11832 00dc 0300A0E1 		mov	r0, r3
 11833 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11834 00e4 10000BE5 		str	r0, [fp, #-16]
 11835              		.loc 1 4991 5 discriminator 1
 11836 00e8 10301BE5 		ldr	r3, [fp, #-16]
 11837 00ec FF3803E2 		and	r3, r3, #16711680
 11838 00f0 020853E3 		cmp	r3, #131072
 11839 00f4 0100001A 		bne	.L760
 11840              		.loc 1 4991 5 discriminator 10
 11841 00f8 0830E0E3 		mvn	r3, #8
 11842              		.loc 1 4991 5
 11843 00fc B40000EA 		b	.L756
 11844              	.L760:
 11845              		.loc 1 4991 5 discriminator 11
 11846 0100 10301BE5 		ldr	r3, [fp, #-16]
 11847 0104 233CA0E1 		lsr	r3, r3, #24
 11848 0108 030053E3 		cmp	r3, #3
 11849 010c 0100000A 		beq	.L761
 11850              		.loc 1 4991 5 discriminator 12
 11851 0110 0130E0E3 		mvn	r3, #1
 11852              		.loc 1 4991 5
 11853 0114 AE0000EA 		b	.L756
 11854              	.L761:
 11855              		.loc 1 4991 5 discriminator 13
 11856 0118 1C301BE5 		ldr	r3, [fp, #-28]
 11857 011c 7F2003E2 		and	r2, r3, #127
 11858 0120 08301BE5 		ldr	r3, [fp, #-8]
 11859 0124 143093E5 		ldr	r3, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 297


 11860 0128 030052E1 		cmp	r2, r3
 11861 012c 0100003A 		bcc	.L762
 11862              		.loc 1 4991 5 discriminator 14
 11863 0130 0230E0E3 		mvn	r3, #2
 11864              		.loc 1 4991 5
 11865 0134 A60000EA 		b	.L756
 11866              	.L762:
 11867              		.loc 1 4991 5 discriminator 15
 11868 0138 1C301BE5 		ldr	r3, [fp, #-28]
 11869 013c 7F3003E2 		and	r3, r3, #127
 11870 0140 8322A0E1 		lsl	r2, r3, #5
 11871 0144 08301BE5 		ldr	r3, [fp, #-8]
 11872 0148 0C3093E5 		ldr	r3, [r3, #12]
 11873 014c 033082E0 		add	r3, r2, r3
 11874 0150 08300BE5 		str	r3, [fp, #-8]
 11875 0154 08301BE5 		ldr	r3, [fp, #-8]
 11876 0158 0300A0E1 		mov	r0, r3
 11877 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11878 0160 10000BE5 		str	r0, [fp, #-16]
 11879              		.loc 1 4991 5 discriminator 1
 11880 0164 10301BE5 		ldr	r3, [fp, #-16]
 11881 0168 FF3803E2 		and	r3, r3, #16711680
 11882 016c 020853E3 		cmp	r3, #131072
 11883 0170 0100001A 		bne	.L763
 11884              		.loc 1 4991 5 discriminator 16
 11885 0174 0830E0E3 		mvn	r3, #8
 11886              		.loc 1 4991 5
 11887 0178 950000EA 		b	.L756
 11888              	.L763:
 11889              		.loc 1 4991 5 discriminator 17
 11890 017c 10301BE5 		ldr	r3, [fp, #-16]
 11891 0180 233CA0E1 		lsr	r3, r3, #24
 11892 0184 050053E3 		cmp	r3, #5
 11893 0188 0100000A 		beq	.L758
 11894              		.loc 1 4991 5 discriminator 18
 11895 018c 0130E0E3 		mvn	r3, #1
 11896              		.loc 1 4991 5
 11897 0190 8F0000EA 		b	.L756
 11898              	.L758:
4992:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Prc*,Prc_Op,Type_Stat); 
4993:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
4994:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Pgt,RME_CAP_TYPE_PGT,
 11899              		.loc 1 4994 5 is_stmt 1
 11900 0194 20301BE5 		ldr	r3, [fp, #-32]
 11901 0198 803003E2 		and	r3, r3, #128
 11902 019c 000053E3 		cmp	r3, #0
 11903 01a0 1C00001A 		bne	.L764
 11904              		.loc 1 4994 5 is_stmt 0 discriminator 1
 11905 01a4 18301BE5 		ldr	r3, [fp, #-24]
 11906 01a8 142093E5 		ldr	r2, [r3, #20]
 11907 01ac 20301BE5 		ldr	r3, [fp, #-32]
 11908 01b0 030052E1 		cmp	r2, r3
 11909 01b4 0100008A 		bhi	.L765
 11910              		.loc 1 4994 5 discriminator 3
 11911 01b8 0230E0E3 		mvn	r3, #2
 11912              		.loc 1 4994 5
 11913 01bc 840000EA 		b	.L756
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 298


 11914              	.L765:
 11915              		.loc 1 4994 5 discriminator 4
 11916 01c0 20301BE5 		ldr	r3, [fp, #-32]
 11917 01c4 8322A0E1 		lsl	r2, r3, #5
 11918 01c8 18301BE5 		ldr	r3, [fp, #-24]
 11919 01cc 0C3093E5 		ldr	r3, [r3, #12]
 11920 01d0 033082E0 		add	r3, r2, r3
 11921 01d4 0C300BE5 		str	r3, [fp, #-12]
 11922 01d8 0C301BE5 		ldr	r3, [fp, #-12]
 11923 01dc 0300A0E1 		mov	r0, r3
 11924 01e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11925 01e4 10000BE5 		str	r0, [fp, #-16]
 11926              		.loc 1 4994 5 discriminator 1
 11927 01e8 10301BE5 		ldr	r3, [fp, #-16]
 11928 01ec FF3803E2 		and	r3, r3, #16711680
 11929 01f0 020853E3 		cmp	r3, #131072
 11930 01f4 0100001A 		bne	.L766
 11931              		.loc 1 4994 5 discriminator 5
 11932 01f8 0830E0E3 		mvn	r3, #8
 11933              		.loc 1 4994 5
 11934 01fc 740000EA 		b	.L756
 11935              	.L766:
 11936              		.loc 1 4994 5 discriminator 6
 11937 0200 10301BE5 		ldr	r3, [fp, #-16]
 11938 0204 233CA0E1 		lsr	r3, r3, #24
 11939 0208 040053E3 		cmp	r3, #4
 11940 020c 3F00000A 		beq	.L767
 11941              		.loc 1 4994 5 discriminator 7
 11942 0210 0130E0E3 		mvn	r3, #1
 11943              		.loc 1 4994 5
 11944 0214 6E0000EA 		b	.L756
 11945              	.L764:
 11946              		.loc 1 4994 5 discriminator 2
 11947 0218 20301BE5 		ldr	r3, [fp, #-32]
 11948 021c 2324A0E1 		lsr	r2, r3, #8
 11949 0220 18301BE5 		ldr	r3, [fp, #-24]
 11950 0224 143093E5 		ldr	r3, [r3, #20]
 11951 0228 030052E1 		cmp	r2, r3
 11952 022c 0100003A 		bcc	.L768
 11953              		.loc 1 4994 5 discriminator 8
 11954 0230 0230E0E3 		mvn	r3, #2
 11955              		.loc 1 4994 5
 11956 0234 660000EA 		b	.L756
 11957              	.L768:
 11958              		.loc 1 4994 5 discriminator 9
 11959 0238 20301BE5 		ldr	r3, [fp, #-32]
 11960 023c 2334A0E1 		lsr	r3, r3, #8
 11961 0240 8322A0E1 		lsl	r2, r3, #5
 11962 0244 18301BE5 		ldr	r3, [fp, #-24]
 11963 0248 0C3093E5 		ldr	r3, [r3, #12]
 11964 024c 033082E0 		add	r3, r2, r3
 11965 0250 0C300BE5 		str	r3, [fp, #-12]
 11966 0254 0C301BE5 		ldr	r3, [fp, #-12]
 11967 0258 0300A0E1 		mov	r0, r3
 11968 025c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 11969 0260 10000BE5 		str	r0, [fp, #-16]
 11970              		.loc 1 4994 5 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 299


 11971 0264 10301BE5 		ldr	r3, [fp, #-16]
 11972 0268 FF3803E2 		and	r3, r3, #16711680
 11973 026c 020853E3 		cmp	r3, #131072
 11974 0270 0100001A 		bne	.L769
 11975              		.loc 1 4994 5 discriminator 10
 11976 0274 0830E0E3 		mvn	r3, #8
 11977              		.loc 1 4994 5
 11978 0278 550000EA 		b	.L756
 11979              	.L769:
 11980              		.loc 1 4994 5 discriminator 11
 11981 027c 10301BE5 		ldr	r3, [fp, #-16]
 11982 0280 233CA0E1 		lsr	r3, r3, #24
 11983 0284 030053E3 		cmp	r3, #3
 11984 0288 0100000A 		beq	.L770
 11985              		.loc 1 4994 5 discriminator 12
 11986 028c 0130E0E3 		mvn	r3, #1
 11987              		.loc 1 4994 5
 11988 0290 4F0000EA 		b	.L756
 11989              	.L770:
 11990              		.loc 1 4994 5 discriminator 13
 11991 0294 20301BE5 		ldr	r3, [fp, #-32]
 11992 0298 7F2003E2 		and	r2, r3, #127
 11993 029c 0C301BE5 		ldr	r3, [fp, #-12]
 11994 02a0 143093E5 		ldr	r3, [r3, #20]
 11995 02a4 030052E1 		cmp	r2, r3
 11996 02a8 0100003A 		bcc	.L771
 11997              		.loc 1 4994 5 discriminator 14
 11998 02ac 0230E0E3 		mvn	r3, #2
 11999              		.loc 1 4994 5
 12000 02b0 470000EA 		b	.L756
 12001              	.L771:
 12002              		.loc 1 4994 5 discriminator 15
 12003 02b4 20301BE5 		ldr	r3, [fp, #-32]
 12004 02b8 7F3003E2 		and	r3, r3, #127
 12005 02bc 8322A0E1 		lsl	r2, r3, #5
 12006 02c0 0C301BE5 		ldr	r3, [fp, #-12]
 12007 02c4 0C3093E5 		ldr	r3, [r3, #12]
 12008 02c8 033082E0 		add	r3, r2, r3
 12009 02cc 0C300BE5 		str	r3, [fp, #-12]
 12010 02d0 0C301BE5 		ldr	r3, [fp, #-12]
 12011 02d4 0300A0E1 		mov	r0, r3
 12012 02d8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12013 02dc 10000BE5 		str	r0, [fp, #-16]
 12014              		.loc 1 4994 5 discriminator 1
 12015 02e0 10301BE5 		ldr	r3, [fp, #-16]
 12016 02e4 FF3803E2 		and	r3, r3, #16711680
 12017 02e8 020853E3 		cmp	r3, #131072
 12018 02ec 0100001A 		bne	.L772
 12019              		.loc 1 4994 5 discriminator 16
 12020 02f0 0830E0E3 		mvn	r3, #8
 12021              		.loc 1 4994 5
 12022 02f4 360000EA 		b	.L756
 12023              	.L772:
 12024              		.loc 1 4994 5 discriminator 17
 12025 02f8 10301BE5 		ldr	r3, [fp, #-16]
 12026 02fc 233CA0E1 		lsr	r3, r3, #24
 12027 0300 040053E3 		cmp	r3, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 300


 12028 0304 0100000A 		beq	.L767
 12029              		.loc 1 4994 5 discriminator 18
 12030 0308 0130E0E3 		mvn	r3, #1
 12031              		.loc 1 4994 5
 12032 030c 300000EA 		b	.L756
 12033              	.L767:
4995:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Pgt*,Pgt_New,Type_Stat);
4996:../../Source/Kernel/rme_kernel.c **** #endif
4997:../../Source/Kernel/rme_kernel.c ****     /* Check if the target caps is not frozen and allows such operations */
4998:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Prc_Op,RME_PRC_FLAG_PGT);
 12034              		.loc 1 4998 5 is_stmt 1
 12035 0310 08301BE5 		ldr	r3, [fp, #-8]
 12036 0314 083093E5 		ldr	r3, [r3, #8]
 12037 0318 083003E2 		and	r3, r3, #8
 12038 031c 000053E3 		cmp	r3, #0
 12039 0320 0100001A 		bne	.L773
 12040              		.loc 1 4998 5 is_stmt 0 discriminator 1
 12041 0324 0630E0E3 		mvn	r3, #6
 12042              		.loc 1 4998 5
 12043 0328 290000EA 		b	.L756
 12044              	.L773:
4999:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
5000:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Pgt_New,RME_PGT_FLAG_PRC_PGT);
 12045              		.loc 1 5000 5 is_stmt 1
 12046 032c 0C301BE5 		ldr	r3, [fp, #-12]
 12047 0330 083093E5 		ldr	r3, [r3, #8]
 12048 0334 803003E2 		and	r3, r3, #128
 12049 0338 000053E3 		cmp	r3, #0
 12050 033c 0100001A 		bne	.L774
 12051              		.loc 1 5000 5 is_stmt 0 discriminator 1
 12052 0340 0630E0E3 		mvn	r3, #6
 12053              		.loc 1 5000 5
 12054 0344 220000EA 		b	.L756
 12055              	.L774:
5001:../../Source/Kernel/rme_kernel.c **** #endif
5002:../../Source/Kernel/rme_kernel.c ****     
5003:../../Source/Kernel/rme_kernel.c ****     Pgt_Old=Prc_Op->Pgt;
 12056              		.loc 1 5003 12 is_stmt 1
 12057 0348 08301BE5 		ldr	r3, [fp, #-8]
 12058 034c 183093E5 		ldr	r3, [r3, #24]
 12059 0350 14300BE5 		str	r3, [fp, #-20]
5004:../../Source/Kernel/rme_kernel.c ****     
5005:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
5006:../../Source/Kernel/rme_kernel.c ****     /* Convert to root */
5007:../../Source/Kernel/rme_kernel.c ****     Pgt_New=RME_CAP_CONV_ROOT(Pgt_New,struct RME_Cap_Pgt*);
 12060              		.loc 1 5007 13
 12061 0354 0C301BE5 		ldr	r3, [fp, #-12]
 12062 0358 003093E5 		ldr	r3, [r3]
 12063 035c 7330FFE6 		uxth	r3, r3
 12064 0360 000053E3 		cmp	r3, #0
 12065 0364 0200000A 		beq	.L775
 12066              		.loc 1 5007 13 is_stmt 0 discriminator 1
 12067 0368 0C301BE5 		ldr	r3, [fp, #-12]
 12068 036c 043093E5 		ldr	r3, [r3, #4]
 12069 0370 000000EA 		b	.L776
 12070              	.L775:
 12071              		.loc 1 5007 13 discriminator 2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 301


 12072 0374 0C301BE5 		ldr	r3, [fp, #-12]
 12073              	.L776:
 12074              		.loc 1 5007 12 is_stmt 1 discriminator 4
 12075 0378 0C300BE5 		str	r3, [fp, #-12]
5008:../../Source/Kernel/rme_kernel.c ****     /* Actually commit the change */
5009:../../Source/Kernel/rme_kernel.c ****     if(RME_COMP_SWAP((rme_ptr_t*)(&(Prc_Op->Pgt)),
 12076              		.loc 1 5009 8
 12077 037c 08301BE5 		ldr	r3, [fp, #-8]
 12078 0380 183083E2 		add	r3, r3, #24
 12079 0384 14101BE5 		ldr	r1, [fp, #-20]
 12080 0388 0C201BE5 		ldr	r2, [fp, #-12]
 12081 038c 0300A0E1 		mov	r0, r3
 12082 0390 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 12083 0394 0030A0E1 		mov	r3, r0
 12084              		.loc 1 5009 7 discriminator 1
 12085 0398 000053E3 		cmp	r3, #0
 12086 039c 0100001A 		bne	.L777
5010:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Pgt_Old,
5011:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Pgt_New)==RME_CASFAIL)
5012:../../Source/Kernel/rme_kernel.c **** #else
5013:../../Source/Kernel/rme_kernel.c ****     /* Actually commit the change */
5014:../../Source/Kernel/rme_kernel.c ****     if(RME_COMP_SWAP((rme_ptr_t*)(&(Prc_Op->Pgt)),
5015:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Pgt_Old,
5016:../../Source/Kernel/rme_kernel.c ****                      Raw_Pgt)==RME_CASFAIL)
5017:../../Source/Kernel/rme_kernel.c **** #endif
5018:../../Source/Kernel/rme_kernel.c ****     {
5019:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5020:../../Source/Kernel/rme_kernel.c ****         
5021:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_CONFLICT;
 12087              		.loc 1 5021 16
 12088 03a0 C930E0E3 		mvn	r3, #201
 12089 03a4 0A0000EA 		b	.L756
 12090              	.L777:
5022:../../Source/Kernel/rme_kernel.c ****     }
5023:../../Source/Kernel/rme_kernel.c ****     else
5024:../../Source/Kernel/rme_kernel.c ****     {
5025:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5026:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5027:../../Source/Kernel/rme_kernel.c ****     }
5028:../../Source/Kernel/rme_kernel.c ****     
5029:../../Source/Kernel/rme_kernel.c ****     /* Reference new table and dereference the old table */
5030:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
5031:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_New->Head.Root_Ref),1);
 12091              		.loc 1 5031 5
 12092 03a8 0C301BE5 		ldr	r3, [fp, #-12]
 12093 03ac 043083E2 		add	r3, r3, #4
 12094 03b0 0110A0E3 		mov	r1, #1
 12095 03b4 0300A0E1 		mov	r0, r3
 12096 03b8 FEFFFFEB 		bl	_RME_Fetch_Add_Single
5032:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Pgt_Old->Head.Root_Ref),-1);
 12097              		.loc 1 5032 5
 12098 03bc 14301BE5 		ldr	r3, [fp, #-20]
 12099 03c0 043083E2 		add	r3, r3, #4
 12100 03c4 0010E0E3 		mvn	r1, #0
 12101 03c8 0300A0E1 		mov	r0, r3
 12102 03cc FEFFFFEB 		bl	_RME_Fetch_Add_Single
5033:../../Source/Kernel/rme_kernel.c **** #endif
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 302


5034:../../Source/Kernel/rme_kernel.c ****     
5035:../../Source/Kernel/rme_kernel.c ****     return 0;
 12103              		.loc 1 5035 12
 12104 03d0 0030A0E3 		mov	r3, #0
 12105              	.L756:
5036:../../Source/Kernel/rme_kernel.c **** }
 12106              		.loc 1 5036 1
 12107 03d4 0300A0E1 		mov	r0, r3
 12108 03d8 04D04BE2 		sub	sp, fp, #4
 12109              		.cfi_def_cfa 13, 8
 12110              		@ sp needed
 12111 03dc 0088BDE8 		pop	{fp, pc}
 12112              		.cfi_endproc
 12113              	.LFE54:
 12115              		.section	.text._RME_Thd_Boot_Crt,"ax",%progbits
 12116              		.align	2
 12117              		.global	_RME_Thd_Boot_Crt
 12118              		.syntax unified
 12119              		.arm
 12121              	_RME_Thd_Boot_Crt:
 12122              	.LFB55:
5037:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Prc_Pgt *************************************************/
5038:../../Source/Kernel/rme_kernel.c **** 
5039:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Boot_Crt *************************************************
5040:../../Source/Kernel/rme_kernel.c **** Description : Create a boot-time thread. The boot-time thread is per-core, and
5041:../../Source/Kernel/rme_kernel.c ****               will have infinite budget, and has no parent. This function
5042:../../Source/Kernel/rme_kernel.c ****               allows creation of a thread on behalf of other processors,
5043:../../Source/Kernel/rme_kernel.c ****               by passing a CPUID parameter. Therefore, it is recommended to
5044:../../Source/Kernel/rme_kernel.c ****               create the threads sequentially during boot-up; if you create
5045:../../Source/Kernel/rme_kernel.c ****               threads in parallel, be sure to only create the thread on your
5046:../../Source/Kernel/rme_kernel.c ****               local core.
5047:../../Source/Kernel/rme_kernel.c ****               This function does not require a kernel memory capability, and 
5048:../../Source/Kernel/rme_kernel.c ****               the initial threads' maximum priority will be set by the system.
5049:../../Source/Kernel/rme_kernel.c ****               This thread is a basic thread and hence always have attribute 0.
5050:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5051:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table.
5052:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5053:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability slot that you want this newly
5054:../../Source/Kernel/rme_kernel.c ****                                   created thread capability to be in.
5055:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
5056:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process that it is in.
5057:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5058:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Vaddr - The virtual address to store the thread.
5059:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio - The priority level of the thread.
5060:../../Source/Kernel/rme_kernel.c ****               struct RME_CPU_Local* Local - The CPU-local data structure of the
5061:../../Source/Kernel/rme_kernel.c ****                                             CPU to bind the thread to.
5062:../../Source/Kernel/rme_kernel.c **** Output      : None.
5063:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5064:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5065:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Thd_Boot_Crt(struct RME_Cap_Cpt* Cpt,
5066:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
5067:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Thd,
5068:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Prc,
5069:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Vaddr,
5070:../../Source/Kernel/rme_kernel.c ****                             rme_ptr_t Prio,
5071:../../Source/Kernel/rme_kernel.c ****                             struct RME_CPU_Local* Local)
5072:../../Source/Kernel/rme_kernel.c **** {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 303


 12123              		.loc 1 5072 1
 12124              		.cfi_startproc
 12125              		@ args = 12, pretend = 0, frame = 40
 12126              		@ frame_needed = 1, uses_anonymous_args = 0
 12127 0000 00482DE9 		push	{fp, lr}
 12128              		.cfi_def_cfa_offset 8
 12129              		.cfi_offset 11, -8
 12130              		.cfi_offset 14, -4
 12131 0004 04B08DE2 		add	fp, sp, #4
 12132              		.cfi_def_cfa 11, 4
 12133 0008 28D04DE2 		sub	sp, sp, #40
 12134 000c 20000BE5 		str	r0, [fp, #-32]
 12135 0010 24100BE5 		str	r1, [fp, #-36]
 12136 0014 28200BE5 		str	r2, [fp, #-40]
 12137 0018 2C300BE5 		str	r3, [fp, #-44]
5073:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
5074:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Op;
5075:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Crt;
5076:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Root;
5077:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5078:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5079:../../Source/Kernel/rme_kernel.c ****     
5080:../../Source/Kernel/rme_kernel.c ****     /* Check whether the priority level is allowed */
5081:../../Source/Kernel/rme_kernel.c ****     if(Prio>=RME_PREEMPT_PRIO_NUM)
 12138              		.loc 1 5081 7
 12139 001c 08309BE5 		ldr	r3, [fp, #8]
 12140 0020 1F0053E3 		cmp	r3, #31
 12141 0024 0100009A 		bls	.L779
5082:../../Source/Kernel/rme_kernel.c ****     {
5083:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5084:../../Source/Kernel/rme_kernel.c **** 
5085:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_PRIO;
 12142              		.loc 1 5085 16
 12143 0028 CC30E0E3 		mvn	r3, #204
 12144 002c 4C0100EA 		b	.L780
 12145              	.L779:
5086:../../Source/Kernel/rme_kernel.c ****     }
5087:../../Source/Kernel/rme_kernel.c ****     else
5088:../../Source/Kernel/rme_kernel.c ****     {
5089:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5090:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5091:../../Source/Kernel/rme_kernel.c ****     }
5092:../../Source/Kernel/rme_kernel.c ****     
5093:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
5094:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 12146              		.loc 1 5094 5
 12147 0030 24301BE5 		ldr	r3, [fp, #-36]
 12148 0034 803003E2 		and	r3, r3, #128
 12149 0038 000053E3 		cmp	r3, #0
 12150 003c 1C00001A 		bne	.L781
 12151              		.loc 1 5094 5 is_stmt 0 discriminator 1
 12152 0040 20301BE5 		ldr	r3, [fp, #-32]
 12153 0044 142093E5 		ldr	r2, [r3, #20]
 12154 0048 24301BE5 		ldr	r3, [fp, #-36]
 12155 004c 030052E1 		cmp	r2, r3
 12156 0050 0100008A 		bhi	.L782
 12157              		.loc 1 5094 5 discriminator 3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 304


 12158 0054 0230E0E3 		mvn	r3, #2
 12159              		.loc 1 5094 5
 12160 0058 410100EA 		b	.L780
 12161              	.L782:
 12162              		.loc 1 5094 5 discriminator 4
 12163 005c 24301BE5 		ldr	r3, [fp, #-36]
 12164 0060 8322A0E1 		lsl	r2, r3, #5
 12165 0064 20301BE5 		ldr	r3, [fp, #-32]
 12166 0068 0C3093E5 		ldr	r3, [r3, #12]
 12167 006c 033082E0 		add	r3, r2, r3
 12168 0070 08300BE5 		str	r3, [fp, #-8]
 12169 0074 08301BE5 		ldr	r3, [fp, #-8]
 12170 0078 0300A0E1 		mov	r0, r3
 12171 007c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12172 0080 10000BE5 		str	r0, [fp, #-16]
 12173              		.loc 1 5094 5 discriminator 1
 12174 0084 10301BE5 		ldr	r3, [fp, #-16]
 12175 0088 FF3803E2 		and	r3, r3, #16711680
 12176 008c 020853E3 		cmp	r3, #131072
 12177 0090 0100001A 		bne	.L783
 12178              		.loc 1 5094 5 discriminator 5
 12179 0094 0830E0E3 		mvn	r3, #8
 12180              		.loc 1 5094 5
 12181 0098 310100EA 		b	.L780
 12182              	.L783:
 12183              		.loc 1 5094 5 discriminator 6
 12184 009c 10301BE5 		ldr	r3, [fp, #-16]
 12185 00a0 233CA0E1 		lsr	r3, r3, #24
 12186 00a4 030053E3 		cmp	r3, #3
 12187 00a8 3F00000A 		beq	.L784
 12188              		.loc 1 5094 5 discriminator 7
 12189 00ac 0130E0E3 		mvn	r3, #1
 12190              		.loc 1 5094 5
 12191 00b0 2B0100EA 		b	.L780
 12192              	.L781:
 12193              		.loc 1 5094 5 discriminator 2
 12194 00b4 24301BE5 		ldr	r3, [fp, #-36]
 12195 00b8 2324A0E1 		lsr	r2, r3, #8
 12196 00bc 20301BE5 		ldr	r3, [fp, #-32]
 12197 00c0 143093E5 		ldr	r3, [r3, #20]
 12198 00c4 030052E1 		cmp	r2, r3
 12199 00c8 0100003A 		bcc	.L785
 12200              		.loc 1 5094 5 discriminator 8
 12201 00cc 0230E0E3 		mvn	r3, #2
 12202              		.loc 1 5094 5
 12203 00d0 230100EA 		b	.L780
 12204              	.L785:
 12205              		.loc 1 5094 5 discriminator 9
 12206 00d4 24301BE5 		ldr	r3, [fp, #-36]
 12207 00d8 2334A0E1 		lsr	r3, r3, #8
 12208 00dc 8322A0E1 		lsl	r2, r3, #5
 12209 00e0 20301BE5 		ldr	r3, [fp, #-32]
 12210 00e4 0C3093E5 		ldr	r3, [r3, #12]
 12211 00e8 033082E0 		add	r3, r2, r3
 12212 00ec 08300BE5 		str	r3, [fp, #-8]
 12213 00f0 08301BE5 		ldr	r3, [fp, #-8]
 12214 00f4 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 305


 12215 00f8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12216 00fc 10000BE5 		str	r0, [fp, #-16]
 12217              		.loc 1 5094 5 discriminator 1
 12218 0100 10301BE5 		ldr	r3, [fp, #-16]
 12219 0104 FF3803E2 		and	r3, r3, #16711680
 12220 0108 020853E3 		cmp	r3, #131072
 12221 010c 0100001A 		bne	.L786
 12222              		.loc 1 5094 5 discriminator 10
 12223 0110 0830E0E3 		mvn	r3, #8
 12224              		.loc 1 5094 5
 12225 0114 120100EA 		b	.L780
 12226              	.L786:
 12227              		.loc 1 5094 5 discriminator 11
 12228 0118 10301BE5 		ldr	r3, [fp, #-16]
 12229 011c 233CA0E1 		lsr	r3, r3, #24
 12230 0120 030053E3 		cmp	r3, #3
 12231 0124 0100000A 		beq	.L787
 12232              		.loc 1 5094 5 discriminator 12
 12233 0128 0130E0E3 		mvn	r3, #1
 12234              		.loc 1 5094 5
 12235 012c 0C0100EA 		b	.L780
 12236              	.L787:
 12237              		.loc 1 5094 5 discriminator 13
 12238 0130 24301BE5 		ldr	r3, [fp, #-36]
 12239 0134 7F2003E2 		and	r2, r3, #127
 12240 0138 08301BE5 		ldr	r3, [fp, #-8]
 12241 013c 143093E5 		ldr	r3, [r3, #20]
 12242 0140 030052E1 		cmp	r2, r3
 12243 0144 0100003A 		bcc	.L788
 12244              		.loc 1 5094 5 discriminator 14
 12245 0148 0230E0E3 		mvn	r3, #2
 12246              		.loc 1 5094 5
 12247 014c 040100EA 		b	.L780
 12248              	.L788:
 12249              		.loc 1 5094 5 discriminator 15
 12250 0150 24301BE5 		ldr	r3, [fp, #-36]
 12251 0154 7F3003E2 		and	r3, r3, #127
 12252 0158 8322A0E1 		lsl	r2, r3, #5
 12253 015c 08301BE5 		ldr	r3, [fp, #-8]
 12254 0160 0C3093E5 		ldr	r3, [r3, #12]
 12255 0164 033082E0 		add	r3, r2, r3
 12256 0168 08300BE5 		str	r3, [fp, #-8]
 12257 016c 08301BE5 		ldr	r3, [fp, #-8]
 12258 0170 0300A0E1 		mov	r0, r3
 12259 0174 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12260 0178 10000BE5 		str	r0, [fp, #-16]
 12261              		.loc 1 5094 5 discriminator 1
 12262 017c 10301BE5 		ldr	r3, [fp, #-16]
 12263 0180 FF3803E2 		and	r3, r3, #16711680
 12264 0184 020853E3 		cmp	r3, #131072
 12265 0188 0100001A 		bne	.L789
 12266              		.loc 1 5094 5 discriminator 16
 12267 018c 0830E0E3 		mvn	r3, #8
 12268              		.loc 1 5094 5
 12269 0190 F30000EA 		b	.L780
 12270              	.L789:
 12271              		.loc 1 5094 5 discriminator 17
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 306


 12272 0194 10301BE5 		ldr	r3, [fp, #-16]
 12273 0198 233CA0E1 		lsr	r3, r3, #24
 12274 019c 030053E3 		cmp	r3, #3
 12275 01a0 0100000A 		beq	.L784
 12276              		.loc 1 5094 5 discriminator 18
 12277 01a4 0130E0E3 		mvn	r3, #1
 12278              		.loc 1 5094 5
 12279 01a8 ED0000EA 		b	.L780
 12280              	.L784:
5095:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat); 
5096:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Prc,RME_CAP_TYPE_PRC,
 12281              		.loc 1 5096 5 is_stmt 1
 12282 01ac 2C301BE5 		ldr	r3, [fp, #-44]
 12283 01b0 803003E2 		and	r3, r3, #128
 12284 01b4 000053E3 		cmp	r3, #0
 12285 01b8 1C00001A 		bne	.L790
 12286              		.loc 1 5096 5 is_stmt 0 discriminator 1
 12287 01bc 20301BE5 		ldr	r3, [fp, #-32]
 12288 01c0 142093E5 		ldr	r2, [r3, #20]
 12289 01c4 2C301BE5 		ldr	r3, [fp, #-44]
 12290 01c8 030052E1 		cmp	r2, r3
 12291 01cc 0100008A 		bhi	.L791
 12292              		.loc 1 5096 5 discriminator 3
 12293 01d0 0230E0E3 		mvn	r3, #2
 12294              		.loc 1 5096 5
 12295 01d4 E20000EA 		b	.L780
 12296              	.L791:
 12297              		.loc 1 5096 5 discriminator 4
 12298 01d8 2C301BE5 		ldr	r3, [fp, #-44]
 12299 01dc 8322A0E1 		lsl	r2, r3, #5
 12300 01e0 20301BE5 		ldr	r3, [fp, #-32]
 12301 01e4 0C3093E5 		ldr	r3, [r3, #12]
 12302 01e8 033082E0 		add	r3, r2, r3
 12303 01ec 0C300BE5 		str	r3, [fp, #-12]
 12304 01f0 0C301BE5 		ldr	r3, [fp, #-12]
 12305 01f4 0300A0E1 		mov	r0, r3
 12306 01f8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12307 01fc 10000BE5 		str	r0, [fp, #-16]
 12308              		.loc 1 5096 5 discriminator 1
 12309 0200 10301BE5 		ldr	r3, [fp, #-16]
 12310 0204 FF3803E2 		and	r3, r3, #16711680
 12311 0208 020853E3 		cmp	r3, #131072
 12312 020c 0100001A 		bne	.L792
 12313              		.loc 1 5096 5 discriminator 5
 12314 0210 0830E0E3 		mvn	r3, #8
 12315              		.loc 1 5096 5
 12316 0214 D20000EA 		b	.L780
 12317              	.L792:
 12318              		.loc 1 5096 5 discriminator 6
 12319 0218 10301BE5 		ldr	r3, [fp, #-16]
 12320 021c 233CA0E1 		lsr	r3, r3, #24
 12321 0220 050053E3 		cmp	r3, #5
 12322 0224 3F00000A 		beq	.L793
 12323              		.loc 1 5096 5 discriminator 7
 12324 0228 0130E0E3 		mvn	r3, #1
 12325              		.loc 1 5096 5
 12326 022c CC0000EA 		b	.L780
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 307


 12327              	.L790:
 12328              		.loc 1 5096 5 discriminator 2
 12329 0230 2C301BE5 		ldr	r3, [fp, #-44]
 12330 0234 2324A0E1 		lsr	r2, r3, #8
 12331 0238 20301BE5 		ldr	r3, [fp, #-32]
 12332 023c 143093E5 		ldr	r3, [r3, #20]
 12333 0240 030052E1 		cmp	r2, r3
 12334 0244 0100003A 		bcc	.L794
 12335              		.loc 1 5096 5 discriminator 8
 12336 0248 0230E0E3 		mvn	r3, #2
 12337              		.loc 1 5096 5
 12338 024c C40000EA 		b	.L780
 12339              	.L794:
 12340              		.loc 1 5096 5 discriminator 9
 12341 0250 2C301BE5 		ldr	r3, [fp, #-44]
 12342 0254 2334A0E1 		lsr	r3, r3, #8
 12343 0258 8322A0E1 		lsl	r2, r3, #5
 12344 025c 20301BE5 		ldr	r3, [fp, #-32]
 12345 0260 0C3093E5 		ldr	r3, [r3, #12]
 12346 0264 033082E0 		add	r3, r2, r3
 12347 0268 0C300BE5 		str	r3, [fp, #-12]
 12348 026c 0C301BE5 		ldr	r3, [fp, #-12]
 12349 0270 0300A0E1 		mov	r0, r3
 12350 0274 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12351 0278 10000BE5 		str	r0, [fp, #-16]
 12352              		.loc 1 5096 5 discriminator 1
 12353 027c 10301BE5 		ldr	r3, [fp, #-16]
 12354 0280 FF3803E2 		and	r3, r3, #16711680
 12355 0284 020853E3 		cmp	r3, #131072
 12356 0288 0100001A 		bne	.L795
 12357              		.loc 1 5096 5 discriminator 10
 12358 028c 0830E0E3 		mvn	r3, #8
 12359              		.loc 1 5096 5
 12360 0290 B30000EA 		b	.L780
 12361              	.L795:
 12362              		.loc 1 5096 5 discriminator 11
 12363 0294 10301BE5 		ldr	r3, [fp, #-16]
 12364 0298 233CA0E1 		lsr	r3, r3, #24
 12365 029c 030053E3 		cmp	r3, #3
 12366 02a0 0100000A 		beq	.L796
 12367              		.loc 1 5096 5 discriminator 12
 12368 02a4 0130E0E3 		mvn	r3, #1
 12369              		.loc 1 5096 5
 12370 02a8 AD0000EA 		b	.L780
 12371              	.L796:
 12372              		.loc 1 5096 5 discriminator 13
 12373 02ac 2C301BE5 		ldr	r3, [fp, #-44]
 12374 02b0 7F2003E2 		and	r2, r3, #127
 12375 02b4 0C301BE5 		ldr	r3, [fp, #-12]
 12376 02b8 143093E5 		ldr	r3, [r3, #20]
 12377 02bc 030052E1 		cmp	r2, r3
 12378 02c0 0100003A 		bcc	.L797
 12379              		.loc 1 5096 5 discriminator 14
 12380 02c4 0230E0E3 		mvn	r3, #2
 12381              		.loc 1 5096 5
 12382 02c8 A50000EA 		b	.L780
 12383              	.L797:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 308


 12384              		.loc 1 5096 5 discriminator 15
 12385 02cc 2C301BE5 		ldr	r3, [fp, #-44]
 12386 02d0 7F3003E2 		and	r3, r3, #127
 12387 02d4 8322A0E1 		lsl	r2, r3, #5
 12388 02d8 0C301BE5 		ldr	r3, [fp, #-12]
 12389 02dc 0C3093E5 		ldr	r3, [r3, #12]
 12390 02e0 033082E0 		add	r3, r2, r3
 12391 02e4 0C300BE5 		str	r3, [fp, #-12]
 12392 02e8 0C301BE5 		ldr	r3, [fp, #-12]
 12393 02ec 0300A0E1 		mov	r0, r3
 12394 02f0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12395 02f4 10000BE5 		str	r0, [fp, #-16]
 12396              		.loc 1 5096 5 discriminator 1
 12397 02f8 10301BE5 		ldr	r3, [fp, #-16]
 12398 02fc FF3803E2 		and	r3, r3, #16711680
 12399 0300 020853E3 		cmp	r3, #131072
 12400 0304 0100001A 		bne	.L798
 12401              		.loc 1 5096 5 discriminator 16
 12402 0308 0830E0E3 		mvn	r3, #8
 12403              		.loc 1 5096 5
 12404 030c 940000EA 		b	.L780
 12405              	.L798:
 12406              		.loc 1 5096 5 discriminator 17
 12407 0310 10301BE5 		ldr	r3, [fp, #-16]
 12408 0314 233CA0E1 		lsr	r3, r3, #24
 12409 0318 050053E3 		cmp	r3, #5
 12410 031c 0100000A 		beq	.L793
 12411              		.loc 1 5096 5 discriminator 18
 12412 0320 0130E0E3 		mvn	r3, #1
 12413              		.loc 1 5096 5
 12414 0324 8E0000EA 		b	.L780
 12415              	.L793:
5097:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Prc*,Prc_Op,Type_Stat);   
5098:../../Source/Kernel/rme_kernel.c ****     /* Check if the target caps is not frozen and allows such operations */
5099:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 12416              		.loc 1 5099 5 is_stmt 1
 12417 0328 08301BE5 		ldr	r3, [fp, #-8]
 12418 032c 083093E5 		ldr	r3, [r3, #8]
 12419 0330 013003E2 		and	r3, r3, #1
 12420 0334 000053E3 		cmp	r3, #0
 12421 0338 0100001A 		bne	.L799
 12422              		.loc 1 5099 5 is_stmt 0 discriminator 1
 12423 033c 0630E0E3 		mvn	r3, #6
 12424              		.loc 1 5099 5
 12425 0340 870000EA 		b	.L780
 12426              	.L799:
5100:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Prc_Op,RME_PRC_FLAG_THD);
 12427              		.loc 1 5100 5 is_stmt 1
 12428 0344 0C301BE5 		ldr	r3, [fp, #-12]
 12429 0348 083093E5 		ldr	r3, [r3, #8]
 12430 034c 023003E2 		and	r3, r3, #2
 12431 0350 000053E3 		cmp	r3, #0
 12432 0354 0100001A 		bne	.L800
 12433              		.loc 1 5100 5 is_stmt 0 discriminator 1
 12434 0358 0630E0E3 		mvn	r3, #6
 12435              		.loc 1 5100 5
 12436 035c 800000EA 		b	.L780
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 309


 12437              	.L800:
5101:../../Source/Kernel/rme_kernel.c ****     
5102:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
5103:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Thd,struct RME_Cap_Thd*,Thd_Crt);
 12438              		.loc 1 5103 5 is_stmt 1
 12439 0360 08301BE5 		ldr	r3, [fp, #-8]
 12440 0364 142093E5 		ldr	r2, [r3, #20]
 12441 0368 28301BE5 		ldr	r3, [fp, #-40]
 12442 036c 030052E1 		cmp	r2, r3
 12443 0370 0100008A 		bhi	.L801
 12444              		.loc 1 5103 5 is_stmt 0 discriminator 1
 12445 0374 0230E0E3 		mvn	r3, #2
 12446              		.loc 1 5103 5
 12447 0378 790000EA 		b	.L780
 12448              	.L801:
 12449              		.loc 1 5103 5 discriminator 2
 12450 037c 28301BE5 		ldr	r3, [fp, #-40]
 12451 0380 8322A0E1 		lsl	r2, r3, #5
 12452 0384 08301BE5 		ldr	r3, [fp, #-8]
 12453 0388 0C3093E5 		ldr	r3, [r3, #12]
 12454 038c 033082E0 		add	r3, r2, r3
 12455 0390 14300BE5 		str	r3, [fp, #-20]
5104:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
5105:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Thd_Crt);
 12456              		.loc 1 5105 5 is_stmt 1
 12457 0394 14301BE5 		ldr	r3, [fp, #-20]
 12458 0398 0128A0E3 		mov	r2, #65536
 12459 039c 0010A0E3 		mov	r1, #0
 12460 03a0 0300A0E1 		mov	r0, r3
 12461 03a4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 12462 03a8 0030A0E1 		mov	r3, r0
 12463              		.loc 1 5105 5 is_stmt 0 discriminator 1
 12464 03ac 000053E3 		cmp	r3, #0
 12465 03b0 0100001A 		bne	.L802
 12466 03b4 0430E0E3 		mvn	r3, #4
 12467              		.loc 1 5105 5
 12468 03b8 690000EA 		b	.L780
 12469              	.L802:
 12470              		.loc 1 5105 5 discriminator 2
 12471 03bc 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 12472 03c0 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 12473 03c4 002093E5 		ldr	r2, [r3]
 12474 03c8 14301BE5 		ldr	r3, [fp, #-20]
 12475 03cc 102083E5 		str	r2, [r3, #16]
5106:../../Source/Kernel/rme_kernel.c ****      
5107:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
5108:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,RME_THD_SIZE(0U))!=0)
 12476              		.loc 1 5108 8 is_stmt 1
 12477 03d0 9C10A0E3 		mov	r1, #156
 12478 03d4 04009BE5 		ldr	r0, [fp, #4]
 12479 03d8 FEFFFFEB 		bl	_RME_Kot_Mark
 12480 03dc 0030A0E1 		mov	r3, r0
 12481              		.loc 1 5108 7 discriminator 1
 12482 03e0 000053E3 		cmp	r3, #0
 12483 03e4 0500000A 		beq	.L803
5109:../../Source/Kernel/rme_kernel.c ****     {
5110:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 310


5111:../../Source/Kernel/rme_kernel.c **** 
5112:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Thd_Crt->Head.Type_Stat),0U);
 12484              		.loc 1 5112 9
 12485 03e8 14301BE5 		ldr	r3, [fp, #-20]
 12486 03ec 0010A0E3 		mov	r1, #0
 12487 03f0 0300A0E1 		mov	r0, r3
 12488 03f4 FEFFFFEB 		bl	__RME_A7A_Write_Release
5113:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 12489              		.loc 1 5113 16
 12490 03f8 0330E0E3 		mvn	r3, #3
 12491 03fc 580000EA 		b	.L780
 12492              	.L803:
5114:../../Source/Kernel/rme_kernel.c ****     }
5115:../../Source/Kernel/rme_kernel.c ****     else
5116:../../Source/Kernel/rme_kernel.c ****     {
5117:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5118:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5119:../../Source/Kernel/rme_kernel.c ****     }
5120:../../Source/Kernel/rme_kernel.c **** 
5121:../../Source/Kernel/rme_kernel.c ****     /* Object init */
5122:../../Source/Kernel/rme_kernel.c ****     Thread=(struct RME_Thd_Struct*)Vaddr;
 12493              		.loc 1 5122 11
 12494 0400 04309BE5 		ldr	r3, [fp, #4]
 12495 0404 18300BE5 		str	r3, [fp, #-24]
5123:../../Source/Kernel/rme_kernel.c ****     /* The TID of these threads are by default taken care of by the kernel */
5124:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.TID=0U;
 12496              		.loc 1 5124 22
 12497 0408 18301BE5 		ldr	r3, [fp, #-24]
 12498 040c 0020A0E3 		mov	r2, #0
 12499 0410 102083E5 		str	r2, [r3, #16]
5125:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Slice=RME_THD_INIT_TIME;
 12500              		.loc 1 5125 24
 12501 0414 18301BE5 		ldr	r3, [fp, #-24]
 12502 0418 0221E0E3 		mvn	r2, #-2147483648
 12503 041c 182083E5 		str	r2, [r3, #24]
5126:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.State=RME_THD_READY;
 12504              		.loc 1 5126 24
 12505 0420 18301BE5 		ldr	r3, [fp, #-24]
 12506 0424 0020A0E3 		mov	r2, #0
 12507 0428 1C2083E5 		str	r2, [r3, #28]
5127:../../Source/Kernel/rme_kernel.c ****     Prc_Root=RME_CAP_CONV_ROOT(Prc_Op,struct RME_Cap_Prc*);
 12508              		.loc 1 5127 14
 12509 042c 0C301BE5 		ldr	r3, [fp, #-12]
 12510 0430 003093E5 		ldr	r3, [r3]
 12511 0434 7330FFE6 		uxth	r3, r3
 12512 0438 000053E3 		cmp	r3, #0
 12513 043c 0200000A 		beq	.L804
 12514              		.loc 1 5127 14 is_stmt 0 discriminator 1
 12515 0440 0C301BE5 		ldr	r3, [fp, #-12]
 12516 0444 043093E5 		ldr	r3, [r3, #4]
 12517 0448 000000EA 		b	.L805
 12518              	.L804:
 12519              		.loc 1 5127 14 discriminator 2
 12520 044c 0C301BE5 		ldr	r3, [fp, #-12]
 12521              	.L805:
 12522              		.loc 1 5127 13 is_stmt 1 discriminator 4
 12523 0450 1C300BE5 		str	r3, [fp, #-28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 311


5128:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prc=Prc_Root;
 12524              		.loc 1 5128 22
 12525 0454 18301BE5 		ldr	r3, [fp, #-24]
 12526 0458 1C201BE5 		ldr	r2, [fp, #-28]
 12527 045c 2C2083E5 		str	r2, [r3, #44]
5129:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Signal=0U;
 12528              		.loc 1 5129 25
 12529 0460 18301BE5 		ldr	r3, [fp, #-24]
 12530 0464 0020A0E3 		mov	r2, #0
 12531 0468 282083E5 		str	r2, [r3, #40]
5130:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prio=Prio;
 12532              		.loc 1 5130 23
 12533 046c 18301BE5 		ldr	r3, [fp, #-24]
 12534 0470 08209BE5 		ldr	r2, [fp, #8]
 12535 0474 202083E5 		str	r2, [r3, #32]
5131:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prio_Max=RME_PREEMPT_PRIO_NUM-1U;
 12536              		.loc 1 5131 27
 12537 0478 18301BE5 		ldr	r3, [fp, #-24]
 12538 047c 1F20A0E3 		mov	r2, #31
 12539 0480 242083E5 		str	r2, [r3, #36]
5132:../../Source/Kernel/rme_kernel.c ****     /* Set scheduler reference to 1 so cannot be free */
5133:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Ref=1U;
 12540              		.loc 1 5133 28
 12541 0484 18301BE5 		ldr	r3, [fp, #-24]
 12542 0488 0120A0E3 		mov	r2, #1
 12543 048c 302083E5 		str	r2, [r3, #48]
5134:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Sig=0U;
 12544              		.loc 1 5134 28
 12545 0490 18301BE5 		ldr	r3, [fp, #-24]
 12546 0494 0020A0E3 		mov	r2, #0
 12547 0498 382083E5 		str	r2, [r3, #56]
5135:../../Source/Kernel/rme_kernel.c ****     /* Bind the thread to the current CPU */
5136:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Local=Local;
 12548              		.loc 1 5136 24
 12549 049c 18301BE5 		ldr	r3, [fp, #-24]
 12550 04a0 0C209BE5 		ldr	r2, [fp, #12]
 12551 04a4 142083E5 		str	r2, [r3, #20]
5137:../../Source/Kernel/rme_kernel.c ****     /* This is a marking that this thread haven't sent any notifications */
5138:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Sched.Notif));
 12552              		.loc 1 5138 5
 12553 04a8 18301BE5 		ldr	r3, [fp, #-24]
 12554 04ac 083083E2 		add	r3, r3, #8
 12555 04b0 0300A0E1 		mov	r0, r3
 12556 04b4 FEFFFFEB 		bl	_RME_List_Crt
5139:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Sched.Event));
 12557              		.loc 1 5139 5
 12558 04b8 18301BE5 		ldr	r3, [fp, #-24]
 12559 04bc 3C3083E2 		add	r3, r3, #60
 12560 04c0 0300A0E1 		mov	r0, r3
 12561 04c4 FEFFFFEB 		bl	_RME_List_Crt
5140:../../Source/Kernel/rme_kernel.c ****     /* Point its pointer to itself - this will never be a hypervisor thread */
5141:../../Source/Kernel/rme_kernel.c ****     Thread->Ctx.Hyp_Attr=0U;
 12562              		.loc 1 5141 25
 12563 04c8 18301BE5 		ldr	r3, [fp, #-24]
 12564 04cc 0020A0E3 		mov	r2, #0
 12565 04d0 442083E5 		str	r2, [r3, #68]
5142:../../Source/Kernel/rme_kernel.c ****     Thread->Ctx.Reg=(struct RME_Thd_Reg*)(Vaddr+RME_HYP_SIZE);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 312


 12566              		.loc 1 5142 48
 12567 04d4 04309BE5 		ldr	r3, [fp, #4]
 12568 04d8 583083E2 		add	r3, r3, #88
 12569              		.loc 1 5142 21
 12570 04dc 0320A0E1 		mov	r2, r3
 12571              		.loc 1 5142 20
 12572 04e0 18301BE5 		ldr	r3, [fp, #-24]
 12573 04e4 482083E5 		str	r2, [r3, #72]
5143:../../Source/Kernel/rme_kernel.c ****     /* Initialize the invocation stack */
5144:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Ctx.Invstk));
 12574              		.loc 1 5144 5
 12575 04e8 18301BE5 		ldr	r3, [fp, #-24]
 12576 04ec 4C3083E2 		add	r3, r3, #76
 12577 04f0 0300A0E1 		mov	r0, r3
 12578 04f4 FEFFFFEB 		bl	_RME_List_Crt
5145:../../Source/Kernel/rme_kernel.c ****     Thread->Ctx.Invstk_Depth=0U;
 12579              		.loc 1 5145 29
 12580 04f8 18301BE5 		ldr	r3, [fp, #-24]
 12581 04fc 0020A0E3 		mov	r2, #0
 12582 0500 542083E5 		str	r2, [r3, #84]
5146:../../Source/Kernel/rme_kernel.c ****     
5147:../../Source/Kernel/rme_kernel.c ****     /* Info init */
5148:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Root_Ref=1U;
 12583              		.loc 1 5148 27
 12584 0504 14301BE5 		ldr	r3, [fp, #-20]
 12585 0508 0120A0E3 		mov	r2, #1
 12586 050c 042083E5 		str	r2, [r3, #4]
5149:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Object=Vaddr;
 12587              		.loc 1 5149 25
 12588 0510 14301BE5 		ldr	r3, [fp, #-20]
 12589 0514 04209BE5 		ldr	r2, [fp, #4]
 12590 0518 0C2083E5 		str	r2, [r3, #12]
5150:../../Source/Kernel/rme_kernel.c ****     /* This can only be a parent, and not a child, and cannot be freed. Additionally,
5151:../../Source/Kernel/rme_kernel.c ****      * this should not be blocked on any endpoint. Any attempt to block this thread will fail.
5152:../../Source/Kernel/rme_kernel.c ****      * Setting execution information for this is also prohibited. */
5153:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Flag=RME_THD_FLAG_SCHED_PRIO|RME_THD_FLAG_SCHED_PARENT|
 12591              		.loc 1 5153 23
 12592 051c 14301BE5 		ldr	r3, [fp, #-20]
 12593 0520 7B2FA0E3 		mov	r2, #492
 12594 0524 082083E5 		str	r2, [r3, #8]
5154:../../Source/Kernel/rme_kernel.c ****                        RME_THD_FLAG_XFER_DST|RME_THD_FLAG_XFER_SRC|
5155:../../Source/Kernel/rme_kernel.c ****                        RME_THD_FLAG_SCHED_RCV|RME_THD_FLAG_SWT;
5156:../../Source/Kernel/rme_kernel.c **** 
5157:../../Source/Kernel/rme_kernel.c ****     /* Referece process */
5158:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Root->Head.Root_Ref), 1U);
 12595              		.loc 1 5158 5
 12596 0528 1C301BE5 		ldr	r3, [fp, #-28]
 12597 052c 043083E2 		add	r3, r3, #4
 12598 0530 0110A0E3 		mov	r1, #1
 12599 0534 0300A0E1 		mov	r0, r3
 12600 0538 FEFFFFEB 		bl	_RME_Fetch_Add_Single
5159:../../Source/Kernel/rme_kernel.c ****     
5160:../../Source/Kernel/rme_kernel.c ****     /* Insert this into the runqueue, and set current thread to it */
5161:../../Source/Kernel/rme_kernel.c ****     _RME_Run_Ins(Thread);
 12601              		.loc 1 5161 5
 12602 053c 18001BE5 		ldr	r0, [fp, #-24]
 12603 0540 FEFFFFEB 		bl	_RME_Run_Ins
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 313


5162:../../Source/Kernel/rme_kernel.c ****     Local->Thd_Cur=Thread;
 12604              		.loc 1 5162 19
 12605 0544 0C309BE5 		ldr	r3, [fp, #12]
 12606 0548 18201BE5 		ldr	r2, [fp, #-24]
 12607 054c 042083E5 		str	r2, [r3, #4]
5163:../../Source/Kernel/rme_kernel.c **** 
5164:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
5165:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Thd_Crt->Head.Type_Stat),
 12608              		.loc 1 5165 5
 12609 0550 14301BE5 		ldr	r3, [fp, #-20]
 12610 0554 0614A0E3 		mov	r1, #100663296
 12611 0558 0300A0E1 		mov	r0, r3
 12612 055c FEFFFFEB 		bl	__RME_A7A_Write_Release
5166:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_THD,
5167:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
5168:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
5169:../../Source/Kernel/rme_kernel.c **** 
5170:../../Source/Kernel/rme_kernel.c ****     return 0;
 12613              		.loc 1 5170 12
 12614 0560 0030A0E3 		mov	r3, #0
 12615              	.L780:
5171:../../Source/Kernel/rme_kernel.c **** }
 12616              		.loc 1 5171 1
 12617 0564 0300A0E1 		mov	r0, r3
 12618 0568 04D04BE2 		sub	sp, fp, #4
 12619              		.cfi_def_cfa 13, 8
 12620              		@ sp needed
 12621 056c 0088BDE8 		pop	{fp, pc}
 12622              		.cfi_endproc
 12623              	.LFE55:
 12625              		.section	.text._RME_Thd_Crt,"ax",%progbits
 12626              		.align	2
 12627              		.syntax unified
 12628              		.arm
 12630              	_RME_Thd_Crt:
 12631              	.LFB56:
5172:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Boot_Crt ********************************************/
5173:../../Source/Kernel/rme_kernel.c **** 
5174:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Crt ******************************************************
5175:../../Source/Kernel/rme_kernel.c **** Description : Create a thread. A thread is the minimal kernel-level execution
5176:../../Source/Kernel/rme_kernel.c ****               unit.
5177:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5178:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table.
5179:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5180:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kom - The kernel memory capability.
5181:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5182:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability slot that you want this newly
5183:../../Source/Kernel/rme_kernel.c ****                                   created thread capability to be in.
5184:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
5185:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process that it is in.
5186:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5187:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio_Max - The maximum priority allowed for this
5188:../../Source/Kernel/rme_kernel.c ****                                    thread. Once set, this cannot be changed.
5189:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raddr - The relative virtual address to store the
5190:../../Source/Kernel/rme_kernel.c ****                                 thread kernel object.
5191:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Attr - The context attributes.
5192:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Hyp - Whether this is a hypervisor thread.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 314


5193:../../Source/Kernel/rme_kernel.c **** Output      : None.
5194:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5195:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5196:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Crt(struct RME_Cap_Cpt* Cpt,
5197:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
5198:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Kom,
5199:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Thd,
5200:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
5201:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Prio_Max,
5202:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raddr,
5203:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Attr,
5204:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Is_Hyp)
5205:../../Source/Kernel/rme_kernel.c **** {
 12632              		.loc 1 5205 1
 12633              		.cfi_startproc
 12634              		@ args = 20, pretend = 0, frame = 56
 12635              		@ frame_needed = 1, uses_anonymous_args = 0
 12636 0000 00482DE9 		push	{fp, lr}
 12637              		.cfi_def_cfa_offset 8
 12638              		.cfi_offset 11, -8
 12639              		.cfi_offset 14, -4
 12640 0004 04B08DE2 		add	fp, sp, #4
 12641              		.cfi_def_cfa 11, 4
 12642 0008 38D04DE2 		sub	sp, sp, #56
 12643 000c 30000BE5 		str	r0, [fp, #-48]
 12644 0010 34100BE5 		str	r1, [fp, #-52]
 12645 0014 38200BE5 		str	r2, [fp, #-56]
 12646 0018 3C300BE5 		str	r3, [fp, #-60]
5206:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
5207:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Op;
5208:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Kom* Kom_Op;
5209:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Crt;
5210:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Root;
5211:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5212:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5213:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Vaddr;
5214:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Size;
5215:../../Source/Kernel/rme_kernel.c ****     
5216:../../Source/Kernel/rme_kernel.c ****     /* See if the maximum priority relationship is correct - a thread
5217:../../Source/Kernel/rme_kernel.c ****      * can never create a thread with higher maximum priority */
5218:../../Source/Kernel/rme_kernel.c ****     if((RME_CPU_LOCAL()->Thd_Cur)->Sched.Prio_Max<Prio_Max)
 12647              		.loc 1 5218 24
 12648 001c 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 12649 0020 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 12650 0024 043093E5 		ldr	r3, [r3, #4]
 12651              		.loc 1 5218 41
 12652 0028 243093E5 		ldr	r3, [r3, #36]
 12653              		.loc 1 5218 7
 12654 002c 08209BE5 		ldr	r2, [fp, #8]
 12655 0030 030052E1 		cmp	r2, r3
 12656 0034 0100009A 		bls	.L807
5219:../../Source/Kernel/rme_kernel.c ****     {
5220:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5221:../../Source/Kernel/rme_kernel.c **** 
5222:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_PRIO;
 12657              		.loc 1 5222 16
 12658 0038 CC30E0E3 		mvn	r3, #204
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 315


 12659 003c E10100EA 		b	.L808
 12660              	.L807:
5223:../../Source/Kernel/rme_kernel.c ****     }
5224:../../Source/Kernel/rme_kernel.c ****     else
5225:../../Source/Kernel/rme_kernel.c ****     {
5226:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5227:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5228:../../Source/Kernel/rme_kernel.c ****     }
5229:../../Source/Kernel/rme_kernel.c **** 
5230:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
5231:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 12661              		.loc 1 5231 5
 12662 0040 34301BE5 		ldr	r3, [fp, #-52]
 12663 0044 803003E2 		and	r3, r3, #128
 12664 0048 000053E3 		cmp	r3, #0
 12665 004c 1C00001A 		bne	.L809
 12666              		.loc 1 5231 5 is_stmt 0 discriminator 1
 12667 0050 30301BE5 		ldr	r3, [fp, #-48]
 12668 0054 142093E5 		ldr	r2, [r3, #20]
 12669 0058 34301BE5 		ldr	r3, [fp, #-52]
 12670 005c 030052E1 		cmp	r2, r3
 12671 0060 0100008A 		bhi	.L810
 12672              		.loc 1 5231 5 discriminator 3
 12673 0064 0230E0E3 		mvn	r3, #2
 12674              		.loc 1 5231 5
 12675 0068 D60100EA 		b	.L808
 12676              	.L810:
 12677              		.loc 1 5231 5 discriminator 4
 12678 006c 34301BE5 		ldr	r3, [fp, #-52]
 12679 0070 8322A0E1 		lsl	r2, r3, #5
 12680 0074 30301BE5 		ldr	r3, [fp, #-48]
 12681 0078 0C3093E5 		ldr	r3, [r3, #12]
 12682 007c 033082E0 		add	r3, r2, r3
 12683 0080 08300BE5 		str	r3, [fp, #-8]
 12684 0084 08301BE5 		ldr	r3, [fp, #-8]
 12685 0088 0300A0E1 		mov	r0, r3
 12686 008c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12687 0090 18000BE5 		str	r0, [fp, #-24]
 12688              		.loc 1 5231 5 discriminator 1
 12689 0094 18301BE5 		ldr	r3, [fp, #-24]
 12690 0098 FF3803E2 		and	r3, r3, #16711680
 12691 009c 020853E3 		cmp	r3, #131072
 12692 00a0 0100001A 		bne	.L811
 12693              		.loc 1 5231 5 discriminator 5
 12694 00a4 0830E0E3 		mvn	r3, #8
 12695              		.loc 1 5231 5
 12696 00a8 C60100EA 		b	.L808
 12697              	.L811:
 12698              		.loc 1 5231 5 discriminator 6
 12699 00ac 18301BE5 		ldr	r3, [fp, #-24]
 12700 00b0 233CA0E1 		lsr	r3, r3, #24
 12701 00b4 030053E3 		cmp	r3, #3
 12702 00b8 3F00000A 		beq	.L812
 12703              		.loc 1 5231 5 discriminator 7
 12704 00bc 0130E0E3 		mvn	r3, #1
 12705              		.loc 1 5231 5
 12706 00c0 C00100EA 		b	.L808
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 316


 12707              	.L809:
 12708              		.loc 1 5231 5 discriminator 2
 12709 00c4 34301BE5 		ldr	r3, [fp, #-52]
 12710 00c8 2324A0E1 		lsr	r2, r3, #8
 12711 00cc 30301BE5 		ldr	r3, [fp, #-48]
 12712 00d0 143093E5 		ldr	r3, [r3, #20]
 12713 00d4 030052E1 		cmp	r2, r3
 12714 00d8 0100003A 		bcc	.L813
 12715              		.loc 1 5231 5 discriminator 8
 12716 00dc 0230E0E3 		mvn	r3, #2
 12717              		.loc 1 5231 5
 12718 00e0 B80100EA 		b	.L808
 12719              	.L813:
 12720              		.loc 1 5231 5 discriminator 9
 12721 00e4 34301BE5 		ldr	r3, [fp, #-52]
 12722 00e8 2334A0E1 		lsr	r3, r3, #8
 12723 00ec 8322A0E1 		lsl	r2, r3, #5
 12724 00f0 30301BE5 		ldr	r3, [fp, #-48]
 12725 00f4 0C3093E5 		ldr	r3, [r3, #12]
 12726 00f8 033082E0 		add	r3, r2, r3
 12727 00fc 08300BE5 		str	r3, [fp, #-8]
 12728 0100 08301BE5 		ldr	r3, [fp, #-8]
 12729 0104 0300A0E1 		mov	r0, r3
 12730 0108 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12731 010c 18000BE5 		str	r0, [fp, #-24]
 12732              		.loc 1 5231 5 discriminator 1
 12733 0110 18301BE5 		ldr	r3, [fp, #-24]
 12734 0114 FF3803E2 		and	r3, r3, #16711680
 12735 0118 020853E3 		cmp	r3, #131072
 12736 011c 0100001A 		bne	.L814
 12737              		.loc 1 5231 5 discriminator 10
 12738 0120 0830E0E3 		mvn	r3, #8
 12739              		.loc 1 5231 5
 12740 0124 A70100EA 		b	.L808
 12741              	.L814:
 12742              		.loc 1 5231 5 discriminator 11
 12743 0128 18301BE5 		ldr	r3, [fp, #-24]
 12744 012c 233CA0E1 		lsr	r3, r3, #24
 12745 0130 030053E3 		cmp	r3, #3
 12746 0134 0100000A 		beq	.L815
 12747              		.loc 1 5231 5 discriminator 12
 12748 0138 0130E0E3 		mvn	r3, #1
 12749              		.loc 1 5231 5
 12750 013c A10100EA 		b	.L808
 12751              	.L815:
 12752              		.loc 1 5231 5 discriminator 13
 12753 0140 34301BE5 		ldr	r3, [fp, #-52]
 12754 0144 7F2003E2 		and	r2, r3, #127
 12755 0148 08301BE5 		ldr	r3, [fp, #-8]
 12756 014c 143093E5 		ldr	r3, [r3, #20]
 12757 0150 030052E1 		cmp	r2, r3
 12758 0154 0100003A 		bcc	.L816
 12759              		.loc 1 5231 5 discriminator 14
 12760 0158 0230E0E3 		mvn	r3, #2
 12761              		.loc 1 5231 5
 12762 015c 990100EA 		b	.L808
 12763              	.L816:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 317


 12764              		.loc 1 5231 5 discriminator 15
 12765 0160 34301BE5 		ldr	r3, [fp, #-52]
 12766 0164 7F3003E2 		and	r3, r3, #127
 12767 0168 8322A0E1 		lsl	r2, r3, #5
 12768 016c 08301BE5 		ldr	r3, [fp, #-8]
 12769 0170 0C3093E5 		ldr	r3, [r3, #12]
 12770 0174 033082E0 		add	r3, r2, r3
 12771 0178 08300BE5 		str	r3, [fp, #-8]
 12772 017c 08301BE5 		ldr	r3, [fp, #-8]
 12773 0180 0300A0E1 		mov	r0, r3
 12774 0184 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12775 0188 18000BE5 		str	r0, [fp, #-24]
 12776              		.loc 1 5231 5 discriminator 1
 12777 018c 18301BE5 		ldr	r3, [fp, #-24]
 12778 0190 FF3803E2 		and	r3, r3, #16711680
 12779 0194 020853E3 		cmp	r3, #131072
 12780 0198 0100001A 		bne	.L817
 12781              		.loc 1 5231 5 discriminator 16
 12782 019c 0830E0E3 		mvn	r3, #8
 12783              		.loc 1 5231 5
 12784 01a0 880100EA 		b	.L808
 12785              	.L817:
 12786              		.loc 1 5231 5 discriminator 17
 12787 01a4 18301BE5 		ldr	r3, [fp, #-24]
 12788 01a8 233CA0E1 		lsr	r3, r3, #24
 12789 01ac 030053E3 		cmp	r3, #3
 12790 01b0 0100000A 		beq	.L812
 12791              		.loc 1 5231 5 discriminator 18
 12792 01b4 0130E0E3 		mvn	r3, #1
 12793              		.loc 1 5231 5
 12794 01b8 820100EA 		b	.L808
 12795              	.L812:
5232:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat); 
5233:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Kom,RME_CAP_TYPE_KOM,
 12796              		.loc 1 5233 5 is_stmt 1
 12797 01bc 38301BE5 		ldr	r3, [fp, #-56]
 12798 01c0 803003E2 		and	r3, r3, #128
 12799 01c4 000053E3 		cmp	r3, #0
 12800 01c8 1C00001A 		bne	.L818
 12801              		.loc 1 5233 5 is_stmt 0 discriminator 1
 12802 01cc 30301BE5 		ldr	r3, [fp, #-48]
 12803 01d0 142093E5 		ldr	r2, [r3, #20]
 12804 01d4 38301BE5 		ldr	r3, [fp, #-56]
 12805 01d8 030052E1 		cmp	r2, r3
 12806 01dc 0100008A 		bhi	.L819
 12807              		.loc 1 5233 5 discriminator 3
 12808 01e0 0230E0E3 		mvn	r3, #2
 12809              		.loc 1 5233 5
 12810 01e4 770100EA 		b	.L808
 12811              	.L819:
 12812              		.loc 1 5233 5 discriminator 4
 12813 01e8 38301BE5 		ldr	r3, [fp, #-56]
 12814 01ec 8322A0E1 		lsl	r2, r3, #5
 12815 01f0 30301BE5 		ldr	r3, [fp, #-48]
 12816 01f4 0C3093E5 		ldr	r3, [r3, #12]
 12817 01f8 033082E0 		add	r3, r2, r3
 12818 01fc 10300BE5 		str	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 318


 12819 0200 10301BE5 		ldr	r3, [fp, #-16]
 12820 0204 0300A0E1 		mov	r0, r3
 12821 0208 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12822 020c 18000BE5 		str	r0, [fp, #-24]
 12823              		.loc 1 5233 5 discriminator 1
 12824 0210 18301BE5 		ldr	r3, [fp, #-24]
 12825 0214 FF3803E2 		and	r3, r3, #16711680
 12826 0218 020853E3 		cmp	r3, #131072
 12827 021c 0100001A 		bne	.L820
 12828              		.loc 1 5233 5 discriminator 5
 12829 0220 0830E0E3 		mvn	r3, #8
 12830              		.loc 1 5233 5
 12831 0224 670100EA 		b	.L808
 12832              	.L820:
 12833              		.loc 1 5233 5 discriminator 6
 12834 0228 18301BE5 		ldr	r3, [fp, #-24]
 12835 022c 233CA0E1 		lsr	r3, r3, #24
 12836 0230 020053E3 		cmp	r3, #2
 12837 0234 3F00000A 		beq	.L821
 12838              		.loc 1 5233 5 discriminator 7
 12839 0238 0130E0E3 		mvn	r3, #1
 12840              		.loc 1 5233 5
 12841 023c 610100EA 		b	.L808
 12842              	.L818:
 12843              		.loc 1 5233 5 discriminator 2
 12844 0240 38301BE5 		ldr	r3, [fp, #-56]
 12845 0244 2324A0E1 		lsr	r2, r3, #8
 12846 0248 30301BE5 		ldr	r3, [fp, #-48]
 12847 024c 143093E5 		ldr	r3, [r3, #20]
 12848 0250 030052E1 		cmp	r2, r3
 12849 0254 0100003A 		bcc	.L822
 12850              		.loc 1 5233 5 discriminator 8
 12851 0258 0230E0E3 		mvn	r3, #2
 12852              		.loc 1 5233 5
 12853 025c 590100EA 		b	.L808
 12854              	.L822:
 12855              		.loc 1 5233 5 discriminator 9
 12856 0260 38301BE5 		ldr	r3, [fp, #-56]
 12857 0264 2334A0E1 		lsr	r3, r3, #8
 12858 0268 8322A0E1 		lsl	r2, r3, #5
 12859 026c 30301BE5 		ldr	r3, [fp, #-48]
 12860 0270 0C3093E5 		ldr	r3, [r3, #12]
 12861 0274 033082E0 		add	r3, r2, r3
 12862 0278 10300BE5 		str	r3, [fp, #-16]
 12863 027c 10301BE5 		ldr	r3, [fp, #-16]
 12864 0280 0300A0E1 		mov	r0, r3
 12865 0284 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12866 0288 18000BE5 		str	r0, [fp, #-24]
 12867              		.loc 1 5233 5 discriminator 1
 12868 028c 18301BE5 		ldr	r3, [fp, #-24]
 12869 0290 FF3803E2 		and	r3, r3, #16711680
 12870 0294 020853E3 		cmp	r3, #131072
 12871 0298 0100001A 		bne	.L823
 12872              		.loc 1 5233 5 discriminator 10
 12873 029c 0830E0E3 		mvn	r3, #8
 12874              		.loc 1 5233 5
 12875 02a0 480100EA 		b	.L808
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 319


 12876              	.L823:
 12877              		.loc 1 5233 5 discriminator 11
 12878 02a4 18301BE5 		ldr	r3, [fp, #-24]
 12879 02a8 233CA0E1 		lsr	r3, r3, #24
 12880 02ac 030053E3 		cmp	r3, #3
 12881 02b0 0100000A 		beq	.L824
 12882              		.loc 1 5233 5 discriminator 12
 12883 02b4 0130E0E3 		mvn	r3, #1
 12884              		.loc 1 5233 5
 12885 02b8 420100EA 		b	.L808
 12886              	.L824:
 12887              		.loc 1 5233 5 discriminator 13
 12888 02bc 38301BE5 		ldr	r3, [fp, #-56]
 12889 02c0 7F2003E2 		and	r2, r3, #127
 12890 02c4 10301BE5 		ldr	r3, [fp, #-16]
 12891 02c8 143093E5 		ldr	r3, [r3, #20]
 12892 02cc 030052E1 		cmp	r2, r3
 12893 02d0 0100003A 		bcc	.L825
 12894              		.loc 1 5233 5 discriminator 14
 12895 02d4 0230E0E3 		mvn	r3, #2
 12896              		.loc 1 5233 5
 12897 02d8 3A0100EA 		b	.L808
 12898              	.L825:
 12899              		.loc 1 5233 5 discriminator 15
 12900 02dc 38301BE5 		ldr	r3, [fp, #-56]
 12901 02e0 7F3003E2 		and	r3, r3, #127
 12902 02e4 8322A0E1 		lsl	r2, r3, #5
 12903 02e8 10301BE5 		ldr	r3, [fp, #-16]
 12904 02ec 0C3093E5 		ldr	r3, [r3, #12]
 12905 02f0 033082E0 		add	r3, r2, r3
 12906 02f4 10300BE5 		str	r3, [fp, #-16]
 12907 02f8 10301BE5 		ldr	r3, [fp, #-16]
 12908 02fc 0300A0E1 		mov	r0, r3
 12909 0300 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12910 0304 18000BE5 		str	r0, [fp, #-24]
 12911              		.loc 1 5233 5 discriminator 1
 12912 0308 18301BE5 		ldr	r3, [fp, #-24]
 12913 030c FF3803E2 		and	r3, r3, #16711680
 12914 0310 020853E3 		cmp	r3, #131072
 12915 0314 0100001A 		bne	.L826
 12916              		.loc 1 5233 5 discriminator 16
 12917 0318 0830E0E3 		mvn	r3, #8
 12918              		.loc 1 5233 5
 12919 031c 290100EA 		b	.L808
 12920              	.L826:
 12921              		.loc 1 5233 5 discriminator 17
 12922 0320 18301BE5 		ldr	r3, [fp, #-24]
 12923 0324 233CA0E1 		lsr	r3, r3, #24
 12924 0328 020053E3 		cmp	r3, #2
 12925 032c 0100000A 		beq	.L821
 12926              		.loc 1 5233 5 discriminator 18
 12927 0330 0130E0E3 		mvn	r3, #1
 12928              		.loc 1 5233 5
 12929 0334 230100EA 		b	.L808
 12930              	.L821:
5234:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Kom*,Kom_Op,Type_Stat);
5235:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Prc,RME_CAP_TYPE_PRC,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 320


 12931              		.loc 1 5235 5 is_stmt 1
 12932 0338 04309BE5 		ldr	r3, [fp, #4]
 12933 033c 803003E2 		and	r3, r3, #128
 12934 0340 000053E3 		cmp	r3, #0
 12935 0344 1C00001A 		bne	.L827
 12936              		.loc 1 5235 5 is_stmt 0 discriminator 1
 12937 0348 30301BE5 		ldr	r3, [fp, #-48]
 12938 034c 142093E5 		ldr	r2, [r3, #20]
 12939 0350 04309BE5 		ldr	r3, [fp, #4]
 12940 0354 030052E1 		cmp	r2, r3
 12941 0358 0100008A 		bhi	.L828
 12942              		.loc 1 5235 5 discriminator 3
 12943 035c 0230E0E3 		mvn	r3, #2
 12944              		.loc 1 5235 5
 12945 0360 180100EA 		b	.L808
 12946              	.L828:
 12947              		.loc 1 5235 5 discriminator 4
 12948 0364 04309BE5 		ldr	r3, [fp, #4]
 12949 0368 8322A0E1 		lsl	r2, r3, #5
 12950 036c 30301BE5 		ldr	r3, [fp, #-48]
 12951 0370 0C3093E5 		ldr	r3, [r3, #12]
 12952 0374 033082E0 		add	r3, r2, r3
 12953 0378 0C300BE5 		str	r3, [fp, #-12]
 12954 037c 0C301BE5 		ldr	r3, [fp, #-12]
 12955 0380 0300A0E1 		mov	r0, r3
 12956 0384 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 12957 0388 18000BE5 		str	r0, [fp, #-24]
 12958              		.loc 1 5235 5 discriminator 1
 12959 038c 18301BE5 		ldr	r3, [fp, #-24]
 12960 0390 FF3803E2 		and	r3, r3, #16711680
 12961 0394 020853E3 		cmp	r3, #131072
 12962 0398 0100001A 		bne	.L829
 12963              		.loc 1 5235 5 discriminator 5
 12964 039c 0830E0E3 		mvn	r3, #8
 12965              		.loc 1 5235 5
 12966 03a0 080100EA 		b	.L808
 12967              	.L829:
 12968              		.loc 1 5235 5 discriminator 6
 12969 03a4 18301BE5 		ldr	r3, [fp, #-24]
 12970 03a8 233CA0E1 		lsr	r3, r3, #24
 12971 03ac 050053E3 		cmp	r3, #5
 12972 03b0 3F00000A 		beq	.L830
 12973              		.loc 1 5235 5 discriminator 7
 12974 03b4 0130E0E3 		mvn	r3, #1
 12975              		.loc 1 5235 5
 12976 03b8 020100EA 		b	.L808
 12977              	.L827:
 12978              		.loc 1 5235 5 discriminator 2
 12979 03bc 04309BE5 		ldr	r3, [fp, #4]
 12980 03c0 2324A0E1 		lsr	r2, r3, #8
 12981 03c4 30301BE5 		ldr	r3, [fp, #-48]
 12982 03c8 143093E5 		ldr	r3, [r3, #20]
 12983 03cc 030052E1 		cmp	r2, r3
 12984 03d0 0100003A 		bcc	.L831
 12985              		.loc 1 5235 5 discriminator 8
 12986 03d4 0230E0E3 		mvn	r3, #2
 12987              		.loc 1 5235 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 321


 12988 03d8 FA0000EA 		b	.L808
 12989              	.L831:
 12990              		.loc 1 5235 5 discriminator 9
 12991 03dc 04309BE5 		ldr	r3, [fp, #4]
 12992 03e0 2334A0E1 		lsr	r3, r3, #8
 12993 03e4 8322A0E1 		lsl	r2, r3, #5
 12994 03e8 30301BE5 		ldr	r3, [fp, #-48]
 12995 03ec 0C3093E5 		ldr	r3, [r3, #12]
 12996 03f0 033082E0 		add	r3, r2, r3
 12997 03f4 0C300BE5 		str	r3, [fp, #-12]
 12998 03f8 0C301BE5 		ldr	r3, [fp, #-12]
 12999 03fc 0300A0E1 		mov	r0, r3
 13000 0400 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13001 0404 18000BE5 		str	r0, [fp, #-24]
 13002              		.loc 1 5235 5 discriminator 1
 13003 0408 18301BE5 		ldr	r3, [fp, #-24]
 13004 040c FF3803E2 		and	r3, r3, #16711680
 13005 0410 020853E3 		cmp	r3, #131072
 13006 0414 0100001A 		bne	.L832
 13007              		.loc 1 5235 5 discriminator 10
 13008 0418 0830E0E3 		mvn	r3, #8
 13009              		.loc 1 5235 5
 13010 041c E90000EA 		b	.L808
 13011              	.L832:
 13012              		.loc 1 5235 5 discriminator 11
 13013 0420 18301BE5 		ldr	r3, [fp, #-24]
 13014 0424 233CA0E1 		lsr	r3, r3, #24
 13015 0428 030053E3 		cmp	r3, #3
 13016 042c 0100000A 		beq	.L833
 13017              		.loc 1 5235 5 discriminator 12
 13018 0430 0130E0E3 		mvn	r3, #1
 13019              		.loc 1 5235 5
 13020 0434 E30000EA 		b	.L808
 13021              	.L833:
 13022              		.loc 1 5235 5 discriminator 13
 13023 0438 04309BE5 		ldr	r3, [fp, #4]
 13024 043c 7F2003E2 		and	r2, r3, #127
 13025 0440 0C301BE5 		ldr	r3, [fp, #-12]
 13026 0444 143093E5 		ldr	r3, [r3, #20]
 13027 0448 030052E1 		cmp	r2, r3
 13028 044c 0100003A 		bcc	.L834
 13029              		.loc 1 5235 5 discriminator 14
 13030 0450 0230E0E3 		mvn	r3, #2
 13031              		.loc 1 5235 5
 13032 0454 DB0000EA 		b	.L808
 13033              	.L834:
 13034              		.loc 1 5235 5 discriminator 15
 13035 0458 04309BE5 		ldr	r3, [fp, #4]
 13036 045c 7F3003E2 		and	r3, r3, #127
 13037 0460 8322A0E1 		lsl	r2, r3, #5
 13038 0464 0C301BE5 		ldr	r3, [fp, #-12]
 13039 0468 0C3093E5 		ldr	r3, [r3, #12]
 13040 046c 033082E0 		add	r3, r2, r3
 13041 0470 0C300BE5 		str	r3, [fp, #-12]
 13042 0474 0C301BE5 		ldr	r3, [fp, #-12]
 13043 0478 0300A0E1 		mov	r0, r3
 13044 047c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 322


 13045 0480 18000BE5 		str	r0, [fp, #-24]
 13046              		.loc 1 5235 5 discriminator 1
 13047 0484 18301BE5 		ldr	r3, [fp, #-24]
 13048 0488 FF3803E2 		and	r3, r3, #16711680
 13049 048c 020853E3 		cmp	r3, #131072
 13050 0490 0100001A 		bne	.L835
 13051              		.loc 1 5235 5 discriminator 16
 13052 0494 0830E0E3 		mvn	r3, #8
 13053              		.loc 1 5235 5
 13054 0498 CA0000EA 		b	.L808
 13055              	.L835:
 13056              		.loc 1 5235 5 discriminator 17
 13057 049c 18301BE5 		ldr	r3, [fp, #-24]
 13058 04a0 233CA0E1 		lsr	r3, r3, #24
 13059 04a4 050053E3 		cmp	r3, #5
 13060 04a8 0100000A 		beq	.L830
 13061              		.loc 1 5235 5 discriminator 18
 13062 04ac 0130E0E3 		mvn	r3, #1
 13063              		.loc 1 5235 5
 13064 04b0 C40000EA 		b	.L808
 13065              	.L830:
5236:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Prc*,Prc_Op,Type_Stat);
5237:../../Source/Kernel/rme_kernel.c ****     /* Check if the target caps is not frozen and allows such operations */
5238:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 13066              		.loc 1 5238 5 is_stmt 1
 13067 04b4 08301BE5 		ldr	r3, [fp, #-8]
 13068 04b8 083093E5 		ldr	r3, [r3, #8]
 13069 04bc 013003E2 		and	r3, r3, #1
 13070 04c0 000053E3 		cmp	r3, #0
 13071 04c4 0100001A 		bne	.L836
 13072              		.loc 1 5238 5 is_stmt 0 discriminator 1
 13073 04c8 0630E0E3 		mvn	r3, #6
 13074              		.loc 1 5238 5
 13075 04cc BD0000EA 		b	.L808
 13076              	.L836:
5239:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Prc_Op,RME_PRC_FLAG_THD);
 13077              		.loc 1 5239 5 is_stmt 1
 13078 04d0 0C301BE5 		ldr	r3, [fp, #-12]
 13079 04d4 083093E5 		ldr	r3, [r3, #8]
 13080 04d8 023003E2 		and	r3, r3, #2
 13081 04dc 000053E3 		cmp	r3, #0
 13082 04e0 0100001A 		bne	.L837
 13083              		.loc 1 5239 5 is_stmt 0 discriminator 1
 13084 04e4 0630E0E3 		mvn	r3, #6
 13085              		.loc 1 5239 5
 13086 04e8 B60000EA 		b	.L808
 13087              	.L837:
5240:../../Source/Kernel/rme_kernel.c ****     /* See if the creation is valid for this kmem range */
5241:../../Source/Kernel/rme_kernel.c ****     if(Is_Hyp==0U)
 13088              		.loc 1 5241 7 is_stmt 1
 13089 04ec 14309BE5 		ldr	r3, [fp, #20]
 13090 04f0 000053E3 		cmp	r3, #0
 13091 04f4 0200001A 		bne	.L838
5242:../../Source/Kernel/rme_kernel.c ****     {
5243:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5244:../../Source/Kernel/rme_kernel.c ****         
5245:../../Source/Kernel/rme_kernel.c ****         Size=RME_THD_SIZE(Attr);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 323


 13092              		.loc 1 5245 13
 13093 04f8 9C30A0E3 		mov	r3, #156
 13094 04fc 14300BE5 		str	r3, [fp, #-20]
 13095 0500 010000EA 		b	.L839
 13096              	.L838:
5246:../../Source/Kernel/rme_kernel.c ****     }
5247:../../Source/Kernel/rme_kernel.c ****     else
5248:../../Source/Kernel/rme_kernel.c ****     {
5249:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5250:../../Source/Kernel/rme_kernel.c ****         
5251:../../Source/Kernel/rme_kernel.c **** #if(RME_HYP_VA_SIZE==0U)
5252:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_HADDR;
5253:../../Source/Kernel/rme_kernel.c **** #else
5254:../../Source/Kernel/rme_kernel.c ****         Size=RME_HYP_SIZE;
 13097              		.loc 1 5254 13
 13098 0504 5830A0E3 		mov	r3, #88
 13099 0508 14300BE5 		str	r3, [fp, #-20]
 13100              	.L839:
5255:../../Source/Kernel/rme_kernel.c **** #endif
5256:../../Source/Kernel/rme_kernel.c ****     }
5257:../../Source/Kernel/rme_kernel.c ****     
5258:../../Source/Kernel/rme_kernel.c ****     RME_KOM_CHECK(Kom_Op,RME_KOM_FLAG_THD,Raddr,Vaddr,Size);
 13101              		.loc 1 5258 5
 13102 050c 10301BE5 		ldr	r3, [fp, #-16]
 13103 0510 083093E5 		ldr	r3, [r3, #8]
 13104 0514 043003E2 		and	r3, r3, #4
 13105 0518 000053E3 		cmp	r3, #0
 13106 051c 0100001A 		bne	.L840
 13107              		.loc 1 5258 5 is_stmt 0 discriminator 1
 13108 0520 0630E0E3 		mvn	r3, #6
 13109              		.loc 1 5258 5
 13110 0524 A70000EA 		b	.L808
 13111              	.L840:
 13112              		.loc 1 5258 5 discriminator 2
 13113 0528 10301BE5 		ldr	r3, [fp, #-16]
 13114 052c 143093E5 		ldr	r3, [r3, #20]
 13115 0530 0C209BE5 		ldr	r2, [fp, #12]
 13116 0534 033082E0 		add	r3, r2, r3
 13117 0538 1C300BE5 		str	r3, [fp, #-28]
 13118 053c 1C201BE5 		ldr	r2, [fp, #-28]
 13119 0540 0C309BE5 		ldr	r3, [fp, #12]
 13120 0544 030052E1 		cmp	r2, r3
 13121 0548 0100002A 		bcs	.L841
 13122              		.loc 1 5258 5 discriminator 3
 13123 054c 0630E0E3 		mvn	r3, #6
 13124              		.loc 1 5258 5
 13125 0550 9C0000EA 		b	.L808
 13126              	.L841:
 13127              		.loc 1 5258 5 discriminator 4
 13128 0554 10301BE5 		ldr	r3, [fp, #-16]
 13129 0558 143093E5 		ldr	r3, [r3, #20]
 13130 055c 1C201BE5 		ldr	r2, [fp, #-28]
 13131 0560 030052E1 		cmp	r2, r3
 13132 0564 0100002A 		bcs	.L842
 13133              		.loc 1 5258 5 discriminator 5
 13134 0568 0630E0E3 		mvn	r3, #6
 13135              		.loc 1 5258 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 324


 13136 056c 950000EA 		b	.L808
 13137              	.L842:
 13138              		.loc 1 5258 5 discriminator 6
 13139 0570 1C201BE5 		ldr	r2, [fp, #-28]
 13140 0574 14301BE5 		ldr	r3, [fp, #-20]
 13141 0578 033082E0 		add	r3, r2, r3
 13142 057c 1C201BE5 		ldr	r2, [fp, #-28]
 13143 0580 030052E1 		cmp	r2, r3
 13144 0584 0100009A 		bls	.L843
 13145              		.loc 1 5258 5 discriminator 7
 13146 0588 0630E0E3 		mvn	r3, #6
 13147              		.loc 1 5258 5
 13148 058c 8D0000EA 		b	.L808
 13149              	.L843:
 13150              		.loc 1 5258 5 discriminator 8
 13151 0590 10301BE5 		ldr	r3, [fp, #-16]
 13152 0594 182093E5 		ldr	r2, [r3, #24]
 13153 0598 1C101BE5 		ldr	r1, [fp, #-28]
 13154 059c 14301BE5 		ldr	r3, [fp, #-20]
 13155 05a0 033081E0 		add	r3, r1, r3
 13156 05a4 013043E2 		sub	r3, r3, #1
 13157 05a8 030052E1 		cmp	r2, r3
 13158 05ac 0100002A 		bcs	.L844
 13159              		.loc 1 5258 5 discriminator 9
 13160 05b0 0630E0E3 		mvn	r3, #6
 13161              		.loc 1 5258 5
 13162 05b4 830000EA 		b	.L808
 13163              	.L844:
5259:../../Source/Kernel/rme_kernel.c ****     
5260:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
5261:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Thd,struct RME_Cap_Thd*,Thd_Crt);
 13164              		.loc 1 5261 5 is_stmt 1
 13165 05b8 08301BE5 		ldr	r3, [fp, #-8]
 13166 05bc 142093E5 		ldr	r2, [r3, #20]
 13167 05c0 3C301BE5 		ldr	r3, [fp, #-60]
 13168 05c4 030052E1 		cmp	r2, r3
 13169 05c8 0100008A 		bhi	.L845
 13170              		.loc 1 5261 5 is_stmt 0 discriminator 1
 13171 05cc 0230E0E3 		mvn	r3, #2
 13172              		.loc 1 5261 5
 13173 05d0 7C0000EA 		b	.L808
 13174              	.L845:
 13175              		.loc 1 5261 5 discriminator 2
 13176 05d4 3C301BE5 		ldr	r3, [fp, #-60]
 13177 05d8 8322A0E1 		lsl	r2, r3, #5
 13178 05dc 08301BE5 		ldr	r3, [fp, #-8]
 13179 05e0 0C3093E5 		ldr	r3, [r3, #12]
 13180 05e4 033082E0 		add	r3, r2, r3
 13181 05e8 20300BE5 		str	r3, [fp, #-32]
5262:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
5263:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Thd_Crt);
 13182              		.loc 1 5263 5 is_stmt 1
 13183 05ec 20301BE5 		ldr	r3, [fp, #-32]
 13184 05f0 0128A0E3 		mov	r2, #65536
 13185 05f4 0010A0E3 		mov	r1, #0
 13186 05f8 0300A0E1 		mov	r0, r3
 13187 05fc FEFFFFEB 		bl	_RME_Comp_Swap_Single
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 325


 13188 0600 0030A0E1 		mov	r3, r0
 13189              		.loc 1 5263 5 is_stmt 0 discriminator 1
 13190 0604 000053E3 		cmp	r3, #0
 13191 0608 0100001A 		bne	.L846
 13192 060c 0430E0E3 		mvn	r3, #4
 13193              		.loc 1 5263 5
 13194 0610 6C0000EA 		b	.L808
 13195              	.L846:
 13196              		.loc 1 5263 5 discriminator 2
 13197 0614 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 13198 0618 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 13199 061c 002093E5 		ldr	r2, [r3]
 13200 0620 20301BE5 		ldr	r3, [fp, #-32]
 13201 0624 102083E5 		str	r2, [r3, #16]
5264:../../Source/Kernel/rme_kernel.c ****      
5265:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
5266:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,Size)<0)
 13202              		.loc 1 5266 8 is_stmt 1
 13203 0628 14101BE5 		ldr	r1, [fp, #-20]
 13204 062c 1C001BE5 		ldr	r0, [fp, #-28]
 13205 0630 FEFFFFEB 		bl	_RME_Kot_Mark
 13206 0634 0030A0E1 		mov	r3, r0
 13207              		.loc 1 5266 7 discriminator 1
 13208 0638 000053E3 		cmp	r3, #0
 13209 063c 050000AA 		bge	.L847
5267:../../Source/Kernel/rme_kernel.c ****     {
5268:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5269:../../Source/Kernel/rme_kernel.c **** 
5270:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Thd_Crt->Head.Type_Stat),0U);
 13210              		.loc 1 5270 9
 13211 0640 20301BE5 		ldr	r3, [fp, #-32]
 13212 0644 0010A0E3 		mov	r1, #0
 13213 0648 0300A0E1 		mov	r0, r3
 13214 064c FEFFFFEB 		bl	__RME_A7A_Write_Release
5271:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 13215              		.loc 1 5271 16
 13216 0650 0330E0E3 		mvn	r3, #3
 13217 0654 5B0000EA 		b	.L808
 13218              	.L847:
5272:../../Source/Kernel/rme_kernel.c ****     }
5273:../../Source/Kernel/rme_kernel.c ****     else
5274:../../Source/Kernel/rme_kernel.c ****     {
5275:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5276:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5277:../../Source/Kernel/rme_kernel.c ****     }
5278:../../Source/Kernel/rme_kernel.c ****     
5279:../../Source/Kernel/rme_kernel.c ****     /* Object init */
5280:../../Source/Kernel/rme_kernel.c ****     Thread=(struct RME_Thd_Struct*)Vaddr;
 13219              		.loc 1 5280 11
 13220 0658 1C301BE5 		ldr	r3, [fp, #-28]
 13221 065c 24300BE5 		str	r3, [fp, #-36]
5281:../../Source/Kernel/rme_kernel.c ****     /* These thread's TID default to 0, and have no timeslices assigned */
5282:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.TID=0U;
 13222              		.loc 1 5282 22
 13223 0660 24301BE5 		ldr	r3, [fp, #-36]
 13224 0664 0020A0E3 		mov	r2, #0
 13225 0668 102083E5 		str	r2, [r3, #16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 326


5283:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Slice=0U;
 13226              		.loc 1 5283 24
 13227 066c 24301BE5 		ldr	r3, [fp, #-36]
 13228 0670 0020A0E3 		mov	r2, #0
 13229 0674 182083E5 		str	r2, [r3, #24]
5284:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.State=RME_THD_TIMEOUT;
 13230              		.loc 1 5284 24
 13231 0678 24301BE5 		ldr	r3, [fp, #-36]
 13232 067c 0220A0E3 		mov	r2, #2
 13233 0680 1C2083E5 		str	r2, [r3, #28]
5285:../../Source/Kernel/rme_kernel.c ****     Prc_Root=RME_CAP_CONV_ROOT(Prc_Op,struct RME_Cap_Prc*);
 13234              		.loc 1 5285 14
 13235 0684 0C301BE5 		ldr	r3, [fp, #-12]
 13236 0688 003093E5 		ldr	r3, [r3]
 13237 068c 7330FFE6 		uxth	r3, r3
 13238 0690 000053E3 		cmp	r3, #0
 13239 0694 0200000A 		beq	.L848
 13240              		.loc 1 5285 14 is_stmt 0 discriminator 1
 13241 0698 0C301BE5 		ldr	r3, [fp, #-12]
 13242 069c 043093E5 		ldr	r3, [r3, #4]
 13243 06a0 000000EA 		b	.L849
 13244              	.L848:
 13245              		.loc 1 5285 14 discriminator 2
 13246 06a4 0C301BE5 		ldr	r3, [fp, #-12]
 13247              	.L849:
 13248              		.loc 1 5285 13 is_stmt 1 discriminator 4
 13249 06a8 28300BE5 		str	r3, [fp, #-40]
5286:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prc=Prc_Root;
 13250              		.loc 1 5286 22
 13251 06ac 24301BE5 		ldr	r3, [fp, #-36]
 13252 06b0 28201BE5 		ldr	r2, [fp, #-40]
 13253 06b4 2C2083E5 		str	r2, [r3, #44]
5287:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Signal=0U;
 13254              		.loc 1 5287 25
 13255 06b8 24301BE5 		ldr	r3, [fp, #-36]
 13256 06bc 0020A0E3 		mov	r2, #0
 13257 06c0 282083E5 		str	r2, [r3, #40]
5288:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prio_Max=Prio_Max;
 13258              		.loc 1 5288 27
 13259 06c4 24301BE5 		ldr	r3, [fp, #-36]
 13260 06c8 08209BE5 		ldr	r2, [fp, #8]
 13261 06cc 242083E5 		str	r2, [r3, #36]
5289:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Ref=0U;
 13262              		.loc 1 5289 28
 13263 06d0 24301BE5 		ldr	r3, [fp, #-36]
 13264 06d4 0020A0E3 		mov	r2, #0
 13265 06d8 302083E5 		str	r2, [r3, #48]
5290:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Sig=0U;
 13266              		.loc 1 5290 28
 13267 06dc 24301BE5 		ldr	r3, [fp, #-36]
 13268 06e0 0020A0E3 		mov	r2, #0
 13269 06e4 382083E5 		str	r2, [r3, #56]
5291:../../Source/Kernel/rme_kernel.c ****     /* Currently the thread is not bound to any particular CPU */
5292:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Local=RME_THD_FREE;
 13270              		.loc 1 5292 24
 13271 06e8 24301BE5 		ldr	r3, [fp, #-36]
 13272 06ec 0020E0E3 		mvn	r2, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 327


 13273 06f0 142083E5 		str	r2, [r3, #20]
5293:../../Source/Kernel/rme_kernel.c ****     /* This is a marking that this thread haven't sent any notifications */
5294:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Sched.Notif));
 13274              		.loc 1 5294 5
 13275 06f4 24301BE5 		ldr	r3, [fp, #-36]
 13276 06f8 083083E2 		add	r3, r3, #8
 13277 06fc 0300A0E1 		mov	r0, r3
 13278 0700 FEFFFFEB 		bl	_RME_List_Crt
5295:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Sched.Event));
 13279              		.loc 1 5295 5
 13280 0704 24301BE5 		ldr	r3, [fp, #-36]
 13281 0708 3C3083E2 		add	r3, r3, #60
 13282 070c 0300A0E1 		mov	r0, r3
 13283 0710 FEFFFFEB 		bl	_RME_List_Crt
5296:../../Source/Kernel/rme_kernel.c ****     /* Point its pointer to itself - this is not a hypervisor thread yet */
5297:../../Source/Kernel/rme_kernel.c ****     if(Is_Hyp==0U)
 13284              		.loc 1 5297 7
 13285 0714 14309BE5 		ldr	r3, [fp, #20]
 13286 0718 000053E3 		cmp	r3, #0
 13287 071c 0800001A 		bne	.L850
5298:../../Source/Kernel/rme_kernel.c ****     {
5299:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5300:../../Source/Kernel/rme_kernel.c ****         
5301:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Hyp_Attr=Attr;
 13288              		.loc 1 5301 29
 13289 0720 24301BE5 		ldr	r3, [fp, #-36]
 13290 0724 10209BE5 		ldr	r2, [fp, #16]
 13291 0728 442083E5 		str	r2, [r3, #68]
5302:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Reg=(struct RME_Thd_Reg*)(Vaddr+RME_HYP_SIZE);
 13292              		.loc 1 5302 52
 13293 072c 1C301BE5 		ldr	r3, [fp, #-28]
 13294 0730 583083E2 		add	r3, r3, #88
 13295              		.loc 1 5302 25
 13296 0734 0320A0E1 		mov	r2, r3
 13297              		.loc 1 5302 24
 13298 0738 24301BE5 		ldr	r3, [fp, #-36]
 13299 073c 482083E5 		str	r2, [r3, #72]
 13300 0740 060000EA 		b	.L851
 13301              	.L850:
5303:../../Source/Kernel/rme_kernel.c ****     }
5304:../../Source/Kernel/rme_kernel.c ****     /* Default to HYP_VA_BASE for all created hypervisor threads */
5305:../../Source/Kernel/rme_kernel.c ****     else
5306:../../Source/Kernel/rme_kernel.c ****     {
5307:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5308:../../Source/Kernel/rme_kernel.c ****         
5309:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Hyp_Attr=Attr|RME_THD_HYP_FLAG;
 13302              		.loc 1 5309 34
 13303 0744 10309BE5 		ldr	r3, [fp, #16]
 13304 0748 022183E3 		orr	r2, r3, #-2147483648
 13305              		.loc 1 5309 29
 13306 074c 24301BE5 		ldr	r3, [fp, #-36]
 13307 0750 442083E5 		str	r2, [r3, #68]
5310:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Reg=(struct RME_Thd_Reg *)RME_HYP_VA_BASE;
 13308              		.loc 1 5310 24
 13309 0754 24301BE5 		ldr	r3, [fp, #-36]
 13310 0758 0222A0E3 		mov	r2, #536870912
 13311 075c 482083E5 		str	r2, [r3, #72]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 328


 13312              	.L851:
5311:../../Source/Kernel/rme_kernel.c ****     }
5312:../../Source/Kernel/rme_kernel.c ****     /* Initialize the invocation stack */
5313:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Ctx.Invstk));
 13313              		.loc 1 5313 5
 13314 0760 24301BE5 		ldr	r3, [fp, #-36]
 13315 0764 4C3083E2 		add	r3, r3, #76
 13316 0768 0300A0E1 		mov	r0, r3
 13317 076c FEFFFFEB 		bl	_RME_List_Crt
5314:../../Source/Kernel/rme_kernel.c ****     Thread->Ctx.Invstk_Depth=0U;
 13318              		.loc 1 5314 29
 13319 0770 24301BE5 		ldr	r3, [fp, #-36]
 13320 0774 0020A0E3 		mov	r2, #0
 13321 0778 542083E5 		str	r2, [r3, #84]
5315:../../Source/Kernel/rme_kernel.c **** 
5316:../../Source/Kernel/rme_kernel.c ****     /* Header init */
5317:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Root_Ref=0U;
 13322              		.loc 1 5317 27
 13323 077c 20301BE5 		ldr	r3, [fp, #-32]
 13324 0780 0020A0E3 		mov	r2, #0
 13325 0784 042083E5 		str	r2, [r3, #4]
5318:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Object=Vaddr;
 13326              		.loc 1 5318 25
 13327 0788 20301BE5 		ldr	r3, [fp, #-32]
 13328 078c 1C201BE5 		ldr	r2, [fp, #-28]
 13329 0790 0C2083E5 		str	r2, [r3, #12]
5319:../../Source/Kernel/rme_kernel.c ****     Thd_Crt->Head.Flag=RME_THD_FLAG_ALL;
 13330              		.loc 1 5319 23
 13331 0794 20301BE5 		ldr	r3, [fp, #-32]
 13332 0798 FF2100E3 		movw	r2, #511
 13333 079c 082083E5 		str	r2, [r3, #8]
5320:../../Source/Kernel/rme_kernel.c **** 
5321:../../Source/Kernel/rme_kernel.c ****     /* Reference process */
5322:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Root->Head.Root_Ref), 1U);
 13334              		.loc 1 5322 5
 13335 07a0 28301BE5 		ldr	r3, [fp, #-40]
 13336 07a4 043083E2 		add	r3, r3, #4
 13337 07a8 0110A0E3 		mov	r1, #1
 13338 07ac 0300A0E1 		mov	r0, r3
 13339 07b0 FEFFFFEB 		bl	_RME_Fetch_Add_Single
5323:../../Source/Kernel/rme_kernel.c ****     
5324:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
5325:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Thd_Crt->Head.Type_Stat),
 13340              		.loc 1 5325 5
 13341 07b4 20301BE5 		ldr	r3, [fp, #-32]
 13342 07b8 0614A0E3 		mov	r1, #100663296
 13343 07bc 0300A0E1 		mov	r0, r3
 13344 07c0 FEFFFFEB 		bl	__RME_A7A_Write_Release
5326:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_THD,
5327:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
5328:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
5329:../../Source/Kernel/rme_kernel.c **** 
5330:../../Source/Kernel/rme_kernel.c ****     return 0;
 13345              		.loc 1 5330 12
 13346 07c4 0030A0E3 		mov	r3, #0
 13347              	.L808:
5331:../../Source/Kernel/rme_kernel.c **** }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 329


 13348              		.loc 1 5331 1
 13349 07c8 0300A0E1 		mov	r0, r3
 13350 07cc 04D04BE2 		sub	sp, fp, #4
 13351              		.cfi_def_cfa 13, 8
 13352              		@ sp needed
 13353 07d0 0088BDE8 		pop	{fp, pc}
 13354              		.cfi_endproc
 13355              	.LFE56:
 13357              		.section	.text._RME_Thd_Del,"ax",%progbits
 13358              		.align	2
 13359              		.syntax unified
 13360              		.arm
 13362              	_RME_Thd_Del:
 13363              	.LFB57:
5332:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Crt *************************************************/
5333:../../Source/Kernel/rme_kernel.c **** 
5334:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Del ******************************************************
5335:../../Source/Kernel/rme_kernel.c **** Description : Delete a thread.
5336:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table. 
5337:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table.
5338:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5339:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the thread in the captbl.
5340:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
5341:../../Source/Kernel/rme_kernel.c **** Output      : None.
5342:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5343:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5344:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Del(struct RME_Cap_Cpt* Cpt,
5345:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
5346:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Thd)
5347:../../Source/Kernel/rme_kernel.c **** {
 13364              		.loc 1 5347 1
 13365              		.cfi_startproc
 13366              		@ args = 0, pretend = 0, frame = 40
 13367              		@ frame_needed = 1, uses_anonymous_args = 0
 13368 0000 00482DE9 		push	{fp, lr}
 13369              		.cfi_def_cfa_offset 8
 13370              		.cfi_offset 11, -8
 13371              		.cfi_offset 14, -4
 13372 0004 04B08DE2 		add	fp, sp, #4
 13373              		.cfi_def_cfa 11, 4
 13374 0008 28D04DE2 		sub	sp, sp, #40
 13375 000c 20000BE5 		str	r0, [fp, #-32]
 13376 0010 24100BE5 		str	r1, [fp, #-36]
 13377 0014 28200BE5 		str	r2, [fp, #-40]
5348:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
5349:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Del;
5350:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5351:../../Source/Kernel/rme_kernel.c ****     /* These are for deletion */
5352:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5353:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Invocation;
5354:../../Source/Kernel/rme_kernel.c ****     
5355:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
5356:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 13378              		.loc 1 5356 5
 13379 0018 24301BE5 		ldr	r3, [fp, #-36]
 13380 001c 803003E2 		and	r3, r3, #128
 13381 0020 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 330


 13382 0024 1C00001A 		bne	.L853
 13383              		.loc 1 5356 5 is_stmt 0 discriminator 1
 13384 0028 20301BE5 		ldr	r3, [fp, #-32]
 13385 002c 142093E5 		ldr	r2, [r3, #20]
 13386 0030 24301BE5 		ldr	r3, [fp, #-36]
 13387 0034 030052E1 		cmp	r2, r3
 13388 0038 0100008A 		bhi	.L854
 13389              		.loc 1 5356 5 discriminator 3
 13390 003c 0230E0E3 		mvn	r3, #2
 13391              		.loc 1 5356 5
 13392 0040 0A0100EA 		b	.L855
 13393              	.L854:
 13394              		.loc 1 5356 5 discriminator 4
 13395 0044 24301BE5 		ldr	r3, [fp, #-36]
 13396 0048 8322A0E1 		lsl	r2, r3, #5
 13397 004c 20301BE5 		ldr	r3, [fp, #-32]
 13398 0050 0C3093E5 		ldr	r3, [r3, #12]
 13399 0054 033082E0 		add	r3, r2, r3
 13400 0058 08300BE5 		str	r3, [fp, #-8]
 13401 005c 08301BE5 		ldr	r3, [fp, #-8]
 13402 0060 0300A0E1 		mov	r0, r3
 13403 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13404 0068 0C000BE5 		str	r0, [fp, #-12]
 13405              		.loc 1 5356 5 discriminator 1
 13406 006c 0C301BE5 		ldr	r3, [fp, #-12]
 13407 0070 FF3803E2 		and	r3, r3, #16711680
 13408 0074 020853E3 		cmp	r3, #131072
 13409 0078 0100001A 		bne	.L856
 13410              		.loc 1 5356 5 discriminator 5
 13411 007c 0830E0E3 		mvn	r3, #8
 13412              		.loc 1 5356 5
 13413 0080 FA0000EA 		b	.L855
 13414              	.L856:
 13415              		.loc 1 5356 5 discriminator 6
 13416 0084 0C301BE5 		ldr	r3, [fp, #-12]
 13417 0088 233CA0E1 		lsr	r3, r3, #24
 13418 008c 030053E3 		cmp	r3, #3
 13419 0090 3F00000A 		beq	.L857
 13420              		.loc 1 5356 5 discriminator 7
 13421 0094 0130E0E3 		mvn	r3, #1
 13422              		.loc 1 5356 5
 13423 0098 F40000EA 		b	.L855
 13424              	.L853:
 13425              		.loc 1 5356 5 discriminator 2
 13426 009c 24301BE5 		ldr	r3, [fp, #-36]
 13427 00a0 2324A0E1 		lsr	r2, r3, #8
 13428 00a4 20301BE5 		ldr	r3, [fp, #-32]
 13429 00a8 143093E5 		ldr	r3, [r3, #20]
 13430 00ac 030052E1 		cmp	r2, r3
 13431 00b0 0100003A 		bcc	.L858
 13432              		.loc 1 5356 5 discriminator 8
 13433 00b4 0230E0E3 		mvn	r3, #2
 13434              		.loc 1 5356 5
 13435 00b8 EC0000EA 		b	.L855
 13436              	.L858:
 13437              		.loc 1 5356 5 discriminator 9
 13438 00bc 24301BE5 		ldr	r3, [fp, #-36]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 331


 13439 00c0 2334A0E1 		lsr	r3, r3, #8
 13440 00c4 8322A0E1 		lsl	r2, r3, #5
 13441 00c8 20301BE5 		ldr	r3, [fp, #-32]
 13442 00cc 0C3093E5 		ldr	r3, [r3, #12]
 13443 00d0 033082E0 		add	r3, r2, r3
 13444 00d4 08300BE5 		str	r3, [fp, #-8]
 13445 00d8 08301BE5 		ldr	r3, [fp, #-8]
 13446 00dc 0300A0E1 		mov	r0, r3
 13447 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13448 00e4 0C000BE5 		str	r0, [fp, #-12]
 13449              		.loc 1 5356 5 discriminator 1
 13450 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 13451 00ec FF3803E2 		and	r3, r3, #16711680
 13452 00f0 020853E3 		cmp	r3, #131072
 13453 00f4 0100001A 		bne	.L859
 13454              		.loc 1 5356 5 discriminator 10
 13455 00f8 0830E0E3 		mvn	r3, #8
 13456              		.loc 1 5356 5
 13457 00fc DB0000EA 		b	.L855
 13458              	.L859:
 13459              		.loc 1 5356 5 discriminator 11
 13460 0100 0C301BE5 		ldr	r3, [fp, #-12]
 13461 0104 233CA0E1 		lsr	r3, r3, #24
 13462 0108 030053E3 		cmp	r3, #3
 13463 010c 0100000A 		beq	.L860
 13464              		.loc 1 5356 5 discriminator 12
 13465 0110 0130E0E3 		mvn	r3, #1
 13466              		.loc 1 5356 5
 13467 0114 D50000EA 		b	.L855
 13468              	.L860:
 13469              		.loc 1 5356 5 discriminator 13
 13470 0118 24301BE5 		ldr	r3, [fp, #-36]
 13471 011c 7F2003E2 		and	r2, r3, #127
 13472 0120 08301BE5 		ldr	r3, [fp, #-8]
 13473 0124 143093E5 		ldr	r3, [r3, #20]
 13474 0128 030052E1 		cmp	r2, r3
 13475 012c 0100003A 		bcc	.L861
 13476              		.loc 1 5356 5 discriminator 14
 13477 0130 0230E0E3 		mvn	r3, #2
 13478              		.loc 1 5356 5
 13479 0134 CD0000EA 		b	.L855
 13480              	.L861:
 13481              		.loc 1 5356 5 discriminator 15
 13482 0138 24301BE5 		ldr	r3, [fp, #-36]
 13483 013c 7F3003E2 		and	r3, r3, #127
 13484 0140 8322A0E1 		lsl	r2, r3, #5
 13485 0144 08301BE5 		ldr	r3, [fp, #-8]
 13486 0148 0C3093E5 		ldr	r3, [r3, #12]
 13487 014c 033082E0 		add	r3, r2, r3
 13488 0150 08300BE5 		str	r3, [fp, #-8]
 13489 0154 08301BE5 		ldr	r3, [fp, #-8]
 13490 0158 0300A0E1 		mov	r0, r3
 13491 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13492 0160 0C000BE5 		str	r0, [fp, #-12]
 13493              		.loc 1 5356 5 discriminator 1
 13494 0164 0C301BE5 		ldr	r3, [fp, #-12]
 13495 0168 FF3803E2 		and	r3, r3, #16711680
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 332


 13496 016c 020853E3 		cmp	r3, #131072
 13497 0170 0100001A 		bne	.L862
 13498              		.loc 1 5356 5 discriminator 16
 13499 0174 0830E0E3 		mvn	r3, #8
 13500              		.loc 1 5356 5
 13501 0178 BC0000EA 		b	.L855
 13502              	.L862:
 13503              		.loc 1 5356 5 discriminator 17
 13504 017c 0C301BE5 		ldr	r3, [fp, #-12]
 13505 0180 233CA0E1 		lsr	r3, r3, #24
 13506 0184 030053E3 		cmp	r3, #3
 13507 0188 0100000A 		beq	.L857
 13508              		.loc 1 5356 5 discriminator 18
 13509 018c 0130E0E3 		mvn	r3, #1
 13510              		.loc 1 5356 5
 13511 0190 B60000EA 		b	.L855
 13512              	.L857:
5357:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
5358:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
5359:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 13513              		.loc 1 5359 5 is_stmt 1
 13514 0194 08301BE5 		ldr	r3, [fp, #-8]
 13515 0198 083093E5 		ldr	r3, [r3, #8]
 13516 019c 023003E2 		and	r3, r3, #2
 13517 01a0 000053E3 		cmp	r3, #0
 13518 01a4 0100001A 		bne	.L863
 13519              		.loc 1 5359 5 is_stmt 0 discriminator 1
 13520 01a8 0630E0E3 		mvn	r3, #6
 13521              		.loc 1 5359 5
 13522 01ac AF0000EA 		b	.L855
 13523              	.L863:
5360:../../Source/Kernel/rme_kernel.c ****     
5361:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
5362:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Thd,struct RME_Cap_Thd*,Thd_Del);
 13524              		.loc 1 5362 5 is_stmt 1
 13525 01b0 08301BE5 		ldr	r3, [fp, #-8]
 13526 01b4 142093E5 		ldr	r2, [r3, #20]
 13527 01b8 28301BE5 		ldr	r3, [fp, #-40]
 13528 01bc 030052E1 		cmp	r2, r3
 13529 01c0 0100008A 		bhi	.L864
 13530              		.loc 1 5362 5 is_stmt 0 discriminator 1
 13531 01c4 0230E0E3 		mvn	r3, #2
 13532              		.loc 1 5362 5
 13533 01c8 A80000EA 		b	.L855
 13534              	.L864:
 13535              		.loc 1 5362 5 discriminator 2
 13536 01cc 28301BE5 		ldr	r3, [fp, #-40]
 13537 01d0 8322A0E1 		lsl	r2, r3, #5
 13538 01d4 08301BE5 		ldr	r3, [fp, #-8]
 13539 01d8 0C3093E5 		ldr	r3, [r3, #12]
 13540 01dc 033082E0 		add	r3, r2, r3
 13541 01e0 10300BE5 		str	r3, [fp, #-16]
5363:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
5364:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Thd_Del,Type_Stat,RME_CAP_TYPE_THD);
 13542              		.loc 1 5364 5 is_stmt 1
 13543 01e4 10301BE5 		ldr	r3, [fp, #-16]
 13544 01e8 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 333


 13545 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13546 01f0 0C000BE5 		str	r0, [fp, #-12]
 13547              		.loc 1 5364 5 is_stmt 0 discriminator 1
 13548 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 13549 01f8 FF3803E2 		and	r3, r3, #16711680
 13550 01fc 020853E3 		cmp	r3, #131072
 13551 0200 0100000A 		beq	.L865
 13552 0204 0830E0E3 		mvn	r3, #8
 13553              		.loc 1 5364 5
 13554 0208 980000EA 		b	.L855
 13555              	.L865:
 13556              		.loc 1 5364 5 discriminator 2
 13557 020c 0C301BE5 		ldr	r3, [fp, #-12]
 13558 0210 233CA0E1 		lsr	r3, r3, #24
 13559 0214 060053E3 		cmp	r3, #6
 13560 0218 0100000A 		beq	.L866
 13561              		.loc 1 5364 5 discriminator 3
 13562 021c 0130E0E3 		mvn	r3, #1
 13563              		.loc 1 5364 5
 13564 0220 920000EA 		b	.L855
 13565              	.L866:
 13566              		.loc 1 5364 5 discriminator 4
 13567 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 13568 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 13569 022c 002093E5 		ldr	r2, [r3]
 13570 0230 10301BE5 		ldr	r3, [fp, #-16]
 13571 0234 103093E5 		ldr	r3, [r3, #16]
 13572 0238 0310A0E1 		mov	r1, r3
 13573 023c 0200A0E1 		mov	r0, r2
 13574 0240 FEFFFFEB 		bl	_RME_Diff
 13575 0244 0030A0E1 		mov	r3, r0
 13576              		.loc 1 5364 5 discriminator 1
 13577 0248 0A0053E3 		cmp	r3, #10
 13578 024c 0100008A 		bhi	.L867
 13579              		.loc 1 5364 5 discriminator 5
 13580 0250 0730E0E3 		mvn	r3, #7
 13581              		.loc 1 5364 5
 13582 0254 850000EA 		b	.L855
 13583              	.L867:
 13584              		.loc 1 5364 5 discriminator 6
 13585 0258 10301BE5 		ldr	r3, [fp, #-16]
 13586 025c 043093E5 		ldr	r3, [r3, #4]
 13587 0260 000053E3 		cmp	r3, #0
 13588 0264 0B00000A 		beq	.L868
 13589              		.loc 1 5364 5 discriminator 7
 13590 0268 0C301BE5 		ldr	r3, [fp, #-12]
 13591 026c 7330FFE6 		uxth	r3, r3
 13592 0270 000053E3 		cmp	r3, #0
 13593 0274 0500001A 		bne	.L869
 13594              		.loc 1 5364 5 discriminator 9
 13595 0278 10001BE5 		ldr	r0, [fp, #-16]
 13596 027c 0C301BE5 		ldr	r3, [fp, #-12]
 13597 0280 FF38C3E3 		bic	r3, r3, #16711680
 13598 0284 0320A0E1 		mov	r2, r3
 13599 0288 0C101BE5 		ldr	r1, [fp, #-12]
 13600 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 13601              	.L869:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 334


 13602              		.loc 1 5364 5 discriminator 11
 13603 0290 0530E0E3 		mvn	r3, #5
 13604              		.loc 1 5364 5
 13605 0294 750000EA 		b	.L855
 13606              	.L868:
 13607              		.loc 1 5364 5 discriminator 8
 13608 0298 0C301BE5 		ldr	r3, [fp, #-12]
 13609 029c 7330FFE6 		uxth	r3, r3
 13610 02a0 000053E3 		cmp	r3, #0
 13611 02a4 0800000A 		beq	.L870
 13612              		.loc 1 5364 5 discriminator 12
 13613 02a8 003000E3 		movw	r3, #:lower16:.LC6
 13614 02ac 003040E3 		movt	r3, #:upper16:.LC6
 13615 02b0 002000E3 		movw	r2, #:lower16:.LC7
 13616 02b4 002040E3 		movt	r2, #:upper16:.LC7
 13617 02b8 F41401E3 		movw	r1, #5364
 13618 02bc 000000E3 		movw	r0, #:lower16:.LC8
 13619 02c0 000040E3 		movt	r0, #:upper16:.LC8
 13620 02c4 FEFFFFEB 		bl	RME_Log
 13621              	.L871:
 13622              		.loc 1 5364 5
 13623 02c8 FEFFFFEA 		b	.L871
 13624              	.L870:
5365:../../Source/Kernel/rme_kernel.c ****     
5366:../../Source/Kernel/rme_kernel.c ****     /* Get the thread */
5367:../../Source/Kernel/rme_kernel.c ****     Thread=RME_CAP_GETOBJ(Thd_Del,struct RME_Thd_Struct*);
 13625              		.loc 1 5367 12 is_stmt 1
 13626 02cc 10301BE5 		ldr	r3, [fp, #-16]
 13627 02d0 0C3093E5 		ldr	r3, [r3, #12]
 13628              		.loc 1 5367 11
 13629 02d4 14300BE5 		str	r3, [fp, #-20]
5368:../../Source/Kernel/rme_kernel.c ****     
5369:../../Source/Kernel/rme_kernel.c ****     /* See if the thread is free. If still bound, we cannot proceed to deletion */
5370:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Local!=RME_THD_FREE)
 13630              		.loc 1 5370 21
 13631 02d8 14301BE5 		ldr	r3, [fp, #-20]
 13632 02dc 143093E5 		ldr	r3, [r3, #20]
 13633              		.loc 1 5370 7
 13634 02e0 010073E3 		cmn	r3, #1
 13635 02e4 0700000A 		beq	.L872
5371:../../Source/Kernel/rme_kernel.c ****     {
5372:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5373:../../Source/Kernel/rme_kernel.c **** 
5374:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DEFROST(Thd_Del,Type_Stat);
 13636              		.loc 1 5374 9
 13637 02e8 10001BE5 		ldr	r0, [fp, #-16]
 13638 02ec 0C301BE5 		ldr	r3, [fp, #-12]
 13639 02f0 FF38C3E3 		bic	r3, r3, #16711680
 13640 02f4 0320A0E1 		mov	r2, r3
 13641 02f8 0C101BE5 		ldr	r1, [fp, #-12]
 13642 02fc FEFFFFEB 		bl	_RME_Comp_Swap_Single
5375:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 13643              		.loc 1 5375 16
 13644 0300 CB30E0E3 		mvn	r3, #203
 13645 0304 590000EA 		b	.L855
 13646              	.L872:
5376:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 335


5377:../../Source/Kernel/rme_kernel.c ****     else
5378:../../Source/Kernel/rme_kernel.c ****     {
5379:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5380:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5381:../../Source/Kernel/rme_kernel.c ****     }
5382:../../Source/Kernel/rme_kernel.c ****     
5383:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
5384:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Thd_Del,Type_Stat);
 13647              		.loc 1 5384 5
 13648 0308 10301BE5 		ldr	r3, [fp, #-16]
 13649 030c 0020A0E3 		mov	r2, #0
 13650 0310 0C101BE5 		ldr	r1, [fp, #-12]
 13651 0314 0300A0E1 		mov	r0, r3
 13652 0318 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 13653 031c 0030A0E1 		mov	r3, r0
 13654              		.loc 1 5384 5 is_stmt 0 discriminator 1
 13655 0320 000053E3 		cmp	r3, #0
 13656 0324 1300001A 		bne	.L874
 13657 0328 0030E0E3 		mvn	r3, #0
 13658              		.loc 1 5384 5
 13659 032c 4F0000EA 		b	.L855
 13660              	.L875:
5385:../../Source/Kernel/rme_kernel.c ****     
5386:../../Source/Kernel/rme_kernel.c ****     /* Is the thread using any invocation? If yes, just pop the invocation
5387:../../Source/Kernel/rme_kernel.c ****      * stack to empty, and free all the invocation stubs. This can be virtually
5388:../../Source/Kernel/rme_kernel.c ****      * unbounded if the invocation stack is just too deep. This is left to the
5389:../../Source/Kernel/rme_kernel.c ****      * user; if this is what he or she wants, be our guest. */
5390:../../Source/Kernel/rme_kernel.c ****     while(Thread->Ctx.Invstk.Next!=&(Thread->Ctx.Invstk))
5391:../../Source/Kernel/rme_kernel.c ****     {
5392:../../Source/Kernel/rme_kernel.c ****         Invocation=(struct RME_Inv_Struct*)(Thread->Ctx.Invstk.Next);
 13661              		.loc 1 5392 19 is_stmt 1
 13662 0330 14301BE5 		ldr	r3, [fp, #-20]
 13663 0334 4C3093E5 		ldr	r3, [r3, #76]
 13664 0338 18300BE5 		str	r3, [fp, #-24]
5393:../../Source/Kernel/rme_kernel.c ****         _RME_List_Del(Invocation->Head.Prev,Invocation->Head.Next);
 13665              		.loc 1 5393 9
 13666 033c 18301BE5 		ldr	r3, [fp, #-24]
 13667 0340 042093E5 		ldr	r2, [r3, #4]
 13668 0344 18301BE5 		ldr	r3, [fp, #-24]
 13669 0348 003093E5 		ldr	r3, [r3]
 13670 034c 0310A0E1 		mov	r1, r3
 13671 0350 0200A0E1 		mov	r0, r2
 13672 0354 FEFFFFEB 		bl	_RME_List_Del
5394:../../Source/Kernel/rme_kernel.c ****         Invocation->Thd_Act=0U;
 13673              		.loc 1 5394 28
 13674 0358 18301BE5 		ldr	r3, [fp, #-24]
 13675 035c 0020A0E3 		mov	r2, #0
 13676 0360 0C2083E5 		str	r2, [r3, #12]
5395:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Invstk_Depth--;
 13677              		.loc 1 5395 20
 13678 0364 14301BE5 		ldr	r3, [fp, #-20]
 13679 0368 543093E5 		ldr	r3, [r3, #84]
 13680              		.loc 1 5395 33
 13681 036c 012043E2 		sub	r2, r3, #1
 13682 0370 14301BE5 		ldr	r3, [fp, #-20]
 13683 0374 542083E5 		str	r2, [r3, #84]
 13684              	.L874:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 336


5390:../../Source/Kernel/rme_kernel.c ****     {
 13685              		.loc 1 5390 29
 13686 0378 14301BE5 		ldr	r3, [fp, #-20]
 13687 037c 4C2093E5 		ldr	r2, [r3, #76]
5390:../../Source/Kernel/rme_kernel.c ****     {
 13688              		.loc 1 5390 36
 13689 0380 14301BE5 		ldr	r3, [fp, #-20]
 13690 0384 4C3083E2 		add	r3, r3, #76
5390:../../Source/Kernel/rme_kernel.c ****     {
 13691              		.loc 1 5390 34
 13692 0388 030052E1 		cmp	r2, r3
 13693 038c E7FFFF1A 		bne	.L875
5396:../../Source/Kernel/rme_kernel.c ****     }
5397:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Thread->Ctx.Invstk_Depth==0U);
 13694              		.loc 1 5397 5
 13695 0390 14301BE5 		ldr	r3, [fp, #-20]
 13696 0394 543093E5 		ldr	r3, [r3, #84]
 13697 0398 000053E3 		cmp	r3, #0
 13698 039c 0800000A 		beq	.L876
 13699              		.loc 1 5397 5 is_stmt 0 discriminator 1
 13700 03a0 003000E3 		movw	r3, #:lower16:.LC6
 13701 03a4 003040E3 		movt	r3, #:upper16:.LC6
 13702 03a8 002000E3 		movw	r2, #:lower16:.LC7
 13703 03ac 002040E3 		movt	r2, #:upper16:.LC7
 13704 03b0 151501E3 		movw	r1, #5397
 13705 03b4 000000E3 		movw	r0, #:lower16:.LC8
 13706 03b8 000040E3 		movt	r0, #:upper16:.LC8
 13707 03bc FEFFFFEB 		bl	RME_Log
 13708              	.L877:
 13709              		.loc 1 5397 5
 13710 03c0 FEFFFFEA 		b	.L877
 13711              	.L876:
5398:../../Source/Kernel/rme_kernel.c ****     
5399:../../Source/Kernel/rme_kernel.c ****     /* Dereference the process */
5400:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Thread->Sched.Prc->Head.Root_Ref), -1);
 13712              		.loc 1 5400 5 is_stmt 1
 13713 03c4 14301BE5 		ldr	r3, [fp, #-20]
 13714 03c8 2C3093E5 		ldr	r3, [r3, #44]
 13715 03cc 043083E2 		add	r3, r3, #4
 13716 03d0 0010E0E3 		mvn	r1, #0
 13717 03d4 0300A0E1 		mov	r0, r3
 13718 03d8 FEFFFFEB 		bl	_RME_Fetch_Add_Single
5401:../../Source/Kernel/rme_kernel.c ****     
5402:../../Source/Kernel/rme_kernel.c ****     /* Try to depopulate the area - this must be successful */
5403:../../Source/Kernel/rme_kernel.c ****     if((Thread->Ctx.Hyp_Attr&RME_THD_HYP_FLAG)==0U)
 13719              		.loc 1 5403 20
 13720 03dc 14301BE5 		ldr	r3, [fp, #-20]
 13721 03e0 443093E5 		ldr	r3, [r3, #68]
 13722              		.loc 1 5403 7
 13723 03e4 000053E3 		cmp	r3, #0
 13724 03e8 0F0000BA 		blt	.L878
5404:../../Source/Kernel/rme_kernel.c ****     {
5405:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5406:../../Source/Kernel/rme_kernel.c **** 
5407:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(_RME_Kot_Erase((rme_ptr_t)Thread,
 13725              		.loc 1 5407 9
 13726 03ec 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 337


 13727 03f0 9C10A0E3 		mov	r1, #156
 13728 03f4 0300A0E1 		mov	r0, r3
 13729 03f8 FEFFFFEB 		bl	_RME_Kot_Erase
 13730 03fc 0030A0E1 		mov	r3, r0
 13731              		.loc 1 5407 9 is_stmt 0 discriminator 1
 13732 0400 000053E3 		cmp	r3, #0
 13733 0404 1800000A 		beq	.L879
 13734 0408 003000E3 		movw	r3, #:lower16:.LC6
 13735 040c 003040E3 		movt	r3, #:upper16:.LC6
 13736 0410 002000E3 		movw	r2, #:lower16:.LC7
 13737 0414 002040E3 		movt	r2, #:upper16:.LC7
 13738 0418 1F1501E3 		movw	r1, #5407
 13739 041c 000000E3 		movw	r0, #:lower16:.LC8
 13740 0420 000040E3 		movt	r0, #:upper16:.LC8
 13741 0424 FEFFFFEB 		bl	RME_Log
 13742              	.L880:
 13743              		.loc 1 5407 9
 13744 0428 FEFFFFEA 		b	.L880
 13745              	.L878:
5408:../../Source/Kernel/rme_kernel.c ****                                   RME_THD_SIZE(Thread->Ctx.Hyp_Attr))==0);
5409:../../Source/Kernel/rme_kernel.c ****     }
5410:../../Source/Kernel/rme_kernel.c ****     else
5411:../../Source/Kernel/rme_kernel.c ****     {
5412:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5413:../../Source/Kernel/rme_kernel.c **** 
5414:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(_RME_Kot_Erase((rme_ptr_t)Thread,
 13746              		.loc 1 5414 9 is_stmt 1
 13747 042c 14301BE5 		ldr	r3, [fp, #-20]
 13748 0430 5810A0E3 		mov	r1, #88
 13749 0434 0300A0E1 		mov	r0, r3
 13750 0438 FEFFFFEB 		bl	_RME_Kot_Erase
 13751 043c 0030A0E1 		mov	r3, r0
 13752              		.loc 1 5414 9 is_stmt 0 discriminator 1
 13753 0440 000053E3 		cmp	r3, #0
 13754 0444 0800000A 		beq	.L879
 13755 0448 003000E3 		movw	r3, #:lower16:.LC6
 13756 044c 003040E3 		movt	r3, #:upper16:.LC6
 13757 0450 002000E3 		movw	r2, #:lower16:.LC7
 13758 0454 002040E3 		movt	r2, #:upper16:.LC7
 13759 0458 261501E3 		movw	r1, #5414
 13760 045c 000000E3 		movw	r0, #:lower16:.LC8
 13761 0460 000040E3 		movt	r0, #:upper16:.LC8
 13762 0464 FEFFFFEB 		bl	RME_Log
 13763              	.L881:
 13764              		.loc 1 5414 9
 13765 0468 FEFFFFEA 		b	.L881
 13766              	.L879:
5415:../../Source/Kernel/rme_kernel.c ****                    RME_HYP_SIZE)==0);
5416:../../Source/Kernel/rme_kernel.c ****     }
5417:../../Source/Kernel/rme_kernel.c ****     
5418:../../Source/Kernel/rme_kernel.c ****     return 0;
 13767              		.loc 1 5418 12 is_stmt 1
 13768 046c 0030A0E3 		mov	r3, #0
 13769              	.L855:
5419:../../Source/Kernel/rme_kernel.c **** }
 13770              		.loc 1 5419 1
 13771 0470 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 338


 13772 0474 04D04BE2 		sub	sp, fp, #4
 13773              		.cfi_def_cfa 13, 8
 13774              		@ sp needed
 13775 0478 0088BDE8 		pop	{fp, pc}
 13776              		.cfi_endproc
 13777              	.LFE57:
 13779              		.section	.text._RME_Thd_Sched_Bind,"ax",%progbits
 13780              		.align	2
 13781              		.syntax unified
 13782              		.arm
 13784              	_RME_Thd_Sched_Bind:
 13785              	.LFB58:
5420:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Del *************************************************/
5421:../../Source/Kernel/rme_kernel.c **** 
5422:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Sched_Bind ***********************************************
5423:../../Source/Kernel/rme_kernel.c **** Description : Set a thread's priority level, and its scheduler thread. When
5424:../../Source/Kernel/rme_kernel.c ****               there are any state changes on this thread, a notification will
5425:../../Source/Kernel/rme_kernel.c ****               be sent to its scheduler thread. If the state of the thread
5426:../../Source/Kernel/rme_kernel.c ****               changes for multiple times, then only the most recent state will
5427:../../Source/Kernel/rme_kernel.c ****               be reflected in the scheduler's receive queue.
5428:../../Source/Kernel/rme_kernel.c ****               The scheduler and the threads that it schedule must be on the
5429:../../Source/Kernel/rme_kernel.c ****               same core. When a thread wants to go from one core to another,
5430:../../Source/Kernel/rme_kernel.c ****               it must be freed from that core first. 
5431:../../Source/Kernel/rme_kernel.c ****               This must be called on the same core with the Cap_Thd_Sched, and
5432:../../Source/Kernel/rme_kernel.c ****               the Cap_Thd itself must be free.
5433:../../Source/Kernel/rme_kernel.c ****               It is impossible to set a thread's priority beyond its maximum
5434:../../Source/Kernel/rme_kernel.c ****               priority.
5435:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5436:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the thread.
5437:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5438:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd_Sched - The scheduler thread.
5439:../../Source/Kernel/rme_kernel.c ****                                         2-Level.
5440:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The signal endpoint for scheduler
5441:../../Source/Kernel/rme_kernel.c ****                                   notifications. This signal endpoint will be
5442:../../Source/Kernel/rme_kernel.c ****                                   sent to whenever this thread has a fault, or
5443:../../Source/Kernel/rme_kernel.c ****                                   timeouts. This is purely optional; if it is
5444:../../Source/Kernel/rme_kernel.c ****                                   not needed, pass in RME_CID_NULL.
5445:../../Source/Kernel/rme_kernel.c ****               rme_tid_t TID - The thread ID. This is user-supplied, and the
5446:../../Source/Kernel/rme_kernel.c ****                               kernel will not check whether there are two
5447:../../Source/Kernel/rme_kernel.c ****                               threads that have the same TID.
5448:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio - The priority level, higher is more critical.
5449:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Haddr - The kernel-accessible virtual memory address
5450:../../Source/Kernel/rme_kernel.c ****                                 for this thread's register sets, only used by
5451:../../Source/Kernel/rme_kernel.c ****                                 hypervisor-managed threads. For other threads,
5452:../../Source/Kernel/rme_kernel.c ****                                 please pass in NULL instead.
5453:../../Source/Kernel/rme_kernel.c **** Output      : None.
5454:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5455:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5456:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Sched_Bind(struct RME_Cap_Cpt* Cpt,
5457:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd,
5458:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd_Sched,
5459:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Sig,
5460:../../Source/Kernel/rme_kernel.c ****                                      rme_tid_t TID,
5461:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Prio,
5462:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Haddr)
5463:../../Source/Kernel/rme_kernel.c **** {
 13786              		.loc 1 5463 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 339


 13787              		.cfi_startproc
 13788              		@ args = 12, pretend = 0, frame = 56
 13789              		@ frame_needed = 1, uses_anonymous_args = 0
 13790 0000 00482DE9 		push	{fp, lr}
 13791              		.cfi_def_cfa_offset 8
 13792              		.cfi_offset 11, -8
 13793              		.cfi_offset 14, -4
 13794 0004 04B08DE2 		add	fp, sp, #4
 13795              		.cfi_def_cfa 11, 4
 13796 0008 38D04DE2 		sub	sp, sp, #56
 13797 000c 30000BE5 		str	r0, [fp, #-48]
 13798 0010 34100BE5 		str	r1, [fp, #-52]
 13799 0014 38200BE5 		str	r2, [fp, #-56]
 13800 0018 3C300BE5 		str	r3, [fp, #-60]
5464:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Op;
5465:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Sched;
5466:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Op;
5467:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5468:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Scheduler;
5469:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local_Old;
5470:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local_New;
5471:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5472:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Hyp_Attr;
5473:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t End;
5474:../../Source/Kernel/rme_kernel.c **** 
5475:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
5476:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd,RME_CAP_TYPE_THD,
 13801              		.loc 1 5476 5
 13802 001c 34301BE5 		ldr	r3, [fp, #-52]
 13803 0020 803003E2 		and	r3, r3, #128
 13804 0024 000053E3 		cmp	r3, #0
 13805 0028 1C00001A 		bne	.L883
 13806              		.loc 1 5476 5 is_stmt 0 discriminator 1
 13807 002c 30301BE5 		ldr	r3, [fp, #-48]
 13808 0030 142093E5 		ldr	r2, [r3, #20]
 13809 0034 34301BE5 		ldr	r3, [fp, #-52]
 13810 0038 030052E1 		cmp	r2, r3
 13811 003c 0100008A 		bhi	.L884
 13812              		.loc 1 5476 5 discriminator 3
 13813 0040 0230E0E3 		mvn	r3, #2
 13814              		.loc 1 5476 5
 13815 0044 D60100EA 		b	.L885
 13816              	.L884:
 13817              		.loc 1 5476 5 discriminator 4
 13818 0048 34301BE5 		ldr	r3, [fp, #-52]
 13819 004c 8322A0E1 		lsl	r2, r3, #5
 13820 0050 30301BE5 		ldr	r3, [fp, #-48]
 13821 0054 0C3093E5 		ldr	r3, [r3, #12]
 13822 0058 033082E0 		add	r3, r2, r3
 13823 005c 08300BE5 		str	r3, [fp, #-8]
 13824 0060 08301BE5 		ldr	r3, [fp, #-8]
 13825 0064 0300A0E1 		mov	r0, r3
 13826 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13827 006c 14000BE5 		str	r0, [fp, #-20]
 13828              		.loc 1 5476 5 discriminator 1
 13829 0070 14301BE5 		ldr	r3, [fp, #-20]
 13830 0074 FF3803E2 		and	r3, r3, #16711680
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 340


 13831 0078 020853E3 		cmp	r3, #131072
 13832 007c 0100001A 		bne	.L886
 13833              		.loc 1 5476 5 discriminator 5
 13834 0080 0830E0E3 		mvn	r3, #8
 13835              		.loc 1 5476 5
 13836 0084 C60100EA 		b	.L885
 13837              	.L886:
 13838              		.loc 1 5476 5 discriminator 6
 13839 0088 14301BE5 		ldr	r3, [fp, #-20]
 13840 008c 233CA0E1 		lsr	r3, r3, #24
 13841 0090 060053E3 		cmp	r3, #6
 13842 0094 3F00000A 		beq	.L887
 13843              		.loc 1 5476 5 discriminator 7
 13844 0098 0130E0E3 		mvn	r3, #1
 13845              		.loc 1 5476 5
 13846 009c C00100EA 		b	.L885
 13847              	.L883:
 13848              		.loc 1 5476 5 discriminator 2
 13849 00a0 34301BE5 		ldr	r3, [fp, #-52]
 13850 00a4 2324A0E1 		lsr	r2, r3, #8
 13851 00a8 30301BE5 		ldr	r3, [fp, #-48]
 13852 00ac 143093E5 		ldr	r3, [r3, #20]
 13853 00b0 030052E1 		cmp	r2, r3
 13854 00b4 0100003A 		bcc	.L888
 13855              		.loc 1 5476 5 discriminator 8
 13856 00b8 0230E0E3 		mvn	r3, #2
 13857              		.loc 1 5476 5
 13858 00bc B80100EA 		b	.L885
 13859              	.L888:
 13860              		.loc 1 5476 5 discriminator 9
 13861 00c0 34301BE5 		ldr	r3, [fp, #-52]
 13862 00c4 2334A0E1 		lsr	r3, r3, #8
 13863 00c8 8322A0E1 		lsl	r2, r3, #5
 13864 00cc 30301BE5 		ldr	r3, [fp, #-48]
 13865 00d0 0C3093E5 		ldr	r3, [r3, #12]
 13866 00d4 033082E0 		add	r3, r2, r3
 13867 00d8 08300BE5 		str	r3, [fp, #-8]
 13868 00dc 08301BE5 		ldr	r3, [fp, #-8]
 13869 00e0 0300A0E1 		mov	r0, r3
 13870 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13871 00e8 14000BE5 		str	r0, [fp, #-20]
 13872              		.loc 1 5476 5 discriminator 1
 13873 00ec 14301BE5 		ldr	r3, [fp, #-20]
 13874 00f0 FF3803E2 		and	r3, r3, #16711680
 13875 00f4 020853E3 		cmp	r3, #131072
 13876 00f8 0100001A 		bne	.L889
 13877              		.loc 1 5476 5 discriminator 10
 13878 00fc 0830E0E3 		mvn	r3, #8
 13879              		.loc 1 5476 5
 13880 0100 A70100EA 		b	.L885
 13881              	.L889:
 13882              		.loc 1 5476 5 discriminator 11
 13883 0104 14301BE5 		ldr	r3, [fp, #-20]
 13884 0108 233CA0E1 		lsr	r3, r3, #24
 13885 010c 030053E3 		cmp	r3, #3
 13886 0110 0100000A 		beq	.L890
 13887              		.loc 1 5476 5 discriminator 12
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 341


 13888 0114 0130E0E3 		mvn	r3, #1
 13889              		.loc 1 5476 5
 13890 0118 A10100EA 		b	.L885
 13891              	.L890:
 13892              		.loc 1 5476 5 discriminator 13
 13893 011c 34301BE5 		ldr	r3, [fp, #-52]
 13894 0120 7F2003E2 		and	r2, r3, #127
 13895 0124 08301BE5 		ldr	r3, [fp, #-8]
 13896 0128 143093E5 		ldr	r3, [r3, #20]
 13897 012c 030052E1 		cmp	r2, r3
 13898 0130 0100003A 		bcc	.L891
 13899              		.loc 1 5476 5 discriminator 14
 13900 0134 0230E0E3 		mvn	r3, #2
 13901              		.loc 1 5476 5
 13902 0138 990100EA 		b	.L885
 13903              	.L891:
 13904              		.loc 1 5476 5 discriminator 15
 13905 013c 34301BE5 		ldr	r3, [fp, #-52]
 13906 0140 7F3003E2 		and	r3, r3, #127
 13907 0144 8322A0E1 		lsl	r2, r3, #5
 13908 0148 08301BE5 		ldr	r3, [fp, #-8]
 13909 014c 0C3093E5 		ldr	r3, [r3, #12]
 13910 0150 033082E0 		add	r3, r2, r3
 13911 0154 08300BE5 		str	r3, [fp, #-8]
 13912 0158 08301BE5 		ldr	r3, [fp, #-8]
 13913 015c 0300A0E1 		mov	r0, r3
 13914 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13915 0164 14000BE5 		str	r0, [fp, #-20]
 13916              		.loc 1 5476 5 discriminator 1
 13917 0168 14301BE5 		ldr	r3, [fp, #-20]
 13918 016c FF3803E2 		and	r3, r3, #16711680
 13919 0170 020853E3 		cmp	r3, #131072
 13920 0174 0100001A 		bne	.L892
 13921              		.loc 1 5476 5 discriminator 16
 13922 0178 0830E0E3 		mvn	r3, #8
 13923              		.loc 1 5476 5
 13924 017c 880100EA 		b	.L885
 13925              	.L892:
 13926              		.loc 1 5476 5 discriminator 17
 13927 0180 14301BE5 		ldr	r3, [fp, #-20]
 13928 0184 233CA0E1 		lsr	r3, r3, #24
 13929 0188 060053E3 		cmp	r3, #6
 13930 018c 0100000A 		beq	.L887
 13931              		.loc 1 5476 5 discriminator 18
 13932 0190 0130E0E3 		mvn	r3, #1
 13933              		.loc 1 5476 5
 13934 0194 820100EA 		b	.L885
 13935              	.L887:
5477:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Op,Type_Stat);
5478:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd_Sched,RME_CAP_TYPE_THD,
 13936              		.loc 1 5478 5 is_stmt 1
 13937 0198 38301BE5 		ldr	r3, [fp, #-56]
 13938 019c 803003E2 		and	r3, r3, #128
 13939 01a0 000053E3 		cmp	r3, #0
 13940 01a4 1C00001A 		bne	.L893
 13941              		.loc 1 5478 5 is_stmt 0 discriminator 1
 13942 01a8 30301BE5 		ldr	r3, [fp, #-48]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 342


 13943 01ac 142093E5 		ldr	r2, [r3, #20]
 13944 01b0 38301BE5 		ldr	r3, [fp, #-56]
 13945 01b4 030052E1 		cmp	r2, r3
 13946 01b8 0100008A 		bhi	.L894
 13947              		.loc 1 5478 5 discriminator 3
 13948 01bc 0230E0E3 		mvn	r3, #2
 13949              		.loc 1 5478 5
 13950 01c0 770100EA 		b	.L885
 13951              	.L894:
 13952              		.loc 1 5478 5 discriminator 4
 13953 01c4 38301BE5 		ldr	r3, [fp, #-56]
 13954 01c8 8322A0E1 		lsl	r2, r3, #5
 13955 01cc 30301BE5 		ldr	r3, [fp, #-48]
 13956 01d0 0C3093E5 		ldr	r3, [r3, #12]
 13957 01d4 033082E0 		add	r3, r2, r3
 13958 01d8 0C300BE5 		str	r3, [fp, #-12]
 13959 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 13960 01e0 0300A0E1 		mov	r0, r3
 13961 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 13962 01e8 14000BE5 		str	r0, [fp, #-20]
 13963              		.loc 1 5478 5 discriminator 1
 13964 01ec 14301BE5 		ldr	r3, [fp, #-20]
 13965 01f0 FF3803E2 		and	r3, r3, #16711680
 13966 01f4 020853E3 		cmp	r3, #131072
 13967 01f8 0100001A 		bne	.L895
 13968              		.loc 1 5478 5 discriminator 5
 13969 01fc 0830E0E3 		mvn	r3, #8
 13970              		.loc 1 5478 5
 13971 0200 670100EA 		b	.L885
 13972              	.L895:
 13973              		.loc 1 5478 5 discriminator 6
 13974 0204 14301BE5 		ldr	r3, [fp, #-20]
 13975 0208 233CA0E1 		lsr	r3, r3, #24
 13976 020c 060053E3 		cmp	r3, #6
 13977 0210 3F00000A 		beq	.L896
 13978              		.loc 1 5478 5 discriminator 7
 13979 0214 0130E0E3 		mvn	r3, #1
 13980              		.loc 1 5478 5
 13981 0218 610100EA 		b	.L885
 13982              	.L893:
 13983              		.loc 1 5478 5 discriminator 2
 13984 021c 38301BE5 		ldr	r3, [fp, #-56]
 13985 0220 2324A0E1 		lsr	r2, r3, #8
 13986 0224 30301BE5 		ldr	r3, [fp, #-48]
 13987 0228 143093E5 		ldr	r3, [r3, #20]
 13988 022c 030052E1 		cmp	r2, r3
 13989 0230 0100003A 		bcc	.L897
 13990              		.loc 1 5478 5 discriminator 8
 13991 0234 0230E0E3 		mvn	r3, #2
 13992              		.loc 1 5478 5
 13993 0238 590100EA 		b	.L885
 13994              	.L897:
 13995              		.loc 1 5478 5 discriminator 9
 13996 023c 38301BE5 		ldr	r3, [fp, #-56]
 13997 0240 2334A0E1 		lsr	r3, r3, #8
 13998 0244 8322A0E1 		lsl	r2, r3, #5
 13999 0248 30301BE5 		ldr	r3, [fp, #-48]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 343


 14000 024c 0C3093E5 		ldr	r3, [r3, #12]
 14001 0250 033082E0 		add	r3, r2, r3
 14002 0254 0C300BE5 		str	r3, [fp, #-12]
 14003 0258 0C301BE5 		ldr	r3, [fp, #-12]
 14004 025c 0300A0E1 		mov	r0, r3
 14005 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14006 0264 14000BE5 		str	r0, [fp, #-20]
 14007              		.loc 1 5478 5 discriminator 1
 14008 0268 14301BE5 		ldr	r3, [fp, #-20]
 14009 026c FF3803E2 		and	r3, r3, #16711680
 14010 0270 020853E3 		cmp	r3, #131072
 14011 0274 0100001A 		bne	.L898
 14012              		.loc 1 5478 5 discriminator 10
 14013 0278 0830E0E3 		mvn	r3, #8
 14014              		.loc 1 5478 5
 14015 027c 480100EA 		b	.L885
 14016              	.L898:
 14017              		.loc 1 5478 5 discriminator 11
 14018 0280 14301BE5 		ldr	r3, [fp, #-20]
 14019 0284 233CA0E1 		lsr	r3, r3, #24
 14020 0288 030053E3 		cmp	r3, #3
 14021 028c 0100000A 		beq	.L899
 14022              		.loc 1 5478 5 discriminator 12
 14023 0290 0130E0E3 		mvn	r3, #1
 14024              		.loc 1 5478 5
 14025 0294 420100EA 		b	.L885
 14026              	.L899:
 14027              		.loc 1 5478 5 discriminator 13
 14028 0298 38301BE5 		ldr	r3, [fp, #-56]
 14029 029c 7F2003E2 		and	r2, r3, #127
 14030 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 14031 02a4 143093E5 		ldr	r3, [r3, #20]
 14032 02a8 030052E1 		cmp	r2, r3
 14033 02ac 0100003A 		bcc	.L900
 14034              		.loc 1 5478 5 discriminator 14
 14035 02b0 0230E0E3 		mvn	r3, #2
 14036              		.loc 1 5478 5
 14037 02b4 3A0100EA 		b	.L885
 14038              	.L900:
 14039              		.loc 1 5478 5 discriminator 15
 14040 02b8 38301BE5 		ldr	r3, [fp, #-56]
 14041 02bc 7F3003E2 		and	r3, r3, #127
 14042 02c0 8322A0E1 		lsl	r2, r3, #5
 14043 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 14044 02c8 0C3093E5 		ldr	r3, [r3, #12]
 14045 02cc 033082E0 		add	r3, r2, r3
 14046 02d0 0C300BE5 		str	r3, [fp, #-12]
 14047 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 14048 02d8 0300A0E1 		mov	r0, r3
 14049 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14050 02e0 14000BE5 		str	r0, [fp, #-20]
 14051              		.loc 1 5478 5 discriminator 1
 14052 02e4 14301BE5 		ldr	r3, [fp, #-20]
 14053 02e8 FF3803E2 		and	r3, r3, #16711680
 14054 02ec 020853E3 		cmp	r3, #131072
 14055 02f0 0100001A 		bne	.L901
 14056              		.loc 1 5478 5 discriminator 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 344


 14057 02f4 0830E0E3 		mvn	r3, #8
 14058              		.loc 1 5478 5
 14059 02f8 290100EA 		b	.L885
 14060              	.L901:
 14061              		.loc 1 5478 5 discriminator 17
 14062 02fc 14301BE5 		ldr	r3, [fp, #-20]
 14063 0300 233CA0E1 		lsr	r3, r3, #24
 14064 0304 060053E3 		cmp	r3, #6
 14065 0308 0100000A 		beq	.L896
 14066              		.loc 1 5478 5 discriminator 18
 14067 030c 0130E0E3 		mvn	r3, #1
 14068              		.loc 1 5478 5
 14069 0310 230100EA 		b	.L885
 14070              	.L896:
5479:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Sched,Type_Stat);
5480:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
5481:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Op,RME_THD_FLAG_SCHED_CHILD);
 14071              		.loc 1 5481 5 is_stmt 1
 14072 0314 08301BE5 		ldr	r3, [fp, #-8]
 14073 0318 083093E5 		ldr	r3, [r3, #8]
 14074 031c 023003E2 		and	r3, r3, #2
 14075 0320 000053E3 		cmp	r3, #0
 14076 0324 0100001A 		bne	.L902
 14077              		.loc 1 5481 5 is_stmt 0 discriminator 1
 14078 0328 0630E0E3 		mvn	r3, #6
 14079              		.loc 1 5481 5
 14080 032c 1C0100EA 		b	.L885
 14081              	.L902:
5482:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Sched,RME_THD_FLAG_SCHED_PARENT);
 14082              		.loc 1 5482 5 is_stmt 1
 14083 0330 0C301BE5 		ldr	r3, [fp, #-12]
 14084 0334 083093E5 		ldr	r3, [r3, #8]
 14085 0338 043003E2 		and	r3, r3, #4
 14086 033c 000053E3 		cmp	r3, #0
 14087 0340 0100001A 		bne	.L903
 14088              		.loc 1 5482 5 is_stmt 0 discriminator 1
 14089 0344 0630E0E3 		mvn	r3, #6
 14090              		.loc 1 5482 5
 14091 0348 150100EA 		b	.L885
 14092              	.L903:
5483:../../Source/Kernel/rme_kernel.c ****     
5484:../../Source/Kernel/rme_kernel.c ****     /* Check if we need the signal endpoint for this operation */
5485:../../Source/Kernel/rme_kernel.c ****     if(Cap_Sig!=RME_CID_NULL)
 14093              		.loc 1 5485 7 is_stmt 1
 14094 034c 3C301BE5 		ldr	r3, [fp, #-60]
 14095 0350 020953E3 		cmp	r3, #32768
 14096 0354 6500000A 		beq	.L904
5486:../../Source/Kernel/rme_kernel.c ****     {
5487:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5488:../../Source/Kernel/rme_kernel.c **** 
5489:../../Source/Kernel/rme_kernel.c ****         RME_CPT_GETCAP(Cpt,Cap_Sig,RME_CAP_TYPE_SIG,
 14097              		.loc 1 5489 9
 14098 0358 3C301BE5 		ldr	r3, [fp, #-60]
 14099 035c 803003E2 		and	r3, r3, #128
 14100 0360 000053E3 		cmp	r3, #0
 14101 0364 1C00001A 		bne	.L905
 14102              		.loc 1 5489 9 is_stmt 0 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 345


 14103 0368 30301BE5 		ldr	r3, [fp, #-48]
 14104 036c 142093E5 		ldr	r2, [r3, #20]
 14105 0370 3C301BE5 		ldr	r3, [fp, #-60]
 14106 0374 030052E1 		cmp	r2, r3
 14107 0378 0100008A 		bhi	.L906
 14108              		.loc 1 5489 9 discriminator 3
 14109 037c 0230E0E3 		mvn	r3, #2
 14110              		.loc 1 5489 9
 14111 0380 070100EA 		b	.L885
 14112              	.L906:
 14113              		.loc 1 5489 9 discriminator 4
 14114 0384 3C301BE5 		ldr	r3, [fp, #-60]
 14115 0388 8322A0E1 		lsl	r2, r3, #5
 14116 038c 30301BE5 		ldr	r3, [fp, #-48]
 14117 0390 0C3093E5 		ldr	r3, [r3, #12]
 14118 0394 033082E0 		add	r3, r2, r3
 14119 0398 10300BE5 		str	r3, [fp, #-16]
 14120 039c 10301BE5 		ldr	r3, [fp, #-16]
 14121 03a0 0300A0E1 		mov	r0, r3
 14122 03a4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14123 03a8 14000BE5 		str	r0, [fp, #-20]
 14124              		.loc 1 5489 9 discriminator 1
 14125 03ac 14301BE5 		ldr	r3, [fp, #-20]
 14126 03b0 FF3803E2 		and	r3, r3, #16711680
 14127 03b4 020853E3 		cmp	r3, #131072
 14128 03b8 0100001A 		bne	.L907
 14129              		.loc 1 5489 9 discriminator 5
 14130 03bc 0830E0E3 		mvn	r3, #8
 14131              		.loc 1 5489 9
 14132 03c0 F70000EA 		b	.L885
 14133              	.L907:
 14134              		.loc 1 5489 9 discriminator 6
 14135 03c4 14301BE5 		ldr	r3, [fp, #-20]
 14136 03c8 233CA0E1 		lsr	r3, r3, #24
 14137 03cc 080053E3 		cmp	r3, #8
 14138 03d0 3F00000A 		beq	.L908
 14139              		.loc 1 5489 9 discriminator 7
 14140 03d4 0130E0E3 		mvn	r3, #1
 14141              		.loc 1 5489 9
 14142 03d8 F10000EA 		b	.L885
 14143              	.L905:
 14144              		.loc 1 5489 9 discriminator 2
 14145 03dc 3C301BE5 		ldr	r3, [fp, #-60]
 14146 03e0 2324A0E1 		lsr	r2, r3, #8
 14147 03e4 30301BE5 		ldr	r3, [fp, #-48]
 14148 03e8 143093E5 		ldr	r3, [r3, #20]
 14149 03ec 030052E1 		cmp	r2, r3
 14150 03f0 0100003A 		bcc	.L909
 14151              		.loc 1 5489 9 discriminator 8
 14152 03f4 0230E0E3 		mvn	r3, #2
 14153              		.loc 1 5489 9
 14154 03f8 E90000EA 		b	.L885
 14155              	.L909:
 14156              		.loc 1 5489 9 discriminator 9
 14157 03fc 3C301BE5 		ldr	r3, [fp, #-60]
 14158 0400 2334A0E1 		lsr	r3, r3, #8
 14159 0404 8322A0E1 		lsl	r2, r3, #5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 346


 14160 0408 30301BE5 		ldr	r3, [fp, #-48]
 14161 040c 0C3093E5 		ldr	r3, [r3, #12]
 14162 0410 033082E0 		add	r3, r2, r3
 14163 0414 10300BE5 		str	r3, [fp, #-16]
 14164 0418 10301BE5 		ldr	r3, [fp, #-16]
 14165 041c 0300A0E1 		mov	r0, r3
 14166 0420 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14167 0424 14000BE5 		str	r0, [fp, #-20]
 14168              		.loc 1 5489 9 discriminator 1
 14169 0428 14301BE5 		ldr	r3, [fp, #-20]
 14170 042c FF3803E2 		and	r3, r3, #16711680
 14171 0430 020853E3 		cmp	r3, #131072
 14172 0434 0100001A 		bne	.L910
 14173              		.loc 1 5489 9 discriminator 10
 14174 0438 0830E0E3 		mvn	r3, #8
 14175              		.loc 1 5489 9
 14176 043c D80000EA 		b	.L885
 14177              	.L910:
 14178              		.loc 1 5489 9 discriminator 11
 14179 0440 14301BE5 		ldr	r3, [fp, #-20]
 14180 0444 233CA0E1 		lsr	r3, r3, #24
 14181 0448 030053E3 		cmp	r3, #3
 14182 044c 0100000A 		beq	.L911
 14183              		.loc 1 5489 9 discriminator 12
 14184 0450 0130E0E3 		mvn	r3, #1
 14185              		.loc 1 5489 9
 14186 0454 D20000EA 		b	.L885
 14187              	.L911:
 14188              		.loc 1 5489 9 discriminator 13
 14189 0458 3C301BE5 		ldr	r3, [fp, #-60]
 14190 045c 7F2003E2 		and	r2, r3, #127
 14191 0460 10301BE5 		ldr	r3, [fp, #-16]
 14192 0464 143093E5 		ldr	r3, [r3, #20]
 14193 0468 030052E1 		cmp	r2, r3
 14194 046c 0100003A 		bcc	.L912
 14195              		.loc 1 5489 9 discriminator 14
 14196 0470 0230E0E3 		mvn	r3, #2
 14197              		.loc 1 5489 9
 14198 0474 CA0000EA 		b	.L885
 14199              	.L912:
 14200              		.loc 1 5489 9 discriminator 15
 14201 0478 3C301BE5 		ldr	r3, [fp, #-60]
 14202 047c 7F3003E2 		and	r3, r3, #127
 14203 0480 8322A0E1 		lsl	r2, r3, #5
 14204 0484 10301BE5 		ldr	r3, [fp, #-16]
 14205 0488 0C3093E5 		ldr	r3, [r3, #12]
 14206 048c 033082E0 		add	r3, r2, r3
 14207 0490 10300BE5 		str	r3, [fp, #-16]
 14208 0494 10301BE5 		ldr	r3, [fp, #-16]
 14209 0498 0300A0E1 		mov	r0, r3
 14210 049c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14211 04a0 14000BE5 		str	r0, [fp, #-20]
 14212              		.loc 1 5489 9 discriminator 1
 14213 04a4 14301BE5 		ldr	r3, [fp, #-20]
 14214 04a8 FF3803E2 		and	r3, r3, #16711680
 14215 04ac 020853E3 		cmp	r3, #131072
 14216 04b0 0100001A 		bne	.L913
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 347


 14217              		.loc 1 5489 9 discriminator 16
 14218 04b4 0830E0E3 		mvn	r3, #8
 14219              		.loc 1 5489 9
 14220 04b8 B90000EA 		b	.L885
 14221              	.L913:
 14222              		.loc 1 5489 9 discriminator 17
 14223 04bc 14301BE5 		ldr	r3, [fp, #-20]
 14224 04c0 233CA0E1 		lsr	r3, r3, #24
 14225 04c4 080053E3 		cmp	r3, #8
 14226 04c8 0100000A 		beq	.L908
 14227              		.loc 1 5489 9 discriminator 18
 14228 04cc 0130E0E3 		mvn	r3, #1
 14229              		.loc 1 5489 9
 14230 04d0 B30000EA 		b	.L885
 14231              	.L908:
5490:../../Source/Kernel/rme_kernel.c ****                        struct RME_Cap_Sig*,Sig_Op,Type_Stat);
5491:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_SCHED);
 14232              		.loc 1 5491 9 is_stmt 1
 14233 04d4 10301BE5 		ldr	r3, [fp, #-16]
 14234 04d8 083093E5 		ldr	r3, [r3, #8]
 14235 04dc 203003E2 		and	r3, r3, #32
 14236 04e0 000053E3 		cmp	r3, #0
 14237 04e4 0300001A 		bne	.L914
 14238              		.loc 1 5491 9 is_stmt 0 discriminator 1
 14239 04e8 0630E0E3 		mvn	r3, #6
 14240              		.loc 1 5491 9
 14241 04ec AC0000EA 		b	.L885
 14242              	.L904:
5492:../../Source/Kernel/rme_kernel.c ****     }
5493:../../Source/Kernel/rme_kernel.c ****     else
5494:../../Source/Kernel/rme_kernel.c ****     {
5495:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5496:../../Source/Kernel/rme_kernel.c **** 
5497:../../Source/Kernel/rme_kernel.c ****         Sig_Op=RME_NULL;
 14243              		.loc 1 5497 15 is_stmt 1
 14244 04f0 0030A0E3 		mov	r3, #0
 14245 04f4 10300BE5 		str	r3, [fp, #-16]
 14246              	.L914:
5498:../../Source/Kernel/rme_kernel.c ****     }
5499:../../Source/Kernel/rme_kernel.c **** 
5500:../../Source/Kernel/rme_kernel.c ****     /* Check if the target thread is already bound. If yes, we just quit */
5501:../../Source/Kernel/rme_kernel.c ****     Thread=RME_CAP_GETOBJ(Thd_Op,struct RME_Thd_Struct*);
 14247              		.loc 1 5501 12
 14248 04f8 08301BE5 		ldr	r3, [fp, #-8]
 14249 04fc 0C3093E5 		ldr	r3, [r3, #12]
 14250              		.loc 1 5501 11
 14251 0500 18300BE5 		str	r3, [fp, #-24]
5502:../../Source/Kernel/rme_kernel.c ****     Local_Old=Thread->Sched.Local;
 14252              		.loc 1 5502 14
 14253 0504 18301BE5 		ldr	r3, [fp, #-24]
 14254 0508 143093E5 		ldr	r3, [r3, #20]
 14255 050c 1C300BE5 		str	r3, [fp, #-28]
5503:../../Source/Kernel/rme_kernel.c ****     if(Local_Old!=RME_THD_FREE)
 14256              		.loc 1 5503 7
 14257 0510 1C301BE5 		ldr	r3, [fp, #-28]
 14258 0514 010073E3 		cmn	r3, #1
 14259 0518 0100000A 		beq	.L915
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 348


5504:../../Source/Kernel/rme_kernel.c ****     {
5505:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5506:../../Source/Kernel/rme_kernel.c **** 
5507:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 14260              		.loc 1 5507 16
 14261 051c CB30E0E3 		mvn	r3, #203
 14262 0520 9F0000EA 		b	.L885
 14263              	.L915:
5508:../../Source/Kernel/rme_kernel.c ****     }
5509:../../Source/Kernel/rme_kernel.c ****     else
5510:../../Source/Kernel/rme_kernel.c ****     {
5511:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5512:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5513:../../Source/Kernel/rme_kernel.c ****     }
5514:../../Source/Kernel/rme_kernel.c ****     
5515:../../Source/Kernel/rme_kernel.c ****     /* See if the parent thread is on the same core with the current processor */
5516:../../Source/Kernel/rme_kernel.c ****     Local_New=RME_CPU_LOCAL();
 14264              		.loc 1 5516 14
 14265 0524 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 14266 0528 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 14267 052c 20300BE5 		str	r3, [fp, #-32]
5517:../../Source/Kernel/rme_kernel.c ****     Scheduler=RME_CAP_GETOBJ(Thd_Sched,struct RME_Thd_Struct*);
 14268              		.loc 1 5517 15
 14269 0530 0C301BE5 		ldr	r3, [fp, #-12]
 14270 0534 0C3093E5 		ldr	r3, [r3, #12]
 14271              		.loc 1 5517 14
 14272 0538 24300BE5 		str	r3, [fp, #-36]
5518:../../Source/Kernel/rme_kernel.c ****     if(Scheduler->Sched.Local!=Local_New)
 14273              		.loc 1 5518 24
 14274 053c 24301BE5 		ldr	r3, [fp, #-36]
 14275 0540 143093E5 		ldr	r3, [r3, #20]
 14276              		.loc 1 5518 7
 14277 0544 20201BE5 		ldr	r2, [fp, #-32]
 14278 0548 030052E1 		cmp	r2, r3
 14279 054c 0100000A 		beq	.L916
5519:../../Source/Kernel/rme_kernel.c ****     {
5520:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5521:../../Source/Kernel/rme_kernel.c **** 
5522:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 14280              		.loc 1 5522 16
 14281 0550 CB30E0E3 		mvn	r3, #203
 14282 0554 920000EA 		b	.L885
 14283              	.L916:
5523:../../Source/Kernel/rme_kernel.c ****     }
5524:../../Source/Kernel/rme_kernel.c ****     else
5525:../../Source/Kernel/rme_kernel.c ****     {
5526:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5527:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5528:../../Source/Kernel/rme_kernel.c ****     }
5529:../../Source/Kernel/rme_kernel.c **** 
5530:../../Source/Kernel/rme_kernel.c ****     /* See if we are trying to bind to ourself - prohibited */
5531:../../Source/Kernel/rme_kernel.c ****     if(Thread==Scheduler)
 14284              		.loc 1 5531 7
 14285 0558 18201BE5 		ldr	r2, [fp, #-24]
 14286 055c 24301BE5 		ldr	r3, [fp, #-36]
 14287 0560 030052E1 		cmp	r2, r3
 14288 0564 0100001A 		bne	.L917
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 349


5532:../../Source/Kernel/rme_kernel.c ****     {
5533:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5534:../../Source/Kernel/rme_kernel.c **** 
5535:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_NOTIF;
 14289              		.loc 1 5535 16
 14290 0568 CE30E0E3 		mvn	r3, #206
 14291 056c 8C0000EA 		b	.L885
 14292              	.L917:
5536:../../Source/Kernel/rme_kernel.c ****     }
5537:../../Source/Kernel/rme_kernel.c ****     else
5538:../../Source/Kernel/rme_kernel.c ****     {
5539:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5540:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5541:../../Source/Kernel/rme_kernel.c ****     }
5542:../../Source/Kernel/rme_kernel.c ****     
5543:../../Source/Kernel/rme_kernel.c ****     /* See if the priority relationship is correct */
5544:../../Source/Kernel/rme_kernel.c ****     if(Scheduler->Sched.Prio_Max<Prio)
 14293              		.loc 1 5544 24
 14294 0570 24301BE5 		ldr	r3, [fp, #-36]
 14295 0574 243093E5 		ldr	r3, [r3, #36]
 14296              		.loc 1 5544 7
 14297 0578 08209BE5 		ldr	r2, [fp, #8]
 14298 057c 030052E1 		cmp	r2, r3
 14299 0580 0100009A 		bls	.L918
5545:../../Source/Kernel/rme_kernel.c ****     {
5546:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5547:../../Source/Kernel/rme_kernel.c **** 
5548:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_PRIO;
 14300              		.loc 1 5548 16
 14301 0584 CC30E0E3 		mvn	r3, #204
 14302 0588 850000EA 		b	.L885
 14303              	.L918:
5549:../../Source/Kernel/rme_kernel.c ****     }
5550:../../Source/Kernel/rme_kernel.c ****     else
5551:../../Source/Kernel/rme_kernel.c ****     {
5552:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5553:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5554:../../Source/Kernel/rme_kernel.c ****     }
5555:../../Source/Kernel/rme_kernel.c ****     
5556:../../Source/Kernel/rme_kernel.c ****     /* Check whether the coprocessor context attribute is compatible with this core */
5557:../../Source/Kernel/rme_kernel.c ****     Hyp_Attr=Thread->Ctx.Hyp_Attr;
 14304              		.loc 1 5557 13
 14305 058c 18301BE5 		ldr	r3, [fp, #-24]
 14306 0590 443093E5 		ldr	r3, [r3, #68]
 14307 0594 28300BE5 		str	r3, [fp, #-40]
5558:../../Source/Kernel/rme_kernel.c **** #if(RME_COP_NUM!=0U)
5559:../../Source/Kernel/rme_kernel.c ****     if(__RME_Thd_Cop_Check(RME_THD_ATTR(Hyp_Attr))<0)
5560:../../Source/Kernel/rme_kernel.c ****     {
5561:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5562:../../Source/Kernel/rme_kernel.c **** 
5563:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
5564:../../Source/Kernel/rme_kernel.c ****     }
5565:../../Source/Kernel/rme_kernel.c **** #else
5566:../../Source/Kernel/rme_kernel.c ****     if(RME_THD_ATTR(Hyp_Attr)!=0U)
 14308              		.loc 1 5566 8
 14309 0598 28301BE5 		ldr	r3, [fp, #-40]
 14310 059c 0231C3E3 		bic	r3, r3, #-2147483648
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 350


 14311              		.loc 1 5566 7
 14312 05a0 000053E3 		cmp	r3, #0
 14313 05a4 0100000A 		beq	.L919
5567:../../Source/Kernel/rme_kernel.c ****     {
5568:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5569:../../Source/Kernel/rme_kernel.c **** 
5570:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 14314              		.loc 1 5570 16
 14315 05a8 0630E0E3 		mvn	r3, #6
 14316 05ac 7C0000EA 		b	.L885
 14317              	.L919:
5571:../../Source/Kernel/rme_kernel.c ****     }
5572:../../Source/Kernel/rme_kernel.c **** #endif
5573:../../Source/Kernel/rme_kernel.c ****     else
5574:../../Source/Kernel/rme_kernel.c ****     {
5575:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5576:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5577:../../Source/Kernel/rme_kernel.c ****     }
5578:../../Source/Kernel/rme_kernel.c **** 
5579:../../Source/Kernel/rme_kernel.c ****     /* Check the hypervisor context buffer passed in to see whether it is good */
5580:../../Source/Kernel/rme_kernel.c ****     if((Haddr!=RME_NULL)&&((Hyp_Attr&RME_THD_HYP_FLAG)!=0U))
 14318              		.loc 1 5580 7
 14319 05b0 0C309BE5 		ldr	r3, [fp, #12]
 14320 05b4 000053E3 		cmp	r3, #0
 14321 05b8 2000000A 		beq	.L920
 14322              		.loc 1 5580 55 discriminator 1
 14323 05bc 28301BE5 		ldr	r3, [fp, #-40]
 14324              		.loc 1 5580 25 discriminator 1
 14325 05c0 000053E3 		cmp	r3, #0
 14326 05c4 1D0000AA 		bge	.L920
5581:../../Source/Kernel/rme_kernel.c ****     {
5582:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5583:../../Source/Kernel/rme_kernel.c ****         
5584:../../Source/Kernel/rme_kernel.c ****         /* Register save area must be aligned to word boundary */
5585:../../Source/Kernel/rme_kernel.c ****         if(RME_IS_ALIGNED(Haddr)!=0U)
 14327              		.loc 1 5585 12
 14328 05c8 0C309BE5 		ldr	r3, [fp, #12]
 14329 05cc 033003E2 		and	r3, r3, #3
 14330              		.loc 1 5585 33
 14331 05d0 000053E3 		cmp	r3, #0
 14332 05d4 0100001A 		bne	.L921
 14333              		.loc 1 5585 33 is_stmt 0 discriminator 1
 14334 05d8 0130A0E3 		mov	r3, #1
 14335 05dc 000000EA 		b	.L922
 14336              	.L921:
 14337              		.loc 1 5585 33 discriminator 2
 14338 05e0 0030A0E3 		mov	r3, #0
 14339              	.L922:
 14340              		.loc 1 5585 11 is_stmt 1 discriminator 4
 14341 05e4 000053E3 		cmp	r3, #0
 14342 05e8 1200000A 		beq	.L923
5586:../../Source/Kernel/rme_kernel.c ****         {
5587:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
5588:../../Source/Kernel/rme_kernel.c ****             
5589:../../Source/Kernel/rme_kernel.c ****             /* It needs to be safely accessible to the kernel as well */
5590:../../Source/Kernel/rme_kernel.c **** #if(RME_HYP_VA_BASE!=0U)
5591:../../Source/Kernel/rme_kernel.c ****             if(Haddr<RME_HYP_VA_BASE)
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 351


 14343              		.loc 1 5591 15
 14344 05ec 0C309BE5 		ldr	r3, [fp, #12]
 14345 05f0 1E0273E3 		cmn	r3, #-536870911
 14346 05f4 0100008A 		bhi	.L924
5592:../../Source/Kernel/rme_kernel.c ****             {
5593:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
5594:../../Source/Kernel/rme_kernel.c **** 
5595:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_PTH_HADDR;
 14347              		.loc 1 5595 24
 14348 05f8 CA30E0E3 		mvn	r3, #202
 14349 05fc 680000EA 		b	.L885
 14350              	.L924:
5596:../../Source/Kernel/rme_kernel.c ****             }
5597:../../Source/Kernel/rme_kernel.c ****             else
5598:../../Source/Kernel/rme_kernel.c ****             {
5599:../../Source/Kernel/rme_kernel.c **** #endif
5600:../../Source/Kernel/rme_kernel.c ****                 End=Haddr+RME_REG_SIZE(RME_THD_ATTR(Thread->Ctx.Hyp_Attr));
 14351              		.loc 1 5600 20
 14352 0600 0C309BE5 		ldr	r3, [fp, #12]
 14353 0604 443083E2 		add	r3, r3, #68
 14354 0608 2C300BE5 		str	r3, [fp, #-44]
5601:../../Source/Kernel/rme_kernel.c ****                 if((End<=Haddr)||(End>(RME_HYP_VA_BASE+RME_HYP_VA_SIZE)))
 14355              		.loc 1 5601 19
 14356 060c 2C201BE5 		ldr	r2, [fp, #-44]
 14357 0610 0C309BE5 		ldr	r3, [fp, #12]
 14358 0614 030052E1 		cmp	r2, r3
 14359 0618 0400009A 		bls	.L925
 14360              		.loc 1 5601 32 discriminator 1
 14361 061c 2C201BE5 		ldr	r2, [fp, #-44]
 14362 0620 0030A0E3 		mov	r3, #0
 14363 0624 023042E3 		movt	r3, 8194
 14364 0628 030052E1 		cmp	r2, r3
 14365 062c 1100009A 		bls	.L938
 14366              	.L925:
5602:../../Source/Kernel/rme_kernel.c ****                 {
5603:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
5604:../../Source/Kernel/rme_kernel.c **** 
5605:../../Source/Kernel/rme_kernel.c ****                     return RME_ERR_PTH_HADDR;
 14367              		.loc 1 5605 28
 14368 0630 CA30E0E3 		mvn	r3, #202
 14369 0634 5A0000EA 		b	.L885
 14370              	.L923:
5606:../../Source/Kernel/rme_kernel.c ****                 }
5607:../../Source/Kernel/rme_kernel.c ****                 else
5608:../../Source/Kernel/rme_kernel.c ****                 {
5609:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
5610:../../Source/Kernel/rme_kernel.c ****                     /* No action required */
5611:../../Source/Kernel/rme_kernel.c ****                 }
5612:../../Source/Kernel/rme_kernel.c **** #if(RME_HYP_VA_BASE!=0U)
5613:../../Source/Kernel/rme_kernel.c ****             }
5614:../../Source/Kernel/rme_kernel.c **** #endif
5615:../../Source/Kernel/rme_kernel.c ****         }
5616:../../Source/Kernel/rme_kernel.c ****         /* Not aligned, exiting */
5617:../../Source/Kernel/rme_kernel.c ****         else
5618:../../Source/Kernel/rme_kernel.c ****         {
5619:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
5620:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 352


5621:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_HADDR;
 14371              		.loc 1 5621 20
 14372 0638 CA30E0E3 		mvn	r3, #202
 14373 063c 580000EA 		b	.L885
 14374              	.L920:
5622:../../Source/Kernel/rme_kernel.c ****         }
5623:../../Source/Kernel/rme_kernel.c ****     }
5624:../../Source/Kernel/rme_kernel.c ****     /* We don't allow setting HYP addr for normal threads, nor do we allow
5625:../../Source/Kernel/rme_kernel.c ****      * setting HYP addr to NULL for hypervisor-managed threads. */
5626:../../Source/Kernel/rme_kernel.c ****     else if(((Haddr!=RME_NULL)&&((Hyp_Attr&RME_THD_HYP_FLAG)==0U))||
 14375              		.loc 1 5626 12
 14376 0640 0C309BE5 		ldr	r3, [fp, #12]
 14377 0644 000053E3 		cmp	r3, #0
 14378 0648 0200000A 		beq	.L928
 14379              		.loc 1 5626 61 discriminator 1
 14380 064c 28301BE5 		ldr	r3, [fp, #-40]
 14381              		.loc 1 5626 31 discriminator 1
 14382 0650 000053E3 		cmp	r3, #0
 14383 0654 050000AA 		bge	.L929
 14384              	.L928:
 14385              		.loc 1 5626 67 discriminator 3
 14386 0658 0C309BE5 		ldr	r3, [fp, #12]
 14387 065c 000053E3 		cmp	r3, #0
 14388 0660 0500001A 		bne	.L927
5627:../../Source/Kernel/rme_kernel.c ****             ((Haddr==RME_NULL)&&((Hyp_Attr&RME_THD_HYP_FLAG)!=0U)))
 14389              		.loc 1 5627 61
 14390 0664 28301BE5 		ldr	r3, [fp, #-40]
 14391              		.loc 1 5627 31
 14392 0668 000053E3 		cmp	r3, #0
 14393 066c 020000AA 		bge	.L927
 14394              	.L929:
5628:../../Source/Kernel/rme_kernel.c ****     {
5629:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5630:../../Source/Kernel/rme_kernel.c **** 
5631:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_HADDR;
 14395              		.loc 1 5631 16
 14396 0670 CA30E0E3 		mvn	r3, #202
 14397 0674 4A0000EA 		b	.L885
 14398              	.L938:
5585:../../Source/Kernel/rme_kernel.c ****         {
 14399              		.loc 1 5585 11
 14400 0678 00F020E3 		nop
 14401              	.L927:
5632:../../Source/Kernel/rme_kernel.c ****     }
5633:../../Source/Kernel/rme_kernel.c ****     else
5634:../../Source/Kernel/rme_kernel.c ****     {
5635:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5636:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5637:../../Source/Kernel/rme_kernel.c ****     }
5638:../../Source/Kernel/rme_kernel.c **** 
5639:../../Source/Kernel/rme_kernel.c ****     /* Try to bind the thread */
5640:../../Source/Kernel/rme_kernel.c ****     if(RME_COMP_SWAP((rme_ptr_t*)&(Thread->Sched.Local),
 14402              		.loc 1 5640 8
 14403 067c 18301BE5 		ldr	r3, [fp, #-24]
 14404 0680 143083E2 		add	r3, r3, #20
 14405 0684 1C101BE5 		ldr	r1, [fp, #-28]
 14406 0688 20201BE5 		ldr	r2, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 353


 14407 068c 0300A0E1 		mov	r0, r3
 14408 0690 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 14409 0694 0030A0E1 		mov	r3, r0
 14410              		.loc 1 5640 7 discriminator 1
 14411 0698 000053E3 		cmp	r3, #0
 14412 069c 0100001A 		bne	.L930
5641:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Local_Old,
5642:../../Source/Kernel/rme_kernel.c ****                      (rme_ptr_t)Local_New)==RME_CASFAIL)
5643:../../Source/Kernel/rme_kernel.c ****     {
5644:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5645:../../Source/Kernel/rme_kernel.c **** 
5646:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_CONFLICT;
 14413              		.loc 1 5646 16
 14414 06a0 C930E0E3 		mvn	r3, #201
 14415 06a4 3E0000EA 		b	.L885
 14416              	.L930:
5647:../../Source/Kernel/rme_kernel.c ****     }
5648:../../Source/Kernel/rme_kernel.c ****     else
5649:../../Source/Kernel/rme_kernel.c ****     {
5650:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5651:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5652:../../Source/Kernel/rme_kernel.c ****     }
5653:../../Source/Kernel/rme_kernel.c ****     
5654:../../Source/Kernel/rme_kernel.c ****     /* Increase the reference count of the scheduler thread struct - same core */
5655:../../Source/Kernel/rme_kernel.c ****     Scheduler->Sched.Sched_Ref++;
 14417              		.loc 1 5655 21
 14418 06a8 24301BE5 		ldr	r3, [fp, #-36]
 14419 06ac 303093E5 		ldr	r3, [r3, #48]
 14420              		.loc 1 5655 31
 14421 06b0 012083E2 		add	r2, r3, #1
 14422 06b4 24301BE5 		ldr	r3, [fp, #-36]
 14423 06b8 302083E5 		str	r2, [r3, #48]
5656:../../Source/Kernel/rme_kernel.c ****     
5657:../../Source/Kernel/rme_kernel.c ****     /* Bind successful and finish the work off. No need to worry about other cores'
5658:../../Source/Kernel/rme_kernel.c ****      * operations on this thread because this thread is already bound to this core.
5659:../../Source/Kernel/rme_kernel.c ****      * TID is half-word parameter-wise, but is stored and returned as a full word. */
5660:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Thd=Scheduler;
 14424              		.loc 1 5660 28
 14425 06bc 18301BE5 		ldr	r3, [fp, #-24]
 14426 06c0 24201BE5 		ldr	r2, [fp, #-36]
 14427 06c4 342083E5 		str	r2, [r3, #52]
5661:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Prio=Prio;
 14428              		.loc 1 5661 23
 14429 06c8 18301BE5 		ldr	r3, [fp, #-24]
 14430 06cc 08209BE5 		ldr	r2, [fp, #8]
 14431 06d0 202083E5 		str	r2, [r3, #32]
5662:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.TID=(rme_ptr_t)TID;
 14432              		.loc 1 5662 23
 14433 06d4 04209BE5 		ldr	r2, [fp, #4]
 14434              		.loc 1 5662 22
 14435 06d8 18301BE5 		ldr	r3, [fp, #-24]
 14436 06dc 102083E5 		str	r2, [r3, #16]
5663:../../Source/Kernel/rme_kernel.c ****     
5664:../../Source/Kernel/rme_kernel.c ****     /* The state must be TIMEOUT or EXCPEND at this point */
5665:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT((Thread->Sched.State==RME_THD_TIMEOUT)||
 14437              		.loc 1 5665 5
 14438 06e0 18301BE5 		ldr	r3, [fp, #-24]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 354


 14439 06e4 1C3093E5 		ldr	r3, [r3, #28]
 14440 06e8 020053E3 		cmp	r3, #2
 14441 06ec 0C00000A 		beq	.L931
 14442              		.loc 1 5665 5 is_stmt 0 discriminator 1
 14443 06f0 18301BE5 		ldr	r3, [fp, #-24]
 14444 06f4 1C3093E5 		ldr	r3, [r3, #28]
 14445 06f8 030053E3 		cmp	r3, #3
 14446 06fc 0800000A 		beq	.L931
 14447              		.loc 1 5665 5 discriminator 2
 14448 0700 003000E3 		movw	r3, #:lower16:.LC6
 14449 0704 003040E3 		movt	r3, #:upper16:.LC6
 14450 0708 002000E3 		movw	r2, #:lower16:.LC7
 14451 070c 002040E3 		movt	r2, #:upper16:.LC7
 14452 0710 211601E3 		movw	r1, #5665
 14453 0714 000000E3 		movw	r0, #:lower16:.LC8
 14454 0718 000040E3 		movt	r0, #:upper16:.LC8
 14455 071c FEFFFFEB 		bl	RME_Log
 14456              	.L932:
 14457              		.loc 1 5665 5
 14458 0720 FEFFFFEA 		b	.L932
 14459              	.L931:
5666:../../Source/Kernel/rme_kernel.c ****                (Thread->Sched.State==RME_THD_EXCPEND));
5667:../../Source/Kernel/rme_kernel.c **** 
5668:../../Source/Kernel/rme_kernel.c ****     /* Tie the signal endpoint to it if not zero */
5669:../../Source/Kernel/rme_kernel.c ****     if(Sig_Op==0U)
 14460              		.loc 1 5669 7 is_stmt 1
 14461 0724 10301BE5 		ldr	r3, [fp, #-16]
 14462 0728 000053E3 		cmp	r3, #0
 14463 072c 0300001A 		bne	.L933
5670:../../Source/Kernel/rme_kernel.c ****     {
5671:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5672:../../Source/Kernel/rme_kernel.c **** 
5673:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.Sched_Sig=0U;
 14464              		.loc 1 5673 32
 14465 0730 18301BE5 		ldr	r3, [fp, #-24]
 14466 0734 0020A0E3 		mov	r2, #0
 14467 0738 382083E5 		str	r2, [r3, #56]
 14468 073c 100000EA 		b	.L934
 14469              	.L933:
5674:../../Source/Kernel/rme_kernel.c ****     }
5675:../../Source/Kernel/rme_kernel.c ****     else
5676:../../Source/Kernel/rme_kernel.c ****     {
5677:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5678:../../Source/Kernel/rme_kernel.c **** 
5679:../../Source/Kernel/rme_kernel.c ****         /* Convert to root cap */
5680:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.Sched_Sig=RME_CAP_CONV_ROOT(Sig_Op,struct RME_Cap_Sig*);
 14470              		.loc 1 5680 33
 14471 0740 10301BE5 		ldr	r3, [fp, #-16]
 14472 0744 003093E5 		ldr	r3, [r3]
 14473 0748 7330FFE6 		uxth	r3, r3
 14474 074c 000053E3 		cmp	r3, #0
 14475 0750 0200000A 		beq	.L935
 14476              		.loc 1 5680 33 is_stmt 0 discriminator 1
 14477 0754 10301BE5 		ldr	r3, [fp, #-16]
 14478 0758 043093E5 		ldr	r3, [r3, #4]
 14479 075c 000000EA 		b	.L936
 14480              	.L935:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 355


 14481              		.loc 1 5680 33 discriminator 2
 14482 0760 10301BE5 		ldr	r3, [fp, #-16]
 14483              	.L936:
 14484              		.loc 1 5680 32 is_stmt 1 discriminator 4
 14485 0764 18201BE5 		ldr	r2, [fp, #-24]
 14486 0768 383082E5 		str	r3, [r2, #56]
5681:../../Source/Kernel/rme_kernel.c ****         
5682:../../Source/Kernel/rme_kernel.c ****         /* Increase refcnt */
5683:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_ADD(&(Thread->Sched.Sched_Sig->Head.Root_Ref),1U);
 14487              		.loc 1 5683 9
 14488 076c 18301BE5 		ldr	r3, [fp, #-24]
 14489 0770 383093E5 		ldr	r3, [r3, #56]
 14490 0774 043083E2 		add	r3, r3, #4
 14491 0778 0110A0E3 		mov	r1, #1
 14492 077c 0300A0E1 		mov	r0, r3
 14493 0780 FEFFFFEB 		bl	_RME_Fetch_Add_Single
 14494              	.L934:
5684:../../Source/Kernel/rme_kernel.c ****     }
5685:../../Source/Kernel/rme_kernel.c ****     
5686:../../Source/Kernel/rme_kernel.c ****     /* Set hypervisor context address if we're hypervisor-managed */
5687:../../Source/Kernel/rme_kernel.c ****     if((Thread->Ctx.Hyp_Attr&RME_THD_HYP_FLAG)!=0U)
 14495              		.loc 1 5687 20
 14496 0784 18301BE5 		ldr	r3, [fp, #-24]
 14497 0788 443093E5 		ldr	r3, [r3, #68]
 14498              		.loc 1 5687 7
 14499 078c 000053E3 		cmp	r3, #0
 14500 0790 020000AA 		bge	.L937
5688:../../Source/Kernel/rme_kernel.c ****     {
5689:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5690:../../Source/Kernel/rme_kernel.c ****         Thread->Ctx.Reg=(struct RME_Thd_Reg*)Haddr;
 14501              		.loc 1 5690 25
 14502 0794 0C209BE5 		ldr	r2, [fp, #12]
 14503              		.loc 1 5690 24
 14504 0798 18301BE5 		ldr	r3, [fp, #-24]
 14505 079c 482083E5 		str	r2, [r3, #72]
 14506              	.L937:
5691:../../Source/Kernel/rme_kernel.c ****     }
5692:../../Source/Kernel/rme_kernel.c ****     else
5693:../../Source/Kernel/rme_kernel.c ****     {
5694:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5695:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5696:../../Source/Kernel/rme_kernel.c ****     }
5697:../../Source/Kernel/rme_kernel.c ****     
5698:../../Source/Kernel/rme_kernel.c ****     return 0;
 14507              		.loc 1 5698 12
 14508 07a0 0030A0E3 		mov	r3, #0
 14509              	.L885:
5699:../../Source/Kernel/rme_kernel.c **** }
 14510              		.loc 1 5699 1
 14511 07a4 0300A0E1 		mov	r0, r3
 14512 07a8 04D04BE2 		sub	sp, fp, #4
 14513              		.cfi_def_cfa 13, 8
 14514              		@ sp needed
 14515 07ac 0088BDE8 		pop	{fp, pc}
 14516              		.cfi_endproc
 14517              	.LFE58:
 14519              		.section	.text._RME_Thd_Sched_Free,"ax",%progbits
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 356


 14520              		.align	2
 14521              		.syntax unified
 14522              		.arm
 14524              	_RME_Thd_Sched_Free:
 14525              	.LFB59:
5700:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Sched_Bind ******************************************/
5701:../../Source/Kernel/rme_kernel.c **** 
5702:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Sched_Free ***********************************************
5703:../../Source/Kernel/rme_kernel.c **** Description : Free a thread from its current processor binding. This function
5704:../../Source/Kernel/rme_kernel.c ****               can only be executed from the same core on with the thread.
5705:../../Source/Kernel/rme_kernel.c ****               To free a thread from a core, it must not be the scheduler of
5706:../../Source/Kernel/rme_kernel.c ****               someone else. It could have pending scheduler notifications to
5707:../../Source/Kernel/rme_kernel.c ****               its parent though.
5708:../../Source/Kernel/rme_kernel.c ****               This system call can cause a potential context switch.
5709:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5710:../../Source/Kernel/rme_kernel.c ****               volatile struct RME_Reg_Struct* Reg - The register set.
5711:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the thread.
5712:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5713:../../Source/Kernel/rme_kernel.c **** Output      : None.
5714:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5715:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5716:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Sched_Free(struct RME_Cap_Cpt* Cpt, 
5717:../../Source/Kernel/rme_kernel.c ****                                      struct RME_Reg_Struct* Reg,
5718:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd)
5719:../../Source/Kernel/rme_kernel.c **** {
 14526              		.loc 1 5719 1
 14527              		.cfi_startproc
 14528              		@ args = 0, pretend = 0, frame = 32
 14529              		@ frame_needed = 1, uses_anonymous_args = 0
 14530 0000 00482DE9 		push	{fp, lr}
 14531              		.cfi_def_cfa_offset 8
 14532              		.cfi_offset 11, -8
 14533              		.cfi_offset 14, -4
 14534 0004 04B08DE2 		add	fp, sp, #4
 14535              		.cfi_def_cfa 11, 4
 14536 0008 20D04DE2 		sub	sp, sp, #32
 14537 000c 18000BE5 		str	r0, [fp, #-24]
 14538 0010 1C100BE5 		str	r1, [fp, #-28]
 14539 0014 20200BE5 		str	r2, [fp, #-32]
5720:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Op;
5721:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5722:../../Source/Kernel/rme_kernel.c ****     /* These are used to free the thread */
5723:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
5724:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5725:../../Source/Kernel/rme_kernel.c ****     
5726:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
5727:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd,RME_CAP_TYPE_THD,
 14540              		.loc 1 5727 5
 14541 0018 20301BE5 		ldr	r3, [fp, #-32]
 14542 001c 803003E2 		and	r3, r3, #128
 14543 0020 000053E3 		cmp	r3, #0
 14544 0024 1C00001A 		bne	.L940
 14545              		.loc 1 5727 5 is_stmt 0 discriminator 1
 14546 0028 18301BE5 		ldr	r3, [fp, #-24]
 14547 002c 142093E5 		ldr	r2, [r3, #20]
 14548 0030 20301BE5 		ldr	r3, [fp, #-32]
 14549 0034 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 357


 14550 0038 0100008A 		bhi	.L941
 14551              		.loc 1 5727 5 discriminator 3
 14552 003c 0230E0E3 		mvn	r3, #2
 14553              		.loc 1 5727 5
 14554 0040 D90000EA 		b	.L942
 14555              	.L941:
 14556              		.loc 1 5727 5 discriminator 4
 14557 0044 20301BE5 		ldr	r3, [fp, #-32]
 14558 0048 8322A0E1 		lsl	r2, r3, #5
 14559 004c 18301BE5 		ldr	r3, [fp, #-24]
 14560 0050 0C3093E5 		ldr	r3, [r3, #12]
 14561 0054 033082E0 		add	r3, r2, r3
 14562 0058 08300BE5 		str	r3, [fp, #-8]
 14563 005c 08301BE5 		ldr	r3, [fp, #-8]
 14564 0060 0300A0E1 		mov	r0, r3
 14565 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14566 0068 0C000BE5 		str	r0, [fp, #-12]
 14567              		.loc 1 5727 5 discriminator 1
 14568 006c 0C301BE5 		ldr	r3, [fp, #-12]
 14569 0070 FF3803E2 		and	r3, r3, #16711680
 14570 0074 020853E3 		cmp	r3, #131072
 14571 0078 0100001A 		bne	.L943
 14572              		.loc 1 5727 5 discriminator 5
 14573 007c 0830E0E3 		mvn	r3, #8
 14574              		.loc 1 5727 5
 14575 0080 C90000EA 		b	.L942
 14576              	.L943:
 14577              		.loc 1 5727 5 discriminator 6
 14578 0084 0C301BE5 		ldr	r3, [fp, #-12]
 14579 0088 233CA0E1 		lsr	r3, r3, #24
 14580 008c 060053E3 		cmp	r3, #6
 14581 0090 3F00000A 		beq	.L944
 14582              		.loc 1 5727 5 discriminator 7
 14583 0094 0130E0E3 		mvn	r3, #1
 14584              		.loc 1 5727 5
 14585 0098 C30000EA 		b	.L942
 14586              	.L940:
 14587              		.loc 1 5727 5 discriminator 2
 14588 009c 20301BE5 		ldr	r3, [fp, #-32]
 14589 00a0 2324A0E1 		lsr	r2, r3, #8
 14590 00a4 18301BE5 		ldr	r3, [fp, #-24]
 14591 00a8 143093E5 		ldr	r3, [r3, #20]
 14592 00ac 030052E1 		cmp	r2, r3
 14593 00b0 0100003A 		bcc	.L945
 14594              		.loc 1 5727 5 discriminator 8
 14595 00b4 0230E0E3 		mvn	r3, #2
 14596              		.loc 1 5727 5
 14597 00b8 BB0000EA 		b	.L942
 14598              	.L945:
 14599              		.loc 1 5727 5 discriminator 9
 14600 00bc 20301BE5 		ldr	r3, [fp, #-32]
 14601 00c0 2334A0E1 		lsr	r3, r3, #8
 14602 00c4 8322A0E1 		lsl	r2, r3, #5
 14603 00c8 18301BE5 		ldr	r3, [fp, #-24]
 14604 00cc 0C3093E5 		ldr	r3, [r3, #12]
 14605 00d0 033082E0 		add	r3, r2, r3
 14606 00d4 08300BE5 		str	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 358


 14607 00d8 08301BE5 		ldr	r3, [fp, #-8]
 14608 00dc 0300A0E1 		mov	r0, r3
 14609 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14610 00e4 0C000BE5 		str	r0, [fp, #-12]
 14611              		.loc 1 5727 5 discriminator 1
 14612 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 14613 00ec FF3803E2 		and	r3, r3, #16711680
 14614 00f0 020853E3 		cmp	r3, #131072
 14615 00f4 0100001A 		bne	.L946
 14616              		.loc 1 5727 5 discriminator 10
 14617 00f8 0830E0E3 		mvn	r3, #8
 14618              		.loc 1 5727 5
 14619 00fc AA0000EA 		b	.L942
 14620              	.L946:
 14621              		.loc 1 5727 5 discriminator 11
 14622 0100 0C301BE5 		ldr	r3, [fp, #-12]
 14623 0104 233CA0E1 		lsr	r3, r3, #24
 14624 0108 030053E3 		cmp	r3, #3
 14625 010c 0100000A 		beq	.L947
 14626              		.loc 1 5727 5 discriminator 12
 14627 0110 0130E0E3 		mvn	r3, #1
 14628              		.loc 1 5727 5
 14629 0114 A40000EA 		b	.L942
 14630              	.L947:
 14631              		.loc 1 5727 5 discriminator 13
 14632 0118 20301BE5 		ldr	r3, [fp, #-32]
 14633 011c 7F2003E2 		and	r2, r3, #127
 14634 0120 08301BE5 		ldr	r3, [fp, #-8]
 14635 0124 143093E5 		ldr	r3, [r3, #20]
 14636 0128 030052E1 		cmp	r2, r3
 14637 012c 0100003A 		bcc	.L948
 14638              		.loc 1 5727 5 discriminator 14
 14639 0130 0230E0E3 		mvn	r3, #2
 14640              		.loc 1 5727 5
 14641 0134 9C0000EA 		b	.L942
 14642              	.L948:
 14643              		.loc 1 5727 5 discriminator 15
 14644 0138 20301BE5 		ldr	r3, [fp, #-32]
 14645 013c 7F3003E2 		and	r3, r3, #127
 14646 0140 8322A0E1 		lsl	r2, r3, #5
 14647 0144 08301BE5 		ldr	r3, [fp, #-8]
 14648 0148 0C3093E5 		ldr	r3, [r3, #12]
 14649 014c 033082E0 		add	r3, r2, r3
 14650 0150 08300BE5 		str	r3, [fp, #-8]
 14651 0154 08301BE5 		ldr	r3, [fp, #-8]
 14652 0158 0300A0E1 		mov	r0, r3
 14653 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14654 0160 0C000BE5 		str	r0, [fp, #-12]
 14655              		.loc 1 5727 5 discriminator 1
 14656 0164 0C301BE5 		ldr	r3, [fp, #-12]
 14657 0168 FF3803E2 		and	r3, r3, #16711680
 14658 016c 020853E3 		cmp	r3, #131072
 14659 0170 0100001A 		bne	.L949
 14660              		.loc 1 5727 5 discriminator 16
 14661 0174 0830E0E3 		mvn	r3, #8
 14662              		.loc 1 5727 5
 14663 0178 8B0000EA 		b	.L942
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 359


 14664              	.L949:
 14665              		.loc 1 5727 5 discriminator 17
 14666 017c 0C301BE5 		ldr	r3, [fp, #-12]
 14667 0180 233CA0E1 		lsr	r3, r3, #24
 14668 0184 060053E3 		cmp	r3, #6
 14669 0188 0100000A 		beq	.L944
 14670              		.loc 1 5727 5 discriminator 18
 14671 018c 0130E0E3 		mvn	r3, #1
 14672              		.loc 1 5727 5
 14673 0190 850000EA 		b	.L942
 14674              	.L944:
5728:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Op,Type_Stat);
5729:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
5730:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Op,RME_THD_FLAG_SCHED_FREE);
 14675              		.loc 1 5730 5 is_stmt 1
 14676 0194 08301BE5 		ldr	r3, [fp, #-8]
 14677 0198 083093E5 		ldr	r3, [r3, #8]
 14678 019c 103003E2 		and	r3, r3, #16
 14679 01a0 000053E3 		cmp	r3, #0
 14680 01a4 0100001A 		bne	.L950
 14681              		.loc 1 5730 5 is_stmt 0 discriminator 1
 14682 01a8 0630E0E3 		mvn	r3, #6
 14683              		.loc 1 5730 5
 14684 01ac 7E0000EA 		b	.L942
 14685              	.L950:
5731:../../Source/Kernel/rme_kernel.c ****     
5732:../../Source/Kernel/rme_kernel.c ****     /* Check if the target thread is already bound to this core */
5733:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 14686              		.loc 1 5733 10 is_stmt 1
 14687 01b0 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 14688 01b4 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 14689 01b8 10300BE5 		str	r3, [fp, #-16]
5734:../../Source/Kernel/rme_kernel.c ****     Thread=(struct RME_Thd_Struct*)Thd_Op->Head.Object;
 14690              		.loc 1 5734 48
 14691 01bc 08301BE5 		ldr	r3, [fp, #-8]
 14692 01c0 0C3093E5 		ldr	r3, [r3, #12]
 14693              		.loc 1 5734 11
 14694 01c4 14300BE5 		str	r3, [fp, #-20]
5735:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Local!=Local)
 14695              		.loc 1 5735 21
 14696 01c8 14301BE5 		ldr	r3, [fp, #-20]
 14697 01cc 143093E5 		ldr	r3, [r3, #20]
 14698              		.loc 1 5735 7
 14699 01d0 10201BE5 		ldr	r2, [fp, #-16]
 14700 01d4 030052E1 		cmp	r2, r3
 14701 01d8 0100000A 		beq	.L951
5736:../../Source/Kernel/rme_kernel.c ****     {
5737:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5738:../../Source/Kernel/rme_kernel.c **** 
5739:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 14702              		.loc 1 5739 16
 14703 01dc CB30E0E3 		mvn	r3, #203
 14704 01e0 710000EA 		b	.L942
 14705              	.L951:
5740:../../Source/Kernel/rme_kernel.c ****     }
5741:../../Source/Kernel/rme_kernel.c ****     else
5742:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 360


5743:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5744:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5745:../../Source/Kernel/rme_kernel.c ****     }
5746:../../Source/Kernel/rme_kernel.c ****     
5747:../../Source/Kernel/rme_kernel.c ****     /* Am I referenced by someone as a scheduler? If yes, we cannot unbind. Because
5748:../../Source/Kernel/rme_kernel.c ****      * boot-time thread's refcnt will never be 0, thus they will never pass this checking */
5749:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Sched_Ref!=0U)
 14706              		.loc 1 5749 21
 14707 01e4 14301BE5 		ldr	r3, [fp, #-20]
 14708 01e8 303093E5 		ldr	r3, [r3, #48]
 14709              		.loc 1 5749 7
 14710 01ec 000053E3 		cmp	r3, #0
 14711 01f0 0100000A 		beq	.L952
5750:../../Source/Kernel/rme_kernel.c ****     {
5751:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5752:../../Source/Kernel/rme_kernel.c **** 
5753:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_REFCNT;
 14712              		.loc 1 5753 16
 14713 01f4 CD30E0E3 		mvn	r3, #205
 14714 01f8 6B0000EA 		b	.L942
 14715              	.L952:
5754:../../Source/Kernel/rme_kernel.c ****     }
5755:../../Source/Kernel/rme_kernel.c ****     else
5756:../../Source/Kernel/rme_kernel.c ****     {
5757:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5758:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5759:../../Source/Kernel/rme_kernel.c ****     }
5760:../../Source/Kernel/rme_kernel.c **** 
5761:../../Source/Kernel/rme_kernel.c ****     /* Decrease the parent's reference count - on the same core */
5762:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Sched_Thd->Sched.Sched_Ref--;
 14716              		.loc 1 5762 18
 14717 01fc 14301BE5 		ldr	r3, [fp, #-20]
 14718 0200 343093E5 		ldr	r3, [r3, #52]
 14719              		.loc 1 5762 35
 14720 0204 302093E5 		ldr	r2, [r3, #48]
 14721              		.loc 1 5762 45
 14722 0208 012042E2 		sub	r2, r2, #1
 14723 020c 302083E5 		str	r2, [r3, #48]
5763:../../Source/Kernel/rme_kernel.c **** 
5764:../../Source/Kernel/rme_kernel.c ****     /* See if we have any events sent to the parent. If yes, remove that event */
5765:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Notif.Next!=&(Thread->Sched.Notif))
 14724              		.loc 1 5765 27
 14725 0210 14301BE5 		ldr	r3, [fp, #-20]
 14726 0214 082093E5 		ldr	r2, [r3, #8]
 14727              		.loc 1 5765 34
 14728 0218 14301BE5 		ldr	r3, [fp, #-20]
 14729 021c 083083E2 		add	r3, r3, #8
 14730              		.loc 1 5765 7
 14731 0220 030052E1 		cmp	r2, r3
 14732 0224 0A00000A 		beq	.L953
5766:../../Source/Kernel/rme_kernel.c ****     {
5767:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5768:../../Source/Kernel/rme_kernel.c **** 
5769:../../Source/Kernel/rme_kernel.c ****         _RME_List_Del(Thread->Sched.Notif.Prev,Thread->Sched.Notif.Next);
 14733              		.loc 1 5769 9
 14734 0228 14301BE5 		ldr	r3, [fp, #-20]
 14735 022c 0C2093E5 		ldr	r2, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 361


 14736 0230 14301BE5 		ldr	r3, [fp, #-20]
 14737 0234 083093E5 		ldr	r3, [r3, #8]
 14738 0238 0310A0E1 		mov	r1, r3
 14739 023c 0200A0E1 		mov	r0, r2
 14740 0240 FEFFFFEB 		bl	_RME_List_Del
5770:../../Source/Kernel/rme_kernel.c ****         _RME_List_Crt(&(Thread->Sched.Notif));
 14741              		.loc 1 5770 9
 14742 0244 14301BE5 		ldr	r3, [fp, #-20]
 14743 0248 083083E2 		add	r3, r3, #8
 14744 024c 0300A0E1 		mov	r0, r3
 14745 0250 FEFFFFEB 		bl	_RME_List_Crt
 14746              	.L953:
5771:../../Source/Kernel/rme_kernel.c ****     }
5772:../../Source/Kernel/rme_kernel.c ****     else
5773:../../Source/Kernel/rme_kernel.c ****     {
5774:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5775:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5776:../../Source/Kernel/rme_kernel.c ****     }
5777:../../Source/Kernel/rme_kernel.c **** 
5778:../../Source/Kernel/rme_kernel.c ****     /* If we have an scheduler event endpoint, release it */
5779:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Sched_Sig!=RME_NULL)
 14747              		.loc 1 5779 21
 14748 0254 14301BE5 		ldr	r3, [fp, #-20]
 14749 0258 383093E5 		ldr	r3, [r3, #56]
 14750              		.loc 1 5779 7
 14751 025c 000053E3 		cmp	r3, #0
 14752 0260 0500000A 		beq	.L954
5780:../../Source/Kernel/rme_kernel.c ****     {
5781:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5782:../../Source/Kernel/rme_kernel.c **** 
5783:../../Source/Kernel/rme_kernel.c ****         RME_FETCH_ADD(&(Thread->Sched.Sched_Sig->Head.Root_Ref),-1);
 14753              		.loc 1 5783 9
 14754 0264 14301BE5 		ldr	r3, [fp, #-20]
 14755 0268 383093E5 		ldr	r3, [r3, #56]
 14756 026c 043083E2 		add	r3, r3, #4
 14757 0270 0010E0E3 		mvn	r1, #0
 14758 0274 0300A0E1 		mov	r0, r3
 14759 0278 FEFFFFEB 		bl	_RME_Fetch_Add_Single
 14760              	.L954:
5784:../../Source/Kernel/rme_kernel.c ****     }
5785:../../Source/Kernel/rme_kernel.c ****     else
5786:../../Source/Kernel/rme_kernel.c ****     {
5787:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5788:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5789:../../Source/Kernel/rme_kernel.c ****     }
5790:../../Source/Kernel/rme_kernel.c **** 
5791:../../Source/Kernel/rme_kernel.c ****     /* Now save the system call return value to the caller stack */
5792:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,0);  
 14761              		.loc 1 5792 5
 14762 027c 0010A0E3 		mov	r1, #0
 14763 0280 1C001BE5 		ldr	r0, [fp, #-28]
 14764 0284 FEFFFFEB 		bl	__RME_Svc_Retval_Set
5793:../../Source/Kernel/rme_kernel.c ****     
5794:../../Source/Kernel/rme_kernel.c ****     /* If the thread is ready, kick it out of the run queue. If it is blocked on
5795:../../Source/Kernel/rme_kernel.c ****      * some endpoint, end the blocking and set the return value to RME_ERR_SIV_FREE.
5796:../../Source/Kernel/rme_kernel.c ****      * If the thread is killed due to a fault, we will not clear the fault here, and
5797:../../Source/Kernel/rme_kernel.c ****      * we will wait for the Exec_Set to clear it. No scheduler notifications are sent
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 362


5798:../../Source/Kernel/rme_kernel.c ****      * because the thread is being freed and notifications at this point are useless. */
5799:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.State==RME_THD_READY)
 14765              		.loc 1 5799 21
 14766 0288 14301BE5 		ldr	r3, [fp, #-20]
 14767 028c 1C3093E5 		ldr	r3, [r3, #28]
 14768              		.loc 1 5799 7
 14769 0290 000053E3 		cmp	r3, #0
 14770 0294 0500001A 		bne	.L955
5800:../../Source/Kernel/rme_kernel.c ****     {
5801:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5802:../../Source/Kernel/rme_kernel.c **** 
5803:../../Source/Kernel/rme_kernel.c ****         /* Remove from runqueue and timeout but don't notify parent */
5804:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Del(Thread);
 14771              		.loc 1 5804 9
 14772 0298 14001BE5 		ldr	r0, [fp, #-20]
 14773 029c FEFFFFEB 		bl	_RME_Run_Del
5805:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.State=RME_THD_TIMEOUT;
 14774              		.loc 1 5805 28
 14775 02a0 14301BE5 		ldr	r3, [fp, #-20]
 14776 02a4 0220A0E3 		mov	r2, #2
 14777 02a8 1C2083E5 		str	r2, [r3, #28]
 14778 02ac 130000EA 		b	.L956
 14779              	.L955:
5806:../../Source/Kernel/rme_kernel.c ****     }
5807:../../Source/Kernel/rme_kernel.c ****     /* BLOCKED */
5808:../../Source/Kernel/rme_kernel.c ****     else if(Thread->Sched.State==RME_THD_BLOCKED)
 14780              		.loc 1 5808 26
 14781 02b0 14301BE5 		ldr	r3, [fp, #-20]
 14782 02b4 1C3093E5 		ldr	r3, [r3, #28]
 14783              		.loc 1 5808 12
 14784 02b8 010053E3 		cmp	r3, #1
 14785 02bc 0F00001A 		bne	.L956
5809:../../Source/Kernel/rme_kernel.c ****     {
5810:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5811:../../Source/Kernel/rme_kernel.c ****         
5812:../../Source/Kernel/rme_kernel.c ****         /* If it got here, the thread that is operated on cannot be the current 
5813:../../Source/Kernel/rme_kernel.c ****          * thread, so we are not overwriting the return value of the caller. */
5814:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(&(Thread->Ctx.Reg->Reg),RME_ERR_SIV_FREE);
 14786              		.loc 1 5814 43
 14787 02c0 14301BE5 		ldr	r3, [fp, #-20]
 14788 02c4 483093E5 		ldr	r3, [r3, #72]
 14789              		.loc 1 5814 9
 14790 02c8 CE1E0FE3 		movw	r1, #65230
 14791 02cc FF1F4FE3 		movt	r1, 65535
 14792 02d0 0300A0E1 		mov	r0, r3
 14793 02d4 FEFFFFEB 		bl	__RME_Svc_Retval_Set
5815:../../Source/Kernel/rme_kernel.c ****         /* Release signal and thread from each other */
5816:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.Signal->Thd=RME_NULL;
 14794              		.loc 1 5816 22
 14795 02d8 14301BE5 		ldr	r3, [fp, #-20]
 14796 02dc 283093E5 		ldr	r3, [r3, #40]
 14797              		.loc 1 5816 34
 14798 02e0 0020A0E3 		mov	r2, #0
 14799 02e4 182083E5 		str	r2, [r3, #24]
5817:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.Signal=RME_NULL;
 14800              		.loc 1 5817 29
 14801 02e8 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 363


 14802 02ec 0020A0E3 		mov	r2, #0
 14803 02f0 282083E5 		str	r2, [r3, #40]
5818:../../Source/Kernel/rme_kernel.c ****         /* Timeout but don't notify parent */
5819:../../Source/Kernel/rme_kernel.c ****         Thread->Sched.State=RME_THD_TIMEOUT;
 14804              		.loc 1 5819 28
 14805 02f4 14301BE5 		ldr	r3, [fp, #-20]
 14806 02f8 0220A0E3 		mov	r2, #2
 14807 02fc 1C2083E5 		str	r2, [r3, #28]
 14808              	.L956:
5820:../../Source/Kernel/rme_kernel.c ****     }
5821:../../Source/Kernel/rme_kernel.c ****     /* TIMEOUT or EXCPEND */
5822:../../Source/Kernel/rme_kernel.c ****     else
5823:../../Source/Kernel/rme_kernel.c ****     {
5824:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5825:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5826:../../Source/Kernel/rme_kernel.c ****     }
5827:../../Source/Kernel/rme_kernel.c **** 
5828:../../Source/Kernel/rme_kernel.c ****     /* Cleanup all remaining timeslices on it */
5829:../../Source/Kernel/rme_kernel.c ****     Thread->Sched.Slice=0U;
 14809              		.loc 1 5829 24
 14810 0300 14301BE5 		ldr	r3, [fp, #-20]
 14811 0304 0020A0E3 		mov	r2, #0
 14812 0308 182083E5 		str	r2, [r3, #24]
5830:../../Source/Kernel/rme_kernel.c ****     
5831:../../Source/Kernel/rme_kernel.c ****     /* Check if this thread is the current one and we may need to switch away */
5832:../../Source/Kernel/rme_kernel.c ****     if(Local->Thd_Cur==Thread)
 14813              		.loc 1 5832 13
 14814 030c 10301BE5 		ldr	r3, [fp, #-16]
 14815 0310 043093E5 		ldr	r3, [r3, #4]
 14816              		.loc 1 5832 7
 14817 0314 14201BE5 		ldr	r2, [fp, #-20]
 14818 0318 030052E1 		cmp	r2, r3
 14819 031c 1C00001A 		bne	.L957
5833:../../Source/Kernel/rme_kernel.c ****     {
5834:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5835:../../Source/Kernel/rme_kernel.c **** 
5836:../../Source/Kernel/rme_kernel.c ****         Local->Thd_Cur=_RME_Run_High(Local);
 14820              		.loc 1 5836 24
 14821 0320 10001BE5 		ldr	r0, [fp, #-16]
 14822 0324 FEFFFFEB 		bl	_RME_Run_High
 14823 0328 0020A0E1 		mov	r2, r0
 14824              		.loc 1 5836 23 discriminator 1
 14825 032c 10301BE5 		ldr	r3, [fp, #-16]
 14826 0330 042083E5 		str	r2, [r3, #4]
5837:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Ins(Local->Thd_Cur);
 14827              		.loc 1 5837 9
 14828 0334 10301BE5 		ldr	r3, [fp, #-16]
 14829 0338 043093E5 		ldr	r3, [r3, #4]
 14830 033c 0300A0E1 		mov	r0, r3
 14831 0340 FEFFFFEB 		bl	_RME_Run_Ins
5838:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(Local->Thd_Cur->Sched.State==RME_THD_READY);
 14832              		.loc 1 5838 9
 14833 0344 10301BE5 		ldr	r3, [fp, #-16]
 14834 0348 043093E5 		ldr	r3, [r3, #4]
 14835 034c 1C3093E5 		ldr	r3, [r3, #28]
 14836 0350 000053E3 		cmp	r3, #0
 14837 0354 0800000A 		beq	.L958
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 364


 14838              		.loc 1 5838 9 is_stmt 0 discriminator 1
 14839 0358 003000E3 		movw	r3, #:lower16:.LC6
 14840 035c 003040E3 		movt	r3, #:upper16:.LC6
 14841 0360 002000E3 		movw	r2, #:lower16:.LC7
 14842 0364 002040E3 		movt	r2, #:upper16:.LC7
 14843 0368 CE1601E3 		movw	r1, #5838
 14844 036c 000000E3 		movw	r0, #:lower16:.LC8
 14845 0370 000040E3 		movt	r0, #:upper16:.LC8
 14846 0374 FEFFFFEB 		bl	RME_Log
 14847              	.L959:
 14848              		.loc 1 5838 9
 14849 0378 FEFFFFEA 		b	.L959
 14850              	.L958:
5839:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Swt(Reg,Thread,Local->Thd_Cur);
 14851              		.loc 1 5839 9 is_stmt 1
 14852 037c 10301BE5 		ldr	r3, [fp, #-16]
 14853 0380 043093E5 		ldr	r3, [r3, #4]
 14854 0384 0320A0E1 		mov	r2, r3
 14855 0388 14101BE5 		ldr	r1, [fp, #-20]
 14856 038c 1C001BE5 		ldr	r0, [fp, #-28]
 14857 0390 FEFFFFEB 		bl	_RME_Run_Swt
 14858              	.L957:
5840:../../Source/Kernel/rme_kernel.c ****     }
5841:../../Source/Kernel/rme_kernel.c ****     else
5842:../../Source/Kernel/rme_kernel.c ****     {
5843:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5844:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5845:../../Source/Kernel/rme_kernel.c ****     }
5846:../../Source/Kernel/rme_kernel.c ****     
5847:../../Source/Kernel/rme_kernel.c ****     /* Set the state to free so other cores can bind */
5848:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE((rme_ptr_t*)&(Thread->Sched.Local),
 14859              		.loc 1 5848 5
 14860 0394 14301BE5 		ldr	r3, [fp, #-20]
 14861 0398 143083E2 		add	r3, r3, #20
 14862 039c 0010E0E3 		mvn	r1, #0
 14863 03a0 0300A0E1 		mov	r0, r3
 14864 03a4 FEFFFFEB 		bl	__RME_A7A_Write_Release
5849:../../Source/Kernel/rme_kernel.c ****                       (rme_ptr_t)RME_THD_FREE);
5850:../../Source/Kernel/rme_kernel.c **** 
5851:../../Source/Kernel/rme_kernel.c ****     return 0;
 14865              		.loc 1 5851 12
 14866 03a8 0030A0E3 		mov	r3, #0
 14867              	.L942:
5852:../../Source/Kernel/rme_kernel.c **** }
 14868              		.loc 1 5852 1
 14869 03ac 0300A0E1 		mov	r0, r3
 14870 03b0 04D04BE2 		sub	sp, fp, #4
 14871              		.cfi_def_cfa 13, 8
 14872              		@ sp needed
 14873 03b4 0088BDE8 		pop	{fp, pc}
 14874              		.cfi_endproc
 14875              	.LFE59:
 14877              		.section	.text._RME_Thd_Exec_Set,"ax",%progbits
 14878              		.align	2
 14879              		.syntax unified
 14880              		.arm
 14882              	_RME_Thd_Exec_Set:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 365


 14883              	.LFB60:
5853:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Sched_Free ******************************************/
5854:../../Source/Kernel/rme_kernel.c **** 
5855:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Exec_Set *************************************************
5856:../../Source/Kernel/rme_kernel.c **** Description : Set a thread's entry point and stack. The registers will be
5857:../../Source/Kernel/rme_kernel.c ****               initialized with these contents.
5858:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5859:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
5860:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the thread.
5861:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
5862:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Entry - The entry address of the thread.
5863:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Stack - The stack address to use for execution.
5864:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Param - The parameter to pass to the thread.
5865:../../Source/Kernel/rme_kernel.c **** Output      : None.
5866:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5867:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5868:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Exec_Set(struct RME_Cap_Cpt* Cpt,
5869:../../Source/Kernel/rme_kernel.c ****                                    struct RME_Reg_Struct* Reg,
5870:../../Source/Kernel/rme_kernel.c ****                                    rme_cid_t Cap_Thd,
5871:../../Source/Kernel/rme_kernel.c ****                                    rme_ptr_t Entry,
5872:../../Source/Kernel/rme_kernel.c ****                                    rme_ptr_t Stack,
5873:../../Source/Kernel/rme_kernel.c ****                                    rme_ptr_t Param)
5874:../../Source/Kernel/rme_kernel.c **** {
 14884              		.loc 1 5874 1
 14885              		.cfi_startproc
 14886              		@ args = 8, pretend = 0, frame = 32
 14887              		@ frame_needed = 1, uses_anonymous_args = 0
 14888 0000 00482DE9 		push	{fp, lr}
 14889              		.cfi_def_cfa_offset 8
 14890              		.cfi_offset 11, -8
 14891              		.cfi_offset 14, -4
 14892 0004 04B08DE2 		add	fp, sp, #4
 14893              		.cfi_def_cfa 11, 4
 14894 0008 28D04DE2 		sub	sp, sp, #40
 14895 000c 18000BE5 		str	r0, [fp, #-24]
 14896 0010 1C100BE5 		str	r1, [fp, #-28]
 14897 0014 20200BE5 		str	r2, [fp, #-32]
 14898 0018 24300BE5 		str	r3, [fp, #-36]
5875:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Op;
5876:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
5877:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
5878:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
5879:../../Source/Kernel/rme_kernel.c ****     
5880:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
5881:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd,RME_CAP_TYPE_THD,
 14899              		.loc 1 5881 5
 14900 001c 20301BE5 		ldr	r3, [fp, #-32]
 14901 0020 803003E2 		and	r3, r3, #128
 14902 0024 000053E3 		cmp	r3, #0
 14903 0028 1C00001A 		bne	.L961
 14904              		.loc 1 5881 5 is_stmt 0 discriminator 1
 14905 002c 18301BE5 		ldr	r3, [fp, #-24]
 14906 0030 142093E5 		ldr	r2, [r3, #20]
 14907 0034 20301BE5 		ldr	r3, [fp, #-32]
 14908 0038 030052E1 		cmp	r2, r3
 14909 003c 0100008A 		bhi	.L962
 14910              		.loc 1 5881 5 discriminator 3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 366


 14911 0040 0230E0E3 		mvn	r3, #2
 14912              		.loc 1 5881 5
 14913 0044 910000EA 		b	.L963
 14914              	.L962:
 14915              		.loc 1 5881 5 discriminator 4
 14916 0048 20301BE5 		ldr	r3, [fp, #-32]
 14917 004c 8322A0E1 		lsl	r2, r3, #5
 14918 0050 18301BE5 		ldr	r3, [fp, #-24]
 14919 0054 0C3093E5 		ldr	r3, [r3, #12]
 14920 0058 033082E0 		add	r3, r2, r3
 14921 005c 08300BE5 		str	r3, [fp, #-8]
 14922 0060 08301BE5 		ldr	r3, [fp, #-8]
 14923 0064 0300A0E1 		mov	r0, r3
 14924 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14925 006c 0C000BE5 		str	r0, [fp, #-12]
 14926              		.loc 1 5881 5 discriminator 1
 14927 0070 0C301BE5 		ldr	r3, [fp, #-12]
 14928 0074 FF3803E2 		and	r3, r3, #16711680
 14929 0078 020853E3 		cmp	r3, #131072
 14930 007c 0100001A 		bne	.L964
 14931              		.loc 1 5881 5 discriminator 5
 14932 0080 0830E0E3 		mvn	r3, #8
 14933              		.loc 1 5881 5
 14934 0084 810000EA 		b	.L963
 14935              	.L964:
 14936              		.loc 1 5881 5 discriminator 6
 14937 0088 0C301BE5 		ldr	r3, [fp, #-12]
 14938 008c 233CA0E1 		lsr	r3, r3, #24
 14939 0090 060053E3 		cmp	r3, #6
 14940 0094 3F00000A 		beq	.L965
 14941              		.loc 1 5881 5 discriminator 7
 14942 0098 0130E0E3 		mvn	r3, #1
 14943              		.loc 1 5881 5
 14944 009c 7B0000EA 		b	.L963
 14945              	.L961:
 14946              		.loc 1 5881 5 discriminator 2
 14947 00a0 20301BE5 		ldr	r3, [fp, #-32]
 14948 00a4 2324A0E1 		lsr	r2, r3, #8
 14949 00a8 18301BE5 		ldr	r3, [fp, #-24]
 14950 00ac 143093E5 		ldr	r3, [r3, #20]
 14951 00b0 030052E1 		cmp	r2, r3
 14952 00b4 0100003A 		bcc	.L966
 14953              		.loc 1 5881 5 discriminator 8
 14954 00b8 0230E0E3 		mvn	r3, #2
 14955              		.loc 1 5881 5
 14956 00bc 730000EA 		b	.L963
 14957              	.L966:
 14958              		.loc 1 5881 5 discriminator 9
 14959 00c0 20301BE5 		ldr	r3, [fp, #-32]
 14960 00c4 2334A0E1 		lsr	r3, r3, #8
 14961 00c8 8322A0E1 		lsl	r2, r3, #5
 14962 00cc 18301BE5 		ldr	r3, [fp, #-24]
 14963 00d0 0C3093E5 		ldr	r3, [r3, #12]
 14964 00d4 033082E0 		add	r3, r2, r3
 14965 00d8 08300BE5 		str	r3, [fp, #-8]
 14966 00dc 08301BE5 		ldr	r3, [fp, #-8]
 14967 00e0 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 367


 14968 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 14969 00e8 0C000BE5 		str	r0, [fp, #-12]
 14970              		.loc 1 5881 5 discriminator 1
 14971 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 14972 00f0 FF3803E2 		and	r3, r3, #16711680
 14973 00f4 020853E3 		cmp	r3, #131072
 14974 00f8 0100001A 		bne	.L967
 14975              		.loc 1 5881 5 discriminator 10
 14976 00fc 0830E0E3 		mvn	r3, #8
 14977              		.loc 1 5881 5
 14978 0100 620000EA 		b	.L963
 14979              	.L967:
 14980              		.loc 1 5881 5 discriminator 11
 14981 0104 0C301BE5 		ldr	r3, [fp, #-12]
 14982 0108 233CA0E1 		lsr	r3, r3, #24
 14983 010c 030053E3 		cmp	r3, #3
 14984 0110 0100000A 		beq	.L968
 14985              		.loc 1 5881 5 discriminator 12
 14986 0114 0130E0E3 		mvn	r3, #1
 14987              		.loc 1 5881 5
 14988 0118 5C0000EA 		b	.L963
 14989              	.L968:
 14990              		.loc 1 5881 5 discriminator 13
 14991 011c 20301BE5 		ldr	r3, [fp, #-32]
 14992 0120 7F2003E2 		and	r2, r3, #127
 14993 0124 08301BE5 		ldr	r3, [fp, #-8]
 14994 0128 143093E5 		ldr	r3, [r3, #20]
 14995 012c 030052E1 		cmp	r2, r3
 14996 0130 0100003A 		bcc	.L969
 14997              		.loc 1 5881 5 discriminator 14
 14998 0134 0230E0E3 		mvn	r3, #2
 14999              		.loc 1 5881 5
 15000 0138 540000EA 		b	.L963
 15001              	.L969:
 15002              		.loc 1 5881 5 discriminator 15
 15003 013c 20301BE5 		ldr	r3, [fp, #-32]
 15004 0140 7F3003E2 		and	r3, r3, #127
 15005 0144 8322A0E1 		lsl	r2, r3, #5
 15006 0148 08301BE5 		ldr	r3, [fp, #-8]
 15007 014c 0C3093E5 		ldr	r3, [r3, #12]
 15008 0150 033082E0 		add	r3, r2, r3
 15009 0154 08300BE5 		str	r3, [fp, #-8]
 15010 0158 08301BE5 		ldr	r3, [fp, #-8]
 15011 015c 0300A0E1 		mov	r0, r3
 15012 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15013 0164 0C000BE5 		str	r0, [fp, #-12]
 15014              		.loc 1 5881 5 discriminator 1
 15015 0168 0C301BE5 		ldr	r3, [fp, #-12]
 15016 016c FF3803E2 		and	r3, r3, #16711680
 15017 0170 020853E3 		cmp	r3, #131072
 15018 0174 0100001A 		bne	.L970
 15019              		.loc 1 5881 5 discriminator 16
 15020 0178 0830E0E3 		mvn	r3, #8
 15021              		.loc 1 5881 5
 15022 017c 430000EA 		b	.L963
 15023              	.L970:
 15024              		.loc 1 5881 5 discriminator 17
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 368


 15025 0180 0C301BE5 		ldr	r3, [fp, #-12]
 15026 0184 233CA0E1 		lsr	r3, r3, #24
 15027 0188 060053E3 		cmp	r3, #6
 15028 018c 0100000A 		beq	.L965
 15029              		.loc 1 5881 5 discriminator 18
 15030 0190 0130E0E3 		mvn	r3, #1
 15031              		.loc 1 5881 5
 15032 0194 3D0000EA 		b	.L963
 15033              	.L965:
5882:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Op,Type_Stat);
5883:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
5884:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Op,RME_THD_FLAG_EXEC_SET);
 15034              		.loc 1 5884 5 is_stmt 1
 15035 0198 08301BE5 		ldr	r3, [fp, #-8]
 15036 019c 083093E5 		ldr	r3, [r3, #8]
 15037 01a0 013003E2 		and	r3, r3, #1
 15038 01a4 000053E3 		cmp	r3, #0
 15039 01a8 0100001A 		bne	.L971
 15040              		.loc 1 5884 5 is_stmt 0 discriminator 1
 15041 01ac 0630E0E3 		mvn	r3, #6
 15042              		.loc 1 5884 5
 15043 01b0 360000EA 		b	.L963
 15044              	.L971:
5885:../../Source/Kernel/rme_kernel.c ****     
5886:../../Source/Kernel/rme_kernel.c ****     /* Check if the target thread is already bound, and quit if it is not on our core */
5887:../../Source/Kernel/rme_kernel.c ****     Thread=RME_CAP_GETOBJ(Thd_Op,struct RME_Thd_Struct*);
 15045              		.loc 1 5887 12 is_stmt 1
 15046 01b4 08301BE5 		ldr	r3, [fp, #-8]
 15047 01b8 0C3093E5 		ldr	r3, [r3, #12]
 15048              		.loc 1 5887 11
 15049 01bc 10300BE5 		str	r3, [fp, #-16]
5888:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 15050              		.loc 1 5888 10
 15051 01c0 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 15052 01c4 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 15053 01c8 14300BE5 		str	r3, [fp, #-20]
5889:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.Local!=Local)
 15054              		.loc 1 5889 21
 15055 01cc 10301BE5 		ldr	r3, [fp, #-16]
 15056 01d0 143093E5 		ldr	r3, [r3, #20]
 15057              		.loc 1 5889 7
 15058 01d4 14201BE5 		ldr	r2, [fp, #-20]
 15059 01d8 030052E1 		cmp	r2, r3
 15060 01dc 0100000A 		beq	.L972
5890:../../Source/Kernel/rme_kernel.c ****     {
5891:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5892:../../Source/Kernel/rme_kernel.c **** 
5893:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 15061              		.loc 1 5893 16
 15062 01e0 CB30E0E3 		mvn	r3, #203
 15063 01e4 290000EA 		b	.L963
 15064              	.L972:
5894:../../Source/Kernel/rme_kernel.c ****     }
5895:../../Source/Kernel/rme_kernel.c ****     else
5896:../../Source/Kernel/rme_kernel.c ****     {
5897:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5898:../../Source/Kernel/rme_kernel.c ****         /* No action required */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 369


5899:../../Source/Kernel/rme_kernel.c ****     }
5900:../../Source/Kernel/rme_kernel.c ****     
5901:../../Source/Kernel/rme_kernel.c ****     /* Commit the change if both values are non-zero. If both are zero we are just
5902:../../Source/Kernel/rme_kernel.c ****      * clearing the error flag and continue from where the exception happened. */
5903:../../Source/Kernel/rme_kernel.c ****     if((Entry!=RME_NULL)&&(Stack!=RME_NULL))
 15065              		.loc 1 5903 7
 15066 01e8 24301BE5 		ldr	r3, [fp, #-36]
 15067 01ec 000053E3 		cmp	r3, #0
 15068 01f0 0C00000A 		beq	.L973
 15069              		.loc 1 5903 25 discriminator 1
 15070 01f4 04309BE5 		ldr	r3, [fp, #4]
 15071 01f8 000053E3 		cmp	r3, #0
 15072 01fc 0900000A 		beq	.L973
5904:../../Source/Kernel/rme_kernel.c ****     {
5905:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5906:../../Source/Kernel/rme_kernel.c **** 
5907:../../Source/Kernel/rme_kernel.c ****         __RME_Thd_Reg_Init(RME_THD_ATTR(Thread->Ctx.Hyp_Attr),
 15073              		.loc 1 5907 28
 15074 0200 10301BE5 		ldr	r3, [fp, #-16]
 15075 0204 443093E5 		ldr	r3, [r3, #68]
 15076              		.loc 1 5907 9
 15077 0208 0201C3E3 		bic	r0, r3, #-2147483648
5908:../../Source/Kernel/rme_kernel.c ****                            Entry,Stack,Param,&(Thread->Ctx.Reg->Reg));
 15078              		.loc 1 5908 59
 15079 020c 10301BE5 		ldr	r3, [fp, #-16]
 15080 0210 483093E5 		ldr	r3, [r3, #72]
5907:../../Source/Kernel/rme_kernel.c ****                            Entry,Stack,Param,&(Thread->Ctx.Reg->Reg));
 15081              		.loc 1 5907 9
 15082 0214 00308DE5 		str	r3, [sp]
 15083 0218 08309BE5 		ldr	r3, [fp, #8]
 15084 021c 04209BE5 		ldr	r2, [fp, #4]
 15085 0220 24101BE5 		ldr	r1, [fp, #-36]
 15086 0224 FEFFFFEB 		bl	__RME_Thd_Reg_Init
 15087              	.L973:
5909:../../Source/Kernel/rme_kernel.c **** #if(RME_COP_NUM!=0U)
5910:../../Source/Kernel/rme_kernel.c ****         __RME_Thd_Cop_Init(RME_THD_ATTR(Thread->Ctx.Hyp_Attr), 
5911:../../Source/Kernel/rme_kernel.c ****                            &(Thread->Ctx.Reg->Reg),&(Thread->Ctx.Reg->Cop));
5912:../../Source/Kernel/rme_kernel.c **** #endif
5913:../../Source/Kernel/rme_kernel.c ****     }
5914:../../Source/Kernel/rme_kernel.c ****     else
5915:../../Source/Kernel/rme_kernel.c ****     {
5916:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5917:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5918:../../Source/Kernel/rme_kernel.c ****     }
5919:../../Source/Kernel/rme_kernel.c ****     
5920:../../Source/Kernel/rme_kernel.c ****     /* Now save the system call return value to the caller stack */
5921:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,0);  
 15088              		.loc 1 5921 5
 15089 0228 0010A0E3 		mov	r1, #0
 15090 022c 1C001BE5 		ldr	r0, [fp, #-28]
 15091 0230 FEFFFFEB 		bl	__RME_Svc_Retval_Set
5922:../../Source/Kernel/rme_kernel.c ****     
5923:../../Source/Kernel/rme_kernel.c ****     /* Check if there is a exception pending and clear it if there is */
5924:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.State==RME_THD_EXCPEND)
 15092              		.loc 1 5924 21
 15093 0234 10301BE5 		ldr	r3, [fp, #-16]
 15094 0238 1C3093E5 		ldr	r3, [r3, #28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 370


 15095              		.loc 1 5924 7
 15096 023c 030053E3 		cmp	r3, #3
 15097 0240 1100001A 		bne	.L974
5925:../../Source/Kernel/rme_kernel.c ****     {
5926:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5927:../../Source/Kernel/rme_kernel.c ****         
5928:../../Source/Kernel/rme_kernel.c ****         /* Check if the thread still have timeslices. If yes, put it into the runqueue;
5929:../../Source/Kernel/rme_kernel.c ****          * if no, mark it as TIMEOUT and send scheduler notification to its parent. */
5930:../../Source/Kernel/rme_kernel.c ****         if(Thread->Sched.Slice!=0U)
 15098              		.loc 1 5930 25
 15099 0244 10301BE5 		ldr	r3, [fp, #-16]
 15100 0248 183093E5 		ldr	r3, [r3, #24]
 15101              		.loc 1 5930 11
 15102 024c 000053E3 		cmp	r3, #0
 15103 0250 0500000A 		beq	.L975
5931:../../Source/Kernel/rme_kernel.c ****         {
5932:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
5933:../../Source/Kernel/rme_kernel.c ****             
5934:../../Source/Kernel/rme_kernel.c ****             /* Ready and add to runqueue */
5935:../../Source/Kernel/rme_kernel.c ****             Thread->Sched.State=RME_THD_READY;
 15104              		.loc 1 5935 32
 15105 0254 10301BE5 		ldr	r3, [fp, #-16]
 15106 0258 0020A0E3 		mov	r2, #0
 15107 025c 1C2083E5 		str	r2, [r3, #28]
5936:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Ins(Thread);
 15108              		.loc 1 5936 13
 15109 0260 10001BE5 		ldr	r0, [fp, #-16]
 15110 0264 FEFFFFEB 		bl	_RME_Run_Ins
 15111 0268 040000EA 		b	.L976
 15112              	.L975:
5937:../../Source/Kernel/rme_kernel.c ****         }
5938:../../Source/Kernel/rme_kernel.c ****         else
5939:../../Source/Kernel/rme_kernel.c ****         {
5940:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
5941:../../Source/Kernel/rme_kernel.c ****             
5942:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
5943:../../Source/Kernel/rme_kernel.c ****             Thread->Sched.State=RME_THD_TIMEOUT;
 15113              		.loc 1 5943 32
 15114 026c 10301BE5 		ldr	r3, [fp, #-16]
 15115 0270 0220A0E3 		mov	r2, #2
 15116 0274 1C2083E5 		str	r2, [r3, #28]
5944:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thread);
 15117              		.loc 1 5944 13
 15118 0278 10001BE5 		ldr	r0, [fp, #-16]
 15119 027c FEFFFFEB 		bl	_RME_Run_Notif
 15120              	.L976:
5945:../../Source/Kernel/rme_kernel.c ****         }
5946:../../Source/Kernel/rme_kernel.c ****         
5947:../../Source/Kernel/rme_kernel.c ****         /* Pick the highest priority thread because something unblocked */
5948:../../Source/Kernel/rme_kernel.c ****         _RME_Kern_High(Reg,Local);
 15121              		.loc 1 5948 9
 15122 0280 14101BE5 		ldr	r1, [fp, #-20]
 15123 0284 1C001BE5 		ldr	r0, [fp, #-28]
 15124 0288 FEFFFFEB 		bl	_RME_Kern_High
 15125              	.L974:
5949:../../Source/Kernel/rme_kernel.c ****     }
5950:../../Source/Kernel/rme_kernel.c ****     else
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 371


5951:../../Source/Kernel/rme_kernel.c ****     {
5952:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
5953:../../Source/Kernel/rme_kernel.c ****         /* No action required */
5954:../../Source/Kernel/rme_kernel.c ****     }
5955:../../Source/Kernel/rme_kernel.c ****     
5956:../../Source/Kernel/rme_kernel.c ****     return 0;
 15126              		.loc 1 5956 12
 15127 028c 0030A0E3 		mov	r3, #0
 15128              	.L963:
5957:../../Source/Kernel/rme_kernel.c **** }
 15129              		.loc 1 5957 1
 15130 0290 0300A0E1 		mov	r0, r3
 15131 0294 04D04BE2 		sub	sp, fp, #4
 15132              		.cfi_def_cfa 13, 8
 15133              		@ sp needed
 15134 0298 0088BDE8 		pop	{fp, pc}
 15135              		.cfi_endproc
 15136              	.LFE60:
 15138              		.section	.text._RME_Thd_Sched_Prio,"ax",%progbits
 15139              		.align	2
 15140              		.syntax unified
 15141              		.arm
 15143              	_RME_Thd_Sched_Prio:
 15144              	.LFB61:
5958:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Exec_Set ********************************************/
5959:../../Source/Kernel/rme_kernel.c **** 
5960:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Sched_Prio ***********************************************
5961:../../Source/Kernel/rme_kernel.c **** Description : Change a thread's priority level. This can only be called from
5962:../../Source/Kernel/rme_kernel.c ****               the core that have the thread bound. To facilitate scheduling,
5963:../../Source/Kernel/rme_kernel.c ****               this system call allows up to 3 thread's priority changes per
5964:../../Source/Kernel/rme_kernel.c ****               call. This system call can cause a potential context switch.
5965:../../Source/Kernel/rme_kernel.c ****               It is impossible to set a thread's priority beyond its maximum
5966:../../Source/Kernel/rme_kernel.c ****               priority. 
5967:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
5968:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
5969:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Number - The number of threads to adjust priority.
5970:../../Source/Kernel/rme_kernel.c ****                                  Allowed values are 1, 2 and 3.
5971:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd0 - The capability to the first thread.
5972:../../Source/Kernel/rme_kernel.c ****                                    2-Level.
5973:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio0 - The priority level, higher is more critical.
5974:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd1 - The capability to the second thread.
5975:../../Source/Kernel/rme_kernel.c ****                                    2-Level.
5976:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio1 - The priority level, higher is more critical.
5977:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd2 - The capability to the third thread.
5978:../../Source/Kernel/rme_kernel.c ****                                    2-Level.
5979:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Prio2 - The priority level, higher is more critical.
5980:../../Source/Kernel/rme_kernel.c **** Output      : None.
5981:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
5982:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
5983:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Sched_Prio(struct RME_Cap_Cpt* Cpt,
5984:../../Source/Kernel/rme_kernel.c ****                                      struct RME_Reg_Struct* Reg,
5985:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Number,
5986:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd0,
5987:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Prio0,
5988:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd1,
5989:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Prio1,
5990:../../Source/Kernel/rme_kernel.c ****                                      rme_cid_t Cap_Thd2,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 372


5991:../../Source/Kernel/rme_kernel.c ****                                      rme_ptr_t Prio2)
5992:../../Source/Kernel/rme_kernel.c **** {
 15145              		.loc 1 5992 1
 15146              		.cfi_startproc
 15147              		@ args = 20, pretend = 0, frame = 80
 15148              		@ frame_needed = 1, uses_anonymous_args = 0
 15149 0000 00482DE9 		push	{fp, lr}
 15150              		.cfi_def_cfa_offset 8
 15151              		.cfi_offset 11, -8
 15152              		.cfi_offset 14, -4
 15153 0004 04B08DE2 		add	fp, sp, #4
 15154              		.cfi_def_cfa 11, 4
 15155 0008 50D04DE2 		sub	sp, sp, #80
 15156 000c 48000BE5 		str	r0, [fp, #-72]
 15157 0010 4C100BE5 		str	r1, [fp, #-76]
 15158 0014 50200BE5 		str	r2, [fp, #-80]
 15159 0018 54300BE5 		str	r3, [fp, #-84]
5993:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Count;
5994:../../Source/Kernel/rme_kernel.c ****     rme_cid_t Cap_Thd[3];
5995:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Prio[3];
5996:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Op[3];
5997:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread[3];
5998:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
5999:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6000:../../Source/Kernel/rme_kernel.c ****     
6001:../../Source/Kernel/rme_kernel.c ****     /* Check parameter validity */
6002:../../Source/Kernel/rme_kernel.c ****     if((Number==0U)||(Number>3U))
 15160              		.loc 1 6002 7
 15161 001c 50301BE5 		ldr	r3, [fp, #-80]
 15162 0020 000053E3 		cmp	r3, #0
 15163 0024 0200000A 		beq	.L978
 15164              		.loc 1 6002 20 discriminator 1
 15165 0028 50301BE5 		ldr	r3, [fp, #-80]
 15166 002c 030053E3 		cmp	r3, #3
 15167 0030 0100009A 		bls	.L979
 15168              	.L978:
6003:../../Source/Kernel/rme_kernel.c ****     {
6004:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6005:../../Source/Kernel/rme_kernel.c **** 
6006:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 15169              		.loc 1 6006 16
 15170 0034 CB30E0E3 		mvn	r3, #203
 15171 0038 260100EA 		b	.L999
 15172              	.L979:
6007:../../Source/Kernel/rme_kernel.c ****     }
6008:../../Source/Kernel/rme_kernel.c ****     
6009:../../Source/Kernel/rme_kernel.c ****     /* We'll use arrays in the next */
6010:../../Source/Kernel/rme_kernel.c ****     Cap_Thd[0]=Cap_Thd0;
 15173              		.loc 1 6010 15
 15174 003c 54301BE5 		ldr	r3, [fp, #-84]
 15175 0040 1C300BE5 		str	r3, [fp, #-28]
6011:../../Source/Kernel/rme_kernel.c ****     Cap_Thd[1]=Cap_Thd1;
 15176              		.loc 1 6011 15
 15177 0044 08309BE5 		ldr	r3, [fp, #8]
 15178 0048 18300BE5 		str	r3, [fp, #-24]
6012:../../Source/Kernel/rme_kernel.c ****     Cap_Thd[2]=Cap_Thd2;
 15179              		.loc 1 6012 15
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 373


 15180 004c 10309BE5 		ldr	r3, [fp, #16]
 15181 0050 14300BE5 		str	r3, [fp, #-20]
6013:../../Source/Kernel/rme_kernel.c ****     Prio[0]=Prio0;
 15182              		.loc 1 6013 12
 15183 0054 04309BE5 		ldr	r3, [fp, #4]
 15184 0058 28300BE5 		str	r3, [fp, #-40]
6014:../../Source/Kernel/rme_kernel.c ****     Prio[1]=Prio1;
 15185              		.loc 1 6014 12
 15186 005c 0C309BE5 		ldr	r3, [fp, #12]
 15187 0060 24300BE5 		str	r3, [fp, #-36]
6015:../../Source/Kernel/rme_kernel.c ****     Prio[2]=Prio2;
 15188              		.loc 1 6015 12
 15189 0064 14309BE5 		ldr	r3, [fp, #20]
 15190 0068 20300BE5 		str	r3, [fp, #-32]
6016:../../Source/Kernel/rme_kernel.c **** 
6017:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 15191              		.loc 1 6017 10
 15192 006c 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 15193 0070 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 15194 0074 0C300BE5 		str	r3, [fp, #-12]
6018:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Number;Count++)
 15195              		.loc 1 6018 14
 15196 0078 0030A0E3 		mov	r3, #0
 15197 007c 08300BE5 		str	r3, [fp, #-8]
 15198              		.loc 1 6018 5
 15199 0080 D20000EA 		b	.L981
 15200              	.L994:
6019:../../Source/Kernel/rme_kernel.c ****     {
6020:../../Source/Kernel/rme_kernel.c ****         /* Get the capability slot */
6021:../../Source/Kernel/rme_kernel.c ****         RME_CPT_GETCAP(Cpt,Cap_Thd[Count],RME_CAP_TYPE_THD,
 15201              		.loc 1 6021 9
 15202 0084 08301BE5 		ldr	r3, [fp, #-8]
 15203 0088 0331A0E1 		lsl	r3, r3, #2
 15204 008c 043043E2 		sub	r3, r3, #4
 15205 0090 0B3083E0 		add	r3, r3, fp
 15206 0094 183013E5 		ldr	r3, [r3, #-24]
 15207 0098 803003E2 		and	r3, r3, #128
 15208 009c 000053E3 		cmp	r3, #0
 15209 00a0 2E00001A 		bne	.L982
 15210              		.loc 1 6021 9 is_stmt 0 discriminator 1
 15211 00a4 08301BE5 		ldr	r3, [fp, #-8]
 15212 00a8 0331A0E1 		lsl	r3, r3, #2
 15213 00ac 043043E2 		sub	r3, r3, #4
 15214 00b0 0B3083E0 		add	r3, r3, fp
 15215 00b4 183013E5 		ldr	r3, [r3, #-24]
 15216 00b8 0320A0E1 		mov	r2, r3
 15217 00bc 48301BE5 		ldr	r3, [fp, #-72]
 15218 00c0 143093E5 		ldr	r3, [r3, #20]
 15219 00c4 030052E1 		cmp	r2, r3
 15220 00c8 0100003A 		bcc	.L983
 15221              		.loc 1 6021 9 discriminator 3
 15222 00cc 0230E0E3 		mvn	r3, #2
 15223              		.loc 1 6021 9
 15224 00d0 000100EA 		b	.L999
 15225              	.L983:
 15226              		.loc 1 6021 9 discriminator 4
 15227 00d4 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 374


 15228 00d8 0331A0E1 		lsl	r3, r3, #2
 15229 00dc 043043E2 		sub	r3, r3, #4
 15230 00e0 0B3083E0 		add	r3, r3, fp
 15231 00e4 183013E5 		ldr	r3, [r3, #-24]
 15232 00e8 8322A0E1 		lsl	r2, r3, #5
 15233 00ec 48301BE5 		ldr	r3, [fp, #-72]
 15234 00f0 0C3093E5 		ldr	r3, [r3, #12]
 15235 00f4 033082E0 		add	r3, r2, r3
 15236 00f8 0320A0E1 		mov	r2, r3
 15237 00fc 08301BE5 		ldr	r3, [fp, #-8]
 15238 0100 0331A0E1 		lsl	r3, r3, #2
 15239 0104 043043E2 		sub	r3, r3, #4
 15240 0108 0B3083E0 		add	r3, r3, fp
 15241 010c 302003E5 		str	r2, [r3, #-48]
 15242 0110 08301BE5 		ldr	r3, [fp, #-8]
 15243 0114 0331A0E1 		lsl	r3, r3, #2
 15244 0118 043043E2 		sub	r3, r3, #4
 15245 011c 0B3083E0 		add	r3, r3, fp
 15246 0120 303013E5 		ldr	r3, [r3, #-48]
 15247 0124 0300A0E1 		mov	r0, r3
 15248 0128 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15249 012c 10000BE5 		str	r0, [fp, #-16]
 15250              		.loc 1 6021 9 discriminator 1
 15251 0130 10301BE5 		ldr	r3, [fp, #-16]
 15252 0134 FF3803E2 		and	r3, r3, #16711680
 15253 0138 020853E3 		cmp	r3, #131072
 15254 013c 0100001A 		bne	.L984
 15255              		.loc 1 6021 9 discriminator 5
 15256 0140 0830E0E3 		mvn	r3, #8
 15257              		.loc 1 6021 9
 15258 0144 E30000EA 		b	.L999
 15259              	.L984:
 15260              		.loc 1 6021 9 discriminator 6
 15261 0148 10301BE5 		ldr	r3, [fp, #-16]
 15262 014c 233CA0E1 		lsr	r3, r3, #24
 15263 0150 060053E3 		cmp	r3, #6
 15264 0154 6900000A 		beq	.L985
 15265              		.loc 1 6021 9 discriminator 7
 15266 0158 0130E0E3 		mvn	r3, #1
 15267              		.loc 1 6021 9
 15268 015c DD0000EA 		b	.L999
 15269              	.L982:
 15270              		.loc 1 6021 9 discriminator 2
 15271 0160 08301BE5 		ldr	r3, [fp, #-8]
 15272 0164 0331A0E1 		lsl	r3, r3, #2
 15273 0168 043043E2 		sub	r3, r3, #4
 15274 016c 0B3083E0 		add	r3, r3, fp
 15275 0170 183013E5 		ldr	r3, [r3, #-24]
 15276 0174 2324A0E1 		lsr	r2, r3, #8
 15277 0178 48301BE5 		ldr	r3, [fp, #-72]
 15278 017c 143093E5 		ldr	r3, [r3, #20]
 15279 0180 030052E1 		cmp	r2, r3
 15280 0184 0100003A 		bcc	.L986
 15281              		.loc 1 6021 9 discriminator 8
 15282 0188 0230E0E3 		mvn	r3, #2
 15283              		.loc 1 6021 9
 15284 018c D10000EA 		b	.L999
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 375


 15285              	.L986:
 15286              		.loc 1 6021 9 discriminator 9
 15287 0190 08301BE5 		ldr	r3, [fp, #-8]
 15288 0194 0331A0E1 		lsl	r3, r3, #2
 15289 0198 043043E2 		sub	r3, r3, #4
 15290 019c 0B3083E0 		add	r3, r3, fp
 15291 01a0 183013E5 		ldr	r3, [r3, #-24]
 15292 01a4 2334A0E1 		lsr	r3, r3, #8
 15293 01a8 8322A0E1 		lsl	r2, r3, #5
 15294 01ac 48301BE5 		ldr	r3, [fp, #-72]
 15295 01b0 0C3093E5 		ldr	r3, [r3, #12]
 15296 01b4 033082E0 		add	r3, r2, r3
 15297 01b8 0320A0E1 		mov	r2, r3
 15298 01bc 08301BE5 		ldr	r3, [fp, #-8]
 15299 01c0 0331A0E1 		lsl	r3, r3, #2
 15300 01c4 043043E2 		sub	r3, r3, #4
 15301 01c8 0B3083E0 		add	r3, r3, fp
 15302 01cc 302003E5 		str	r2, [r3, #-48]
 15303 01d0 08301BE5 		ldr	r3, [fp, #-8]
 15304 01d4 0331A0E1 		lsl	r3, r3, #2
 15305 01d8 043043E2 		sub	r3, r3, #4
 15306 01dc 0B3083E0 		add	r3, r3, fp
 15307 01e0 303013E5 		ldr	r3, [r3, #-48]
 15308 01e4 0300A0E1 		mov	r0, r3
 15309 01e8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15310 01ec 10000BE5 		str	r0, [fp, #-16]
 15311              		.loc 1 6021 9 discriminator 1
 15312 01f0 10301BE5 		ldr	r3, [fp, #-16]
 15313 01f4 FF3803E2 		and	r3, r3, #16711680
 15314 01f8 020853E3 		cmp	r3, #131072
 15315 01fc 0100001A 		bne	.L987
 15316              		.loc 1 6021 9 discriminator 10
 15317 0200 0830E0E3 		mvn	r3, #8
 15318              		.loc 1 6021 9
 15319 0204 B30000EA 		b	.L999
 15320              	.L987:
 15321              		.loc 1 6021 9 discriminator 11
 15322 0208 10301BE5 		ldr	r3, [fp, #-16]
 15323 020c 233CA0E1 		lsr	r3, r3, #24
 15324 0210 030053E3 		cmp	r3, #3
 15325 0214 0100000A 		beq	.L988
 15326              		.loc 1 6021 9 discriminator 12
 15327 0218 0130E0E3 		mvn	r3, #1
 15328              		.loc 1 6021 9
 15329 021c AD0000EA 		b	.L999
 15330              	.L988:
 15331              		.loc 1 6021 9 discriminator 13
 15332 0220 08301BE5 		ldr	r3, [fp, #-8]
 15333 0224 0331A0E1 		lsl	r3, r3, #2
 15334 0228 043043E2 		sub	r3, r3, #4
 15335 022c 0B3083E0 		add	r3, r3, fp
 15336 0230 183013E5 		ldr	r3, [r3, #-24]
 15337 0234 7F2003E2 		and	r2, r3, #127
 15338 0238 08301BE5 		ldr	r3, [fp, #-8]
 15339 023c 0331A0E1 		lsl	r3, r3, #2
 15340 0240 043043E2 		sub	r3, r3, #4
 15341 0244 0B3083E0 		add	r3, r3, fp
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 376


 15342 0248 303013E5 		ldr	r3, [r3, #-48]
 15343 024c 143093E5 		ldr	r3, [r3, #20]
 15344 0250 030052E1 		cmp	r2, r3
 15345 0254 0100003A 		bcc	.L989
 15346              		.loc 1 6021 9 discriminator 14
 15347 0258 0230E0E3 		mvn	r3, #2
 15348              		.loc 1 6021 9
 15349 025c 9D0000EA 		b	.L999
 15350              	.L989:
 15351              		.loc 1 6021 9 discriminator 15
 15352 0260 08301BE5 		ldr	r3, [fp, #-8]
 15353 0264 0331A0E1 		lsl	r3, r3, #2
 15354 0268 043043E2 		sub	r3, r3, #4
 15355 026c 0B3083E0 		add	r3, r3, fp
 15356 0270 183013E5 		ldr	r3, [r3, #-24]
 15357 0274 7F3003E2 		and	r3, r3, #127
 15358 0278 8322A0E1 		lsl	r2, r3, #5
 15359 027c 08301BE5 		ldr	r3, [fp, #-8]
 15360 0280 0331A0E1 		lsl	r3, r3, #2
 15361 0284 043043E2 		sub	r3, r3, #4
 15362 0288 0B3083E0 		add	r3, r3, fp
 15363 028c 303013E5 		ldr	r3, [r3, #-48]
 15364 0290 0C3093E5 		ldr	r3, [r3, #12]
 15365 0294 033082E0 		add	r3, r2, r3
 15366 0298 0320A0E1 		mov	r2, r3
 15367 029c 08301BE5 		ldr	r3, [fp, #-8]
 15368 02a0 0331A0E1 		lsl	r3, r3, #2
 15369 02a4 043043E2 		sub	r3, r3, #4
 15370 02a8 0B3083E0 		add	r3, r3, fp
 15371 02ac 302003E5 		str	r2, [r3, #-48]
 15372 02b0 08301BE5 		ldr	r3, [fp, #-8]
 15373 02b4 0331A0E1 		lsl	r3, r3, #2
 15374 02b8 043043E2 		sub	r3, r3, #4
 15375 02bc 0B3083E0 		add	r3, r3, fp
 15376 02c0 303013E5 		ldr	r3, [r3, #-48]
 15377 02c4 0300A0E1 		mov	r0, r3
 15378 02c8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15379 02cc 10000BE5 		str	r0, [fp, #-16]
 15380              		.loc 1 6021 9 discriminator 1
 15381 02d0 10301BE5 		ldr	r3, [fp, #-16]
 15382 02d4 FF3803E2 		and	r3, r3, #16711680
 15383 02d8 020853E3 		cmp	r3, #131072
 15384 02dc 0100001A 		bne	.L990
 15385              		.loc 1 6021 9 discriminator 16
 15386 02e0 0830E0E3 		mvn	r3, #8
 15387              		.loc 1 6021 9
 15388 02e4 7B0000EA 		b	.L999
 15389              	.L990:
 15390              		.loc 1 6021 9 discriminator 17
 15391 02e8 10301BE5 		ldr	r3, [fp, #-16]
 15392 02ec 233CA0E1 		lsr	r3, r3, #24
 15393 02f0 060053E3 		cmp	r3, #6
 15394 02f4 0100000A 		beq	.L985
 15395              		.loc 1 6021 9 discriminator 18
 15396 02f8 0130E0E3 		mvn	r3, #1
 15397              		.loc 1 6021 9
 15398 02fc 750000EA 		b	.L999
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 377


 15399              	.L985:
6022:../../Source/Kernel/rme_kernel.c ****                        struct RME_Cap_Thd*,Thd_Op[Count],Type_Stat);
6023:../../Source/Kernel/rme_kernel.c ****         /* Check if the target cap is not frozen and allows such operations */
6024:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CHECK(Thd_Op[Count],RME_THD_FLAG_SCHED_PRIO);
 15400              		.loc 1 6024 9 is_stmt 1
 15401 0300 08301BE5 		ldr	r3, [fp, #-8]
 15402 0304 0331A0E1 		lsl	r3, r3, #2
 15403 0308 043043E2 		sub	r3, r3, #4
 15404 030c 0B3083E0 		add	r3, r3, fp
 15405 0310 303013E5 		ldr	r3, [r3, #-48]
 15406 0314 083093E5 		ldr	r3, [r3, #8]
 15407 0318 083003E2 		and	r3, r3, #8
 15408 031c 000053E3 		cmp	r3, #0
 15409 0320 0100001A 		bne	.L991
 15410              		.loc 1 6024 9 is_stmt 0 discriminator 1
 15411 0324 0630E0E3 		mvn	r3, #6
 15412              		.loc 1 6024 9
 15413 0328 6A0000EA 		b	.L999
 15414              	.L991:
6025:../../Source/Kernel/rme_kernel.c ****         
6026:../../Source/Kernel/rme_kernel.c ****         /* See if the target thread is already bound to this core. If no, we just quit */
6027:../../Source/Kernel/rme_kernel.c ****         Thread[Count]=(struct RME_Thd_Struct*)(Thd_Op[Count]->Head.Object);
 15415              		.loc 1 6027 54 is_stmt 1
 15416 032c 08301BE5 		ldr	r3, [fp, #-8]
 15417 0330 0331A0E1 		lsl	r3, r3, #2
 15418 0334 043043E2 		sub	r3, r3, #4
 15419 0338 0B3083E0 		add	r3, r3, fp
 15420 033c 303013E5 		ldr	r3, [r3, #-48]
 15421              		.loc 1 6027 67
 15422 0340 0C3093E5 		ldr	r3, [r3, #12]
 15423              		.loc 1 6027 23
 15424 0344 0320A0E1 		mov	r2, r3
 15425              		.loc 1 6027 22
 15426 0348 08301BE5 		ldr	r3, [fp, #-8]
 15427 034c 0331A0E1 		lsl	r3, r3, #2
 15428 0350 043043E2 		sub	r3, r3, #4
 15429 0354 0B3083E0 		add	r3, r3, fp
 15430 0358 3C2003E5 		str	r2, [r3, #-60]
6028:../../Source/Kernel/rme_kernel.c ****         if(Thread[Count]->Sched.Local!=Local)
 15431              		.loc 1 6028 18
 15432 035c 08301BE5 		ldr	r3, [fp, #-8]
 15433 0360 0331A0E1 		lsl	r3, r3, #2
 15434 0364 043043E2 		sub	r3, r3, #4
 15435 0368 0B3083E0 		add	r3, r3, fp
 15436 036c 3C3013E5 		ldr	r3, [r3, #-60]
 15437              		.loc 1 6028 32
 15438 0370 143093E5 		ldr	r3, [r3, #20]
 15439              		.loc 1 6028 11
 15440 0374 0C201BE5 		ldr	r2, [fp, #-12]
 15441 0378 030052E1 		cmp	r2, r3
 15442 037c 0100000A 		beq	.L992
6029:../../Source/Kernel/rme_kernel.c ****         {
6030:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6031:../../Source/Kernel/rme_kernel.c **** 
6032:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_INVSTATE;
 15443              		.loc 1 6032 20
 15444 0380 CB30E0E3 		mvn	r3, #203
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 378


 15445 0384 530000EA 		b	.L999
 15446              	.L992:
6033:../../Source/Kernel/rme_kernel.c ****         }
6034:../../Source/Kernel/rme_kernel.c ****         else
6035:../../Source/Kernel/rme_kernel.c ****         {
6036:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6037:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6038:../../Source/Kernel/rme_kernel.c ****         }
6039:../../Source/Kernel/rme_kernel.c ****         
6040:../../Source/Kernel/rme_kernel.c ****         /* See if the priority relationship is correct */
6041:../../Source/Kernel/rme_kernel.c ****         if(Thread[Count]->Sched.Prio_Max<Prio[Count])
 15447              		.loc 1 6041 18
 15448 0388 08301BE5 		ldr	r3, [fp, #-8]
 15449 038c 0331A0E1 		lsl	r3, r3, #2
 15450 0390 043043E2 		sub	r3, r3, #4
 15451 0394 0B3083E0 		add	r3, r3, fp
 15452 0398 3C3013E5 		ldr	r3, [r3, #-60]
 15453              		.loc 1 6041 32
 15454 039c 242093E5 		ldr	r2, [r3, #36]
 15455              		.loc 1 6041 46
 15456 03a0 08301BE5 		ldr	r3, [fp, #-8]
 15457 03a4 0331A0E1 		lsl	r3, r3, #2
 15458 03a8 043043E2 		sub	r3, r3, #4
 15459 03ac 0B3083E0 		add	r3, r3, fp
 15460 03b0 243013E5 		ldr	r3, [r3, #-36]
 15461              		.loc 1 6041 11
 15462 03b4 030052E1 		cmp	r2, r3
 15463 03b8 0100002A 		bcs	.L993
6042:../../Source/Kernel/rme_kernel.c ****         {
6043:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6044:../../Source/Kernel/rme_kernel.c **** 
6045:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_PRIO;
 15464              		.loc 1 6045 20
 15465 03bc CC30E0E3 		mvn	r3, #204
 15466 03c0 440000EA 		b	.L999
 15467              	.L993:
6018:../../Source/Kernel/rme_kernel.c ****     {
 15468              		.loc 1 6018 36 discriminator 2
 15469 03c4 08301BE5 		ldr	r3, [fp, #-8]
 15470 03c8 013083E2 		add	r3, r3, #1
 15471 03cc 08300BE5 		str	r3, [fp, #-8]
 15472              	.L981:
6018:../../Source/Kernel/rme_kernel.c ****     {
 15473              		.loc 1 6018 23 discriminator 1
 15474 03d0 08201BE5 		ldr	r2, [fp, #-8]
 15475 03d4 50301BE5 		ldr	r3, [fp, #-80]
 15476 03d8 030052E1 		cmp	r2, r3
 15477 03dc 28FFFF3A 		bcc	.L994
6046:../../Source/Kernel/rme_kernel.c ****         }
6047:../../Source/Kernel/rme_kernel.c ****         else
6048:../../Source/Kernel/rme_kernel.c ****         {
6049:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6050:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6051:../../Source/Kernel/rme_kernel.c ****         }
6052:../../Source/Kernel/rme_kernel.c ****     }
6053:../../Source/Kernel/rme_kernel.c ****     
6054:../../Source/Kernel/rme_kernel.c ****     /* Now save the system call return value to the caller stack */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 379


6055:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,0);
 15478              		.loc 1 6055 5
 15479 03e0 0010A0E3 		mov	r1, #0
 15480 03e4 4C001BE5 		ldr	r0, [fp, #-76]
 15481 03e8 FEFFFFEB 		bl	__RME_Svc_Retval_Set
6056:../../Source/Kernel/rme_kernel.c ****     
6057:../../Source/Kernel/rme_kernel.c ****     /* Change priority for each thread, and we'll switch to the real highest priority
6058:../../Source/Kernel/rme_kernel.c ****      * thread after all these changes. This can help remove the excessive overhead. */
6059:../../Source/Kernel/rme_kernel.c ****     for(Count=0U;Count<Number;Count++)
 15482              		.loc 1 6059 14
 15483 03ec 0030A0E3 		mov	r3, #0
 15484 03f0 08300BE5 		str	r3, [fp, #-8]
 15485              		.loc 1 6059 5
 15486 03f4 2F0000EA 		b	.L995
 15487              	.L998:
6060:../../Source/Kernel/rme_kernel.c ****     {
6061:../../Source/Kernel/rme_kernel.c ****         /* See if this thread is currently in the runqueue */
6062:../../Source/Kernel/rme_kernel.c ****         if(Thread[Count]->Sched.State==RME_THD_READY)
 15488              		.loc 1 6062 18
 15489 03f8 08301BE5 		ldr	r3, [fp, #-8]
 15490 03fc 0331A0E1 		lsl	r3, r3, #2
 15491 0400 043043E2 		sub	r3, r3, #4
 15492 0404 0B3083E0 		add	r3, r3, fp
 15493 0408 3C3013E5 		ldr	r3, [r3, #-60]
 15494              		.loc 1 6062 32
 15495 040c 1C3093E5 		ldr	r3, [r3, #28]
 15496              		.loc 1 6062 11
 15497 0410 000053E3 		cmp	r3, #0
 15498 0414 1900001A 		bne	.L996
6063:../../Source/Kernel/rme_kernel.c ****         {
6064:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6065:../../Source/Kernel/rme_kernel.c **** 
6066:../../Source/Kernel/rme_kernel.c ****             /* Remove from runqueue, change priority, and add it back */
6067:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thread[Count]);
 15499              		.loc 1 6067 13
 15500 0418 08301BE5 		ldr	r3, [fp, #-8]
 15501 041c 0331A0E1 		lsl	r3, r3, #2
 15502 0420 043043E2 		sub	r3, r3, #4
 15503 0424 0B3083E0 		add	r3, r3, fp
 15504 0428 3C3013E5 		ldr	r3, [r3, #-60]
 15505 042c 0300A0E1 		mov	r0, r3
 15506 0430 FEFFFFEB 		bl	_RME_Run_Del
6068:../../Source/Kernel/rme_kernel.c ****             Thread[Count]->Sched.Prio=Prio[Count];
 15507              		.loc 1 6068 19
 15508 0434 08301BE5 		ldr	r3, [fp, #-8]
 15509 0438 0331A0E1 		lsl	r3, r3, #2
 15510 043c 043043E2 		sub	r3, r3, #4
 15511 0440 0B3083E0 		add	r3, r3, fp
 15512 0444 3C2013E5 		ldr	r2, [r3, #-60]
 15513              		.loc 1 6068 43
 15514 0448 08301BE5 		ldr	r3, [fp, #-8]
 15515 044c 0331A0E1 		lsl	r3, r3, #2
 15516 0450 043043E2 		sub	r3, r3, #4
 15517 0454 0B3083E0 		add	r3, r3, fp
 15518 0458 243013E5 		ldr	r3, [r3, #-36]
 15519              		.loc 1 6068 38
 15520 045c 203082E5 		str	r3, [r2, #32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 380


6069:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Ins(Thread[Count]);
 15521              		.loc 1 6069 13
 15522 0460 08301BE5 		ldr	r3, [fp, #-8]
 15523 0464 0331A0E1 		lsl	r3, r3, #2
 15524 0468 043043E2 		sub	r3, r3, #4
 15525 046c 0B3083E0 		add	r3, r3, fp
 15526 0470 3C3013E5 		ldr	r3, [r3, #-60]
 15527 0474 0300A0E1 		mov	r0, r3
 15528 0478 FEFFFFEB 		bl	_RME_Run_Ins
 15529 047c 0A0000EA 		b	.L997
 15530              	.L996:
6070:../../Source/Kernel/rme_kernel.c ****         }
6071:../../Source/Kernel/rme_kernel.c ****         /* If it is BLOCKED, TIMEOUT or EXCPEND, changing the number will suffice */
6072:../../Source/Kernel/rme_kernel.c ****         else
6073:../../Source/Kernel/rme_kernel.c ****         {
6074:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6075:../../Source/Kernel/rme_kernel.c **** 
6076:../../Source/Kernel/rme_kernel.c ****             Thread[Count]->Sched.Prio=Prio[Count];
 15531              		.loc 1 6076 19
 15532 0480 08301BE5 		ldr	r3, [fp, #-8]
 15533 0484 0331A0E1 		lsl	r3, r3, #2
 15534 0488 043043E2 		sub	r3, r3, #4
 15535 048c 0B3083E0 		add	r3, r3, fp
 15536 0490 3C2013E5 		ldr	r2, [r3, #-60]
 15537              		.loc 1 6076 43
 15538 0494 08301BE5 		ldr	r3, [fp, #-8]
 15539 0498 0331A0E1 		lsl	r3, r3, #2
 15540 049c 043043E2 		sub	r3, r3, #4
 15541 04a0 0B3083E0 		add	r3, r3, fp
 15542 04a4 243013E5 		ldr	r3, [r3, #-36]
 15543              		.loc 1 6076 38
 15544 04a8 203082E5 		str	r3, [r2, #32]
 15545              	.L997:
6059:../../Source/Kernel/rme_kernel.c ****     {
 15546              		.loc 1 6059 36 discriminator 2
 15547 04ac 08301BE5 		ldr	r3, [fp, #-8]
 15548 04b0 013083E2 		add	r3, r3, #1
 15549 04b4 08300BE5 		str	r3, [fp, #-8]
 15550              	.L995:
6059:../../Source/Kernel/rme_kernel.c ****     {
 15551              		.loc 1 6059 23 discriminator 1
 15552 04b8 08201BE5 		ldr	r2, [fp, #-8]
 15553 04bc 50301BE5 		ldr	r3, [fp, #-80]
 15554 04c0 030052E1 		cmp	r2, r3
 15555 04c4 CBFFFF3A 		bcc	.L998
6077:../../Source/Kernel/rme_kernel.c ****         }
6078:../../Source/Kernel/rme_kernel.c ****     }
6079:../../Source/Kernel/rme_kernel.c ****     
6080:../../Source/Kernel/rme_kernel.c ****     /* Pick the current highest priority thread to run */
6081:../../Source/Kernel/rme_kernel.c ****     _RME_Kern_High(Reg,Local);
 15556              		.loc 1 6081 5
 15557 04c8 0C101BE5 		ldr	r1, [fp, #-12]
 15558 04cc 4C001BE5 		ldr	r0, [fp, #-76]
 15559 04d0 FEFFFFEB 		bl	_RME_Kern_High
6082:../../Source/Kernel/rme_kernel.c **** 
6083:../../Source/Kernel/rme_kernel.c ****     return 0;
 15560              		.loc 1 6083 12
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 381


 15561 04d4 0030A0E3 		mov	r3, #0
 15562              	.L999:
6084:../../Source/Kernel/rme_kernel.c **** }
 15563              		.loc 1 6084 1
 15564 04d8 0300A0E1 		mov	r0, r3
 15565 04dc 04D04BE2 		sub	sp, fp, #4
 15566              		.cfi_def_cfa 13, 8
 15567              		@ sp needed
 15568 04e0 0088BDE8 		pop	{fp, pc}
 15569              		.cfi_endproc
 15570              	.LFE61:
 15572              		.section	.text._RME_Thd_Sched_Rcv,"ax",%progbits
 15573              		.align	2
 15574              		.syntax unified
 15575              		.arm
 15577              	_RME_Thd_Sched_Rcv:
 15578              	.LFB62:
6085:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Sched_Prio ******************************************/
6086:../../Source/Kernel/rme_kernel.c **** 
6087:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Sched_Rcv ************************************************
6088:../../Source/Kernel/rme_kernel.c **** Description : Try to receive a notification from the scheduler queue. This
6089:../../Source/Kernel/rme_kernel.c ****               can only be called from the same core the thread is on.
6090:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
6091:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the scheduler thread. We
6092:../../Source/Kernel/rme_kernel.c ****                                   are going to get timeout or exception
6093:../../Source/Kernel/rme_kernel.c ****                                   notifications for the threads that it is
6094:../../Source/Kernel/rme_kernel.c ****                                   responsible for scheduling. This capability
6095:../../Source/Kernel/rme_kernel.c ****                                   must point to a thread on the same core.
6096:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
6097:../../Source/Kernel/rme_kernel.c **** Output      : None.
6098:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, the thread ID; or an error code.
6099:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6100:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Sched_Rcv(struct RME_Cap_Cpt* Cpt,
6101:../../Source/Kernel/rme_kernel.c ****                                     rme_cid_t Cap_Thd)
6102:../../Source/Kernel/rme_kernel.c **** {
 15579              		.loc 1 6102 1
 15580              		.cfi_startproc
 15581              		@ args = 0, pretend = 0, frame = 32
 15582              		@ frame_needed = 1, uses_anonymous_args = 0
 15583 0000 00482DE9 		push	{fp, lr}
 15584              		.cfi_def_cfa_offset 8
 15585              		.cfi_offset 11, -8
 15586              		.cfi_offset 14, -4
 15587 0004 04B08DE2 		add	fp, sp, #4
 15588              		.cfi_def_cfa 11, 4
 15589 0008 20D04DE2 		sub	sp, sp, #32
 15590 000c 20000BE5 		str	r0, [fp, #-32]
 15591 0010 24100BE5 		str	r1, [fp, #-36]
6103:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Op;
6104:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Scheduler;
6105:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
6106:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6107:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Flag;
6108:../../Source/Kernel/rme_kernel.c ****     
6109:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
6110:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd,RME_CAP_TYPE_THD,
 15592              		.loc 1 6110 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 382


 15593 0014 24301BE5 		ldr	r3, [fp, #-36]
 15594 0018 803003E2 		and	r3, r3, #128
 15595 001c 000053E3 		cmp	r3, #0
 15596 0020 1C00001A 		bne	.L1001
 15597              		.loc 1 6110 5 is_stmt 0 discriminator 1
 15598 0024 20301BE5 		ldr	r3, [fp, #-32]
 15599 0028 142093E5 		ldr	r2, [r3, #20]
 15600 002c 24301BE5 		ldr	r3, [fp, #-36]
 15601 0030 030052E1 		cmp	r2, r3
 15602 0034 0100008A 		bhi	.L1002
 15603              		.loc 1 6110 5 discriminator 3
 15604 0038 0230E0E3 		mvn	r3, #2
 15605              		.loc 1 6110 5
 15606 003c 970000EA 		b	.L1003
 15607              	.L1002:
 15608              		.loc 1 6110 5 discriminator 4
 15609 0040 24301BE5 		ldr	r3, [fp, #-36]
 15610 0044 8322A0E1 		lsl	r2, r3, #5
 15611 0048 20301BE5 		ldr	r3, [fp, #-32]
 15612 004c 0C3093E5 		ldr	r3, [r3, #12]
 15613 0050 033082E0 		add	r3, r2, r3
 15614 0054 08300BE5 		str	r3, [fp, #-8]
 15615 0058 08301BE5 		ldr	r3, [fp, #-8]
 15616 005c 0300A0E1 		mov	r0, r3
 15617 0060 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15618 0064 10000BE5 		str	r0, [fp, #-16]
 15619              		.loc 1 6110 5 discriminator 1
 15620 0068 10301BE5 		ldr	r3, [fp, #-16]
 15621 006c FF3803E2 		and	r3, r3, #16711680
 15622 0070 020853E3 		cmp	r3, #131072
 15623 0074 0100001A 		bne	.L1004
 15624              		.loc 1 6110 5 discriminator 5
 15625 0078 0830E0E3 		mvn	r3, #8
 15626              		.loc 1 6110 5
 15627 007c 870000EA 		b	.L1003
 15628              	.L1004:
 15629              		.loc 1 6110 5 discriminator 6
 15630 0080 10301BE5 		ldr	r3, [fp, #-16]
 15631 0084 233CA0E1 		lsr	r3, r3, #24
 15632 0088 060053E3 		cmp	r3, #6
 15633 008c 3F00000A 		beq	.L1005
 15634              		.loc 1 6110 5 discriminator 7
 15635 0090 0130E0E3 		mvn	r3, #1
 15636              		.loc 1 6110 5
 15637 0094 810000EA 		b	.L1003
 15638              	.L1001:
 15639              		.loc 1 6110 5 discriminator 2
 15640 0098 24301BE5 		ldr	r3, [fp, #-36]
 15641 009c 2324A0E1 		lsr	r2, r3, #8
 15642 00a0 20301BE5 		ldr	r3, [fp, #-32]
 15643 00a4 143093E5 		ldr	r3, [r3, #20]
 15644 00a8 030052E1 		cmp	r2, r3
 15645 00ac 0100003A 		bcc	.L1006
 15646              		.loc 1 6110 5 discriminator 8
 15647 00b0 0230E0E3 		mvn	r3, #2
 15648              		.loc 1 6110 5
 15649 00b4 790000EA 		b	.L1003
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 383


 15650              	.L1006:
 15651              		.loc 1 6110 5 discriminator 9
 15652 00b8 24301BE5 		ldr	r3, [fp, #-36]
 15653 00bc 2334A0E1 		lsr	r3, r3, #8
 15654 00c0 8322A0E1 		lsl	r2, r3, #5
 15655 00c4 20301BE5 		ldr	r3, [fp, #-32]
 15656 00c8 0C3093E5 		ldr	r3, [r3, #12]
 15657 00cc 033082E0 		add	r3, r2, r3
 15658 00d0 08300BE5 		str	r3, [fp, #-8]
 15659 00d4 08301BE5 		ldr	r3, [fp, #-8]
 15660 00d8 0300A0E1 		mov	r0, r3
 15661 00dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15662 00e0 10000BE5 		str	r0, [fp, #-16]
 15663              		.loc 1 6110 5 discriminator 1
 15664 00e4 10301BE5 		ldr	r3, [fp, #-16]
 15665 00e8 FF3803E2 		and	r3, r3, #16711680
 15666 00ec 020853E3 		cmp	r3, #131072
 15667 00f0 0100001A 		bne	.L1007
 15668              		.loc 1 6110 5 discriminator 10
 15669 00f4 0830E0E3 		mvn	r3, #8
 15670              		.loc 1 6110 5
 15671 00f8 680000EA 		b	.L1003
 15672              	.L1007:
 15673              		.loc 1 6110 5 discriminator 11
 15674 00fc 10301BE5 		ldr	r3, [fp, #-16]
 15675 0100 233CA0E1 		lsr	r3, r3, #24
 15676 0104 030053E3 		cmp	r3, #3
 15677 0108 0100000A 		beq	.L1008
 15678              		.loc 1 6110 5 discriminator 12
 15679 010c 0130E0E3 		mvn	r3, #1
 15680              		.loc 1 6110 5
 15681 0110 620000EA 		b	.L1003
 15682              	.L1008:
 15683              		.loc 1 6110 5 discriminator 13
 15684 0114 24301BE5 		ldr	r3, [fp, #-36]
 15685 0118 7F2003E2 		and	r2, r3, #127
 15686 011c 08301BE5 		ldr	r3, [fp, #-8]
 15687 0120 143093E5 		ldr	r3, [r3, #20]
 15688 0124 030052E1 		cmp	r2, r3
 15689 0128 0100003A 		bcc	.L1009
 15690              		.loc 1 6110 5 discriminator 14
 15691 012c 0230E0E3 		mvn	r3, #2
 15692              		.loc 1 6110 5
 15693 0130 5A0000EA 		b	.L1003
 15694              	.L1009:
 15695              		.loc 1 6110 5 discriminator 15
 15696 0134 24301BE5 		ldr	r3, [fp, #-36]
 15697 0138 7F3003E2 		and	r3, r3, #127
 15698 013c 8322A0E1 		lsl	r2, r3, #5
 15699 0140 08301BE5 		ldr	r3, [fp, #-8]
 15700 0144 0C3093E5 		ldr	r3, [r3, #12]
 15701 0148 033082E0 		add	r3, r2, r3
 15702 014c 08300BE5 		str	r3, [fp, #-8]
 15703 0150 08301BE5 		ldr	r3, [fp, #-8]
 15704 0154 0300A0E1 		mov	r0, r3
 15705 0158 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15706 015c 10000BE5 		str	r0, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 384


 15707              		.loc 1 6110 5 discriminator 1
 15708 0160 10301BE5 		ldr	r3, [fp, #-16]
 15709 0164 FF3803E2 		and	r3, r3, #16711680
 15710 0168 020853E3 		cmp	r3, #131072
 15711 016c 0100001A 		bne	.L1010
 15712              		.loc 1 6110 5 discriminator 16
 15713 0170 0830E0E3 		mvn	r3, #8
 15714              		.loc 1 6110 5
 15715 0174 490000EA 		b	.L1003
 15716              	.L1010:
 15717              		.loc 1 6110 5 discriminator 17
 15718 0178 10301BE5 		ldr	r3, [fp, #-16]
 15719 017c 233CA0E1 		lsr	r3, r3, #24
 15720 0180 060053E3 		cmp	r3, #6
 15721 0184 0100000A 		beq	.L1005
 15722              		.loc 1 6110 5 discriminator 18
 15723 0188 0130E0E3 		mvn	r3, #1
 15724              		.loc 1 6110 5
 15725 018c 430000EA 		b	.L1003
 15726              	.L1005:
6111:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Op,Type_Stat);
6112:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
6113:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Op,RME_THD_FLAG_SCHED_RCV);
 15727              		.loc 1 6113 5 is_stmt 1
 15728 0190 08301BE5 		ldr	r3, [fp, #-8]
 15729 0194 083093E5 		ldr	r3, [r3, #8]
 15730 0198 203003E2 		and	r3, r3, #32
 15731 019c 000053E3 		cmp	r3, #0
 15732 01a0 0100001A 		bne	.L1011
 15733              		.loc 1 6113 5 is_stmt 0 discriminator 1
 15734 01a4 0630E0E3 		mvn	r3, #6
 15735              		.loc 1 6113 5
 15736 01a8 3C0000EA 		b	.L1003
 15737              	.L1011:
6114:../../Source/Kernel/rme_kernel.c ****     
6115:../../Source/Kernel/rme_kernel.c ****     /* Check if we are on the same core with the target thread */
6116:../../Source/Kernel/rme_kernel.c ****     Scheduler=(struct RME_Thd_Struct*)Thd_Op->Head.Object;
 15738              		.loc 1 6116 51 is_stmt 1
 15739 01ac 08301BE5 		ldr	r3, [fp, #-8]
 15740 01b0 0C3093E5 		ldr	r3, [r3, #12]
 15741              		.loc 1 6116 14
 15742 01b4 14300BE5 		str	r3, [fp, #-20]
6117:../../Source/Kernel/rme_kernel.c ****     if(Scheduler->Sched.Local!=RME_CPU_LOCAL())
 15743              		.loc 1 6117 24
 15744 01b8 14301BE5 		ldr	r3, [fp, #-20]
 15745 01bc 142093E5 		ldr	r2, [r3, #20]
 15746              		.loc 1 6117 7
 15747 01c0 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 15748 01c4 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 15749 01c8 030052E1 		cmp	r2, r3
 15750 01cc 0100000A 		beq	.L1012
6118:../../Source/Kernel/rme_kernel.c ****     {
6119:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6120:../../Source/Kernel/rme_kernel.c **** 
6121:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 15751              		.loc 1 6121 16
 15752 01d0 CB30E0E3 		mvn	r3, #203
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 385


 15753 01d4 310000EA 		b	.L1003
 15754              	.L1012:
6122:../../Source/Kernel/rme_kernel.c ****     }
6123:../../Source/Kernel/rme_kernel.c ****     else
6124:../../Source/Kernel/rme_kernel.c ****     {
6125:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6126:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6127:../../Source/Kernel/rme_kernel.c ****     }
6128:../../Source/Kernel/rme_kernel.c ****     
6129:../../Source/Kernel/rme_kernel.c ****     /* Check if there are any notifications */
6130:../../Source/Kernel/rme_kernel.c ****     if(Scheduler->Sched.Event.Next==&(Scheduler->Sched.Event))
 15755              		.loc 1 6130 30
 15756 01d8 14301BE5 		ldr	r3, [fp, #-20]
 15757 01dc 3C2093E5 		ldr	r2, [r3, #60]
 15758              		.loc 1 6130 37
 15759 01e0 14301BE5 		ldr	r3, [fp, #-20]
 15760 01e4 3C3083E2 		add	r3, r3, #60
 15761              		.loc 1 6130 7
 15762 01e8 030052E1 		cmp	r2, r3
 15763 01ec 0100001A 		bne	.L1013
6131:../../Source/Kernel/rme_kernel.c ****     {
6132:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6133:../../Source/Kernel/rme_kernel.c **** 
6134:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_NOTIF;
 15764              		.loc 1 6134 16
 15765 01f0 CE30E0E3 		mvn	r3, #206
 15766 01f4 290000EA 		b	.L1003
 15767              	.L1013:
6135:../../Source/Kernel/rme_kernel.c ****     }
6136:../../Source/Kernel/rme_kernel.c ****     else
6137:../../Source/Kernel/rme_kernel.c ****     {
6138:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6139:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6140:../../Source/Kernel/rme_kernel.c ****     }
6141:../../Source/Kernel/rme_kernel.c ****     
6142:../../Source/Kernel/rme_kernel.c ****     /* Return one notification and delete it from the notification list */
6143:../../Source/Kernel/rme_kernel.c ****     Thread=(struct RME_Thd_Struct*)(Scheduler->Sched.Event.Next-1U);
 15768              		.loc 1 6143 59
 15769 01f8 14301BE5 		ldr	r3, [fp, #-20]
 15770 01fc 3C3093E5 		ldr	r3, [r3, #60]
 15771              		.loc 1 6143 11
 15772 0200 083043E2 		sub	r3, r3, #8
 15773 0204 18300BE5 		str	r3, [fp, #-24]
6144:../../Source/Kernel/rme_kernel.c ****     _RME_List_Del(Thread->Sched.Notif.Prev,Thread->Sched.Notif.Next);
 15774              		.loc 1 6144 5
 15775 0208 18301BE5 		ldr	r3, [fp, #-24]
 15776 020c 0C2093E5 		ldr	r2, [r3, #12]
 15777 0210 18301BE5 		ldr	r3, [fp, #-24]
 15778 0214 083093E5 		ldr	r3, [r3, #8]
 15779 0218 0310A0E1 		mov	r1, r3
 15780 021c 0200A0E1 		mov	r0, r2
 15781 0220 FEFFFFEB 		bl	_RME_List_Del
6145:../../Source/Kernel/rme_kernel.c ****     /* We need to do this because we are using this to detect whether the notification is sent */
6146:../../Source/Kernel/rme_kernel.c ****     _RME_List_Crt(&(Thread->Sched.Notif));
 15782              		.loc 1 6146 5
 15783 0224 18301BE5 		ldr	r3, [fp, #-24]
 15784 0228 083083E2 		add	r3, r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 386


 15785 022c 0300A0E1 		mov	r0, r3
 15786 0230 FEFFFFEB 		bl	_RME_List_Crt
6147:../../Source/Kernel/rme_kernel.c ****     
6148:../../Source/Kernel/rme_kernel.c ****     /* Exception pending */
6149:../../Source/Kernel/rme_kernel.c ****     if(Thread->Sched.State==RME_THD_EXCPEND)
 15787              		.loc 1 6149 21
 15788 0234 18301BE5 		ldr	r3, [fp, #-24]
 15789 0238 1C3093E5 		ldr	r3, [r3, #28]
 15790              		.loc 1 6149 7
 15791 023c 030053E3 		cmp	r3, #3
 15792 0240 0900001A 		bne	.L1014
6150:../../Source/Kernel/rme_kernel.c ****     {
6151:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6152:../../Source/Kernel/rme_kernel.c ****         
6153:../../Source/Kernel/rme_kernel.c ****         Flag=RME_THD_EXCPEND_FLAG;
 15793              		.loc 1 6153 13
 15794 0244 0131A0E3 		mov	r3, #1073741824
 15795 0248 0C300BE5 		str	r3, [fp, #-12]
6154:../../Source/Kernel/rme_kernel.c ****         
6155:../../Source/Kernel/rme_kernel.c ****         /* Is it also out of timeslice? */
6156:../../Source/Kernel/rme_kernel.c ****         if(Thread->Sched.Slice==0U)
 15796              		.loc 1 6156 25
 15797 024c 18301BE5 		ldr	r3, [fp, #-24]
 15798 0250 183093E5 		ldr	r3, [r3, #24]
 15799              		.loc 1 6156 11
 15800 0254 000053E3 		cmp	r3, #0
 15801 0258 0C00001A 		bne	.L1015
6157:../../Source/Kernel/rme_kernel.c ****         {
6158:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6159:../../Source/Kernel/rme_kernel.c ****             
6160:../../Source/Kernel/rme_kernel.c ****             Flag|=RME_THD_TIMEOUT_FLAG;
 15802              		.loc 1 6160 17
 15803 025c 0C301BE5 		ldr	r3, [fp, #-12]
 15804 0260 023283E3 		orr	r3, r3, #536870912
 15805 0264 0C300BE5 		str	r3, [fp, #-12]
 15806 0268 080000EA 		b	.L1015
 15807              	.L1014:
6161:../../Source/Kernel/rme_kernel.c ****         }
6162:../../Source/Kernel/rme_kernel.c ****         else
6163:../../Source/Kernel/rme_kernel.c ****         {
6164:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6165:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6166:../../Source/Kernel/rme_kernel.c ****         }
6167:../../Source/Kernel/rme_kernel.c ****     }
6168:../../Source/Kernel/rme_kernel.c ****     /* Timeout */
6169:../../Source/Kernel/rme_kernel.c ****     else if(Thread->Sched.State==RME_THD_TIMEOUT)
 15808              		.loc 1 6169 26
 15809 026c 18301BE5 		ldr	r3, [fp, #-24]
 15810 0270 1C3093E5 		ldr	r3, [r3, #28]
 15811              		.loc 1 6169 12
 15812 0274 020053E3 		cmp	r3, #2
 15813 0278 0200001A 		bne	.L1016
6170:../../Source/Kernel/rme_kernel.c ****     {
6171:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6172:../../Source/Kernel/rme_kernel.c ****         
6173:../../Source/Kernel/rme_kernel.c ****         Flag=RME_THD_TIMEOUT_FLAG;
 15814              		.loc 1 6173 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 387


 15815 027c 0232A0E3 		mov	r3, #536870912
 15816 0280 0C300BE5 		str	r3, [fp, #-12]
 15817 0284 010000EA 		b	.L1015
 15818              	.L1016:
6174:../../Source/Kernel/rme_kernel.c ****     }
6175:../../Source/Kernel/rme_kernel.c ****     /* Spurious notification, cause eliminated before this sched rcv */
6176:../../Source/Kernel/rme_kernel.c ****     else
6177:../../Source/Kernel/rme_kernel.c ****     {
6178:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6179:../../Source/Kernel/rme_kernel.c ****         
6180:../../Source/Kernel/rme_kernel.c ****         Flag=0U;
 15819              		.loc 1 6180 13
 15820 0288 0030A0E3 		mov	r3, #0
 15821 028c 0C300BE5 		str	r3, [fp, #-12]
 15822              	.L1015:
6181:../../Source/Kernel/rme_kernel.c ****     }
6182:../../Source/Kernel/rme_kernel.c ****     
6183:../../Source/Kernel/rme_kernel.c ****     /* Return the notification TID with the flags */
6184:../../Source/Kernel/rme_kernel.c ****     return (rme_ret_t)(Thread->Sched.TID|Flag);
 15823              		.loc 1 6184 37
 15824 0290 18301BE5 		ldr	r3, [fp, #-24]
 15825 0294 102093E5 		ldr	r2, [r3, #16]
 15826              		.loc 1 6184 41
 15827 0298 0C301BE5 		ldr	r3, [fp, #-12]
 15828 029c 033082E1 		orr	r3, r2, r3
 15829              	.L1003:
6185:../../Source/Kernel/rme_kernel.c **** }
 15830              		.loc 1 6185 1
 15831 02a0 0300A0E1 		mov	r0, r3
 15832 02a4 04D04BE2 		sub	sp, fp, #4
 15833              		.cfi_def_cfa 13, 8
 15834              		@ sp needed
 15835 02a8 0088BDE8 		pop	{fp, pc}
 15836              		.cfi_endproc
 15837              	.LFE62:
 15839              		.section	.text._RME_Thd_Time_Xfer,"ax",%progbits
 15840              		.align	2
 15841              		.syntax unified
 15842              		.arm
 15844              	_RME_Thd_Time_Xfer:
 15845              	.LFB63:
6186:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Sched_Rcv *******************************************/
6187:../../Source/Kernel/rme_kernel.c **** 
6188:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Time_Xfer ************************************************
6189:../../Source/Kernel/rme_kernel.c **** Description : Transfer time from one thread to another. This can only be called
6190:../../Source/Kernel/rme_kernel.c ****               from the core that the thread is on, and the the two threads
6191:../../Source/Kernel/rme_kernel.c ****               involved in the time transfer must be on the same core.
6192:../../Source/Kernel/rme_kernel.c ****               If the time transfered is more than or equal to what the source
6193:../../Source/Kernel/rme_kernel.c ****               have, the source will be out of time or blocked. If the source is
6194:../../Source/Kernel/rme_kernel.c ****               both out of time and blocked, we do not send the notification;
6195:../../Source/Kernel/rme_kernel.c ****               Instead, we send the notification when the receive endpoint
6196:../../Source/Kernel/rme_kernel.c ****               actually receive something.
6197:../../Source/Kernel/rme_kernel.c ****               It is possible to transfer time to threads have a lower priority,
6198:../../Source/Kernel/rme_kernel.c ****               and it is also possible to transfer time to threads that have a
6199:../../Source/Kernel/rme_kernel.c ****               higher priority. In the latter case, and if the source is
6200:../../Source/Kernel/rme_kernel.c ****               currently running, a preemption will occur. However, it is not
6201:../../Source/Kernel/rme_kernel.c ****               allowed to transfer time to a thread with higher maximum priority,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 388


6202:../../Source/Kernel/rme_kernel.c ****               and this guarantees that the quality of time can only degrade.
6203:../../Source/Kernel/rme_kernel.c ****               There are 3 kinds of threads in the system:
6204:../../Source/Kernel/rme_kernel.c ****               1. Init threads - They are created at boot-time and have infinite
6205:../../Source/Kernel/rme_kernel.c ****                                 budget.
6206:../../Source/Kernel/rme_kernel.c ****               2. Infinite threads - They are created later but have infinite
6207:../../Source/Kernel/rme_kernel.c ****                                     budget.
6208:../../Source/Kernel/rme_kernel.c ****               3. Normal threads - They are created later and have a finite
6209:../../Source/Kernel/rme_kernel.c ****                                   budget.
6210:../../Source/Kernel/rme_kernel.c ****               There are 3 kinds of transfer in the system:
6211:../../Source/Kernel/rme_kernel.c ****               1. Normal transfers - They transfer a finite budget.
6212:../../Source/Kernel/rme_kernel.c ****               2. Infinite transfers - They attempt to transfer an infinite
6213:../../Source/Kernel/rme_kernel.c ****                                       budget but will not revoke the timeslices
6214:../../Source/Kernel/rme_kernel.c ****                                       of the source if the source have infinite
6215:../../Source/Kernel/rme_kernel.c ****                                       budget.
6216:../../Source/Kernel/rme_kernel.c ****               3. Revoking transfers - They attempt to transfer an infinite
6217:../../Source/Kernel/rme_kernel.c ****                                       budget but will revoke the timeslices of
6218:../../Source/Kernel/rme_kernel.c ****                                       the source if the source is an infinite
6219:../../Source/Kernel/rme_kernel.c ****                                       thread.
6220:../../Source/Kernel/rme_kernel.c ****               Normal budget transferring rules:
6221:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6222:../../Source/Kernel/rme_kernel.c ****                 Nom   |   From   |     Init     |   Infinite   |    Normal
6223:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6224:../../Source/Kernel/rme_kernel.c ****                  To   |   Init   |      --      |      --      |      T-
6225:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6226:../../Source/Kernel/rme_kernel.c ****                       | Infinite |      --      |      --      |      T-
6227:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6228:../../Source/Kernel/rme_kernel.c ****                       |  Normal  |      -A      |      -A      |      TA
6229:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6230:../../Source/Kernel/rme_kernel.c ****               Infinite budget transferring rules:
6231:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6232:../../Source/Kernel/rme_kernel.c ****                 Inf   |   From   |     Init     |   Infinite   |    Normal
6233:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6234:../../Source/Kernel/rme_kernel.c ****                  To   |   Init   |      --      |      --      |      S-
6235:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6236:../../Source/Kernel/rme_kernel.c ****                       | Infinite |      --      |      --      |      S-
6237:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6238:../../Source/Kernel/rme_kernel.c ****                       |  Normal  |      -I      |      -I      |      TA
6239:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6240:../../Source/Kernel/rme_kernel.c ****               Revoking budget transferring rules:
6241:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6242:../../Source/Kernel/rme_kernel.c ****                 Rev   |   From   |     Init     |   Infinite   |    Normal
6243:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6244:../../Source/Kernel/rme_kernel.c ****                  To   |   Init   |      --      |      S-      |      S-
6245:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6246:../../Source/Kernel/rme_kernel.c ****                       | Infinite |      --      |      S-      |      S-
6247:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6248:../../Source/Kernel/rme_kernel.c ****                       |  Normal  |      -I      |      SI      |      TA
6249:../../Source/Kernel/rme_kernel.c ****               -----------------------------------------------------------------
6250:../../Source/Kernel/rme_kernel.c ****               Notations:
6251:../../Source/Kernel/rme_kernel.c ****               -:Nothing will happen on source/destination.
6252:../../Source/Kernel/rme_kernel.c ****               T:Source timeout if all transferred.
6253:../../Source/Kernel/rme_kernel.c ****               S:Source will definitely timeout.
6254:../../Source/Kernel/rme_kernel.c ****               A:Destination accept if not overflow.
6255:../../Source/Kernel/rme_kernel.c ****               I:Destination will definitely become an infinite thread.
6256:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
6257:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
6258:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd_Dst - The destination thread.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 389


6259:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
6260:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd_Src - The source thread.
6261:../../Source/Kernel/rme_kernel.c ****                                       2-Level.
6262:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Time - The time to transfer, in slices.
6263:../../Source/Kernel/rme_kernel.c ****                                Use RME_THD_INIT_TIME for revoking transfer.
6264:../../Source/Kernel/rme_kernel.c ****                                Use RME_THD_INF_TIME for infinite trasnfer.
6265:../../Source/Kernel/rme_kernel.c **** Output      : None.
6266:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, the destination time amount; or an
6267:../../Source/Kernel/rme_kernel.c ****                           error code.
6268:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6269:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Time_Xfer(struct RME_Cap_Cpt* Cpt,
6270:../../Source/Kernel/rme_kernel.c ****                                     struct RME_Reg_Struct* Reg,
6271:../../Source/Kernel/rme_kernel.c ****                                     rme_cid_t Cap_Thd_Dst,
6272:../../Source/Kernel/rme_kernel.c ****                                     rme_cid_t Cap_Thd_Src,
6273:../../Source/Kernel/rme_kernel.c ****                                     rme_ptr_t Time)
6274:../../Source/Kernel/rme_kernel.c **** {
 15846              		.loc 1 6274 1
 15847              		.cfi_startproc
 15848              		@ args = 4, pretend = 0, frame = 48
 15849              		@ frame_needed = 1, uses_anonymous_args = 0
 15850 0000 00482DE9 		push	{fp, lr}
 15851              		.cfi_def_cfa_offset 8
 15852              		.cfi_offset 11, -8
 15853              		.cfi_offset 14, -4
 15854 0004 04B08DE2 		add	fp, sp, #4
 15855              		.cfi_def_cfa 11, 4
 15856 0008 30D04DE2 		sub	sp, sp, #48
 15857 000c 28000BE5 		str	r0, [fp, #-40]
 15858 0010 2C100BE5 		str	r1, [fp, #-44]
 15859 0014 30200BE5 		str	r2, [fp, #-48]
 15860 0018 34300BE5 		str	r3, [fp, #-52]
6275:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Dst_Op;
6276:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Src_Op;
6277:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Dst;
6278:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Src;
6279:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
6280:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Time_Xfer;
6281:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6282:../../Source/Kernel/rme_kernel.c ****     
6283:../../Source/Kernel/rme_kernel.c ****     /* We may allow transferring infinite time here */
6284:../../Source/Kernel/rme_kernel.c ****     if(Time==0U)
 15861              		.loc 1 6284 7
 15862 001c 04309BE5 		ldr	r3, [fp, #4]
 15863 0020 000053E3 		cmp	r3, #0
 15864 0024 0100001A 		bne	.L1018
6285:../../Source/Kernel/rme_kernel.c ****     {
6286:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6287:../../Source/Kernel/rme_kernel.c **** 
6288:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 15865              		.loc 1 6288 16
 15866 0028 CB30E0E3 		mvn	r3, #203
 15867 002c 770100EA 		b	.L1019
 15868              	.L1018:
6289:../../Source/Kernel/rme_kernel.c ****     }
6290:../../Source/Kernel/rme_kernel.c ****     else
6291:../../Source/Kernel/rme_kernel.c ****     {
6292:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 390


6293:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6294:../../Source/Kernel/rme_kernel.c ****     }
6295:../../Source/Kernel/rme_kernel.c ****     
6296:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
6297:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd_Dst,RME_CAP_TYPE_THD,
 15869              		.loc 1 6297 5
 15870 0030 30301BE5 		ldr	r3, [fp, #-48]
 15871 0034 803003E2 		and	r3, r3, #128
 15872 0038 000053E3 		cmp	r3, #0
 15873 003c 1C00001A 		bne	.L1020
 15874              		.loc 1 6297 5 is_stmt 0 discriminator 1
 15875 0040 28301BE5 		ldr	r3, [fp, #-40]
 15876 0044 142093E5 		ldr	r2, [r3, #20]
 15877 0048 30301BE5 		ldr	r3, [fp, #-48]
 15878 004c 030052E1 		cmp	r2, r3
 15879 0050 0100008A 		bhi	.L1021
 15880              		.loc 1 6297 5 discriminator 3
 15881 0054 0230E0E3 		mvn	r3, #2
 15882              		.loc 1 6297 5
 15883 0058 6C0100EA 		b	.L1019
 15884              	.L1021:
 15885              		.loc 1 6297 5 discriminator 4
 15886 005c 30301BE5 		ldr	r3, [fp, #-48]
 15887 0060 8322A0E1 		lsl	r2, r3, #5
 15888 0064 28301BE5 		ldr	r3, [fp, #-40]
 15889 0068 0C3093E5 		ldr	r3, [r3, #12]
 15890 006c 033082E0 		add	r3, r2, r3
 15891 0070 08300BE5 		str	r3, [fp, #-8]
 15892 0074 08301BE5 		ldr	r3, [fp, #-8]
 15893 0078 0300A0E1 		mov	r0, r3
 15894 007c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15895 0080 14000BE5 		str	r0, [fp, #-20]
 15896              		.loc 1 6297 5 discriminator 1
 15897 0084 14301BE5 		ldr	r3, [fp, #-20]
 15898 0088 FF3803E2 		and	r3, r3, #16711680
 15899 008c 020853E3 		cmp	r3, #131072
 15900 0090 0100001A 		bne	.L1022
 15901              		.loc 1 6297 5 discriminator 5
 15902 0094 0830E0E3 		mvn	r3, #8
 15903              		.loc 1 6297 5
 15904 0098 5C0100EA 		b	.L1019
 15905              	.L1022:
 15906              		.loc 1 6297 5 discriminator 6
 15907 009c 14301BE5 		ldr	r3, [fp, #-20]
 15908 00a0 233CA0E1 		lsr	r3, r3, #24
 15909 00a4 060053E3 		cmp	r3, #6
 15910 00a8 3F00000A 		beq	.L1023
 15911              		.loc 1 6297 5 discriminator 7
 15912 00ac 0130E0E3 		mvn	r3, #1
 15913              		.loc 1 6297 5
 15914 00b0 560100EA 		b	.L1019
 15915              	.L1020:
 15916              		.loc 1 6297 5 discriminator 2
 15917 00b4 30301BE5 		ldr	r3, [fp, #-48]
 15918 00b8 2324A0E1 		lsr	r2, r3, #8
 15919 00bc 28301BE5 		ldr	r3, [fp, #-40]
 15920 00c0 143093E5 		ldr	r3, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 391


 15921 00c4 030052E1 		cmp	r2, r3
 15922 00c8 0100003A 		bcc	.L1024
 15923              		.loc 1 6297 5 discriminator 8
 15924 00cc 0230E0E3 		mvn	r3, #2
 15925              		.loc 1 6297 5
 15926 00d0 4E0100EA 		b	.L1019
 15927              	.L1024:
 15928              		.loc 1 6297 5 discriminator 9
 15929 00d4 30301BE5 		ldr	r3, [fp, #-48]
 15930 00d8 2334A0E1 		lsr	r3, r3, #8
 15931 00dc 8322A0E1 		lsl	r2, r3, #5
 15932 00e0 28301BE5 		ldr	r3, [fp, #-40]
 15933 00e4 0C3093E5 		ldr	r3, [r3, #12]
 15934 00e8 033082E0 		add	r3, r2, r3
 15935 00ec 08300BE5 		str	r3, [fp, #-8]
 15936 00f0 08301BE5 		ldr	r3, [fp, #-8]
 15937 00f4 0300A0E1 		mov	r0, r3
 15938 00f8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15939 00fc 14000BE5 		str	r0, [fp, #-20]
 15940              		.loc 1 6297 5 discriminator 1
 15941 0100 14301BE5 		ldr	r3, [fp, #-20]
 15942 0104 FF3803E2 		and	r3, r3, #16711680
 15943 0108 020853E3 		cmp	r3, #131072
 15944 010c 0100001A 		bne	.L1025
 15945              		.loc 1 6297 5 discriminator 10
 15946 0110 0830E0E3 		mvn	r3, #8
 15947              		.loc 1 6297 5
 15948 0114 3D0100EA 		b	.L1019
 15949              	.L1025:
 15950              		.loc 1 6297 5 discriminator 11
 15951 0118 14301BE5 		ldr	r3, [fp, #-20]
 15952 011c 233CA0E1 		lsr	r3, r3, #24
 15953 0120 030053E3 		cmp	r3, #3
 15954 0124 0100000A 		beq	.L1026
 15955              		.loc 1 6297 5 discriminator 12
 15956 0128 0130E0E3 		mvn	r3, #1
 15957              		.loc 1 6297 5
 15958 012c 370100EA 		b	.L1019
 15959              	.L1026:
 15960              		.loc 1 6297 5 discriminator 13
 15961 0130 30301BE5 		ldr	r3, [fp, #-48]
 15962 0134 7F2003E2 		and	r2, r3, #127
 15963 0138 08301BE5 		ldr	r3, [fp, #-8]
 15964 013c 143093E5 		ldr	r3, [r3, #20]
 15965 0140 030052E1 		cmp	r2, r3
 15966 0144 0100003A 		bcc	.L1027
 15967              		.loc 1 6297 5 discriminator 14
 15968 0148 0230E0E3 		mvn	r3, #2
 15969              		.loc 1 6297 5
 15970 014c 2F0100EA 		b	.L1019
 15971              	.L1027:
 15972              		.loc 1 6297 5 discriminator 15
 15973 0150 30301BE5 		ldr	r3, [fp, #-48]
 15974 0154 7F3003E2 		and	r3, r3, #127
 15975 0158 8322A0E1 		lsl	r2, r3, #5
 15976 015c 08301BE5 		ldr	r3, [fp, #-8]
 15977 0160 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 392


 15978 0164 033082E0 		add	r3, r2, r3
 15979 0168 08300BE5 		str	r3, [fp, #-8]
 15980 016c 08301BE5 		ldr	r3, [fp, #-8]
 15981 0170 0300A0E1 		mov	r0, r3
 15982 0174 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 15983 0178 14000BE5 		str	r0, [fp, #-20]
 15984              		.loc 1 6297 5 discriminator 1
 15985 017c 14301BE5 		ldr	r3, [fp, #-20]
 15986 0180 FF3803E2 		and	r3, r3, #16711680
 15987 0184 020853E3 		cmp	r3, #131072
 15988 0188 0100001A 		bne	.L1028
 15989              		.loc 1 6297 5 discriminator 16
 15990 018c 0830E0E3 		mvn	r3, #8
 15991              		.loc 1 6297 5
 15992 0190 1E0100EA 		b	.L1019
 15993              	.L1028:
 15994              		.loc 1 6297 5 discriminator 17
 15995 0194 14301BE5 		ldr	r3, [fp, #-20]
 15996 0198 233CA0E1 		lsr	r3, r3, #24
 15997 019c 060053E3 		cmp	r3, #6
 15998 01a0 0100000A 		beq	.L1023
 15999              		.loc 1 6297 5 discriminator 18
 16000 01a4 0130E0E3 		mvn	r3, #1
 16001              		.loc 1 6297 5
 16002 01a8 180100EA 		b	.L1019
 16003              	.L1023:
6298:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Dst_Op,Type_Stat);
6299:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Thd_Src,RME_CAP_TYPE_THD,
 16004              		.loc 1 6299 5 is_stmt 1
 16005 01ac 34301BE5 		ldr	r3, [fp, #-52]
 16006 01b0 803003E2 		and	r3, r3, #128
 16007 01b4 000053E3 		cmp	r3, #0
 16008 01b8 1C00001A 		bne	.L1029
 16009              		.loc 1 6299 5 is_stmt 0 discriminator 1
 16010 01bc 28301BE5 		ldr	r3, [fp, #-40]
 16011 01c0 142093E5 		ldr	r2, [r3, #20]
 16012 01c4 34301BE5 		ldr	r3, [fp, #-52]
 16013 01c8 030052E1 		cmp	r2, r3
 16014 01cc 0100008A 		bhi	.L1030
 16015              		.loc 1 6299 5 discriminator 3
 16016 01d0 0230E0E3 		mvn	r3, #2
 16017              		.loc 1 6299 5
 16018 01d4 0D0100EA 		b	.L1019
 16019              	.L1030:
 16020              		.loc 1 6299 5 discriminator 4
 16021 01d8 34301BE5 		ldr	r3, [fp, #-52]
 16022 01dc 8322A0E1 		lsl	r2, r3, #5
 16023 01e0 28301BE5 		ldr	r3, [fp, #-40]
 16024 01e4 0C3093E5 		ldr	r3, [r3, #12]
 16025 01e8 033082E0 		add	r3, r2, r3
 16026 01ec 0C300BE5 		str	r3, [fp, #-12]
 16027 01f0 0C301BE5 		ldr	r3, [fp, #-12]
 16028 01f4 0300A0E1 		mov	r0, r3
 16029 01f8 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16030 01fc 14000BE5 		str	r0, [fp, #-20]
 16031              		.loc 1 6299 5 discriminator 1
 16032 0200 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 393


 16033 0204 FF3803E2 		and	r3, r3, #16711680
 16034 0208 020853E3 		cmp	r3, #131072
 16035 020c 0100001A 		bne	.L1031
 16036              		.loc 1 6299 5 discriminator 5
 16037 0210 0830E0E3 		mvn	r3, #8
 16038              		.loc 1 6299 5
 16039 0214 FD0000EA 		b	.L1019
 16040              	.L1031:
 16041              		.loc 1 6299 5 discriminator 6
 16042 0218 14301BE5 		ldr	r3, [fp, #-20]
 16043 021c 233CA0E1 		lsr	r3, r3, #24
 16044 0220 060053E3 		cmp	r3, #6
 16045 0224 3F00000A 		beq	.L1032
 16046              		.loc 1 6299 5 discriminator 7
 16047 0228 0130E0E3 		mvn	r3, #1
 16048              		.loc 1 6299 5
 16049 022c F70000EA 		b	.L1019
 16050              	.L1029:
 16051              		.loc 1 6299 5 discriminator 2
 16052 0230 34301BE5 		ldr	r3, [fp, #-52]
 16053 0234 2324A0E1 		lsr	r2, r3, #8
 16054 0238 28301BE5 		ldr	r3, [fp, #-40]
 16055 023c 143093E5 		ldr	r3, [r3, #20]
 16056 0240 030052E1 		cmp	r2, r3
 16057 0244 0100003A 		bcc	.L1033
 16058              		.loc 1 6299 5 discriminator 8
 16059 0248 0230E0E3 		mvn	r3, #2
 16060              		.loc 1 6299 5
 16061 024c EF0000EA 		b	.L1019
 16062              	.L1033:
 16063              		.loc 1 6299 5 discriminator 9
 16064 0250 34301BE5 		ldr	r3, [fp, #-52]
 16065 0254 2334A0E1 		lsr	r3, r3, #8
 16066 0258 8322A0E1 		lsl	r2, r3, #5
 16067 025c 28301BE5 		ldr	r3, [fp, #-40]
 16068 0260 0C3093E5 		ldr	r3, [r3, #12]
 16069 0264 033082E0 		add	r3, r2, r3
 16070 0268 0C300BE5 		str	r3, [fp, #-12]
 16071 026c 0C301BE5 		ldr	r3, [fp, #-12]
 16072 0270 0300A0E1 		mov	r0, r3
 16073 0274 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16074 0278 14000BE5 		str	r0, [fp, #-20]
 16075              		.loc 1 6299 5 discriminator 1
 16076 027c 14301BE5 		ldr	r3, [fp, #-20]
 16077 0280 FF3803E2 		and	r3, r3, #16711680
 16078 0284 020853E3 		cmp	r3, #131072
 16079 0288 0100001A 		bne	.L1034
 16080              		.loc 1 6299 5 discriminator 10
 16081 028c 0830E0E3 		mvn	r3, #8
 16082              		.loc 1 6299 5
 16083 0290 DE0000EA 		b	.L1019
 16084              	.L1034:
 16085              		.loc 1 6299 5 discriminator 11
 16086 0294 14301BE5 		ldr	r3, [fp, #-20]
 16087 0298 233CA0E1 		lsr	r3, r3, #24
 16088 029c 030053E3 		cmp	r3, #3
 16089 02a0 0100000A 		beq	.L1035
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 394


 16090              		.loc 1 6299 5 discriminator 12
 16091 02a4 0130E0E3 		mvn	r3, #1
 16092              		.loc 1 6299 5
 16093 02a8 D80000EA 		b	.L1019
 16094              	.L1035:
 16095              		.loc 1 6299 5 discriminator 13
 16096 02ac 34301BE5 		ldr	r3, [fp, #-52]
 16097 02b0 7F2003E2 		and	r2, r3, #127
 16098 02b4 0C301BE5 		ldr	r3, [fp, #-12]
 16099 02b8 143093E5 		ldr	r3, [r3, #20]
 16100 02bc 030052E1 		cmp	r2, r3
 16101 02c0 0100003A 		bcc	.L1036
 16102              		.loc 1 6299 5 discriminator 14
 16103 02c4 0230E0E3 		mvn	r3, #2
 16104              		.loc 1 6299 5
 16105 02c8 D00000EA 		b	.L1019
 16106              	.L1036:
 16107              		.loc 1 6299 5 discriminator 15
 16108 02cc 34301BE5 		ldr	r3, [fp, #-52]
 16109 02d0 7F3003E2 		and	r3, r3, #127
 16110 02d4 8322A0E1 		lsl	r2, r3, #5
 16111 02d8 0C301BE5 		ldr	r3, [fp, #-12]
 16112 02dc 0C3093E5 		ldr	r3, [r3, #12]
 16113 02e0 033082E0 		add	r3, r2, r3
 16114 02e4 0C300BE5 		str	r3, [fp, #-12]
 16115 02e8 0C301BE5 		ldr	r3, [fp, #-12]
 16116 02ec 0300A0E1 		mov	r0, r3
 16117 02f0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16118 02f4 14000BE5 		str	r0, [fp, #-20]
 16119              		.loc 1 6299 5 discriminator 1
 16120 02f8 14301BE5 		ldr	r3, [fp, #-20]
 16121 02fc FF3803E2 		and	r3, r3, #16711680
 16122 0300 020853E3 		cmp	r3, #131072
 16123 0304 0100001A 		bne	.L1037
 16124              		.loc 1 6299 5 discriminator 16
 16125 0308 0830E0E3 		mvn	r3, #8
 16126              		.loc 1 6299 5
 16127 030c BF0000EA 		b	.L1019
 16128              	.L1037:
 16129              		.loc 1 6299 5 discriminator 17
 16130 0310 14301BE5 		ldr	r3, [fp, #-20]
 16131 0314 233CA0E1 		lsr	r3, r3, #24
 16132 0318 060053E3 		cmp	r3, #6
 16133 031c 0100000A 		beq	.L1032
 16134              		.loc 1 6299 5 discriminator 18
 16135 0320 0130E0E3 		mvn	r3, #1
 16136              		.loc 1 6299 5
 16137 0324 B90000EA 		b	.L1019
 16138              	.L1032:
6300:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Thd*,Thd_Src_Op,Type_Stat);
6301:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
6302:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Dst_Op,RME_THD_FLAG_XFER_DST);
 16139              		.loc 1 6302 5 is_stmt 1
 16140 0328 08301BE5 		ldr	r3, [fp, #-8]
 16141 032c 083093E5 		ldr	r3, [r3, #8]
 16142 0330 803003E2 		and	r3, r3, #128
 16143 0334 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 395


 16144 0338 0100001A 		bne	.L1038
 16145              		.loc 1 6302 5 is_stmt 0 discriminator 1
 16146 033c 0630E0E3 		mvn	r3, #6
 16147              		.loc 1 6302 5
 16148 0340 B20000EA 		b	.L1019
 16149              	.L1038:
6303:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Thd_Src_Op,RME_THD_FLAG_XFER_SRC);
 16150              		.loc 1 6303 5 is_stmt 1
 16151 0344 0C301BE5 		ldr	r3, [fp, #-12]
 16152 0348 083093E5 		ldr	r3, [r3, #8]
 16153 034c 403003E2 		and	r3, r3, #64
 16154 0350 000053E3 		cmp	r3, #0
 16155 0354 0100001A 		bne	.L1039
 16156              		.loc 1 6303 5 is_stmt 0 discriminator 1
 16157 0358 0630E0E3 		mvn	r3, #6
 16158              		.loc 1 6303 5
 16159 035c AB0000EA 		b	.L1019
 16160              	.L1039:
6304:../../Source/Kernel/rme_kernel.c **** 
6305:../../Source/Kernel/rme_kernel.c ****     /* Check if the two threads are on the core that is accordance with what we are on */
6306:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 16161              		.loc 1 6306 10 is_stmt 1
 16162 0360 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 16163 0364 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 16164 0368 18300BE5 		str	r3, [fp, #-24]
6307:../../Source/Kernel/rme_kernel.c ****     Thd_Src=RME_CAP_GETOBJ(Thd_Src_Op,struct RME_Thd_Struct*);
 16165              		.loc 1 6307 13
 16166 036c 0C301BE5 		ldr	r3, [fp, #-12]
 16167 0370 0C3093E5 		ldr	r3, [r3, #12]
 16168              		.loc 1 6307 12
 16169 0374 1C300BE5 		str	r3, [fp, #-28]
6308:../../Source/Kernel/rme_kernel.c ****     if(Thd_Src->Sched.Local!=Local)
 16170              		.loc 1 6308 22
 16171 0378 1C301BE5 		ldr	r3, [fp, #-28]
 16172 037c 143093E5 		ldr	r3, [r3, #20]
 16173              		.loc 1 6308 7
 16174 0380 18201BE5 		ldr	r2, [fp, #-24]
 16175 0384 030052E1 		cmp	r2, r3
 16176 0388 0100000A 		beq	.L1040
6309:../../Source/Kernel/rme_kernel.c ****     {
6310:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6311:../../Source/Kernel/rme_kernel.c **** 
6312:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 16177              		.loc 1 6312 16
 16178 038c CB30E0E3 		mvn	r3, #203
 16179 0390 9E0000EA 		b	.L1019
 16180              	.L1040:
6313:../../Source/Kernel/rme_kernel.c ****     }
6314:../../Source/Kernel/rme_kernel.c ****     else
6315:../../Source/Kernel/rme_kernel.c ****     {
6316:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6317:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6318:../../Source/Kernel/rme_kernel.c ****     }
6319:../../Source/Kernel/rme_kernel.c ****     
6320:../../Source/Kernel/rme_kernel.c ****     /* Check if we have slices to transfer; 0 implies TIMEOUT, BLOCKED, or EXCPEND */
6321:../../Source/Kernel/rme_kernel.c ****     if(Thd_Src->Sched.Slice==0U)
 16181              		.loc 1 6321 22
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 396


 16182 0394 1C301BE5 		ldr	r3, [fp, #-28]
 16183 0398 183093E5 		ldr	r3, [r3, #24]
 16184              		.loc 1 6321 7
 16185 039c 000053E3 		cmp	r3, #0
 16186 03a0 0100001A 		bne	.L1041
6322:../../Source/Kernel/rme_kernel.c ****     {
6323:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6324:../../Source/Kernel/rme_kernel.c **** 
6325:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 16187              		.loc 1 6325 16
 16188 03a4 CB30E0E3 		mvn	r3, #203
 16189 03a8 980000EA 		b	.L1019
 16190              	.L1041:
6326:../../Source/Kernel/rme_kernel.c ****     }
6327:../../Source/Kernel/rme_kernel.c ****     else
6328:../../Source/Kernel/rme_kernel.c ****     {
6329:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6330:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6331:../../Source/Kernel/rme_kernel.c ****     }
6332:../../Source/Kernel/rme_kernel.c ****     
6333:../../Source/Kernel/rme_kernel.c ****     Thd_Dst=RME_CAP_GETOBJ(Thd_Dst_Op,struct RME_Thd_Struct*);
 16191              		.loc 1 6333 13
 16192 03ac 08301BE5 		ldr	r3, [fp, #-8]
 16193 03b0 0C3093E5 		ldr	r3, [r3, #12]
 16194              		.loc 1 6333 12
 16195 03b4 20300BE5 		str	r3, [fp, #-32]
6334:../../Source/Kernel/rme_kernel.c ****     
6335:../../Source/Kernel/rme_kernel.c ****     if(Thd_Dst->Sched.Local!=Local)
 16196              		.loc 1 6335 22
 16197 03b8 20301BE5 		ldr	r3, [fp, #-32]
 16198 03bc 143093E5 		ldr	r3, [r3, #20]
 16199              		.loc 1 6335 7
 16200 03c0 18201BE5 		ldr	r2, [fp, #-24]
 16201 03c4 030052E1 		cmp	r2, r3
 16202 03c8 0100000A 		beq	.L1042
6336:../../Source/Kernel/rme_kernel.c ****     {
6337:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6338:../../Source/Kernel/rme_kernel.c **** 
6339:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_INVSTATE;
 16203              		.loc 1 6339 16
 16204 03cc CB30E0E3 		mvn	r3, #203
 16205 03d0 8E0000EA 		b	.L1019
 16206              	.L1042:
6340:../../Source/Kernel/rme_kernel.c ****     }
6341:../../Source/Kernel/rme_kernel.c ****     else
6342:../../Source/Kernel/rme_kernel.c ****     {
6343:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6344:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6345:../../Source/Kernel/rme_kernel.c ****     }
6346:../../Source/Kernel/rme_kernel.c **** 
6347:../../Source/Kernel/rme_kernel.c ****     /* The destination must never have higher maximum priority than the source,
6348:../../Source/Kernel/rme_kernel.c ****      * unless it is a init thread which could be used as a black hole */
6349:../../Source/Kernel/rme_kernel.c ****     if((Thd_Src->Sched.Prio_Max<Thd_Dst->Sched.Prio_Max)&&
 16207              		.loc 1 6349 23
 16208 03d4 1C301BE5 		ldr	r3, [fp, #-28]
 16209 03d8 242093E5 		ldr	r2, [r3, #36]
 16210              		.loc 1 6349 47
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 397


 16211 03dc 20301BE5 		ldr	r3, [fp, #-32]
 16212 03e0 243093E5 		ldr	r3, [r3, #36]
 16213              		.loc 1 6349 7
 16214 03e4 030052E1 		cmp	r2, r3
 16215 03e8 0500002A 		bcs	.L1043
6350:../../Source/Kernel/rme_kernel.c ****        (Thd_Dst->Sched.Slice!=RME_THD_INIT_TIME))
 16216              		.loc 1 6350 23
 16217 03ec 20301BE5 		ldr	r3, [fp, #-32]
 16218 03f0 183093E5 		ldr	r3, [r3, #24]
6349:../../Source/Kernel/rme_kernel.c ****        (Thd_Dst->Sched.Slice!=RME_THD_INIT_TIME))
 16219              		.loc 1 6349 57 discriminator 1
 16220 03f4 060173E3 		cmn	r3, #-2147483647
 16221 03f8 0100000A 		beq	.L1043
6351:../../Source/Kernel/rme_kernel.c ****     {
6352:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6353:../../Source/Kernel/rme_kernel.c **** 
6354:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_PTH_PRIO;
 16222              		.loc 1 6354 16
 16223 03fc CC30E0E3 		mvn	r3, #204
 16224 0400 820000EA 		b	.L1019
 16225              	.L1043:
6355:../../Source/Kernel/rme_kernel.c ****     }
6356:../../Source/Kernel/rme_kernel.c ****     else
6357:../../Source/Kernel/rme_kernel.c ****     {
6358:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6359:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6360:../../Source/Kernel/rme_kernel.c ****     }
6361:../../Source/Kernel/rme_kernel.c ****     
6362:../../Source/Kernel/rme_kernel.c ****     /* Delegating from a normal thread */
6363:../../Source/Kernel/rme_kernel.c ****     if(Thd_Src->Sched.Slice<RME_THD_INF_TIME)
 16226              		.loc 1 6363 22
 16227 0404 1C301BE5 		ldr	r3, [fp, #-28]
 16228 0408 183093E5 		ldr	r3, [r3, #24]
 16229              		.loc 1 6363 7
 16230 040c 0E0173E3 		cmn	r3, #-2147483645
 16231 0410 3200008A 		bhi	.L1044
6364:../../Source/Kernel/rme_kernel.c ****     {
6365:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6366:../../Source/Kernel/rme_kernel.c **** 
6367:../../Source/Kernel/rme_kernel.c ****         /* Delegate all our time */
6368:../../Source/Kernel/rme_kernel.c ****         if(Time>=RME_THD_INF_TIME)
 16232              		.loc 1 6368 11
 16233 0414 04309BE5 		ldr	r3, [fp, #4]
 16234 0418 0E0173E3 		cmn	r3, #-2147483645
 16235 041c 0300009A 		bls	.L1045
6369:../../Source/Kernel/rme_kernel.c ****         {
6370:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6371:../../Source/Kernel/rme_kernel.c **** 
6372:../../Source/Kernel/rme_kernel.c ****             Time_Xfer=Thd_Src->Sched.Slice;
 16236              		.loc 1 6372 22
 16237 0420 1C301BE5 		ldr	r3, [fp, #-28]
 16238 0424 183093E5 		ldr	r3, [r3, #24]
 16239 0428 10300BE5 		str	r3, [fp, #-16]
 16240 042c 0A0000EA 		b	.L1046
 16241              	.L1045:
6373:../../Source/Kernel/rme_kernel.c ****         }
6374:../../Source/Kernel/rme_kernel.c ****         /* Delegate some time, if not sufficient, clean up the source time */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 398


6375:../../Source/Kernel/rme_kernel.c ****         else
6376:../../Source/Kernel/rme_kernel.c ****         {
6377:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6378:../../Source/Kernel/rme_kernel.c ****             
6379:../../Source/Kernel/rme_kernel.c ****             if(Thd_Src->Sched.Slice>Time)
 16242              		.loc 1 6379 30
 16243 0430 1C301BE5 		ldr	r3, [fp, #-28]
 16244 0434 183093E5 		ldr	r3, [r3, #24]
 16245              		.loc 1 6379 15
 16246 0438 04209BE5 		ldr	r2, [fp, #4]
 16247 043c 030052E1 		cmp	r2, r3
 16248 0440 0200002A 		bcs	.L1047
6380:../../Source/Kernel/rme_kernel.c ****             {
6381:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6382:../../Source/Kernel/rme_kernel.c **** 
6383:../../Source/Kernel/rme_kernel.c ****                 Time_Xfer=Time;
 16249              		.loc 1 6383 26
 16250 0444 04309BE5 		ldr	r3, [fp, #4]
 16251 0448 10300BE5 		str	r3, [fp, #-16]
 16252 044c 020000EA 		b	.L1046
 16253              	.L1047:
6384:../../Source/Kernel/rme_kernel.c ****             }
6385:../../Source/Kernel/rme_kernel.c ****             else
6386:../../Source/Kernel/rme_kernel.c ****             {
6387:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6388:../../Source/Kernel/rme_kernel.c **** 
6389:../../Source/Kernel/rme_kernel.c ****                 Time_Xfer=Thd_Src->Sched.Slice;
 16254              		.loc 1 6389 26
 16255 0450 1C301BE5 		ldr	r3, [fp, #-28]
 16256 0454 183093E5 		ldr	r3, [r3, #24]
 16257 0458 10300BE5 		str	r3, [fp, #-16]
 16258              	.L1046:
6390:../../Source/Kernel/rme_kernel.c ****             }
6391:../../Source/Kernel/rme_kernel.c ****         }
6392:../../Source/Kernel/rme_kernel.c ****         
6393:../../Source/Kernel/rme_kernel.c ****         /* See if we are transferring to an infinite budget thread. If yes, we
6394:../../Source/Kernel/rme_kernel.c ****          * are revoking timeslices; If not, this is a finite transfer */
6395:../../Source/Kernel/rme_kernel.c ****         if(Thd_Dst->Sched.Slice<RME_THD_INF_TIME)
 16259              		.loc 1 6395 26
 16260 045c 20301BE5 		ldr	r3, [fp, #-32]
 16261 0460 183093E5 		ldr	r3, [r3, #24]
 16262              		.loc 1 6395 11
 16263 0464 0E0173E3 		cmn	r3, #-2147483645
 16264 0468 1500008A 		bhi	.L1048
6396:../../Source/Kernel/rme_kernel.c ****         {
6397:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6398:../../Source/Kernel/rme_kernel.c ****             
6399:../../Source/Kernel/rme_kernel.c ****             RME_TIME_CHECK(Thd_Dst->Sched.Slice,Time_Xfer);
 16265              		.loc 1 6399 13
 16266 046c 20301BE5 		ldr	r3, [fp, #-32]
 16267 0470 182093E5 		ldr	r2, [r3, #24]
 16268 0474 10301BE5 		ldr	r3, [fp, #-16]
 16269 0478 033082E0 		add	r3, r2, r3
 16270 047c 0E0173E3 		cmn	r3, #-2147483645
 16271 0480 0700008A 		bhi	.L1049
 16272              		.loc 1 6399 13 is_stmt 0 discriminator 2
 16273 0484 20301BE5 		ldr	r3, [fp, #-32]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 399


 16274 0488 182093E5 		ldr	r2, [r3, #24]
 16275 048c 10301BE5 		ldr	r3, [fp, #-16]
 16276 0490 032082E0 		add	r2, r2, r3
 16277 0494 20301BE5 		ldr	r3, [fp, #-32]
 16278 0498 183093E5 		ldr	r3, [r3, #24]
 16279 049c 030052E1 		cmp	r2, r3
 16280 04a0 0100002A 		bcs	.L1050
 16281              	.L1049:
 16282              		.loc 1 6399 13 discriminator 3
 16283 04a4 CF30E0E3 		mvn	r3, #207
 16284              		.loc 1 6399 13
 16285 04a8 580000EA 		b	.L1019
 16286              	.L1050:
6400:../../Source/Kernel/rme_kernel.c ****             Thd_Dst->Sched.Slice+=Time_Xfer;
 16287              		.loc 1 6400 27 is_stmt 1
 16288 04ac 20301BE5 		ldr	r3, [fp, #-32]
 16289 04b0 182093E5 		ldr	r2, [r3, #24]
 16290              		.loc 1 6400 33
 16291 04b4 10301BE5 		ldr	r3, [fp, #-16]
 16292 04b8 032082E0 		add	r2, r2, r3
 16293 04bc 20301BE5 		ldr	r3, [fp, #-32]
 16294 04c0 182083E5 		str	r2, [r3, #24]
 16295              	.L1048:
6401:../../Source/Kernel/rme_kernel.c ****         }
6402:../../Source/Kernel/rme_kernel.c ****         else
6403:../../Source/Kernel/rme_kernel.c ****         {
6404:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6405:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6406:../../Source/Kernel/rme_kernel.c ****         }
6407:../../Source/Kernel/rme_kernel.c ****         
6408:../../Source/Kernel/rme_kernel.c ****         Thd_Src->Sched.Slice-=Time_Xfer;
 16296              		.loc 1 6408 23
 16297 04c4 1C301BE5 		ldr	r3, [fp, #-28]
 16298 04c8 182093E5 		ldr	r2, [r3, #24]
 16299              		.loc 1 6408 29
 16300 04cc 10301BE5 		ldr	r3, [fp, #-16]
 16301 04d0 032042E0 		sub	r2, r2, r3
 16302 04d4 1C301BE5 		ldr	r3, [fp, #-28]
 16303 04d8 182083E5 		str	r2, [r3, #24]
 16304 04dc 2A0000EA 		b	.L1051
 16305              	.L1044:
6409:../../Source/Kernel/rme_kernel.c ****     }
6410:../../Source/Kernel/rme_kernel.c ****     /* Delegating from init or infinite thread */
6411:../../Source/Kernel/rme_kernel.c ****     else
6412:../../Source/Kernel/rme_kernel.c ****     {
6413:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6414:../../Source/Kernel/rme_kernel.c **** 
6415:../../Source/Kernel/rme_kernel.c ****         /* Infinite transfer to the destination */
6416:../../Source/Kernel/rme_kernel.c ****         if(Time>=RME_THD_INF_TIME)
 16306              		.loc 1 6416 11
 16307 04e0 04309BE5 		ldr	r3, [fp, #4]
 16308 04e4 0E0173E3 		cmn	r3, #-2147483645
 16309 04e8 1100009A 		bls	.L1052
6417:../../Source/Kernel/rme_kernel.c ****         {
6418:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6419:../../Source/Kernel/rme_kernel.c **** 
6420:../../Source/Kernel/rme_kernel.c ****             /* This transfer will revoke the infinite budget */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 400


6421:../../Source/Kernel/rme_kernel.c ****             if(Time==RME_THD_INIT_TIME)
 16310              		.loc 1 6421 15
 16311 04ec 04309BE5 		ldr	r3, [fp, #4]
 16312 04f0 060173E3 		cmn	r3, #-2147483647
 16313 04f4 0600001A 		bne	.L1053
6422:../../Source/Kernel/rme_kernel.c ****             {
6423:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6424:../../Source/Kernel/rme_kernel.c ****                 
6425:../../Source/Kernel/rme_kernel.c ****                 /* Will not revoke, source is an init thread */
6426:../../Source/Kernel/rme_kernel.c ****                 if(Thd_Src->Sched.Slice!=RME_THD_INIT_TIME)
 16314              		.loc 1 6426 34
 16315 04f8 1C301BE5 		ldr	r3, [fp, #-28]
 16316 04fc 183093E5 		ldr	r3, [r3, #24]
 16317              		.loc 1 6426 19
 16318 0500 060173E3 		cmn	r3, #-2147483647
 16319 0504 0200000A 		beq	.L1053
6427:../../Source/Kernel/rme_kernel.c ****                 {
6428:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
6429:../../Source/Kernel/rme_kernel.c ****                     
6430:../../Source/Kernel/rme_kernel.c ****                     Thd_Src->Sched.Slice=0U;
 16320              		.loc 1 6430 41
 16321 0508 1C301BE5 		ldr	r3, [fp, #-28]
 16322 050c 0020A0E3 		mov	r2, #0
 16323 0510 182083E5 		str	r2, [r3, #24]
 16324              	.L1053:
6431:../../Source/Kernel/rme_kernel.c ****                 }
6432:../../Source/Kernel/rme_kernel.c ****                 else
6433:../../Source/Kernel/rme_kernel.c ****                 {
6434:../../Source/Kernel/rme_kernel.c ****                     RME_COV_MARKER();
6435:../../Source/Kernel/rme_kernel.c ****                     /* No action required */
6436:../../Source/Kernel/rme_kernel.c ****                 }
6437:../../Source/Kernel/rme_kernel.c ****             }
6438:../../Source/Kernel/rme_kernel.c ****             else
6439:../../Source/Kernel/rme_kernel.c ****             {
6440:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6441:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
6442:../../Source/Kernel/rme_kernel.c ****             }
6443:../../Source/Kernel/rme_kernel.c ****             
6444:../../Source/Kernel/rme_kernel.c ****             /* Set destination to infinite if it is not an init thread */
6445:../../Source/Kernel/rme_kernel.c ****             if(Thd_Dst->Sched.Slice<RME_THD_INF_TIME)
 16325              		.loc 1 6445 30
 16326 0514 20301BE5 		ldr	r3, [fp, #-32]
 16327 0518 183093E5 		ldr	r3, [r3, #24]
 16328              		.loc 1 6445 15
 16329 051c 0E0173E3 		cmn	r3, #-2147483645
 16330 0520 1900008A 		bhi	.L1051
6446:../../Source/Kernel/rme_kernel.c ****             {
6447:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6448:../../Source/Kernel/rme_kernel.c ****                 
6449:../../Source/Kernel/rme_kernel.c ****                 Thd_Dst->Sched.Slice=RME_THD_INF_TIME;
 16331              		.loc 1 6449 37
 16332 0524 20301BE5 		ldr	r3, [fp, #-32]
 16333 0528 0621E0E3 		mvn	r2, #-2147483647
 16334 052c 182083E5 		str	r2, [r3, #24]
 16335 0530 150000EA 		b	.L1051
 16336              	.L1052:
6450:../../Source/Kernel/rme_kernel.c ****             }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 401


6451:../../Source/Kernel/rme_kernel.c ****             else
6452:../../Source/Kernel/rme_kernel.c ****             {
6453:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6454:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
6455:../../Source/Kernel/rme_kernel.c ****             }
6456:../../Source/Kernel/rme_kernel.c ****         }
6457:../../Source/Kernel/rme_kernel.c ****         else
6458:../../Source/Kernel/rme_kernel.c ****         {
6459:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6460:../../Source/Kernel/rme_kernel.c **** 
6461:../../Source/Kernel/rme_kernel.c ****             /* Just increase the budget of the other thread - check first */
6462:../../Source/Kernel/rme_kernel.c ****             RME_TIME_CHECK(Thd_Dst->Sched.Slice,Time);
 16337              		.loc 1 6462 13
 16338 0534 20301BE5 		ldr	r3, [fp, #-32]
 16339 0538 182093E5 		ldr	r2, [r3, #24]
 16340 053c 04309BE5 		ldr	r3, [fp, #4]
 16341 0540 033082E0 		add	r3, r2, r3
 16342 0544 0E0173E3 		cmn	r3, #-2147483645
 16343 0548 0700008A 		bhi	.L1054
 16344              		.loc 1 6462 13 is_stmt 0 discriminator 2
 16345 054c 20301BE5 		ldr	r3, [fp, #-32]
 16346 0550 182093E5 		ldr	r2, [r3, #24]
 16347 0554 04309BE5 		ldr	r3, [fp, #4]
 16348 0558 032082E0 		add	r2, r2, r3
 16349 055c 20301BE5 		ldr	r3, [fp, #-32]
 16350 0560 183093E5 		ldr	r3, [r3, #24]
 16351 0564 030052E1 		cmp	r2, r3
 16352 0568 0100002A 		bcs	.L1055
 16353              	.L1054:
 16354              		.loc 1 6462 13 discriminator 3
 16355 056c CF30E0E3 		mvn	r3, #207
 16356              		.loc 1 6462 13
 16357 0570 260000EA 		b	.L1019
 16358              	.L1055:
6463:../../Source/Kernel/rme_kernel.c ****             Thd_Dst->Sched.Slice+=Time;
 16359              		.loc 1 6463 27 is_stmt 1
 16360 0574 20301BE5 		ldr	r3, [fp, #-32]
 16361 0578 182093E5 		ldr	r2, [r3, #24]
 16362              		.loc 1 6463 33
 16363 057c 04309BE5 		ldr	r3, [fp, #4]
 16364 0580 032082E0 		add	r2, r2, r3
 16365 0584 20301BE5 		ldr	r3, [fp, #-32]
 16366 0588 182083E5 		str	r2, [r3, #24]
 16367              	.L1051:
6464:../../Source/Kernel/rme_kernel.c ****         }
6465:../../Source/Kernel/rme_kernel.c ****     }
6466:../../Source/Kernel/rme_kernel.c **** 
6467:../../Source/Kernel/rme_kernel.c ****     /* Is the source time used up? If yes, delete it from the run queue, and notify its 
6468:../../Source/Kernel/rme_kernel.c ****      * parent. If it is not in the run queue, The state of the source must be BLOCKED. */
6469:../../Source/Kernel/rme_kernel.c ****     if(Thd_Src->Sched.Slice==0U)
 16368              		.loc 1 6469 22
 16369 058c 1C301BE5 		ldr	r3, [fp, #-28]
 16370 0590 183093E5 		ldr	r3, [r3, #24]
 16371              		.loc 1 6469 7
 16372 0594 000053E3 		cmp	r3, #0
 16373 0598 0A00001A 		bne	.L1056
6470:../../Source/Kernel/rme_kernel.c ****     {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 402


6471:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6472:../../Source/Kernel/rme_kernel.c ****         
6473:../../Source/Kernel/rme_kernel.c ****         /* If it is blocked or have an exception, we neither change its state nor send
6474:../../Source/Kernel/rme_kernel.c ****          * the scheduler notification. It will be sent when the thread unblocks, or gets
6475:../../Source/Kernel/rme_kernel.c ****          * its exception handled. The rule of the thumb is, we only send scheduler 
6476:../../Source/Kernel/rme_kernel.c ****          * notifications when the thread really enter TIMEOUT or EXCPEND state. */
6477:../../Source/Kernel/rme_kernel.c ****         if(Thd_Src->Sched.State==RME_THD_READY)
 16374              		.loc 1 6477 26
 16375 059c 1C301BE5 		ldr	r3, [fp, #-28]
 16376 05a0 1C3093E5 		ldr	r3, [r3, #28]
 16377              		.loc 1 6477 11
 16378 05a4 000053E3 		cmp	r3, #0
 16379 05a8 0600001A 		bne	.L1056
6478:../../Source/Kernel/rme_kernel.c ****         {
6479:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6480:../../Source/Kernel/rme_kernel.c ****             
6481:../../Source/Kernel/rme_kernel.c ****             /* Remove from runqueue */
6482:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Src);
 16380              		.loc 1 6482 13
 16381 05ac 1C001BE5 		ldr	r0, [fp, #-28]
 16382 05b0 FEFFFFEB 		bl	_RME_Run_Del
6483:../../Source/Kernel/rme_kernel.c ****             
6484:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
6485:../../Source/Kernel/rme_kernel.c ****             Thd_Src->Sched.State=RME_THD_TIMEOUT;
 16383              		.loc 1 6485 33
 16384 05b4 1C301BE5 		ldr	r3, [fp, #-28]
 16385 05b8 0220A0E3 		mov	r2, #2
 16386 05bc 1C2083E5 		str	r2, [r3, #28]
6486:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Src);
 16387              		.loc 1 6486 13
 16388 05c0 1C001BE5 		ldr	r0, [fp, #-28]
 16389 05c4 FEFFFFEB 		bl	_RME_Run_Notif
 16390              	.L1056:
6487:../../Source/Kernel/rme_kernel.c ****         }
6488:../../Source/Kernel/rme_kernel.c ****         else
6489:../../Source/Kernel/rme_kernel.c ****         {
6490:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6491:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6492:../../Source/Kernel/rme_kernel.c ****         }
6493:../../Source/Kernel/rme_kernel.c ****     }
6494:../../Source/Kernel/rme_kernel.c ****     else
6495:../../Source/Kernel/rme_kernel.c ****     {
6496:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6497:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6498:../../Source/Kernel/rme_kernel.c ****     }
6499:../../Source/Kernel/rme_kernel.c **** 
6500:../../Source/Kernel/rme_kernel.c ****     /* Now save the system call return value to the caller 
6501:../../Source/Kernel/rme_kernel.c ****      * stack - how much time the destination have now */
6502:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,(rme_ret_t)(Thd_Dst->Sched.Slice));
 16391              		.loc 1 6502 56
 16392 05c8 20301BE5 		ldr	r3, [fp, #-32]
 16393 05cc 183093E5 		ldr	r3, [r3, #24]
 16394              		.loc 1 6502 5
 16395 05d0 0310A0E1 		mov	r1, r3
 16396 05d4 2C001BE5 		ldr	r0, [fp, #-44]
 16397 05d8 FEFFFFEB 		bl	__RME_Svc_Retval_Set
6503:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 403


6504:../../Source/Kernel/rme_kernel.c ****     /* See what was the state of the destination thread. If it is timeout, then activate
6505:../../Source/Kernel/rme_kernel.c ****      * it. If it is BLOCKED or EXCPEND, then leave it alone, and it will be activated
6506:../../Source/Kernel/rme_kernel.c ****      * when it unblocks or when the exception is handled. */
6507:../../Source/Kernel/rme_kernel.c ****     if(Thd_Dst->Sched.State==RME_THD_TIMEOUT)
 16398              		.loc 1 6507 22
 16399 05dc 20301BE5 		ldr	r3, [fp, #-32]
 16400 05e0 1C3093E5 		ldr	r3, [r3, #28]
 16401              		.loc 1 6507 7
 16402 05e4 020053E3 		cmp	r3, #2
 16403 05e8 0400001A 		bne	.L1057
6508:../../Source/Kernel/rme_kernel.c ****     {
6509:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6510:../../Source/Kernel/rme_kernel.c **** 
6511:../../Source/Kernel/rme_kernel.c ****         /* Ready and add to runqueue */
6512:../../Source/Kernel/rme_kernel.c ****         Thd_Dst->Sched.State=RME_THD_READY;
 16404              		.loc 1 6512 29
 16405 05ec 20301BE5 		ldr	r3, [fp, #-32]
 16406 05f0 0020A0E3 		mov	r2, #0
 16407 05f4 1C2083E5 		str	r2, [r3, #28]
6513:../../Source/Kernel/rme_kernel.c ****         _RME_Run_Ins(Thd_Dst);
 16408              		.loc 1 6513 9
 16409 05f8 20001BE5 		ldr	r0, [fp, #-32]
 16410 05fc FEFFFFEB 		bl	_RME_Run_Ins
 16411              	.L1057:
6514:../../Source/Kernel/rme_kernel.c ****     }
6515:../../Source/Kernel/rme_kernel.c ****     else
6516:../../Source/Kernel/rme_kernel.c ****     {
6517:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6518:../../Source/Kernel/rme_kernel.c ****     }
6519:../../Source/Kernel/rme_kernel.c ****     
6520:../../Source/Kernel/rme_kernel.c ****     /* All possible kernel send (scheduler notifications) done,
6521:../../Source/Kernel/rme_kernel.c ****      * now pick the highest priority thread to run */
6522:../../Source/Kernel/rme_kernel.c ****     _RME_Kern_High(Reg,Local);
 16412              		.loc 1 6522 5
 16413 0600 18101BE5 		ldr	r1, [fp, #-24]
 16414 0604 2C001BE5 		ldr	r0, [fp, #-44]
 16415 0608 FEFFFFEB 		bl	_RME_Kern_High
6523:../../Source/Kernel/rme_kernel.c **** 
6524:../../Source/Kernel/rme_kernel.c ****     return 0;
 16416              		.loc 1 6524 12
 16417 060c 0030A0E3 		mov	r3, #0
 16418              	.L1019:
6525:../../Source/Kernel/rme_kernel.c **** }
 16419              		.loc 1 6525 1
 16420 0610 0300A0E1 		mov	r0, r3
 16421 0614 04D04BE2 		sub	sp, fp, #4
 16422              		.cfi_def_cfa 13, 8
 16423              		@ sp needed
 16424 0618 0088BDE8 		pop	{fp, pc}
 16425              		.cfi_endproc
 16426              	.LFE63:
 16428              		.section	.text._RME_Thd_Swt,"ax",%progbits
 16429              		.align	2
 16430              		.syntax unified
 16431              		.arm
 16433              	_RME_Thd_Swt:
 16434              	.LFB64:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 404


6526:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Time_Xfer *******************************************/
6527:../../Source/Kernel/rme_kernel.c **** 
6528:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Thd_Swt ******************************************************
6529:../../Source/Kernel/rme_kernel.c **** Description : Switch to another thread. The thread to switch to must have the same
6530:../../Source/Kernel/rme_kernel.c ****               preemptive priority as this thread, and have time, and not blocked.
6531:../../Source/Kernel/rme_kernel.c ****               If trying to switch to a higher priority thread, this is impossible
6532:../../Source/Kernel/rme_kernel.c ****               because whenever a thread with higher priority exists in the system,
6533:../../Source/Kernel/rme_kernel.c ****               the kernel wiull let it preempt the current thread. 
6534:../../Source/Kernel/rme_kernel.c ****               If trying to switch to a lower priority thread, this is impossible
6535:../../Source/Kernel/rme_kernel.c ****               because the current thread just preempts it after the thread switch.
6536:../../Source/Kernel/rme_kernel.c ****               This syscall does not end with _RME_Kern_High because the user may
6537:../../Source/Kernel/rme_kernel.c ****               designate a specific thread rather than a random one.
6538:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table. 
6539:../../Source/Kernel/rme_kernel.c ****               volatile struct RME_Reg_Struct* Reg - The register set.
6540:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Thd - The capability to the thread. If this is -1,
6541:../../Source/Kernel/rme_kernel.c ****                                   the kernel will pickup whatever thread that
6542:../../Source/Kernel/rme_kernel.c ****                                   has the highest priority and time to run. 
6543:../../Source/Kernel/rme_kernel.c ****                                   2-Level. 
6544:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Yield - This is a flag to indicate whether this
6545:../../Source/Kernel/rme_kernel.c ****                                    is a full yield. If it is, the kernel will
6546:../../Source/Kernel/rme_kernel.c ****                                    discard all the time alloted on this
6547:../../Source/Kernel/rme_kernel.c ****                                    thread. This only works for threads that
6548:../../Source/Kernel/rme_kernel.c ****                                    have a finite budget.
6549:../../Source/Kernel/rme_kernel.c **** Output      : None.
6550:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
6551:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6552:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Thd_Swt(struct RME_Cap_Cpt* Cpt,
6553:../../Source/Kernel/rme_kernel.c ****                               struct RME_Reg_Struct* Reg,
6554:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Thd,
6555:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Is_Yield)
6556:../../Source/Kernel/rme_kernel.c **** {
 16435              		.loc 1 6556 1
 16436              		.cfi_startproc
 16437              		@ args = 0, pretend = 0, frame = 40
 16438              		@ frame_needed = 1, uses_anonymous_args = 0
 16439 0000 00482DE9 		push	{fp, lr}
 16440              		.cfi_def_cfa_offset 8
 16441              		.cfi_offset 11, -8
 16442              		.cfi_offset 14, -4
 16443 0004 04B08DE2 		add	fp, sp, #4
 16444              		.cfi_def_cfa 11, 4
 16445 0008 28D04DE2 		sub	sp, sp, #40
 16446 000c 20000BE5 		str	r0, [fp, #-32]
 16447 0010 24100BE5 		str	r1, [fp, #-36]
 16448 0014 28200BE5 		str	r2, [fp, #-40]
 16449 0018 2C300BE5 		str	r3, [fp, #-44]
6557:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Thd* Thd_Cap_New;
6558:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_New;
6559:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_High;
6560:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
6561:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
6562:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6563:../../Source/Kernel/rme_kernel.c **** 
6564:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 16450              		.loc 1 6564 10
 16451 001c 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 16452 0020 003040E3 		movt	r3, #:upper16:RME_A7A_Local
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 405


 16453 0024 10300BE5 		str	r3, [fp, #-16]
6565:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=Local->Thd_Cur;
 16454              		.loc 1 6565 12
 16455 0028 10301BE5 		ldr	r3, [fp, #-16]
 16456 002c 043093E5 		ldr	r3, [r3, #4]
 16457 0030 14300BE5 		str	r3, [fp, #-20]
6566:../../Source/Kernel/rme_kernel.c ****     
6567:../../Source/Kernel/rme_kernel.c ****     /* The caller have picked a thread to switch to */
6568:../../Source/Kernel/rme_kernel.c ****     if(Cap_Thd<RME_CID_NULL)
 16458              		.loc 1 6568 7
 16459 0034 28301BE5 		ldr	r3, [fp, #-40]
 16460 0038 020953E3 		cmp	r3, #32768
 16461 003c A60000AA 		bge	.L1059
6569:../../Source/Kernel/rme_kernel.c ****     {
6570:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6571:../../Source/Kernel/rme_kernel.c ****         
6572:../../Source/Kernel/rme_kernel.c ****         RME_CPT_GETCAP(Cpt,Cap_Thd,RME_CAP_TYPE_THD,
 16462              		.loc 1 6572 9
 16463 0040 28301BE5 		ldr	r3, [fp, #-40]
 16464 0044 803003E2 		and	r3, r3, #128
 16465 0048 000053E3 		cmp	r3, #0
 16466 004c 1C00001A 		bne	.L1060
 16467              		.loc 1 6572 9 is_stmt 0 discriminator 1
 16468 0050 20301BE5 		ldr	r3, [fp, #-32]
 16469 0054 142093E5 		ldr	r2, [r3, #20]
 16470 0058 28301BE5 		ldr	r3, [fp, #-40]
 16471 005c 030052E1 		cmp	r2, r3
 16472 0060 0100008A 		bhi	.L1061
 16473              		.loc 1 6572 9 discriminator 3
 16474 0064 0230E0E3 		mvn	r3, #2
 16475              		.loc 1 6572 9
 16476 0068 DF0000EA 		b	.L1062
 16477              	.L1061:
 16478              		.loc 1 6572 9 discriminator 4
 16479 006c 28301BE5 		ldr	r3, [fp, #-40]
 16480 0070 8322A0E1 		lsl	r2, r3, #5
 16481 0074 20301BE5 		ldr	r3, [fp, #-32]
 16482 0078 0C3093E5 		ldr	r3, [r3, #12]
 16483 007c 033082E0 		add	r3, r2, r3
 16484 0080 08300BE5 		str	r3, [fp, #-8]
 16485 0084 08301BE5 		ldr	r3, [fp, #-8]
 16486 0088 0300A0E1 		mov	r0, r3
 16487 008c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16488 0090 18000BE5 		str	r0, [fp, #-24]
 16489              		.loc 1 6572 9 discriminator 1
 16490 0094 18301BE5 		ldr	r3, [fp, #-24]
 16491 0098 FF3803E2 		and	r3, r3, #16711680
 16492 009c 020853E3 		cmp	r3, #131072
 16493 00a0 0100001A 		bne	.L1063
 16494              		.loc 1 6572 9 discriminator 5
 16495 00a4 0830E0E3 		mvn	r3, #8
 16496              		.loc 1 6572 9
 16497 00a8 CF0000EA 		b	.L1062
 16498              	.L1063:
 16499              		.loc 1 6572 9 discriminator 6
 16500 00ac 18301BE5 		ldr	r3, [fp, #-24]
 16501 00b0 233CA0E1 		lsr	r3, r3, #24
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 406


 16502 00b4 060053E3 		cmp	r3, #6
 16503 00b8 3F00000A 		beq	.L1064
 16504              		.loc 1 6572 9 discriminator 7
 16505 00bc 0130E0E3 		mvn	r3, #1
 16506              		.loc 1 6572 9
 16507 00c0 C90000EA 		b	.L1062
 16508              	.L1060:
 16509              		.loc 1 6572 9 discriminator 2
 16510 00c4 28301BE5 		ldr	r3, [fp, #-40]
 16511 00c8 2324A0E1 		lsr	r2, r3, #8
 16512 00cc 20301BE5 		ldr	r3, [fp, #-32]
 16513 00d0 143093E5 		ldr	r3, [r3, #20]
 16514 00d4 030052E1 		cmp	r2, r3
 16515 00d8 0100003A 		bcc	.L1065
 16516              		.loc 1 6572 9 discriminator 8
 16517 00dc 0230E0E3 		mvn	r3, #2
 16518              		.loc 1 6572 9
 16519 00e0 C10000EA 		b	.L1062
 16520              	.L1065:
 16521              		.loc 1 6572 9 discriminator 9
 16522 00e4 28301BE5 		ldr	r3, [fp, #-40]
 16523 00e8 2334A0E1 		lsr	r3, r3, #8
 16524 00ec 8322A0E1 		lsl	r2, r3, #5
 16525 00f0 20301BE5 		ldr	r3, [fp, #-32]
 16526 00f4 0C3093E5 		ldr	r3, [r3, #12]
 16527 00f8 033082E0 		add	r3, r2, r3
 16528 00fc 08300BE5 		str	r3, [fp, #-8]
 16529 0100 08301BE5 		ldr	r3, [fp, #-8]
 16530 0104 0300A0E1 		mov	r0, r3
 16531 0108 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16532 010c 18000BE5 		str	r0, [fp, #-24]
 16533              		.loc 1 6572 9 discriminator 1
 16534 0110 18301BE5 		ldr	r3, [fp, #-24]
 16535 0114 FF3803E2 		and	r3, r3, #16711680
 16536 0118 020853E3 		cmp	r3, #131072
 16537 011c 0100001A 		bne	.L1066
 16538              		.loc 1 6572 9 discriminator 10
 16539 0120 0830E0E3 		mvn	r3, #8
 16540              		.loc 1 6572 9
 16541 0124 B00000EA 		b	.L1062
 16542              	.L1066:
 16543              		.loc 1 6572 9 discriminator 11
 16544 0128 18301BE5 		ldr	r3, [fp, #-24]
 16545 012c 233CA0E1 		lsr	r3, r3, #24
 16546 0130 030053E3 		cmp	r3, #3
 16547 0134 0100000A 		beq	.L1067
 16548              		.loc 1 6572 9 discriminator 12
 16549 0138 0130E0E3 		mvn	r3, #1
 16550              		.loc 1 6572 9
 16551 013c AA0000EA 		b	.L1062
 16552              	.L1067:
 16553              		.loc 1 6572 9 discriminator 13
 16554 0140 28301BE5 		ldr	r3, [fp, #-40]
 16555 0144 7F2003E2 		and	r2, r3, #127
 16556 0148 08301BE5 		ldr	r3, [fp, #-8]
 16557 014c 143093E5 		ldr	r3, [r3, #20]
 16558 0150 030052E1 		cmp	r2, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 407


 16559 0154 0100003A 		bcc	.L1068
 16560              		.loc 1 6572 9 discriminator 14
 16561 0158 0230E0E3 		mvn	r3, #2
 16562              		.loc 1 6572 9
 16563 015c A20000EA 		b	.L1062
 16564              	.L1068:
 16565              		.loc 1 6572 9 discriminator 15
 16566 0160 28301BE5 		ldr	r3, [fp, #-40]
 16567 0164 7F3003E2 		and	r3, r3, #127
 16568 0168 8322A0E1 		lsl	r2, r3, #5
 16569 016c 08301BE5 		ldr	r3, [fp, #-8]
 16570 0170 0C3093E5 		ldr	r3, [r3, #12]
 16571 0174 033082E0 		add	r3, r2, r3
 16572 0178 08300BE5 		str	r3, [fp, #-8]
 16573 017c 08301BE5 		ldr	r3, [fp, #-8]
 16574 0180 0300A0E1 		mov	r0, r3
 16575 0184 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16576 0188 18000BE5 		str	r0, [fp, #-24]
 16577              		.loc 1 6572 9 discriminator 1
 16578 018c 18301BE5 		ldr	r3, [fp, #-24]
 16579 0190 FF3803E2 		and	r3, r3, #16711680
 16580 0194 020853E3 		cmp	r3, #131072
 16581 0198 0100001A 		bne	.L1069
 16582              		.loc 1 6572 9 discriminator 16
 16583 019c 0830E0E3 		mvn	r3, #8
 16584              		.loc 1 6572 9
 16585 01a0 910000EA 		b	.L1062
 16586              	.L1069:
 16587              		.loc 1 6572 9 discriminator 17
 16588 01a4 18301BE5 		ldr	r3, [fp, #-24]
 16589 01a8 233CA0E1 		lsr	r3, r3, #24
 16590 01ac 060053E3 		cmp	r3, #6
 16591 01b0 0100000A 		beq	.L1064
 16592              		.loc 1 6572 9 discriminator 18
 16593 01b4 0130E0E3 		mvn	r3, #1
 16594              		.loc 1 6572 9
 16595 01b8 8B0000EA 		b	.L1062
 16596              	.L1064:
6573:../../Source/Kernel/rme_kernel.c ****                        struct RME_Cap_Thd*,Thd_Cap_New,Type_Stat);
6574:../../Source/Kernel/rme_kernel.c ****         /* Check if the target cap is not frozen and allows such operations */
6575:../../Source/Kernel/rme_kernel.c ****         RME_CAP_CHECK(Thd_Cap_New,RME_THD_FLAG_SWT);
 16597              		.loc 1 6575 9 is_stmt 1
 16598 01bc 08301BE5 		ldr	r3, [fp, #-8]
 16599 01c0 083093E5 		ldr	r3, [r3, #8]
 16600 01c4 013C03E2 		and	r3, r3, #256
 16601 01c8 000053E3 		cmp	r3, #0
 16602 01cc 0100001A 		bne	.L1070
 16603              		.loc 1 6575 9 is_stmt 0 discriminator 1
 16604 01d0 0630E0E3 		mvn	r3, #6
 16605              		.loc 1 6575 9
 16606 01d4 840000EA 		b	.L1062
 16607              	.L1070:
6576:../../Source/Kernel/rme_kernel.c ****         /* See if we can do operation on this core */
6577:../../Source/Kernel/rme_kernel.c ****         Thd_New=RME_CAP_GETOBJ(Thd_Cap_New,struct RME_Thd_Struct*);
 16608              		.loc 1 6577 17 is_stmt 1
 16609 01d8 08301BE5 		ldr	r3, [fp, #-8]
 16610 01dc 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 408


 16611              		.loc 1 6577 16
 16612 01e0 0C300BE5 		str	r3, [fp, #-12]
6578:../../Source/Kernel/rme_kernel.c ****         if(Thd_New->Sched.Local!=Local)
 16613              		.loc 1 6578 26
 16614 01e4 0C301BE5 		ldr	r3, [fp, #-12]
 16615 01e8 143093E5 		ldr	r3, [r3, #20]
 16616              		.loc 1 6578 11
 16617 01ec 10201BE5 		ldr	r2, [fp, #-16]
 16618 01f0 030052E1 		cmp	r2, r3
 16619 01f4 0100000A 		beq	.L1071
6579:../../Source/Kernel/rme_kernel.c ****         {
6580:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6581:../../Source/Kernel/rme_kernel.c **** 
6582:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_INVSTATE;
 16620              		.loc 1 6582 20
 16621 01f8 CB30E0E3 		mvn	r3, #203
 16622 01fc 7A0000EA 		b	.L1062
 16623              	.L1071:
6583:../../Source/Kernel/rme_kernel.c ****         }
6584:../../Source/Kernel/rme_kernel.c ****         else
6585:../../Source/Kernel/rme_kernel.c ****         {
6586:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6587:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6588:../../Source/Kernel/rme_kernel.c ****         }
6589:../../Source/Kernel/rme_kernel.c ****             
6590:../../Source/Kernel/rme_kernel.c ****         /* See if we can yield to the thread */
6591:../../Source/Kernel/rme_kernel.c ****         if(Thd_Cur->Sched.Prio!=Thd_New->Sched.Prio)
 16624              		.loc 1 6591 26
 16625 0200 14301BE5 		ldr	r3, [fp, #-20]
 16626 0204 202093E5 		ldr	r2, [r3, #32]
 16627              		.loc 1 6591 47
 16628 0208 0C301BE5 		ldr	r3, [fp, #-12]
 16629 020c 203093E5 		ldr	r3, [r3, #32]
 16630              		.loc 1 6591 11
 16631 0210 030052E1 		cmp	r2, r3
 16632 0214 0100000A 		beq	.L1072
6592:../../Source/Kernel/rme_kernel.c ****         {
6593:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6594:../../Source/Kernel/rme_kernel.c **** 
6595:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_PRIO;
 16633              		.loc 1 6595 20
 16634 0218 CC30E0E3 		mvn	r3, #204
 16635 021c 720000EA 		b	.L1062
 16636              	.L1072:
6596:../../Source/Kernel/rme_kernel.c ****         }
6597:../../Source/Kernel/rme_kernel.c ****         else
6598:../../Source/Kernel/rme_kernel.c ****         {
6599:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6600:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6601:../../Source/Kernel/rme_kernel.c ****         }
6602:../../Source/Kernel/rme_kernel.c ****             
6603:../../Source/Kernel/rme_kernel.c ****         /* Check if the target thread state is valid */
6604:../../Source/Kernel/rme_kernel.c ****         if((Thd_New->Sched.State==RME_THD_BLOCKED)||
 16637              		.loc 1 6604 27
 16638 0220 0C301BE5 		ldr	r3, [fp, #-12]
 16639 0224 1C3093E5 		ldr	r3, [r3, #28]
 16640              		.loc 1 6604 11
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 409


 16641 0228 010053E3 		cmp	r3, #1
 16642 022c 0700000A 		beq	.L1073
6605:../../Source/Kernel/rme_kernel.c ****            (Thd_New->Sched.State==RME_THD_TIMEOUT)||
 16643              		.loc 1 6605 27
 16644 0230 0C301BE5 		ldr	r3, [fp, #-12]
 16645 0234 1C3093E5 		ldr	r3, [r3, #28]
6604:../../Source/Kernel/rme_kernel.c ****            (Thd_New->Sched.State==RME_THD_TIMEOUT)||
 16646              		.loc 1 6604 51 discriminator 1
 16647 0238 020053E3 		cmp	r3, #2
 16648 023c 0300000A 		beq	.L1073
6606:../../Source/Kernel/rme_kernel.c ****            (Thd_New->Sched.State==RME_THD_EXCPEND))
 16649              		.loc 1 6606 27
 16650 0240 0C301BE5 		ldr	r3, [fp, #-12]
 16651 0244 1C3093E5 		ldr	r3, [r3, #28]
6605:../../Source/Kernel/rme_kernel.c ****            (Thd_New->Sched.State==RME_THD_TIMEOUT)||
 16652              		.loc 1 6605 51
 16653 0248 030053E3 		cmp	r3, #3
 16654 024c 0100001A 		bne	.L1074
 16655              	.L1073:
6607:../../Source/Kernel/rme_kernel.c ****         {
6608:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6609:../../Source/Kernel/rme_kernel.c **** 
6610:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_PTH_INVSTATE;
 16656              		.loc 1 6610 20
 16657 0250 CB30E0E3 		mvn	r3, #203
 16658 0254 640000EA 		b	.L1062
 16659              	.L1074:
6611:../../Source/Kernel/rme_kernel.c ****         }
6612:../../Source/Kernel/rme_kernel.c ****         else
6613:../../Source/Kernel/rme_kernel.c ****         {
6614:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6615:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6616:../../Source/Kernel/rme_kernel.c ****         }
6617:../../Source/Kernel/rme_kernel.c ****         
6618:../../Source/Kernel/rme_kernel.c ****         /* See if we need to give up all our timeslices in this yield */
6619:../../Source/Kernel/rme_kernel.c ****         if((Is_Yield!=0U)&&(Thd_Cur->Sched.Slice<RME_THD_INF_TIME))
 16660              		.loc 1 6619 11
 16661 0258 2C301BE5 		ldr	r3, [fp, #-44]
 16662 025c 000053E3 		cmp	r3, #0
 16663 0260 4300000A 		beq	.L1075
 16664              		.loc 1 6619 43 discriminator 1
 16665 0264 14301BE5 		ldr	r3, [fp, #-20]
 16666 0268 183093E5 		ldr	r3, [r3, #24]
 16667              		.loc 1 6619 26 discriminator 1
 16668 026c 0E0173E3 		cmn	r3, #-2147483645
 16669 0270 3F00008A 		bhi	.L1075
6620:../../Source/Kernel/rme_kernel.c ****         {
6621:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6622:../../Source/Kernel/rme_kernel.c ****             
6623:../../Source/Kernel/rme_kernel.c ****             /* Deprive all timeslices and remove from runqueue */
6624:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice=0U;
 16670              		.loc 1 6624 33
 16671 0274 14301BE5 		ldr	r3, [fp, #-20]
 16672 0278 0020A0E3 		mov	r2, #0
 16673 027c 182083E5 		str	r2, [r3, #24]
6625:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Cur);
 16674              		.loc 1 6625 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 410


 16675 0280 14001BE5 		ldr	r0, [fp, #-20]
 16676 0284 FEFFFFEB 		bl	_RME_Run_Del
6626:../../Source/Kernel/rme_kernel.c ****             
6627:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
6628:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.State=RME_THD_TIMEOUT;
 16677              		.loc 1 6628 33
 16678 0288 14301BE5 		ldr	r3, [fp, #-20]
 16679 028c 0220A0E3 		mov	r2, #2
 16680 0290 1C2083E5 		str	r2, [r3, #28]
6629:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Cur);
 16681              		.loc 1 6629 13
 16682 0294 14001BE5 		ldr	r0, [fp, #-20]
 16683 0298 FEFFFFEB 		bl	_RME_Run_Notif
6630:../../Source/Kernel/rme_kernel.c ****             
6631:../../Source/Kernel/rme_kernel.c ****             /* Because we have sent a notification, we could have unblocked a
6632:../../Source/Kernel/rme_kernel.c ****              * thread at higher priority. Additionally, if the new thread is
6633:../../Source/Kernel/rme_kernel.c ****              * the current thread, we are forced to switch to someone else,
6634:../../Source/Kernel/rme_kernel.c ****              * because the current thread's timeslice must be exhausted. */
6635:../../Source/Kernel/rme_kernel.c ****             Thd_High=_RME_Run_High(Local);
 16684              		.loc 1 6635 22
 16685 029c 10001BE5 		ldr	r0, [fp, #-16]
 16686 02a0 FEFFFFEB 		bl	_RME_Run_High
 16687 02a4 1C000BE5 		str	r0, [fp, #-28]
6636:../../Source/Kernel/rme_kernel.c ****             if((Thd_High->Sched.Prio>Thd_New->Sched.Prio)||(Thd_Cur==Thd_New))
 16688              		.loc 1 6636 32
 16689 02a8 1C301BE5 		ldr	r3, [fp, #-28]
 16690 02ac 202093E5 		ldr	r2, [r3, #32]
 16691              		.loc 1 6636 52
 16692 02b0 0C301BE5 		ldr	r3, [fp, #-12]
 16693 02b4 203093E5 		ldr	r3, [r3, #32]
 16694              		.loc 1 6636 15
 16695 02b8 030052E1 		cmp	r2, r3
 16696 02bc 0300008A 		bhi	.L1076
 16697              		.loc 1 6636 58 discriminator 1
 16698 02c0 14201BE5 		ldr	r2, [fp, #-20]
 16699 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 16700 02c8 030052E1 		cmp	r2, r3
 16701 02cc 2800001A 		bne	.L1075
 16702              	.L1076:
6637:../../Source/Kernel/rme_kernel.c ****             {
6638:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6639:../../Source/Kernel/rme_kernel.c **** 
6640:../../Source/Kernel/rme_kernel.c ****                 Thd_New=Thd_High;
 16703              		.loc 1 6640 24
 16704 02d0 1C301BE5 		ldr	r3, [fp, #-28]
 16705 02d4 0C300BE5 		str	r3, [fp, #-12]
 16706 02d8 250000EA 		b	.L1075
 16707              	.L1059:
6641:../../Source/Kernel/rme_kernel.c ****             }
6642:../../Source/Kernel/rme_kernel.c ****             else
6643:../../Source/Kernel/rme_kernel.c ****             {
6644:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
6645:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
6646:../../Source/Kernel/rme_kernel.c ****             }
6647:../../Source/Kernel/rme_kernel.c ****         }
6648:../../Source/Kernel/rme_kernel.c ****         else
6649:../../Source/Kernel/rme_kernel.c ****         {
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 411


6650:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6651:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6652:../../Source/Kernel/rme_kernel.c ****         }
6653:../../Source/Kernel/rme_kernel.c ****     }
6654:../../Source/Kernel/rme_kernel.c ****     /* The kernel needs to pick a thread to switch to */
6655:../../Source/Kernel/rme_kernel.c ****     else
6656:../../Source/Kernel/rme_kernel.c ****     {
6657:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6658:../../Source/Kernel/rme_kernel.c ****         
6659:../../Source/Kernel/rme_kernel.c ****         /* See if we need to give up all our timeslices in this yield */
6660:../../Source/Kernel/rme_kernel.c ****         if((Is_Yield!=0U)&&(Thd_Cur->Sched.Slice<RME_THD_INF_TIME))
 16708              		.loc 1 6660 11
 16709 02dc 2C301BE5 		ldr	r3, [fp, #-44]
 16710 02e0 000053E3 		cmp	r3, #0
 16711 02e4 0E00000A 		beq	.L1077
 16712              		.loc 1 6660 43 discriminator 1
 16713 02e8 14301BE5 		ldr	r3, [fp, #-20]
 16714 02ec 183093E5 		ldr	r3, [r3, #24]
 16715              		.loc 1 6660 26 discriminator 1
 16716 02f0 0E0173E3 		cmn	r3, #-2147483645
 16717 02f4 0A00008A 		bhi	.L1077
6661:../../Source/Kernel/rme_kernel.c ****         {
6662:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6663:../../Source/Kernel/rme_kernel.c ****             
6664:../../Source/Kernel/rme_kernel.c ****             /* Deprive all timeslices and remove from runqueue */
6665:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Slice=0U;
 16718              		.loc 1 6665 33
 16719 02f8 14301BE5 		ldr	r3, [fp, #-20]
 16720 02fc 0020A0E3 		mov	r2, #0
 16721 0300 182083E5 		str	r2, [r3, #24]
6666:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Cur);
 16722              		.loc 1 6666 13
 16723 0304 14001BE5 		ldr	r0, [fp, #-20]
 16724 0308 FEFFFFEB 		bl	_RME_Run_Del
6667:../../Source/Kernel/rme_kernel.c ****             
6668:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
6669:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.State=RME_THD_TIMEOUT;
 16725              		.loc 1 6669 33
 16726 030c 14301BE5 		ldr	r3, [fp, #-20]
 16727 0310 0220A0E3 		mov	r2, #2
 16728 0314 1C2083E5 		str	r2, [r3, #28]
6670:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Cur);
 16729              		.loc 1 6670 13
 16730 0318 14001BE5 		ldr	r0, [fp, #-20]
 16731 031c FEFFFFEB 		bl	_RME_Run_Notif
 16732 0320 100000EA 		b	.L1078
 16733              	.L1077:
6671:../../Source/Kernel/rme_kernel.c ****         }
6672:../../Source/Kernel/rme_kernel.c ****         else
6673:../../Source/Kernel/rme_kernel.c ****         {
6674:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6675:../../Source/Kernel/rme_kernel.c ****             
6676:../../Source/Kernel/rme_kernel.c ****             /* This operation is just to make sure that if there are any other
6677:../../Source/Kernel/rme_kernel.c ****              * thread at the same priority level, we're not switching to ourself */
6678:../../Source/Kernel/rme_kernel.c ****             RME_ASSERT(Thd_Cur->Sched.State==RME_THD_READY);
 16734              		.loc 1 6678 13
 16735 0324 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 412


 16736 0328 1C3093E5 		ldr	r3, [r3, #28]
 16737 032c 000053E3 		cmp	r3, #0
 16738 0330 0800000A 		beq	.L1079
 16739              		.loc 1 6678 13 is_stmt 0 discriminator 1
 16740 0334 003000E3 		movw	r3, #:lower16:.LC6
 16741 0338 003040E3 		movt	r3, #:upper16:.LC6
 16742 033c 002000E3 		movw	r2, #:lower16:.LC7
 16743 0340 002040E3 		movt	r2, #:upper16:.LC7
 16744 0344 161A01E3 		movw	r1, #6678
 16745 0348 000000E3 		movw	r0, #:lower16:.LC8
 16746 034c 000040E3 		movt	r0, #:upper16:.LC8
 16747 0350 FEFFFFEB 		bl	RME_Log
 16748              	.L1080:
 16749              		.loc 1 6678 13
 16750 0354 FEFFFFEA 		b	.L1080
 16751              	.L1079:
6679:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Cur);
 16752              		.loc 1 6679 13 is_stmt 1
 16753 0358 14001BE5 		ldr	r0, [fp, #-20]
 16754 035c FEFFFFEB 		bl	_RME_Run_Del
6680:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Ins(Thd_Cur);
 16755              		.loc 1 6680 13
 16756 0360 14001BE5 		ldr	r0, [fp, #-20]
 16757 0364 FEFFFFEB 		bl	_RME_Run_Ins
 16758              	.L1078:
6681:../../Source/Kernel/rme_kernel.c ****         }
6682:../../Source/Kernel/rme_kernel.c ****         
6683:../../Source/Kernel/rme_kernel.c ****         Thd_New=_RME_Run_High(Local);
 16759              		.loc 1 6683 17
 16760 0368 10001BE5 		ldr	r0, [fp, #-16]
 16761 036c FEFFFFEB 		bl	_RME_Run_High
 16762 0370 0C000BE5 		str	r0, [fp, #-12]
 16763              	.L1075:
6684:../../Source/Kernel/rme_kernel.c ****     }
6685:../../Source/Kernel/rme_kernel.c ****     
6686:../../Source/Kernel/rme_kernel.c ****     /* Now that we are successful, save the return value to the caller stack */
6687:../../Source/Kernel/rme_kernel.c ****     __RME_Svc_Retval_Set(Reg,0);
 16764              		.loc 1 6687 5
 16765 0374 0010A0E3 		mov	r1, #0
 16766 0378 24001BE5 		ldr	r0, [fp, #-36]
 16767 037c FEFFFFEB 		bl	__RME_Svc_Retval_Set
6688:../../Source/Kernel/rme_kernel.c **** 
6689:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Thd_New->Sched.State==RME_THD_READY);
 16768              		.loc 1 6689 5
 16769 0380 0C301BE5 		ldr	r3, [fp, #-12]
 16770 0384 1C3093E5 		ldr	r3, [r3, #28]
 16771 0388 000053E3 		cmp	r3, #0
 16772 038c 0800000A 		beq	.L1081
 16773              		.loc 1 6689 5 is_stmt 0 discriminator 1
 16774 0390 003000E3 		movw	r3, #:lower16:.LC6
 16775 0394 003040E3 		movt	r3, #:upper16:.LC6
 16776 0398 002000E3 		movw	r2, #:lower16:.LC7
 16777 039c 002040E3 		movt	r2, #:upper16:.LC7
 16778 03a0 211A01E3 		movw	r1, #6689
 16779 03a4 000000E3 		movw	r0, #:lower16:.LC8
 16780 03a8 000040E3 		movt	r0, #:upper16:.LC8
 16781 03ac FEFFFFEB 		bl	RME_Log
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 413


 16782              	.L1082:
 16783              		.loc 1 6689 5
 16784 03b0 FEFFFFEA 		b	.L1082
 16785              	.L1081:
6690:../../Source/Kernel/rme_kernel.c ****     /* We cannot call _RME_Kern_High because it picks some random thread. Instead,
6691:../../Source/Kernel/rme_kernel.c ****      * we use a manual implementation that is faster than the _RME_Kern_High. */
6692:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur==Thd_New)
 16786              		.loc 1 6692 7 is_stmt 1
 16787 03b4 14201BE5 		ldr	r2, [fp, #-20]
 16788 03b8 0C301BE5 		ldr	r3, [fp, #-12]
 16789 03bc 030052E1 		cmp	r2, r3
 16790 03c0 0100001A 		bne	.L1083
6693:../../Source/Kernel/rme_kernel.c ****     {
6694:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6695:../../Source/Kernel/rme_kernel.c ****         
6696:../../Source/Kernel/rme_kernel.c ****         return 0;
 16791              		.loc 1 6696 16
 16792 03c4 0030A0E3 		mov	r3, #0
 16793 03c8 070000EA 		b	.L1062
 16794              	.L1083:
6697:../../Source/Kernel/rme_kernel.c ****     }
6698:../../Source/Kernel/rme_kernel.c ****     else
6699:../../Source/Kernel/rme_kernel.c ****     {
6700:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6701:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6702:../../Source/Kernel/rme_kernel.c ****     }
6703:../../Source/Kernel/rme_kernel.c ****             
6704:../../Source/Kernel/rme_kernel.c ****     /* We have a solid context switch at this point */
6705:../../Source/Kernel/rme_kernel.c ****     _RME_Run_Swt(Reg,Thd_Cur,Thd_New);
 16795              		.loc 1 6705 5
 16796 03cc 0C201BE5 		ldr	r2, [fp, #-12]
 16797 03d0 14101BE5 		ldr	r1, [fp, #-20]
 16798 03d4 24001BE5 		ldr	r0, [fp, #-36]
 16799 03d8 FEFFFFEB 		bl	_RME_Run_Swt
6706:../../Source/Kernel/rme_kernel.c ****     Local->Thd_Cur=Thd_New;
 16800              		.loc 1 6706 19
 16801 03dc 10301BE5 		ldr	r3, [fp, #-16]
 16802 03e0 0C201BE5 		ldr	r2, [fp, #-12]
 16803 03e4 042083E5 		str	r2, [r3, #4]
6707:../../Source/Kernel/rme_kernel.c **** 
6708:../../Source/Kernel/rme_kernel.c ****     return 0;
 16804              		.loc 1 6708 12
 16805 03e8 0030A0E3 		mov	r3, #0
 16806              	.L1062:
6709:../../Source/Kernel/rme_kernel.c **** }
 16807              		.loc 1 6709 1
 16808 03ec 0300A0E1 		mov	r0, r3
 16809 03f0 04D04BE2 		sub	sp, fp, #4
 16810              		.cfi_def_cfa 13, 8
 16811              		@ sp needed
 16812 03f4 0088BDE8 		pop	{fp, pc}
 16813              		.cfi_endproc
 16814              	.LFE64:
 16816              		.section	.text._RME_Sig_Boot_Crt,"ax",%progbits
 16817              		.align	2
 16818              		.global	_RME_Sig_Boot_Crt
 16819              		.syntax unified
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 414


 16820              		.arm
 16822              	_RME_Sig_Boot_Crt:
 16823              	.LFB65:
6710:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Thd_Swt *************************************************/
6711:../../Source/Kernel/rme_kernel.c **** 
6712:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Sig_Boot_Crt *************************************************
6713:../../Source/Kernel/rme_kernel.c **** Description : Create a boot-time kernel signal endpoint. This is only used at
6714:../../Source/Kernel/rme_kernel.c ****               boot-time to create endpoints that are related directly to 
6715:../../Source/Kernel/rme_kernel.c ****               hardware interrupts.
6716:../../Source/Kernel/rme_kernel.c ****               This function does not require a kernel memory capability.
6717:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
6718:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
6719:../../Source/Kernel/rme_kernel.c ****                                   for this signal.
6720:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
6721:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The capability slot that you want this newly
6722:../../Source/Kernel/rme_kernel.c ****                                   created signal capability to be in.
6723:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
6724:../../Source/Kernel/rme_kernel.c **** Output      : None.
6725:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
6726:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6727:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Sig_Boot_Crt(struct RME_Cap_Cpt* Cpt,
6728:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
6729:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Sig)
6730:../../Source/Kernel/rme_kernel.c **** {
 16824              		.loc 1 6730 1
 16825              		.cfi_startproc
 16826              		@ args = 0, pretend = 0, frame = 32
 16827              		@ frame_needed = 1, uses_anonymous_args = 0
 16828 0000 00482DE9 		push	{fp, lr}
 16829              		.cfi_def_cfa_offset 8
 16830              		.cfi_offset 11, -8
 16831              		.cfi_offset 14, -4
 16832 0004 04B08DE2 		add	fp, sp, #4
 16833              		.cfi_def_cfa 11, 4
 16834 0008 20D04DE2 		sub	sp, sp, #32
 16835 000c 18000BE5 		str	r0, [fp, #-24]
 16836 0010 1C100BE5 		str	r1, [fp, #-28]
 16837 0014 20200BE5 		str	r2, [fp, #-32]
6731:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Crt;
6732:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Crt;
6733:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6734:../../Source/Kernel/rme_kernel.c ****     
6735:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
6736:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 16838              		.loc 1 6736 5
 16839 0018 1C301BE5 		ldr	r3, [fp, #-28]
 16840 001c 803003E2 		and	r3, r3, #128
 16841 0020 000053E3 		cmp	r3, #0
 16842 0024 1C00001A 		bne	.L1085
 16843              		.loc 1 6736 5 is_stmt 0 discriminator 1
 16844 0028 18301BE5 		ldr	r3, [fp, #-24]
 16845 002c 142093E5 		ldr	r2, [r3, #20]
 16846 0030 1C301BE5 		ldr	r3, [fp, #-28]
 16847 0034 030052E1 		cmp	r2, r3
 16848 0038 0100008A 		bhi	.L1086
 16849              		.loc 1 6736 5 discriminator 3
 16850 003c 0230E0E3 		mvn	r3, #2
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 415


 16851              		.loc 1 6736 5
 16852 0040 8A0000EA 		b	.L1087
 16853              	.L1086:
 16854              		.loc 1 6736 5 discriminator 4
 16855 0044 1C301BE5 		ldr	r3, [fp, #-28]
 16856 0048 8322A0E1 		lsl	r2, r3, #5
 16857 004c 18301BE5 		ldr	r3, [fp, #-24]
 16858 0050 0C3093E5 		ldr	r3, [r3, #12]
 16859 0054 033082E0 		add	r3, r2, r3
 16860 0058 08300BE5 		str	r3, [fp, #-8]
 16861 005c 08301BE5 		ldr	r3, [fp, #-8]
 16862 0060 0300A0E1 		mov	r0, r3
 16863 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16864 0068 0C000BE5 		str	r0, [fp, #-12]
 16865              		.loc 1 6736 5 discriminator 1
 16866 006c 0C301BE5 		ldr	r3, [fp, #-12]
 16867 0070 FF3803E2 		and	r3, r3, #16711680
 16868 0074 020853E3 		cmp	r3, #131072
 16869 0078 0100001A 		bne	.L1088
 16870              		.loc 1 6736 5 discriminator 5
 16871 007c 0830E0E3 		mvn	r3, #8
 16872              		.loc 1 6736 5
 16873 0080 7A0000EA 		b	.L1087
 16874              	.L1088:
 16875              		.loc 1 6736 5 discriminator 6
 16876 0084 0C301BE5 		ldr	r3, [fp, #-12]
 16877 0088 233CA0E1 		lsr	r3, r3, #24
 16878 008c 030053E3 		cmp	r3, #3
 16879 0090 3F00000A 		beq	.L1089
 16880              		.loc 1 6736 5 discriminator 7
 16881 0094 0130E0E3 		mvn	r3, #1
 16882              		.loc 1 6736 5
 16883 0098 740000EA 		b	.L1087
 16884              	.L1085:
 16885              		.loc 1 6736 5 discriminator 2
 16886 009c 1C301BE5 		ldr	r3, [fp, #-28]
 16887 00a0 2324A0E1 		lsr	r2, r3, #8
 16888 00a4 18301BE5 		ldr	r3, [fp, #-24]
 16889 00a8 143093E5 		ldr	r3, [r3, #20]
 16890 00ac 030052E1 		cmp	r2, r3
 16891 00b0 0100003A 		bcc	.L1090
 16892              		.loc 1 6736 5 discriminator 8
 16893 00b4 0230E0E3 		mvn	r3, #2
 16894              		.loc 1 6736 5
 16895 00b8 6C0000EA 		b	.L1087
 16896              	.L1090:
 16897              		.loc 1 6736 5 discriminator 9
 16898 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 16899 00c0 2334A0E1 		lsr	r3, r3, #8
 16900 00c4 8322A0E1 		lsl	r2, r3, #5
 16901 00c8 18301BE5 		ldr	r3, [fp, #-24]
 16902 00cc 0C3093E5 		ldr	r3, [r3, #12]
 16903 00d0 033082E0 		add	r3, r2, r3
 16904 00d4 08300BE5 		str	r3, [fp, #-8]
 16905 00d8 08301BE5 		ldr	r3, [fp, #-8]
 16906 00dc 0300A0E1 		mov	r0, r3
 16907 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 416


 16908 00e4 0C000BE5 		str	r0, [fp, #-12]
 16909              		.loc 1 6736 5 discriminator 1
 16910 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 16911 00ec FF3803E2 		and	r3, r3, #16711680
 16912 00f0 020853E3 		cmp	r3, #131072
 16913 00f4 0100001A 		bne	.L1091
 16914              		.loc 1 6736 5 discriminator 10
 16915 00f8 0830E0E3 		mvn	r3, #8
 16916              		.loc 1 6736 5
 16917 00fc 5B0000EA 		b	.L1087
 16918              	.L1091:
 16919              		.loc 1 6736 5 discriminator 11
 16920 0100 0C301BE5 		ldr	r3, [fp, #-12]
 16921 0104 233CA0E1 		lsr	r3, r3, #24
 16922 0108 030053E3 		cmp	r3, #3
 16923 010c 0100000A 		beq	.L1092
 16924              		.loc 1 6736 5 discriminator 12
 16925 0110 0130E0E3 		mvn	r3, #1
 16926              		.loc 1 6736 5
 16927 0114 550000EA 		b	.L1087
 16928              	.L1092:
 16929              		.loc 1 6736 5 discriminator 13
 16930 0118 1C301BE5 		ldr	r3, [fp, #-28]
 16931 011c 7F2003E2 		and	r2, r3, #127
 16932 0120 08301BE5 		ldr	r3, [fp, #-8]
 16933 0124 143093E5 		ldr	r3, [r3, #20]
 16934 0128 030052E1 		cmp	r2, r3
 16935 012c 0100003A 		bcc	.L1093
 16936              		.loc 1 6736 5 discriminator 14
 16937 0130 0230E0E3 		mvn	r3, #2
 16938              		.loc 1 6736 5
 16939 0134 4D0000EA 		b	.L1087
 16940              	.L1093:
 16941              		.loc 1 6736 5 discriminator 15
 16942 0138 1C301BE5 		ldr	r3, [fp, #-28]
 16943 013c 7F3003E2 		and	r3, r3, #127
 16944 0140 8322A0E1 		lsl	r2, r3, #5
 16945 0144 08301BE5 		ldr	r3, [fp, #-8]
 16946 0148 0C3093E5 		ldr	r3, [r3, #12]
 16947 014c 033082E0 		add	r3, r2, r3
 16948 0150 08300BE5 		str	r3, [fp, #-8]
 16949 0154 08301BE5 		ldr	r3, [fp, #-8]
 16950 0158 0300A0E1 		mov	r0, r3
 16951 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 16952 0160 0C000BE5 		str	r0, [fp, #-12]
 16953              		.loc 1 6736 5 discriminator 1
 16954 0164 0C301BE5 		ldr	r3, [fp, #-12]
 16955 0168 FF3803E2 		and	r3, r3, #16711680
 16956 016c 020853E3 		cmp	r3, #131072
 16957 0170 0100001A 		bne	.L1094
 16958              		.loc 1 6736 5 discriminator 16
 16959 0174 0830E0E3 		mvn	r3, #8
 16960              		.loc 1 6736 5
 16961 0178 3C0000EA 		b	.L1087
 16962              	.L1094:
 16963              		.loc 1 6736 5 discriminator 17
 16964 017c 0C301BE5 		ldr	r3, [fp, #-12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 417


 16965 0180 233CA0E1 		lsr	r3, r3, #24
 16966 0184 030053E3 		cmp	r3, #3
 16967 0188 0100000A 		beq	.L1089
 16968              		.loc 1 6736 5 discriminator 18
 16969 018c 0130E0E3 		mvn	r3, #1
 16970              		.loc 1 6736 5
 16971 0190 360000EA 		b	.L1087
 16972              	.L1089:
6737:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Crt,Type_Stat);
6738:../../Source/Kernel/rme_kernel.c ****     /* Check if the captbl is not frozen and allows such operations */
6739:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Crt,RME_CPT_FLAG_CRT);
 16973              		.loc 1 6739 5 is_stmt 1
 16974 0194 08301BE5 		ldr	r3, [fp, #-8]
 16975 0198 083093E5 		ldr	r3, [r3, #8]
 16976 019c 013003E2 		and	r3, r3, #1
 16977 01a0 000053E3 		cmp	r3, #0
 16978 01a4 0100001A 		bne	.L1095
 16979              		.loc 1 6739 5 is_stmt 0 discriminator 1
 16980 01a8 0630E0E3 		mvn	r3, #6
 16981              		.loc 1 6739 5
 16982 01ac 2F0000EA 		b	.L1087
 16983              	.L1095:
6740:../../Source/Kernel/rme_kernel.c ****     
6741:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
6742:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Crt,Cap_Sig,struct RME_Cap_Sig*,Sig_Crt);
 16984              		.loc 1 6742 5 is_stmt 1
 16985 01b0 08301BE5 		ldr	r3, [fp, #-8]
 16986 01b4 142093E5 		ldr	r2, [r3, #20]
 16987 01b8 20301BE5 		ldr	r3, [fp, #-32]
 16988 01bc 030052E1 		cmp	r2, r3
 16989 01c0 0100008A 		bhi	.L1096
 16990              		.loc 1 6742 5 is_stmt 0 discriminator 1
 16991 01c4 0230E0E3 		mvn	r3, #2
 16992              		.loc 1 6742 5
 16993 01c8 280000EA 		b	.L1087
 16994              	.L1096:
 16995              		.loc 1 6742 5 discriminator 2
 16996 01cc 20301BE5 		ldr	r3, [fp, #-32]
 16997 01d0 8322A0E1 		lsl	r2, r3, #5
 16998 01d4 08301BE5 		ldr	r3, [fp, #-8]
 16999 01d8 0C3093E5 		ldr	r3, [r3, #12]
 17000 01dc 033082E0 		add	r3, r2, r3
 17001 01e0 10300BE5 		str	r3, [fp, #-16]
6743:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
6744:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Sig_Crt);
 17002              		.loc 1 6744 5 is_stmt 1
 17003 01e4 10301BE5 		ldr	r3, [fp, #-16]
 17004 01e8 0128A0E3 		mov	r2, #65536
 17005 01ec 0010A0E3 		mov	r1, #0
 17006 01f0 0300A0E1 		mov	r0, r3
 17007 01f4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 17008 01f8 0030A0E1 		mov	r3, r0
 17009              		.loc 1 6744 5 is_stmt 0 discriminator 1
 17010 01fc 000053E3 		cmp	r3, #0
 17011 0200 0100001A 		bne	.L1097
 17012 0204 0430E0E3 		mvn	r3, #4
 17013              		.loc 1 6744 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 418


 17014 0208 180000EA 		b	.L1087
 17015              	.L1097:
 17016              		.loc 1 6744 5 discriminator 2
 17017 020c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 17018 0210 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 17019 0214 002093E5 		ldr	r2, [r3]
 17020 0218 10301BE5 		ldr	r3, [fp, #-16]
 17021 021c 102083E5 		str	r2, [r3, #16]
6745:../../Source/Kernel/rme_kernel.c ****     
6746:../../Source/Kernel/rme_kernel.c ****     /* Header init */
6747:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Root_Ref=1U;
 17022              		.loc 1 6747 27 is_stmt 1
 17023 0220 10301BE5 		ldr	r3, [fp, #-16]
 17024 0224 0120A0E3 		mov	r2, #1
 17025 0228 042083E5 		str	r2, [r3, #4]
6748:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Object=0U;
 17026              		.loc 1 6748 25
 17027 022c 10301BE5 		ldr	r3, [fp, #-16]
 17028 0230 0020A0E3 		mov	r2, #0
 17029 0234 0C2083E5 		str	r2, [r3, #12]
6749:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Flag=RME_SIG_FLAG_ALL;
 17030              		.loc 1 6749 23
 17031 0238 10301BE5 		ldr	r3, [fp, #-16]
 17032 023c 3F20A0E3 		mov	r2, #63
 17033 0240 082083E5 		str	r2, [r3, #8]
6750:../../Source/Kernel/rme_kernel.c ****     
6751:../../Source/Kernel/rme_kernel.c ****     /* Info init */
6752:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Sig_Num=0U;
 17034              		.loc 1 6752 21
 17035 0244 10301BE5 		ldr	r3, [fp, #-16]
 17036 0248 0020A0E3 		mov	r2, #0
 17037 024c 142083E5 		str	r2, [r3, #20]
6753:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Thd=RME_NULL;
 17038              		.loc 1 6753 17
 17039 0250 10301BE5 		ldr	r3, [fp, #-16]
 17040 0254 0020A0E3 		mov	r2, #0
 17041 0258 182083E5 		str	r2, [r3, #24]
6754:../../Source/Kernel/rme_kernel.c **** 
6755:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
6756:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Sig_Crt->Head.Type_Stat),
 17042              		.loc 1 6756 5
 17043 025c 10301BE5 		ldr	r3, [fp, #-16]
 17044 0260 0213A0E3 		mov	r1, #134217728
 17045 0264 0300A0E1 		mov	r0, r3
 17046 0268 FEFFFFEB 		bl	__RME_A7A_Write_Release
6757:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_SIG,
6758:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
6759:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
6760:../../Source/Kernel/rme_kernel.c **** 
6761:../../Source/Kernel/rme_kernel.c ****     return 0;
 17047              		.loc 1 6761 12
 17048 026c 0030A0E3 		mov	r3, #0
 17049              	.L1087:
6762:../../Source/Kernel/rme_kernel.c **** }
 17050              		.loc 1 6762 1
 17051 0270 0300A0E1 		mov	r0, r3
 17052 0274 04D04BE2 		sub	sp, fp, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 419


 17053              		.cfi_def_cfa 13, 8
 17054              		@ sp needed
 17055 0278 0088BDE8 		pop	{fp, pc}
 17056              		.cfi_endproc
 17057              	.LFE65:
 17059              		.section	.text._RME_Sig_Crt,"ax",%progbits
 17060              		.align	2
 17061              		.syntax unified
 17062              		.arm
 17064              	_RME_Sig_Crt:
 17065              	.LFB66:
6763:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Sig_Boot_Crt ********************************************/
6764:../../Source/Kernel/rme_kernel.c **** 
6765:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Sig_Crt ******************************************************
6766:../../Source/Kernel/rme_kernel.c **** Description : Create a signal endpoint.
6767:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
6768:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
6769:../../Source/Kernel/rme_kernel.c ****                                   for this signal.
6770:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
6771:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The capability slot that you want this newly
6772:../../Source/Kernel/rme_kernel.c ****                                   created signal capability to be in.
6773:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
6774:../../Source/Kernel/rme_kernel.c **** Output      : None.
6775:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
6776:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6777:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Sig_Crt(struct RME_Cap_Cpt* Cpt,
6778:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
6779:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Sig)
6780:../../Source/Kernel/rme_kernel.c **** {
 17066              		.loc 1 6780 1
 17067              		.cfi_startproc
 17068              		@ args = 0, pretend = 0, frame = 32
 17069              		@ frame_needed = 1, uses_anonymous_args = 0
 17070 0000 00482DE9 		push	{fp, lr}
 17071              		.cfi_def_cfa_offset 8
 17072              		.cfi_offset 11, -8
 17073              		.cfi_offset 14, -4
 17074 0004 04B08DE2 		add	fp, sp, #4
 17075              		.cfi_def_cfa 11, 4
 17076 0008 20D04DE2 		sub	sp, sp, #32
 17077 000c 18000BE5 		str	r0, [fp, #-24]
 17078 0010 1C100BE5 		str	r1, [fp, #-28]
 17079 0014 20200BE5 		str	r2, [fp, #-32]
6781:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
6782:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Sig* Sig_Crt;
6783:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6784:../../Source/Kernel/rme_kernel.c ****     
6785:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
6786:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 17080              		.loc 1 6786 5
 17081 0018 1C301BE5 		ldr	r3, [fp, #-28]
 17082 001c 803003E2 		and	r3, r3, #128
 17083 0020 000053E3 		cmp	r3, #0
 17084 0024 1C00001A 		bne	.L1099
 17085              		.loc 1 6786 5 is_stmt 0 discriminator 1
 17086 0028 18301BE5 		ldr	r3, [fp, #-24]
 17087 002c 142093E5 		ldr	r2, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 420


 17088 0030 1C301BE5 		ldr	r3, [fp, #-28]
 17089 0034 030052E1 		cmp	r2, r3
 17090 0038 0100008A 		bhi	.L1100
 17091              		.loc 1 6786 5 discriminator 3
 17092 003c 0230E0E3 		mvn	r3, #2
 17093              		.loc 1 6786 5
 17094 0040 8A0000EA 		b	.L1101
 17095              	.L1100:
 17096              		.loc 1 6786 5 discriminator 4
 17097 0044 1C301BE5 		ldr	r3, [fp, #-28]
 17098 0048 8322A0E1 		lsl	r2, r3, #5
 17099 004c 18301BE5 		ldr	r3, [fp, #-24]
 17100 0050 0C3093E5 		ldr	r3, [r3, #12]
 17101 0054 033082E0 		add	r3, r2, r3
 17102 0058 08300BE5 		str	r3, [fp, #-8]
 17103 005c 08301BE5 		ldr	r3, [fp, #-8]
 17104 0060 0300A0E1 		mov	r0, r3
 17105 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17106 0068 0C000BE5 		str	r0, [fp, #-12]
 17107              		.loc 1 6786 5 discriminator 1
 17108 006c 0C301BE5 		ldr	r3, [fp, #-12]
 17109 0070 FF3803E2 		and	r3, r3, #16711680
 17110 0074 020853E3 		cmp	r3, #131072
 17111 0078 0100001A 		bne	.L1102
 17112              		.loc 1 6786 5 discriminator 5
 17113 007c 0830E0E3 		mvn	r3, #8
 17114              		.loc 1 6786 5
 17115 0080 7A0000EA 		b	.L1101
 17116              	.L1102:
 17117              		.loc 1 6786 5 discriminator 6
 17118 0084 0C301BE5 		ldr	r3, [fp, #-12]
 17119 0088 233CA0E1 		lsr	r3, r3, #24
 17120 008c 030053E3 		cmp	r3, #3
 17121 0090 3F00000A 		beq	.L1103
 17122              		.loc 1 6786 5 discriminator 7
 17123 0094 0130E0E3 		mvn	r3, #1
 17124              		.loc 1 6786 5
 17125 0098 740000EA 		b	.L1101
 17126              	.L1099:
 17127              		.loc 1 6786 5 discriminator 2
 17128 009c 1C301BE5 		ldr	r3, [fp, #-28]
 17129 00a0 2324A0E1 		lsr	r2, r3, #8
 17130 00a4 18301BE5 		ldr	r3, [fp, #-24]
 17131 00a8 143093E5 		ldr	r3, [r3, #20]
 17132 00ac 030052E1 		cmp	r2, r3
 17133 00b0 0100003A 		bcc	.L1104
 17134              		.loc 1 6786 5 discriminator 8
 17135 00b4 0230E0E3 		mvn	r3, #2
 17136              		.loc 1 6786 5
 17137 00b8 6C0000EA 		b	.L1101
 17138              	.L1104:
 17139              		.loc 1 6786 5 discriminator 9
 17140 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 17141 00c0 2334A0E1 		lsr	r3, r3, #8
 17142 00c4 8322A0E1 		lsl	r2, r3, #5
 17143 00c8 18301BE5 		ldr	r3, [fp, #-24]
 17144 00cc 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 421


 17145 00d0 033082E0 		add	r3, r2, r3
 17146 00d4 08300BE5 		str	r3, [fp, #-8]
 17147 00d8 08301BE5 		ldr	r3, [fp, #-8]
 17148 00dc 0300A0E1 		mov	r0, r3
 17149 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17150 00e4 0C000BE5 		str	r0, [fp, #-12]
 17151              		.loc 1 6786 5 discriminator 1
 17152 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 17153 00ec FF3803E2 		and	r3, r3, #16711680
 17154 00f0 020853E3 		cmp	r3, #131072
 17155 00f4 0100001A 		bne	.L1105
 17156              		.loc 1 6786 5 discriminator 10
 17157 00f8 0830E0E3 		mvn	r3, #8
 17158              		.loc 1 6786 5
 17159 00fc 5B0000EA 		b	.L1101
 17160              	.L1105:
 17161              		.loc 1 6786 5 discriminator 11
 17162 0100 0C301BE5 		ldr	r3, [fp, #-12]
 17163 0104 233CA0E1 		lsr	r3, r3, #24
 17164 0108 030053E3 		cmp	r3, #3
 17165 010c 0100000A 		beq	.L1106
 17166              		.loc 1 6786 5 discriminator 12
 17167 0110 0130E0E3 		mvn	r3, #1
 17168              		.loc 1 6786 5
 17169 0114 550000EA 		b	.L1101
 17170              	.L1106:
 17171              		.loc 1 6786 5 discriminator 13
 17172 0118 1C301BE5 		ldr	r3, [fp, #-28]
 17173 011c 7F2003E2 		and	r2, r3, #127
 17174 0120 08301BE5 		ldr	r3, [fp, #-8]
 17175 0124 143093E5 		ldr	r3, [r3, #20]
 17176 0128 030052E1 		cmp	r2, r3
 17177 012c 0100003A 		bcc	.L1107
 17178              		.loc 1 6786 5 discriminator 14
 17179 0130 0230E0E3 		mvn	r3, #2
 17180              		.loc 1 6786 5
 17181 0134 4D0000EA 		b	.L1101
 17182              	.L1107:
 17183              		.loc 1 6786 5 discriminator 15
 17184 0138 1C301BE5 		ldr	r3, [fp, #-28]
 17185 013c 7F3003E2 		and	r3, r3, #127
 17186 0140 8322A0E1 		lsl	r2, r3, #5
 17187 0144 08301BE5 		ldr	r3, [fp, #-8]
 17188 0148 0C3093E5 		ldr	r3, [r3, #12]
 17189 014c 033082E0 		add	r3, r2, r3
 17190 0150 08300BE5 		str	r3, [fp, #-8]
 17191 0154 08301BE5 		ldr	r3, [fp, #-8]
 17192 0158 0300A0E1 		mov	r0, r3
 17193 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17194 0160 0C000BE5 		str	r0, [fp, #-12]
 17195              		.loc 1 6786 5 discriminator 1
 17196 0164 0C301BE5 		ldr	r3, [fp, #-12]
 17197 0168 FF3803E2 		and	r3, r3, #16711680
 17198 016c 020853E3 		cmp	r3, #131072
 17199 0170 0100001A 		bne	.L1108
 17200              		.loc 1 6786 5 discriminator 16
 17201 0174 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 422


 17202              		.loc 1 6786 5
 17203 0178 3C0000EA 		b	.L1101
 17204              	.L1108:
 17205              		.loc 1 6786 5 discriminator 17
 17206 017c 0C301BE5 		ldr	r3, [fp, #-12]
 17207 0180 233CA0E1 		lsr	r3, r3, #24
 17208 0184 030053E3 		cmp	r3, #3
 17209 0188 0100000A 		beq	.L1103
 17210              		.loc 1 6786 5 discriminator 18
 17211 018c 0130E0E3 		mvn	r3, #1
 17212              		.loc 1 6786 5
 17213 0190 360000EA 		b	.L1101
 17214              	.L1103:
6787:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
6788:../../Source/Kernel/rme_kernel.c ****     /* Check if the captbl is not frozen and allows such operations */
6789:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 17215              		.loc 1 6789 5 is_stmt 1
 17216 0194 08301BE5 		ldr	r3, [fp, #-8]
 17217 0198 083093E5 		ldr	r3, [r3, #8]
 17218 019c 013003E2 		and	r3, r3, #1
 17219 01a0 000053E3 		cmp	r3, #0
 17220 01a4 0100001A 		bne	.L1109
 17221              		.loc 1 6789 5 is_stmt 0 discriminator 1
 17222 01a8 0630E0E3 		mvn	r3, #6
 17223              		.loc 1 6789 5
 17224 01ac 2F0000EA 		b	.L1101
 17225              	.L1109:
6790:../../Source/Kernel/rme_kernel.c ****     
6791:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
6792:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Sig,struct RME_Cap_Sig*,Sig_Crt);
 17226              		.loc 1 6792 5 is_stmt 1
 17227 01b0 08301BE5 		ldr	r3, [fp, #-8]
 17228 01b4 142093E5 		ldr	r2, [r3, #20]
 17229 01b8 20301BE5 		ldr	r3, [fp, #-32]
 17230 01bc 030052E1 		cmp	r2, r3
 17231 01c0 0100008A 		bhi	.L1110
 17232              		.loc 1 6792 5 is_stmt 0 discriminator 1
 17233 01c4 0230E0E3 		mvn	r3, #2
 17234              		.loc 1 6792 5
 17235 01c8 280000EA 		b	.L1101
 17236              	.L1110:
 17237              		.loc 1 6792 5 discriminator 2
 17238 01cc 20301BE5 		ldr	r3, [fp, #-32]
 17239 01d0 8322A0E1 		lsl	r2, r3, #5
 17240 01d4 08301BE5 		ldr	r3, [fp, #-8]
 17241 01d8 0C3093E5 		ldr	r3, [r3, #12]
 17242 01dc 033082E0 		add	r3, r2, r3
 17243 01e0 10300BE5 		str	r3, [fp, #-16]
6793:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
6794:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Sig_Crt);
 17244              		.loc 1 6794 5 is_stmt 1
 17245 01e4 10301BE5 		ldr	r3, [fp, #-16]
 17246 01e8 0128A0E3 		mov	r2, #65536
 17247 01ec 0010A0E3 		mov	r1, #0
 17248 01f0 0300A0E1 		mov	r0, r3
 17249 01f4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 17250 01f8 0030A0E1 		mov	r3, r0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 423


 17251              		.loc 1 6794 5 is_stmt 0 discriminator 1
 17252 01fc 000053E3 		cmp	r3, #0
 17253 0200 0100001A 		bne	.L1111
 17254 0204 0430E0E3 		mvn	r3, #4
 17255              		.loc 1 6794 5
 17256 0208 180000EA 		b	.L1101
 17257              	.L1111:
 17258              		.loc 1 6794 5 discriminator 2
 17259 020c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 17260 0210 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 17261 0214 002093E5 		ldr	r2, [r3]
 17262 0218 10301BE5 		ldr	r3, [fp, #-16]
 17263 021c 102083E5 		str	r2, [r3, #16]
6795:../../Source/Kernel/rme_kernel.c **** 
6796:../../Source/Kernel/rme_kernel.c ****     /* Header init */
6797:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Root_Ref=0U;
 17264              		.loc 1 6797 27 is_stmt 1
 17265 0220 10301BE5 		ldr	r3, [fp, #-16]
 17266 0224 0020A0E3 		mov	r2, #0
 17267 0228 042083E5 		str	r2, [r3, #4]
6798:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Object=0U;
 17268              		.loc 1 6798 25
 17269 022c 10301BE5 		ldr	r3, [fp, #-16]
 17270 0230 0020A0E3 		mov	r2, #0
 17271 0234 0C2083E5 		str	r2, [r3, #12]
6799:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Head.Flag=RME_SIG_FLAG_ALL;
 17272              		.loc 1 6799 23
 17273 0238 10301BE5 		ldr	r3, [fp, #-16]
 17274 023c 3F20A0E3 		mov	r2, #63
 17275 0240 082083E5 		str	r2, [r3, #8]
6800:../../Source/Kernel/rme_kernel.c ****     
6801:../../Source/Kernel/rme_kernel.c ****     /* Info init */
6802:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Sig_Num=0U;
 17276              		.loc 1 6802 21
 17277 0244 10301BE5 		ldr	r3, [fp, #-16]
 17278 0248 0020A0E3 		mov	r2, #0
 17279 024c 142083E5 		str	r2, [r3, #20]
6803:../../Source/Kernel/rme_kernel.c ****     Sig_Crt->Thd=0U;
 17280              		.loc 1 6803 17
 17281 0250 10301BE5 		ldr	r3, [fp, #-16]
 17282 0254 0020A0E3 		mov	r2, #0
 17283 0258 182083E5 		str	r2, [r3, #24]
6804:../../Source/Kernel/rme_kernel.c ****     
6805:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
6806:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Sig_Crt->Head.Type_Stat),
 17284              		.loc 1 6806 5
 17285 025c 10301BE5 		ldr	r3, [fp, #-16]
 17286 0260 0213A0E3 		mov	r1, #134217728
 17287 0264 0300A0E1 		mov	r0, r3
 17288 0268 FEFFFFEB 		bl	__RME_A7A_Write_Release
6807:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_SIG,
6808:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
6809:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
6810:../../Source/Kernel/rme_kernel.c **** 
6811:../../Source/Kernel/rme_kernel.c ****     return 0;
 17289              		.loc 1 6811 12
 17290 026c 0030A0E3 		mov	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 424


 17291              	.L1101:
6812:../../Source/Kernel/rme_kernel.c **** }
 17292              		.loc 1 6812 1
 17293 0270 0300A0E1 		mov	r0, r3
 17294 0274 04D04BE2 		sub	sp, fp, #4
 17295              		.cfi_def_cfa 13, 8
 17296              		@ sp needed
 17297 0278 0088BDE8 		pop	{fp, pc}
 17298              		.cfi_endproc
 17299              	.LFE66:
 17301              		.section	.text._RME_Sig_Del,"ax",%progbits
 17302              		.align	2
 17303              		.syntax unified
 17304              		.arm
 17306              	_RME_Sig_Del:
 17307              	.LFB67:
6813:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Sig_Crt *************************************************/
6814:../../Source/Kernel/rme_kernel.c **** 
6815:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Sig_Del ******************************************************
6816:../../Source/Kernel/rme_kernel.c **** Description : Delete a signal endpoint.
6817:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
6818:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to
6819:../../Source/Kernel/rme_kernel.c ****                                   delete from.
6820:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
6821:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The capability to the signal.
6822:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
6823:../../Source/Kernel/rme_kernel.c **** Output      : None.
6824:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
6825:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6826:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Sig_Del(struct RME_Cap_Cpt* Cpt,
6827:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
6828:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Sig)
6829:../../Source/Kernel/rme_kernel.c **** {
 17308              		.loc 1 6829 1
 17309              		.cfi_startproc
 17310              		@ args = 0, pretend = 0, frame = 32
 17311              		@ frame_needed = 1, uses_anonymous_args = 0
 17312 0000 00482DE9 		push	{fp, lr}
 17313              		.cfi_def_cfa_offset 8
 17314              		.cfi_offset 11, -8
 17315              		.cfi_offset 14, -4
 17316 0004 04B08DE2 		add	fp, sp, #4
 17317              		.cfi_def_cfa 11, 4
 17318 0008 20D04DE2 		sub	sp, sp, #32
 17319 000c 18000BE5 		str	r0, [fp, #-24]
 17320 0010 1C100BE5 		str	r1, [fp, #-28]
 17321 0014 20200BE5 		str	r2, [fp, #-32]
6830:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
6831:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Sig* Sig_Del;
6832:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
6833:../../Source/Kernel/rme_kernel.c ****     
6834:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
6835:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 17322              		.loc 1 6835 5
 17323 0018 1C301BE5 		ldr	r3, [fp, #-28]
 17324 001c 803003E2 		and	r3, r3, #128
 17325 0020 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 425


 17326 0024 1C00001A 		bne	.L1113
 17327              		.loc 1 6835 5 is_stmt 0 discriminator 1
 17328 0028 18301BE5 		ldr	r3, [fp, #-24]
 17329 002c 142093E5 		ldr	r2, [r3, #20]
 17330 0030 1C301BE5 		ldr	r3, [fp, #-28]
 17331 0034 030052E1 		cmp	r2, r3
 17332 0038 0100008A 		bhi	.L1114
 17333              		.loc 1 6835 5 discriminator 3
 17334 003c 0230E0E3 		mvn	r3, #2
 17335              		.loc 1 6835 5
 17336 0040 B80000EA 		b	.L1115
 17337              	.L1114:
 17338              		.loc 1 6835 5 discriminator 4
 17339 0044 1C301BE5 		ldr	r3, [fp, #-28]
 17340 0048 8322A0E1 		lsl	r2, r3, #5
 17341 004c 18301BE5 		ldr	r3, [fp, #-24]
 17342 0050 0C3093E5 		ldr	r3, [r3, #12]
 17343 0054 033082E0 		add	r3, r2, r3
 17344 0058 08300BE5 		str	r3, [fp, #-8]
 17345 005c 08301BE5 		ldr	r3, [fp, #-8]
 17346 0060 0300A0E1 		mov	r0, r3
 17347 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17348 0068 0C000BE5 		str	r0, [fp, #-12]
 17349              		.loc 1 6835 5 discriminator 1
 17350 006c 0C301BE5 		ldr	r3, [fp, #-12]
 17351 0070 FF3803E2 		and	r3, r3, #16711680
 17352 0074 020853E3 		cmp	r3, #131072
 17353 0078 0100001A 		bne	.L1116
 17354              		.loc 1 6835 5 discriminator 5
 17355 007c 0830E0E3 		mvn	r3, #8
 17356              		.loc 1 6835 5
 17357 0080 A80000EA 		b	.L1115
 17358              	.L1116:
 17359              		.loc 1 6835 5 discriminator 6
 17360 0084 0C301BE5 		ldr	r3, [fp, #-12]
 17361 0088 233CA0E1 		lsr	r3, r3, #24
 17362 008c 030053E3 		cmp	r3, #3
 17363 0090 3F00000A 		beq	.L1117
 17364              		.loc 1 6835 5 discriminator 7
 17365 0094 0130E0E3 		mvn	r3, #1
 17366              		.loc 1 6835 5
 17367 0098 A20000EA 		b	.L1115
 17368              	.L1113:
 17369              		.loc 1 6835 5 discriminator 2
 17370 009c 1C301BE5 		ldr	r3, [fp, #-28]
 17371 00a0 2324A0E1 		lsr	r2, r3, #8
 17372 00a4 18301BE5 		ldr	r3, [fp, #-24]
 17373 00a8 143093E5 		ldr	r3, [r3, #20]
 17374 00ac 030052E1 		cmp	r2, r3
 17375 00b0 0100003A 		bcc	.L1118
 17376              		.loc 1 6835 5 discriminator 8
 17377 00b4 0230E0E3 		mvn	r3, #2
 17378              		.loc 1 6835 5
 17379 00b8 9A0000EA 		b	.L1115
 17380              	.L1118:
 17381              		.loc 1 6835 5 discriminator 9
 17382 00bc 1C301BE5 		ldr	r3, [fp, #-28]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 426


 17383 00c0 2334A0E1 		lsr	r3, r3, #8
 17384 00c4 8322A0E1 		lsl	r2, r3, #5
 17385 00c8 18301BE5 		ldr	r3, [fp, #-24]
 17386 00cc 0C3093E5 		ldr	r3, [r3, #12]
 17387 00d0 033082E0 		add	r3, r2, r3
 17388 00d4 08300BE5 		str	r3, [fp, #-8]
 17389 00d8 08301BE5 		ldr	r3, [fp, #-8]
 17390 00dc 0300A0E1 		mov	r0, r3
 17391 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17392 00e4 0C000BE5 		str	r0, [fp, #-12]
 17393              		.loc 1 6835 5 discriminator 1
 17394 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 17395 00ec FF3803E2 		and	r3, r3, #16711680
 17396 00f0 020853E3 		cmp	r3, #131072
 17397 00f4 0100001A 		bne	.L1119
 17398              		.loc 1 6835 5 discriminator 10
 17399 00f8 0830E0E3 		mvn	r3, #8
 17400              		.loc 1 6835 5
 17401 00fc 890000EA 		b	.L1115
 17402              	.L1119:
 17403              		.loc 1 6835 5 discriminator 11
 17404 0100 0C301BE5 		ldr	r3, [fp, #-12]
 17405 0104 233CA0E1 		lsr	r3, r3, #24
 17406 0108 030053E3 		cmp	r3, #3
 17407 010c 0100000A 		beq	.L1120
 17408              		.loc 1 6835 5 discriminator 12
 17409 0110 0130E0E3 		mvn	r3, #1
 17410              		.loc 1 6835 5
 17411 0114 830000EA 		b	.L1115
 17412              	.L1120:
 17413              		.loc 1 6835 5 discriminator 13
 17414 0118 1C301BE5 		ldr	r3, [fp, #-28]
 17415 011c 7F2003E2 		and	r2, r3, #127
 17416 0120 08301BE5 		ldr	r3, [fp, #-8]
 17417 0124 143093E5 		ldr	r3, [r3, #20]
 17418 0128 030052E1 		cmp	r2, r3
 17419 012c 0100003A 		bcc	.L1121
 17420              		.loc 1 6835 5 discriminator 14
 17421 0130 0230E0E3 		mvn	r3, #2
 17422              		.loc 1 6835 5
 17423 0134 7B0000EA 		b	.L1115
 17424              	.L1121:
 17425              		.loc 1 6835 5 discriminator 15
 17426 0138 1C301BE5 		ldr	r3, [fp, #-28]
 17427 013c 7F3003E2 		and	r3, r3, #127
 17428 0140 8322A0E1 		lsl	r2, r3, #5
 17429 0144 08301BE5 		ldr	r3, [fp, #-8]
 17430 0148 0C3093E5 		ldr	r3, [r3, #12]
 17431 014c 033082E0 		add	r3, r2, r3
 17432 0150 08300BE5 		str	r3, [fp, #-8]
 17433 0154 08301BE5 		ldr	r3, [fp, #-8]
 17434 0158 0300A0E1 		mov	r0, r3
 17435 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17436 0160 0C000BE5 		str	r0, [fp, #-12]
 17437              		.loc 1 6835 5 discriminator 1
 17438 0164 0C301BE5 		ldr	r3, [fp, #-12]
 17439 0168 FF3803E2 		and	r3, r3, #16711680
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 427


 17440 016c 020853E3 		cmp	r3, #131072
 17441 0170 0100001A 		bne	.L1122
 17442              		.loc 1 6835 5 discriminator 16
 17443 0174 0830E0E3 		mvn	r3, #8
 17444              		.loc 1 6835 5
 17445 0178 6A0000EA 		b	.L1115
 17446              	.L1122:
 17447              		.loc 1 6835 5 discriminator 17
 17448 017c 0C301BE5 		ldr	r3, [fp, #-12]
 17449 0180 233CA0E1 		lsr	r3, r3, #24
 17450 0184 030053E3 		cmp	r3, #3
 17451 0188 0100000A 		beq	.L1117
 17452              		.loc 1 6835 5 discriminator 18
 17453 018c 0130E0E3 		mvn	r3, #1
 17454              		.loc 1 6835 5
 17455 0190 640000EA 		b	.L1115
 17456              	.L1117:
6836:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
6837:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
6838:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 17457              		.loc 1 6838 5 is_stmt 1
 17458 0194 08301BE5 		ldr	r3, [fp, #-8]
 17459 0198 083093E5 		ldr	r3, [r3, #8]
 17460 019c 023003E2 		and	r3, r3, #2
 17461 01a0 000053E3 		cmp	r3, #0
 17462 01a4 0100001A 		bne	.L1123
 17463              		.loc 1 6838 5 is_stmt 0 discriminator 1
 17464 01a8 0630E0E3 		mvn	r3, #6
 17465              		.loc 1 6838 5
 17466 01ac 5D0000EA 		b	.L1115
 17467              	.L1123:
6839:../../Source/Kernel/rme_kernel.c ****     
6840:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
6841:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Sig,struct RME_Cap_Sig*,Sig_Del);
 17468              		.loc 1 6841 5 is_stmt 1
 17469 01b0 08301BE5 		ldr	r3, [fp, #-8]
 17470 01b4 142093E5 		ldr	r2, [r3, #20]
 17471 01b8 20301BE5 		ldr	r3, [fp, #-32]
 17472 01bc 030052E1 		cmp	r2, r3
 17473 01c0 0100008A 		bhi	.L1124
 17474              		.loc 1 6841 5 is_stmt 0 discriminator 1
 17475 01c4 0230E0E3 		mvn	r3, #2
 17476              		.loc 1 6841 5
 17477 01c8 560000EA 		b	.L1115
 17478              	.L1124:
 17479              		.loc 1 6841 5 discriminator 2
 17480 01cc 20301BE5 		ldr	r3, [fp, #-32]
 17481 01d0 8322A0E1 		lsl	r2, r3, #5
 17482 01d4 08301BE5 		ldr	r3, [fp, #-8]
 17483 01d8 0C3093E5 		ldr	r3, [r3, #12]
 17484 01dc 033082E0 		add	r3, r2, r3
 17485 01e0 10300BE5 		str	r3, [fp, #-16]
6842:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
6843:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Sig_Del,Type_Stat,RME_CAP_TYPE_SIG);
 17486              		.loc 1 6843 5 is_stmt 1
 17487 01e4 10301BE5 		ldr	r3, [fp, #-16]
 17488 01e8 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 428


 17489 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17490 01f0 0C000BE5 		str	r0, [fp, #-12]
 17491              		.loc 1 6843 5 is_stmt 0 discriminator 1
 17492 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 17493 01f8 FF3803E2 		and	r3, r3, #16711680
 17494 01fc 020853E3 		cmp	r3, #131072
 17495 0200 0100000A 		beq	.L1125
 17496 0204 0830E0E3 		mvn	r3, #8
 17497              		.loc 1 6843 5
 17498 0208 460000EA 		b	.L1115
 17499              	.L1125:
 17500              		.loc 1 6843 5 discriminator 2
 17501 020c 0C301BE5 		ldr	r3, [fp, #-12]
 17502 0210 233CA0E1 		lsr	r3, r3, #24
 17503 0214 080053E3 		cmp	r3, #8
 17504 0218 0100000A 		beq	.L1126
 17505              		.loc 1 6843 5 discriminator 3
 17506 021c 0130E0E3 		mvn	r3, #1
 17507              		.loc 1 6843 5
 17508 0220 400000EA 		b	.L1115
 17509              	.L1126:
 17510              		.loc 1 6843 5 discriminator 4
 17511 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 17512 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 17513 022c 002093E5 		ldr	r2, [r3]
 17514 0230 10301BE5 		ldr	r3, [fp, #-16]
 17515 0234 103093E5 		ldr	r3, [r3, #16]
 17516 0238 0310A0E1 		mov	r1, r3
 17517 023c 0200A0E1 		mov	r0, r2
 17518 0240 FEFFFFEB 		bl	_RME_Diff
 17519 0244 0030A0E1 		mov	r3, r0
 17520              		.loc 1 6843 5 discriminator 1
 17521 0248 0A0053E3 		cmp	r3, #10
 17522 024c 0100008A 		bhi	.L1127
 17523              		.loc 1 6843 5 discriminator 5
 17524 0250 0730E0E3 		mvn	r3, #7
 17525              		.loc 1 6843 5
 17526 0254 330000EA 		b	.L1115
 17527              	.L1127:
 17528              		.loc 1 6843 5 discriminator 6
 17529 0258 10301BE5 		ldr	r3, [fp, #-16]
 17530 025c 043093E5 		ldr	r3, [r3, #4]
 17531 0260 000053E3 		cmp	r3, #0
 17532 0264 0B00000A 		beq	.L1128
 17533              		.loc 1 6843 5 discriminator 7
 17534 0268 0C301BE5 		ldr	r3, [fp, #-12]
 17535 026c 7330FFE6 		uxth	r3, r3
 17536 0270 000053E3 		cmp	r3, #0
 17537 0274 0500001A 		bne	.L1129
 17538              		.loc 1 6843 5 discriminator 9
 17539 0278 10001BE5 		ldr	r0, [fp, #-16]
 17540 027c 0C301BE5 		ldr	r3, [fp, #-12]
 17541 0280 FF38C3E3 		bic	r3, r3, #16711680
 17542 0284 0320A0E1 		mov	r2, r3
 17543 0288 0C101BE5 		ldr	r1, [fp, #-12]
 17544 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 17545              	.L1129:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 429


 17546              		.loc 1 6843 5 discriminator 11
 17547 0290 0530E0E3 		mvn	r3, #5
 17548              		.loc 1 6843 5
 17549 0294 230000EA 		b	.L1115
 17550              	.L1128:
 17551              		.loc 1 6843 5 discriminator 8
 17552 0298 0C301BE5 		ldr	r3, [fp, #-12]
 17553 029c 7330FFE6 		uxth	r3, r3
 17554 02a0 000053E3 		cmp	r3, #0
 17555 02a4 0800000A 		beq	.L1130
 17556              		.loc 1 6843 5 discriminator 12
 17557 02a8 003000E3 		movw	r3, #:lower16:.LC6
 17558 02ac 003040E3 		movt	r3, #:upper16:.LC6
 17559 02b0 002000E3 		movw	r2, #:lower16:.LC7
 17560 02b4 002040E3 		movt	r2, #:upper16:.LC7
 17561 02b8 BB1A01E3 		movw	r1, #6843
 17562 02bc 000000E3 		movw	r0, #:lower16:.LC8
 17563 02c0 000040E3 		movt	r0, #:upper16:.LC8
 17564 02c4 FEFFFFEB 		bl	RME_Log
 17565              	.L1131:
 17566              		.loc 1 6843 5
 17567 02c8 FEFFFFEA 		b	.L1131
 17568              	.L1130:
6844:../../Source/Kernel/rme_kernel.c **** 
6845:../../Source/Kernel/rme_kernel.c ****     /* Check if the signal endpoint is currently used and cannot be deleted */
6846:../../Source/Kernel/rme_kernel.c ****     if(Sig_Del->Thd!=0U)
 17569              		.loc 1 6846 15 is_stmt 1
 17570 02cc 10301BE5 		ldr	r3, [fp, #-16]
 17571 02d0 183093E5 		ldr	r3, [r3, #24]
 17572              		.loc 1 6846 7
 17573 02d4 000053E3 		cmp	r3, #0
 17574 02d8 0700000A 		beq	.L1132
6847:../../Source/Kernel/rme_kernel.c ****     {
6848:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6849:../../Source/Kernel/rme_kernel.c **** 
6850:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DEFROST(Sig_Del,Type_Stat);
 17575              		.loc 1 6850 9
 17576 02dc 10001BE5 		ldr	r0, [fp, #-16]
 17577 02e0 0C301BE5 		ldr	r3, [fp, #-12]
 17578 02e4 FF38C3E3 		bic	r3, r3, #16711680
 17579 02e8 0320A0E1 		mov	r2, r3
 17580 02ec 0C101BE5 		ldr	r1, [fp, #-12]
 17581 02f0 FEFFFFEB 		bl	_RME_Comp_Swap_Single
6851:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
 17582              		.loc 1 6851 16
 17583 02f4 4B3FE0E3 		mvn	r3, #300
 17584 02f8 0A0000EA 		b	.L1115
 17585              	.L1132:
6852:../../Source/Kernel/rme_kernel.c ****     }
6853:../../Source/Kernel/rme_kernel.c ****     else
6854:../../Source/Kernel/rme_kernel.c ****     {
6855:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6856:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6857:../../Source/Kernel/rme_kernel.c ****     }
6858:../../Source/Kernel/rme_kernel.c ****     
6859:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
6860:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Sig_Del,Type_Stat);
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 430


 17586              		.loc 1 6860 5
 17587 02fc 10301BE5 		ldr	r3, [fp, #-16]
 17588 0300 0020A0E3 		mov	r2, #0
 17589 0304 0C101BE5 		ldr	r1, [fp, #-12]
 17590 0308 0300A0E1 		mov	r0, r3
 17591 030c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 17592 0310 0030A0E1 		mov	r3, r0
 17593              		.loc 1 6860 5 is_stmt 0 discriminator 1
 17594 0314 000053E3 		cmp	r3, #0
 17595 0318 0100001A 		bne	.L1133
 17596 031c 0030E0E3 		mvn	r3, #0
 17597              		.loc 1 6860 5
 17598 0320 000000EA 		b	.L1115
 17599              	.L1133:
6861:../../Source/Kernel/rme_kernel.c ****     
6862:../../Source/Kernel/rme_kernel.c ****     return 0;
 17600              		.loc 1 6862 12 is_stmt 1
 17601 0324 0030A0E3 		mov	r3, #0
 17602              	.L1115:
6863:../../Source/Kernel/rme_kernel.c **** }
 17603              		.loc 1 6863 1
 17604 0328 0300A0E1 		mov	r0, r3
 17605 032c 04D04BE2 		sub	sp, fp, #4
 17606              		.cfi_def_cfa 13, 8
 17607              		@ sp needed
 17608 0330 0088BDE8 		pop	{fp, pc}
 17609              		.cfi_endproc
 17610              	.LFE67:
 17612              		.section	.text._RME_Kern_High,"ax",%progbits
 17613              		.align	2
 17614              		.global	_RME_Kern_High
 17615              		.syntax unified
 17616              		.arm
 17618              	_RME_Kern_High:
 17619              	.LFB68:
6864:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Sig_Del *************************************************/
6865:../../Source/Kernel/rme_kernel.c **** 
6866:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kern_High ****************************************************
6867:../../Source/Kernel/rme_kernel.c **** Description : Pick the thread with the highest priority to run. Always call
6868:../../Source/Kernel/rme_kernel.c ****               this after you finish all your kernel sending stuff in the
6869:../../Source/Kernel/rme_kernel.c ****               interrupt handler, or the kernel send will not be correct.
6870:../../Source/Kernel/rme_kernel.c ****               This function is also used by system calls to pick a random
6871:../../Source/Kernel/rme_kernel.c ****               highest priority thread.
6872:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
6873:../../Source/Kernel/rme_kernel.c ****               struct RME_CPU_Local* Local - The CPU-local data structure.
6874:../../Source/Kernel/rme_kernel.c **** Output      : volatile struct RME_Reg_Struct* Reg - The updated register set.
6875:../../Source/Kernel/rme_kernel.c **** Return      : None.
6876:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6877:../../Source/Kernel/rme_kernel.c **** void _RME_Kern_High(struct RME_Reg_Struct* Reg,
6878:../../Source/Kernel/rme_kernel.c ****                     struct RME_CPU_Local* Local)
6879:../../Source/Kernel/rme_kernel.c **** {
 17620              		.loc 1 6879 1
 17621              		.cfi_startproc
 17622              		@ args = 0, pretend = 0, frame = 16
 17623              		@ frame_needed = 1, uses_anonymous_args = 0
 17624 0000 00482DE9 		push	{fp, lr}
 17625              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 431


 17626              		.cfi_offset 11, -8
 17627              		.cfi_offset 14, -4
 17628 0004 04B08DE2 		add	fp, sp, #4
 17629              		.cfi_def_cfa 11, 4
 17630 0008 10D04DE2 		sub	sp, sp, #16
 17631 000c 10000BE5 		str	r0, [fp, #-16]
 17632 0010 14100BE5 		str	r1, [fp, #-20]
6880:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_New;
6881:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
6882:../../Source/Kernel/rme_kernel.c **** 
6883:../../Source/Kernel/rme_kernel.c ****     Thd_New=_RME_Run_High(Local);
 17633              		.loc 1 6883 13
 17634 0014 14001BE5 		ldr	r0, [fp, #-20]
 17635 0018 FEFFFFEB 		bl	_RME_Run_High
 17636 001c 08000BE5 		str	r0, [fp, #-8]
6884:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Thd_New!=RME_NULL);
 17637              		.loc 1 6884 5
 17638 0020 08301BE5 		ldr	r3, [fp, #-8]
 17639 0024 000053E3 		cmp	r3, #0
 17640 0028 0800001A 		bne	.L1135
 17641              		.loc 1 6884 5 is_stmt 0 discriminator 1
 17642 002c 003000E3 		movw	r3, #:lower16:.LC6
 17643 0030 003040E3 		movt	r3, #:upper16:.LC6
 17644 0034 002000E3 		movw	r2, #:lower16:.LC7
 17645 0038 002040E3 		movt	r2, #:upper16:.LC7
 17646 003c E41A01E3 		movw	r1, #6884
 17647 0040 000000E3 		movw	r0, #:lower16:.LC8
 17648 0044 000040E3 		movt	r0, #:upper16:.LC8
 17649 0048 FEFFFFEB 		bl	RME_Log
 17650              	.L1136:
 17651              		.loc 1 6884 5
 17652 004c FEFFFFEA 		b	.L1136
 17653              	.L1135:
6885:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=Local->Thd_Cur;
 17654              		.loc 1 6885 12 is_stmt 1
 17655 0050 14301BE5 		ldr	r3, [fp, #-20]
 17656 0054 043093E5 		ldr	r3, [r3, #4]
 17657 0058 0C300BE5 		str	r3, [fp, #-12]
6886:../../Source/Kernel/rme_kernel.c **** 
6887:../../Source/Kernel/rme_kernel.c ****     /* Are these two threads the same? */
6888:../../Source/Kernel/rme_kernel.c ****     if(Thd_New==Thd_Cur)
 17658              		.loc 1 6888 7
 17659 005c 08201BE5 		ldr	r2, [fp, #-8]
 17660 0060 0C301BE5 		ldr	r3, [fp, #-12]
 17661 0064 030052E1 		cmp	r2, r3
 17662 0068 1E00000A 		beq	.L1142
6889:../../Source/Kernel/rme_kernel.c ****     {
6890:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6891:../../Source/Kernel/rme_kernel.c **** 
6892:../../Source/Kernel/rme_kernel.c ****         return;
6893:../../Source/Kernel/rme_kernel.c ****     }
6894:../../Source/Kernel/rme_kernel.c ****     else
6895:../../Source/Kernel/rme_kernel.c ****     {
6896:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6897:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6898:../../Source/Kernel/rme_kernel.c ****     }
6899:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 432


6900:../../Source/Kernel/rme_kernel.c ****     /* Check if we need to do the context switch regardless of priority
6901:../../Source/Kernel/rme_kernel.c ****      * because the current thread is not ready yet. */
6902:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur->Sched.State==RME_THD_READY)
 17663              		.loc 1 6902 22
 17664 006c 0C301BE5 		ldr	r3, [fp, #-12]
 17665 0070 1C3093E5 		ldr	r3, [r3, #28]
 17666              		.loc 1 6902 7
 17667 0074 000053E3 		cmp	r3, #0
 17668 0078 0500001A 		bne	.L1139
6903:../../Source/Kernel/rme_kernel.c ****     {
6904:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6905:../../Source/Kernel/rme_kernel.c **** 
6906:../../Source/Kernel/rme_kernel.c ****         /* Check priority to see if the switch is necessary */
6907:../../Source/Kernel/rme_kernel.c ****         if(Thd_New->Sched.Prio<=Thd_Cur->Sched.Prio)
 17669              		.loc 1 6907 26
 17670 007c 08301BE5 		ldr	r3, [fp, #-8]
 17671 0080 202093E5 		ldr	r2, [r3, #32]
 17672              		.loc 1 6907 47
 17673 0084 0C301BE5 		ldr	r3, [fp, #-12]
 17674 0088 203093E5 		ldr	r3, [r3, #32]
 17675              		.loc 1 6907 11
 17676 008c 030052E1 		cmp	r2, r3
 17677 0090 1600009A 		bls	.L1143
 17678              	.L1139:
6908:../../Source/Kernel/rme_kernel.c ****         {
6909:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6910:../../Source/Kernel/rme_kernel.c **** 
6911:../../Source/Kernel/rme_kernel.c ****             return;
6912:../../Source/Kernel/rme_kernel.c ****         }
6913:../../Source/Kernel/rme_kernel.c ****         else
6914:../../Source/Kernel/rme_kernel.c ****         {
6915:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6916:../../Source/Kernel/rme_kernel.c ****             /* No action required */
6917:../../Source/Kernel/rme_kernel.c ****         }
6918:../../Source/Kernel/rme_kernel.c ****     }
6919:../../Source/Kernel/rme_kernel.c ****     else
6920:../../Source/Kernel/rme_kernel.c ****     {
6921:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6922:../../Source/Kernel/rme_kernel.c ****         /* No action required */
6923:../../Source/Kernel/rme_kernel.c ****     }
6924:../../Source/Kernel/rme_kernel.c **** 
6925:../../Source/Kernel/rme_kernel.c ****     /* We will have a solid context switch on this point. The current 
6926:../../Source/Kernel/rme_kernel.c ****      * thread is not necessarily READY, it could be EXCPEND as well. */
6927:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Thd_New->Sched.State==RME_THD_READY);
 17679              		.loc 1 6927 5
 17680 0094 08301BE5 		ldr	r3, [fp, #-8]
 17681 0098 1C3093E5 		ldr	r3, [r3, #28]
 17682 009c 000053E3 		cmp	r3, #0
 17683 00a0 0800000A 		beq	.L1140
 17684              		.loc 1 6927 5 is_stmt 0 discriminator 1
 17685 00a4 003000E3 		movw	r3, #:lower16:.LC6
 17686 00a8 003040E3 		movt	r3, #:upper16:.LC6
 17687 00ac 002000E3 		movw	r2, #:lower16:.LC7
 17688 00b0 002040E3 		movt	r2, #:upper16:.LC7
 17689 00b4 0F1B01E3 		movw	r1, #6927
 17690 00b8 000000E3 		movw	r0, #:lower16:.LC8
 17691 00bc 000040E3 		movt	r0, #:upper16:.LC8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 433


 17692 00c0 FEFFFFEB 		bl	RME_Log
 17693              	.L1141:
 17694              		.loc 1 6927 5
 17695 00c4 FEFFFFEA 		b	.L1141
 17696              	.L1140:
6928:../../Source/Kernel/rme_kernel.c ****     _RME_Run_Swt(Reg,Thd_Cur,Thd_New);
 17697              		.loc 1 6928 5 is_stmt 1
 17698 00c8 08201BE5 		ldr	r2, [fp, #-8]
 17699 00cc 0C101BE5 		ldr	r1, [fp, #-12]
 17700 00d0 10001BE5 		ldr	r0, [fp, #-16]
 17701 00d4 FEFFFFEB 		bl	_RME_Run_Swt
6929:../../Source/Kernel/rme_kernel.c ****     Local->Thd_Cur=Thd_New;
 17702              		.loc 1 6929 19
 17703 00d8 14301BE5 		ldr	r3, [fp, #-20]
 17704 00dc 08201BE5 		ldr	r2, [fp, #-8]
 17705 00e0 042083E5 		str	r2, [r3, #4]
 17706 00e4 020000EA 		b	.L1134
 17707              	.L1142:
6892:../../Source/Kernel/rme_kernel.c ****     }
 17708              		.loc 1 6892 9
 17709 00e8 00F020E3 		nop
 17710 00ec 000000EA 		b	.L1134
 17711              	.L1143:
6911:../../Source/Kernel/rme_kernel.c ****         }
 17712              		.loc 1 6911 13
 17713 00f0 00F020E3 		nop
 17714              	.L1134:
6930:../../Source/Kernel/rme_kernel.c **** }
 17715              		.loc 1 6930 1
 17716 00f4 04D04BE2 		sub	sp, fp, #4
 17717              		.cfi_def_cfa 13, 8
 17718              		@ sp needed
 17719 00f8 0088BDE8 		pop	{fp, pc}
 17720              		.cfi_endproc
 17721              	.LFE68:
 17723              		.section	.text._RME_Kern_Snd,"ax",%progbits
 17724              		.align	2
 17725              		.global	_RME_Kern_Snd
 17726              		.syntax unified
 17727              		.arm
 17729              	_RME_Kern_Snd:
 17730              	.LFB69:
6931:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kern_High ***********************************************/
6932:../../Source/Kernel/rme_kernel.c **** 
6933:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kern_Snd *****************************************************
6934:../../Source/Kernel/rme_kernel.c **** Description : Try to send a signal to an endpoint from kernel. This is intended
6935:../../Source/Kernel/rme_kernel.c ****               to be called in the interrupt routines in the kernel, and this is
6936:../../Source/Kernel/rme_kernel.c ****               not a system call. The capability passed in must be the root
6937:../../Source/Kernel/rme_kernel.c ****               capability, and this function will not check whether it really is.
6938:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Sig* Cap_Sig - The signal root capability.
6939:../../Source/Kernel/rme_kernel.c **** Output      : None.
6940:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0, or an error code.
6941:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
6942:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kern_Snd(struct RME_Cap_Sig* Cap_Sig)
6943:../../Source/Kernel/rme_kernel.c **** {
 17731              		.loc 1 6943 1
 17732              		.cfi_startproc
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 434


 17733              		@ args = 0, pretend = 0, frame = 16
 17734              		@ frame_needed = 1, uses_anonymous_args = 0
 17735 0000 00482DE9 		push	{fp, lr}
 17736              		.cfi_def_cfa_offset 8
 17737              		.cfi_offset 11, -8
 17738              		.cfi_offset 14, -4
 17739 0004 04B08DE2 		add	fp, sp, #4
 17740              		.cfi_def_cfa 11, 4
 17741 0008 10D04DE2 		sub	sp, sp, #16
 17742 000c 10000BE5 		str	r0, [fp, #-16]
6944:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Unblock;
6945:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Sig;
6946:../../Source/Kernel/rme_kernel.c ****     
6947:../../Source/Kernel/rme_kernel.c ****     Thd_Sig=Cap_Sig->Thd;
 17743              		.loc 1 6947 12
 17744 0010 10301BE5 		ldr	r3, [fp, #-16]
 17745 0014 183093E5 		ldr	r3, [r3, #24]
 17746 0018 0C300BE5 		str	r3, [fp, #-12]
6948:../../Source/Kernel/rme_kernel.c ****     
6949:../../Source/Kernel/rme_kernel.c ****     /* If and only if we are calling from the same core do we unblock */
6950:../../Source/Kernel/rme_kernel.c ****     if(Thd_Sig!=RME_NULL)
 17747              		.loc 1 6950 7
 17748 001c 0C301BE5 		ldr	r3, [fp, #-12]
 17749 0020 000053E3 		cmp	r3, #0
 17750 0024 0B00000A 		beq	.L1145
6951:../../Source/Kernel/rme_kernel.c ****     {
6952:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6953:../../Source/Kernel/rme_kernel.c **** 
6954:../../Source/Kernel/rme_kernel.c ****         if(Thd_Sig->Sched.Local==RME_CPU_LOCAL())
 17751              		.loc 1 6954 26
 17752 0028 0C301BE5 		ldr	r3, [fp, #-12]
 17753 002c 142093E5 		ldr	r2, [r3, #20]
 17754              		.loc 1 6954 11
 17755 0030 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 17756 0034 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 17757 0038 030052E1 		cmp	r2, r3
 17758 003c 0200001A 		bne	.L1146
6955:../../Source/Kernel/rme_kernel.c ****         {
6956:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6957:../../Source/Kernel/rme_kernel.c **** 
6958:../../Source/Kernel/rme_kernel.c ****             Unblock=1U;
 17759              		.loc 1 6958 20
 17760 0040 0130A0E3 		mov	r3, #1
 17761 0044 08300BE5 		str	r3, [fp, #-8]
 17762 0048 040000EA 		b	.L1147
 17763              	.L1146:
6959:../../Source/Kernel/rme_kernel.c ****         }
6960:../../Source/Kernel/rme_kernel.c ****         else
6961:../../Source/Kernel/rme_kernel.c ****         {
6962:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6963:../../Source/Kernel/rme_kernel.c **** 
6964:../../Source/Kernel/rme_kernel.c ****             Unblock=0U;
 17764              		.loc 1 6964 20
 17765 004c 0030A0E3 		mov	r3, #0
 17766 0050 08300BE5 		str	r3, [fp, #-8]
 17767 0054 010000EA 		b	.L1147
 17768              	.L1145:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 435


6965:../../Source/Kernel/rme_kernel.c ****         }
6966:../../Source/Kernel/rme_kernel.c ****     }
6967:../../Source/Kernel/rme_kernel.c ****     else
6968:../../Source/Kernel/rme_kernel.c ****     {
6969:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6970:../../Source/Kernel/rme_kernel.c **** 
6971:../../Source/Kernel/rme_kernel.c ****         Unblock=0U;
 17769              		.loc 1 6971 16
 17770 0058 0030A0E3 		mov	r3, #0
 17771 005c 08300BE5 		str	r3, [fp, #-8]
 17772              	.L1147:
6972:../../Source/Kernel/rme_kernel.c ****     }
6973:../../Source/Kernel/rme_kernel.c **** 
6974:../../Source/Kernel/rme_kernel.c ****     if(Unblock!=0U)
 17773              		.loc 1 6974 7
 17774 0060 08301BE5 		ldr	r3, [fp, #-8]
 17775 0064 000053E3 		cmp	r3, #0
 17776 0068 1700000A 		beq	.L1148
6975:../../Source/Kernel/rme_kernel.c ****     {
6976:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
6977:../../Source/Kernel/rme_kernel.c **** 
6978:../../Source/Kernel/rme_kernel.c ****         /* The thread is blocked, and it is on our core. Unblock it, and
6979:../../Source/Kernel/rme_kernel.c ****          * set the return value to one as always, Even if we were specifying
6980:../../Source/Kernel/rme_kernel.c ****          * multi-receive. This is because other cores may reduce the count
6981:../../Source/Kernel/rme_kernel.c ****          * to zero while we are doing this. */
6982:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(&(Thd_Sig->Ctx.Reg->Reg),1);
 17777              		.loc 1 6982 44
 17778 006c 0C301BE5 		ldr	r3, [fp, #-12]
 17779 0070 483093E5 		ldr	r3, [r3, #72]
 17780              		.loc 1 6982 9
 17781 0074 0110A0E3 		mov	r1, #1
 17782 0078 0300A0E1 		mov	r0, r3
 17783 007c FEFFFFEB 		bl	__RME_Svc_Retval_Set
6983:../../Source/Kernel/rme_kernel.c ****         
6984:../../Source/Kernel/rme_kernel.c ****         /* See if the thread still have time left */
6985:../../Source/Kernel/rme_kernel.c ****         if(Thd_Sig->Sched.Slice!=0U)
 17784              		.loc 1 6985 26
 17785 0080 0C301BE5 		ldr	r3, [fp, #-12]
 17786 0084 183093E5 		ldr	r3, [r3, #24]
 17787              		.loc 1 6985 11
 17788 0088 000053E3 		cmp	r3, #0
 17789 008c 0500000A 		beq	.L1149
6986:../../Source/Kernel/rme_kernel.c ****         {
6987:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6988:../../Source/Kernel/rme_kernel.c **** 
6989:../../Source/Kernel/rme_kernel.c ****             /* Ready and add to runqueue */
6990:../../Source/Kernel/rme_kernel.c ****             Thd_Sig->Sched.State=RME_THD_READY;
 17790              		.loc 1 6990 33
 17791 0090 0C301BE5 		ldr	r3, [fp, #-12]
 17792 0094 0020A0E3 		mov	r2, #0
 17793 0098 1C2083E5 		str	r2, [r3, #28]
6991:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Ins(Thd_Sig);
 17794              		.loc 1 6991 13
 17795 009c 0C001BE5 		ldr	r0, [fp, #-12]
 17796 00a0 FEFFFFEB 		bl	_RME_Run_Ins
 17797 00a4 040000EA 		b	.L1150
 17798              	.L1149:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 436


6992:../../Source/Kernel/rme_kernel.c ****         }
6993:../../Source/Kernel/rme_kernel.c ****         else
6994:../../Source/Kernel/rme_kernel.c ****         {
6995:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
6996:../../Source/Kernel/rme_kernel.c **** 
6997:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
6998:../../Source/Kernel/rme_kernel.c ****             Thd_Sig->Sched.State=RME_THD_TIMEOUT;
 17799              		.loc 1 6998 33
 17800 00a8 0C301BE5 		ldr	r3, [fp, #-12]
 17801 00ac 0220A0E3 		mov	r2, #2
 17802 00b0 1C2083E5 		str	r2, [r3, #28]
6999:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Sig);
 17803              		.loc 1 6999 13
 17804 00b4 0C001BE5 		ldr	r0, [fp, #-12]
 17805 00b8 FEFFFFEB 		bl	_RME_Run_Notif
 17806              	.L1150:
7000:../../Source/Kernel/rme_kernel.c ****         }
7001:../../Source/Kernel/rme_kernel.c ****         
7002:../../Source/Kernel/rme_kernel.c ****         /* We will not pick the highest priority thread here immediately, 
7003:../../Source/Kernel/rme_kernel.c ****          * because we may send to a myriad of endpoints in one interrupt, and
7004:../../Source/Kernel/rme_kernel.c ****          * we hope to perform the context switch only once when exiting that
7005:../../Source/Kernel/rme_kernel.c ****          * handler. Also note that the current thread could be EXCPEND as well;
7006:../../Source/Kernel/rme_kernel.c ****          * this is different from the normal signal sending system call. */
7007:../../Source/Kernel/rme_kernel.c ****         
7008:../../Source/Kernel/rme_kernel.c ****         /* Clear endpoint blocking status - no write release required */
7009:../../Source/Kernel/rme_kernel.c ****         Cap_Sig->Thd=RME_NULL;
 17807              		.loc 1 7009 21
 17808 00bc 10301BE5 		ldr	r3, [fp, #-16]
 17809 00c0 0020A0E3 		mov	r2, #0
 17810 00c4 182083E5 		str	r2, [r3, #24]
 17811 00c8 0F0000EA 		b	.L1151
 17812              	.L1148:
7010:../../Source/Kernel/rme_kernel.c ****     }
7011:../../Source/Kernel/rme_kernel.c ****     else
7012:../../Source/Kernel/rme_kernel.c ****     {
7013:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7014:../../Source/Kernel/rme_kernel.c **** 
7015:../../Source/Kernel/rme_kernel.c ****         /* The guy who blocked on it is not on our core, or nobody blocked.
7016:../../Source/Kernel/rme_kernel.c ****          * We just faa the counter value and return. */
7017:../../Source/Kernel/rme_kernel.c ****         if(RME_FETCH_ADD(&(Cap_Sig->Sig_Num),1U)>=RME_MAX_SIG_NUM)
 17813              		.loc 1 7017 12
 17814 00cc 10301BE5 		ldr	r3, [fp, #-16]
 17815 00d0 143083E2 		add	r3, r3, #20
 17816 00d4 0110A0E3 		mov	r1, #1
 17817 00d8 0300A0E1 		mov	r0, r3
 17818 00dc FEFFFFEB 		bl	_RME_Fetch_Add_Single
 17819 00e0 0030A0E1 		mov	r3, r0
 17820              		.loc 1 7017 11 discriminator 1
 17821 00e4 0A0173E3 		cmn	r3, #-2147483646
 17822 00e8 0700009A 		bls	.L1151
7018:../../Source/Kernel/rme_kernel.c ****         {
7019:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7020:../../Source/Kernel/rme_kernel.c **** 
7021:../../Source/Kernel/rme_kernel.c ****             RME_FETCH_ADD(&(Cap_Sig->Sig_Num),-1);
 17823              		.loc 1 7021 13
 17824 00ec 10301BE5 		ldr	r3, [fp, #-16]
 17825 00f0 143083E2 		add	r3, r3, #20
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 437


 17826 00f4 0010E0E3 		mvn	r1, #0
 17827 00f8 0300A0E1 		mov	r0, r3
 17828 00fc FEFFFFEB 		bl	_RME_Fetch_Add_Single
7022:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_SIV_FULL;
 17829              		.loc 1 7022 20
 17830 0100 D13E0FE3 		movw	r3, #65233
 17831 0104 FF3F4FE3 		movt	r3, 65535
 17832 0108 000000EA 		b	.L1152
 17833              	.L1151:
7023:../../Source/Kernel/rme_kernel.c ****         }
7024:../../Source/Kernel/rme_kernel.c ****         else
7025:../../Source/Kernel/rme_kernel.c ****         {
7026:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7027:../../Source/Kernel/rme_kernel.c ****             /* No action required */
7028:../../Source/Kernel/rme_kernel.c ****         }
7029:../../Source/Kernel/rme_kernel.c ****     }
7030:../../Source/Kernel/rme_kernel.c **** 
7031:../../Source/Kernel/rme_kernel.c ****     return 0;
 17834              		.loc 1 7031 12
 17835 010c 0030A0E3 		mov	r3, #0
 17836              	.L1152:
7032:../../Source/Kernel/rme_kernel.c **** }
 17837              		.loc 1 7032 1
 17838 0110 0300A0E1 		mov	r0, r3
 17839 0114 04D04BE2 		sub	sp, fp, #4
 17840              		.cfi_def_cfa 13, 8
 17841              		@ sp needed
 17842 0118 0088BDE8 		pop	{fp, pc}
 17843              		.cfi_endproc
 17844              	.LFE69:
 17846              		.section	.text._RME_Sig_Snd,"ax",%progbits
 17847              		.align	2
 17848              		.syntax unified
 17849              		.arm
 17851              	_RME_Sig_Snd:
 17852              	.LFB70:
7033:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kern_Snd ************************************************/
7034:../../Source/Kernel/rme_kernel.c **** 
7035:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Sig_Snd ******************************************************
7036:../../Source/Kernel/rme_kernel.c **** Description : Try to send to a signal endpoint. This system call can cause
7037:../../Source/Kernel/rme_kernel.c ****               a potential context switch.
7038:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7039:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
7040:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The capability to the signal.
7041:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7042:../../Source/Kernel/rme_kernel.c **** Output      : None.
7043:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0, or an error code.
7044:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7045:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Sig_Snd(struct RME_Cap_Cpt* Cpt, 
7046:../../Source/Kernel/rme_kernel.c ****                               struct RME_Reg_Struct* Reg,
7047:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Sig)
7048:../../Source/Kernel/rme_kernel.c **** {
 17853              		.loc 1 7048 1
 17854              		.cfi_startproc
 17855              		@ args = 0, pretend = 0, frame = 40
 17856              		@ frame_needed = 1, uses_anonymous_args = 0
 17857 0000 00482DE9 		push	{fp, lr}
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 438


 17858              		.cfi_def_cfa_offset 8
 17859              		.cfi_offset 11, -8
 17860              		.cfi_offset 14, -4
 17861 0004 04B08DE2 		add	fp, sp, #4
 17862              		.cfi_def_cfa 11, 4
 17863 0008 28D04DE2 		sub	sp, sp, #40
 17864 000c 20000BE5 		str	r0, [fp, #-32]
 17865 0010 24100BE5 		str	r1, [fp, #-36]
 17866 0014 28200BE5 		str	r2, [fp, #-40]
7049:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Op;
7050:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Root;
7051:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Rcv;
7052:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
7053:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Unblock;
7054:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7055:../../Source/Kernel/rme_kernel.c ****     
7056:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7057:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Sig,RME_CAP_TYPE_SIG,
 17867              		.loc 1 7057 5
 17868 0018 28301BE5 		ldr	r3, [fp, #-40]
 17869 001c 803003E2 		and	r3, r3, #128
 17870 0020 000053E3 		cmp	r3, #0
 17871 0024 1C00001A 		bne	.L1154
 17872              		.loc 1 7057 5 is_stmt 0 discriminator 1
 17873 0028 20301BE5 		ldr	r3, [fp, #-32]
 17874 002c 142093E5 		ldr	r2, [r3, #20]
 17875 0030 28301BE5 		ldr	r3, [fp, #-40]
 17876 0034 030052E1 		cmp	r2, r3
 17877 0038 0100008A 		bhi	.L1155
 17878              		.loc 1 7057 5 discriminator 3
 17879 003c 0230E0E3 		mvn	r3, #2
 17880              		.loc 1 7057 5
 17881 0040 AF0000EA 		b	.L1156
 17882              	.L1155:
 17883              		.loc 1 7057 5 discriminator 4
 17884 0044 28301BE5 		ldr	r3, [fp, #-40]
 17885 0048 8322A0E1 		lsl	r2, r3, #5
 17886 004c 20301BE5 		ldr	r3, [fp, #-32]
 17887 0050 0C3093E5 		ldr	r3, [r3, #12]
 17888 0054 033082E0 		add	r3, r2, r3
 17889 0058 08300BE5 		str	r3, [fp, #-8]
 17890 005c 08301BE5 		ldr	r3, [fp, #-8]
 17891 0060 0300A0E1 		mov	r0, r3
 17892 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17893 0068 10000BE5 		str	r0, [fp, #-16]
 17894              		.loc 1 7057 5 discriminator 1
 17895 006c 10301BE5 		ldr	r3, [fp, #-16]
 17896 0070 FF3803E2 		and	r3, r3, #16711680
 17897 0074 020853E3 		cmp	r3, #131072
 17898 0078 0100001A 		bne	.L1157
 17899              		.loc 1 7057 5 discriminator 5
 17900 007c 0830E0E3 		mvn	r3, #8
 17901              		.loc 1 7057 5
 17902 0080 9F0000EA 		b	.L1156
 17903              	.L1157:
 17904              		.loc 1 7057 5 discriminator 6
 17905 0084 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 439


 17906 0088 233CA0E1 		lsr	r3, r3, #24
 17907 008c 080053E3 		cmp	r3, #8
 17908 0090 3F00000A 		beq	.L1158
 17909              		.loc 1 7057 5 discriminator 7
 17910 0094 0130E0E3 		mvn	r3, #1
 17911              		.loc 1 7057 5
 17912 0098 990000EA 		b	.L1156
 17913              	.L1154:
 17914              		.loc 1 7057 5 discriminator 2
 17915 009c 28301BE5 		ldr	r3, [fp, #-40]
 17916 00a0 2324A0E1 		lsr	r2, r3, #8
 17917 00a4 20301BE5 		ldr	r3, [fp, #-32]
 17918 00a8 143093E5 		ldr	r3, [r3, #20]
 17919 00ac 030052E1 		cmp	r2, r3
 17920 00b0 0100003A 		bcc	.L1159
 17921              		.loc 1 7057 5 discriminator 8
 17922 00b4 0230E0E3 		mvn	r3, #2
 17923              		.loc 1 7057 5
 17924 00b8 910000EA 		b	.L1156
 17925              	.L1159:
 17926              		.loc 1 7057 5 discriminator 9
 17927 00bc 28301BE5 		ldr	r3, [fp, #-40]
 17928 00c0 2334A0E1 		lsr	r3, r3, #8
 17929 00c4 8322A0E1 		lsl	r2, r3, #5
 17930 00c8 20301BE5 		ldr	r3, [fp, #-32]
 17931 00cc 0C3093E5 		ldr	r3, [r3, #12]
 17932 00d0 033082E0 		add	r3, r2, r3
 17933 00d4 08300BE5 		str	r3, [fp, #-8]
 17934 00d8 08301BE5 		ldr	r3, [fp, #-8]
 17935 00dc 0300A0E1 		mov	r0, r3
 17936 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17937 00e4 10000BE5 		str	r0, [fp, #-16]
 17938              		.loc 1 7057 5 discriminator 1
 17939 00e8 10301BE5 		ldr	r3, [fp, #-16]
 17940 00ec FF3803E2 		and	r3, r3, #16711680
 17941 00f0 020853E3 		cmp	r3, #131072
 17942 00f4 0100001A 		bne	.L1160
 17943              		.loc 1 7057 5 discriminator 10
 17944 00f8 0830E0E3 		mvn	r3, #8
 17945              		.loc 1 7057 5
 17946 00fc 800000EA 		b	.L1156
 17947              	.L1160:
 17948              		.loc 1 7057 5 discriminator 11
 17949 0100 10301BE5 		ldr	r3, [fp, #-16]
 17950 0104 233CA0E1 		lsr	r3, r3, #24
 17951 0108 030053E3 		cmp	r3, #3
 17952 010c 0100000A 		beq	.L1161
 17953              		.loc 1 7057 5 discriminator 12
 17954 0110 0130E0E3 		mvn	r3, #1
 17955              		.loc 1 7057 5
 17956 0114 7A0000EA 		b	.L1156
 17957              	.L1161:
 17958              		.loc 1 7057 5 discriminator 13
 17959 0118 28301BE5 		ldr	r3, [fp, #-40]
 17960 011c 7F2003E2 		and	r2, r3, #127
 17961 0120 08301BE5 		ldr	r3, [fp, #-8]
 17962 0124 143093E5 		ldr	r3, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 440


 17963 0128 030052E1 		cmp	r2, r3
 17964 012c 0100003A 		bcc	.L1162
 17965              		.loc 1 7057 5 discriminator 14
 17966 0130 0230E0E3 		mvn	r3, #2
 17967              		.loc 1 7057 5
 17968 0134 720000EA 		b	.L1156
 17969              	.L1162:
 17970              		.loc 1 7057 5 discriminator 15
 17971 0138 28301BE5 		ldr	r3, [fp, #-40]
 17972 013c 7F3003E2 		and	r3, r3, #127
 17973 0140 8322A0E1 		lsl	r2, r3, #5
 17974 0144 08301BE5 		ldr	r3, [fp, #-8]
 17975 0148 0C3093E5 		ldr	r3, [r3, #12]
 17976 014c 033082E0 		add	r3, r2, r3
 17977 0150 08300BE5 		str	r3, [fp, #-8]
 17978 0154 08301BE5 		ldr	r3, [fp, #-8]
 17979 0158 0300A0E1 		mov	r0, r3
 17980 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 17981 0160 10000BE5 		str	r0, [fp, #-16]
 17982              		.loc 1 7057 5 discriminator 1
 17983 0164 10301BE5 		ldr	r3, [fp, #-16]
 17984 0168 FF3803E2 		and	r3, r3, #16711680
 17985 016c 020853E3 		cmp	r3, #131072
 17986 0170 0100001A 		bne	.L1163
 17987              		.loc 1 7057 5 discriminator 16
 17988 0174 0830E0E3 		mvn	r3, #8
 17989              		.loc 1 7057 5
 17990 0178 610000EA 		b	.L1156
 17991              	.L1163:
 17992              		.loc 1 7057 5 discriminator 17
 17993 017c 10301BE5 		ldr	r3, [fp, #-16]
 17994 0180 233CA0E1 		lsr	r3, r3, #24
 17995 0184 080053E3 		cmp	r3, #8
 17996 0188 0100000A 		beq	.L1158
 17997              		.loc 1 7057 5 discriminator 18
 17998 018c 0130E0E3 		mvn	r3, #1
 17999              		.loc 1 7057 5
 18000 0190 5B0000EA 		b	.L1156
 18001              	.L1158:
7058:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Sig*,Sig_Op,Type_Stat);    
7059:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
7060:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_SND);
 18002              		.loc 1 7060 5 is_stmt 1
 18003 0194 08301BE5 		ldr	r3, [fp, #-8]
 18004 0198 083093E5 		ldr	r3, [r3, #8]
 18005 019c 013003E2 		and	r3, r3, #1
 18006 01a0 000053E3 		cmp	r3, #0
 18007 01a4 0100001A 		bne	.L1164
 18008              		.loc 1 7060 5 is_stmt 0 discriminator 1
 18009 01a8 0630E0E3 		mvn	r3, #6
 18010              		.loc 1 7060 5
 18011 01ac 540000EA 		b	.L1156
 18012              	.L1164:
7061:../../Source/Kernel/rme_kernel.c ****     
7062:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 18013              		.loc 1 7062 10 is_stmt 1
 18014 01b0 003000E3 		movw	r3, #:lower16:RME_A7A_Local
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 441


 18015 01b4 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 18016 01b8 14300BE5 		str	r3, [fp, #-20]
7063:../../Source/Kernel/rme_kernel.c ****     Sig_Root=RME_CAP_CONV_ROOT(Sig_Op,struct RME_Cap_Sig*);
 18017              		.loc 1 7063 14
 18018 01bc 08301BE5 		ldr	r3, [fp, #-8]
 18019 01c0 003093E5 		ldr	r3, [r3]
 18020 01c4 7330FFE6 		uxth	r3, r3
 18021 01c8 000053E3 		cmp	r3, #0
 18022 01cc 0200000A 		beq	.L1165
 18023              		.loc 1 7063 14 is_stmt 0 discriminator 1
 18024 01d0 08301BE5 		ldr	r3, [fp, #-8]
 18025 01d4 043093E5 		ldr	r3, [r3, #4]
 18026 01d8 000000EA 		b	.L1166
 18027              	.L1165:
 18028              		.loc 1 7063 14 discriminator 2
 18029 01dc 08301BE5 		ldr	r3, [fp, #-8]
 18030              	.L1166:
 18031              		.loc 1 7063 13 is_stmt 1 discriminator 4
 18032 01e0 18300BE5 		str	r3, [fp, #-24]
7064:../../Source/Kernel/rme_kernel.c ****     Thd_Rcv=Sig_Root->Thd;
 18033              		.loc 1 7064 12
 18034 01e4 18301BE5 		ldr	r3, [fp, #-24]
 18035 01e8 183093E5 		ldr	r3, [r3, #24]
 18036 01ec 1C300BE5 		str	r3, [fp, #-28]
7065:../../Source/Kernel/rme_kernel.c **** 
7066:../../Source/Kernel/rme_kernel.c ****     /* If and only if we are calling from the same core do we unblock */
7067:../../Source/Kernel/rme_kernel.c ****     if(Thd_Rcv!=RME_NULL)
 18037              		.loc 1 7067 7
 18038 01f0 1C301BE5 		ldr	r3, [fp, #-28]
 18039 01f4 000053E3 		cmp	r3, #0
 18040 01f8 0A00000A 		beq	.L1167
7068:../../Source/Kernel/rme_kernel.c ****     {
7069:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7070:../../Source/Kernel/rme_kernel.c **** 
7071:../../Source/Kernel/rme_kernel.c ****         if(Thd_Rcv->Sched.Local==Local)
 18041              		.loc 1 7071 26
 18042 01fc 1C301BE5 		ldr	r3, [fp, #-28]
 18043 0200 143093E5 		ldr	r3, [r3, #20]
 18044              		.loc 1 7071 11
 18045 0204 14201BE5 		ldr	r2, [fp, #-20]
 18046 0208 030052E1 		cmp	r2, r3
 18047 020c 0200001A 		bne	.L1168
7072:../../Source/Kernel/rme_kernel.c ****         {
7073:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7074:../../Source/Kernel/rme_kernel.c **** 
7075:../../Source/Kernel/rme_kernel.c ****             Unblock=1U;
 18048              		.loc 1 7075 20
 18049 0210 0130A0E3 		mov	r3, #1
 18050 0214 0C300BE5 		str	r3, [fp, #-12]
 18051 0218 040000EA 		b	.L1169
 18052              	.L1168:
7076:../../Source/Kernel/rme_kernel.c ****         }
7077:../../Source/Kernel/rme_kernel.c ****         else
7078:../../Source/Kernel/rme_kernel.c ****         {
7079:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7080:../../Source/Kernel/rme_kernel.c **** 
7081:../../Source/Kernel/rme_kernel.c ****             Unblock=0U;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 442


 18053              		.loc 1 7081 20
 18054 021c 0030A0E3 		mov	r3, #0
 18055 0220 0C300BE5 		str	r3, [fp, #-12]
 18056 0224 010000EA 		b	.L1169
 18057              	.L1167:
7082:../../Source/Kernel/rme_kernel.c ****         }
7083:../../Source/Kernel/rme_kernel.c ****     }
7084:../../Source/Kernel/rme_kernel.c ****     else
7085:../../Source/Kernel/rme_kernel.c ****     {
7086:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7087:../../Source/Kernel/rme_kernel.c **** 
7088:../../Source/Kernel/rme_kernel.c ****         Unblock=0U;
 18058              		.loc 1 7088 16
 18059 0228 0030A0E3 		mov	r3, #0
 18060 022c 0C300BE5 		str	r3, [fp, #-12]
 18061              	.L1169:
7089:../../Source/Kernel/rme_kernel.c ****     }
7090:../../Source/Kernel/rme_kernel.c ****     
7091:../../Source/Kernel/rme_kernel.c ****     if(Unblock!=0U)
 18062              		.loc 1 7091 7
 18063 0230 0C301BE5 		ldr	r3, [fp, #-12]
 18064 0234 000053E3 		cmp	r3, #0
 18065 0238 1D00000A 		beq	.L1170
7092:../../Source/Kernel/rme_kernel.c ****     {
7093:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7094:../../Source/Kernel/rme_kernel.c **** 
7095:../../Source/Kernel/rme_kernel.c ****         /* Now save the system call return value to the caller stack */
7096:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(Reg,0);
 18066              		.loc 1 7096 9
 18067 023c 0010A0E3 		mov	r1, #0
 18068 0240 24001BE5 		ldr	r0, [fp, #-36]
 18069 0244 FEFFFFEB 		bl	__RME_Svc_Retval_Set
7097:../../Source/Kernel/rme_kernel.c ****         
7098:../../Source/Kernel/rme_kernel.c ****         /* The thread is blocked, and it is on our core. Unblock it, and
7099:../../Source/Kernel/rme_kernel.c ****          * set the return value to one as always, Even if we were specifying
7100:../../Source/Kernel/rme_kernel.c ****          * multi-receive. This is because other cores may reduce the count
7101:../../Source/Kernel/rme_kernel.c ****          * to zero while we are doing this. */
7102:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(&(Thd_Rcv->Ctx.Reg->Reg),1);
 18070              		.loc 1 7102 44
 18071 0248 1C301BE5 		ldr	r3, [fp, #-28]
 18072 024c 483093E5 		ldr	r3, [r3, #72]
 18073              		.loc 1 7102 9
 18074 0250 0110A0E3 		mov	r1, #1
 18075 0254 0300A0E1 		mov	r0, r3
 18076 0258 FEFFFFEB 		bl	__RME_Svc_Retval_Set
7103:../../Source/Kernel/rme_kernel.c ****         
7104:../../Source/Kernel/rme_kernel.c ****         /* See if the thread still have time left */
7105:../../Source/Kernel/rme_kernel.c ****         if(Thd_Rcv->Sched.Slice!=0U)
 18077              		.loc 1 7105 26
 18078 025c 1C301BE5 		ldr	r3, [fp, #-28]
 18079 0260 183093E5 		ldr	r3, [r3, #24]
 18080              		.loc 1 7105 11
 18081 0264 000053E3 		cmp	r3, #0
 18082 0268 0500000A 		beq	.L1171
7106:../../Source/Kernel/rme_kernel.c ****         {
7107:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7108:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 443


7109:../../Source/Kernel/rme_kernel.c ****             /* Ready and add to runqueue */
7110:../../Source/Kernel/rme_kernel.c ****             Thd_Rcv->Sched.State=RME_THD_READY;
 18083              		.loc 1 7110 33
 18084 026c 1C301BE5 		ldr	r3, [fp, #-28]
 18085 0270 0020A0E3 		mov	r2, #0
 18086 0274 1C2083E5 		str	r2, [r3, #28]
7111:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Ins(Thd_Rcv);
 18087              		.loc 1 7111 13
 18088 0278 1C001BE5 		ldr	r0, [fp, #-28]
 18089 027c FEFFFFEB 		bl	_RME_Run_Ins
 18090 0280 040000EA 		b	.L1172
 18091              	.L1171:
7112:../../Source/Kernel/rme_kernel.c ****         }
7113:../../Source/Kernel/rme_kernel.c ****         else
7114:../../Source/Kernel/rme_kernel.c ****         {
7115:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7116:../../Source/Kernel/rme_kernel.c **** 
7117:../../Source/Kernel/rme_kernel.c ****             /* Timeout and notify parent */
7118:../../Source/Kernel/rme_kernel.c ****             Thd_Rcv->Sched.State=RME_THD_TIMEOUT;
 18092              		.loc 1 7118 33
 18093 0284 1C301BE5 		ldr	r3, [fp, #-28]
 18094 0288 0220A0E3 		mov	r2, #2
 18095 028c 1C2083E5 		str	r2, [r3, #28]
7119:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Notif(Thd_Rcv);
 18096              		.loc 1 7119 13
 18097 0290 1C001BE5 		ldr	r0, [fp, #-28]
 18098 0294 FEFFFFEB 		bl	_RME_Run_Notif
 18099              	.L1172:
7120:../../Source/Kernel/rme_kernel.c ****         }
7121:../../Source/Kernel/rme_kernel.c ****         
7122:../../Source/Kernel/rme_kernel.c ****         /* Pick the highest priority thread to run */
7123:../../Source/Kernel/rme_kernel.c ****         _RME_Kern_High(Reg,Local);
 18100              		.loc 1 7123 9
 18101 0298 14101BE5 		ldr	r1, [fp, #-20]
 18102 029c 24001BE5 		ldr	r0, [fp, #-36]
 18103 02a0 FEFFFFEB 		bl	_RME_Kern_High
7124:../../Source/Kernel/rme_kernel.c ****         
7125:../../Source/Kernel/rme_kernel.c ****         /* Clear endpoint blocking status - no write release required */
7126:../../Source/Kernel/rme_kernel.c ****         Sig_Root->Thd=RME_NULL;
 18104              		.loc 1 7126 22
 18105 02a4 18301BE5 		ldr	r3, [fp, #-24]
 18106 02a8 0020A0E3 		mov	r2, #0
 18107 02ac 182083E5 		str	r2, [r3, #24]
 18108 02b0 120000EA 		b	.L1173
 18109              	.L1170:
7127:../../Source/Kernel/rme_kernel.c ****     }
7128:../../Source/Kernel/rme_kernel.c ****     else
7129:../../Source/Kernel/rme_kernel.c ****     {
7130:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7131:../../Source/Kernel/rme_kernel.c **** 
7132:../../Source/Kernel/rme_kernel.c ****         /* The guy who blocked on it is not on our core, we just faa and return */
7133:../../Source/Kernel/rme_kernel.c ****         if(RME_FETCH_ADD(&(Sig_Root->Sig_Num),1U)>=RME_MAX_SIG_NUM)
 18110              		.loc 1 7133 12
 18111 02b4 18301BE5 		ldr	r3, [fp, #-24]
 18112 02b8 143083E2 		add	r3, r3, #20
 18113 02bc 0110A0E3 		mov	r1, #1
 18114 02c0 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 444


 18115 02c4 FEFFFFEB 		bl	_RME_Fetch_Add_Single
 18116 02c8 0030A0E1 		mov	r3, r0
 18117              		.loc 1 7133 11 discriminator 1
 18118 02cc 0A0173E3 		cmn	r3, #-2147483646
 18119 02d0 0700009A 		bls	.L1174
7134:../../Source/Kernel/rme_kernel.c ****         {
7135:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7136:../../Source/Kernel/rme_kernel.c **** 
7137:../../Source/Kernel/rme_kernel.c ****             RME_FETCH_ADD(&(Sig_Root->Sig_Num),-1);
 18120              		.loc 1 7137 13
 18121 02d4 18301BE5 		ldr	r3, [fp, #-24]
 18122 02d8 143083E2 		add	r3, r3, #20
 18123 02dc 0010E0E3 		mvn	r1, #0
 18124 02e0 0300A0E1 		mov	r0, r3
 18125 02e4 FEFFFFEB 		bl	_RME_Fetch_Add_Single
7138:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_SIV_FULL;
 18126              		.loc 1 7138 20
 18127 02e8 D13E0FE3 		movw	r3, #65233
 18128 02ec FF3F4FE3 		movt	r3, 65535
 18129 02f0 030000EA 		b	.L1156
 18130              	.L1174:
7139:../../Source/Kernel/rme_kernel.c ****         }
7140:../../Source/Kernel/rme_kernel.c ****         else
7141:../../Source/Kernel/rme_kernel.c ****         {
7142:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7143:../../Source/Kernel/rme_kernel.c ****             /* No action required */
7144:../../Source/Kernel/rme_kernel.c ****         }
7145:../../Source/Kernel/rme_kernel.c ****         
7146:../../Source/Kernel/rme_kernel.c ****         /* Now save the system call return value to the caller stack */
7147:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(Reg,0);
 18131              		.loc 1 7147 9
 18132 02f4 0010A0E3 		mov	r1, #0
 18133 02f8 24001BE5 		ldr	r0, [fp, #-36]
 18134 02fc FEFFFFEB 		bl	__RME_Svc_Retval_Set
 18135              	.L1173:
7148:../../Source/Kernel/rme_kernel.c ****     }
7149:../../Source/Kernel/rme_kernel.c **** 
7150:../../Source/Kernel/rme_kernel.c ****     return 0;
 18136              		.loc 1 7150 12
 18137 0300 0030A0E3 		mov	r3, #0
 18138              	.L1156:
7151:../../Source/Kernel/rme_kernel.c **** }
 18139              		.loc 1 7151 1
 18140 0304 0300A0E1 		mov	r0, r3
 18141 0308 04D04BE2 		sub	sp, fp, #4
 18142              		.cfi_def_cfa 13, 8
 18143              		@ sp needed
 18144 030c 0088BDE8 		pop	{fp, pc}
 18145              		.cfi_endproc
 18146              	.LFE70:
 18148              		.section	.text._RME_Sig_Rcv,"ax",%progbits
 18149              		.align	2
 18150              		.syntax unified
 18151              		.arm
 18153              	_RME_Sig_Rcv:
 18154              	.LFB71:
7152:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Sig_Snd *************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 445


7153:../../Source/Kernel/rme_kernel.c **** 
7154:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Sig_Rcv ******************************************************
7155:../../Source/Kernel/rme_kernel.c **** Description : Try to receive from a signal endpoint. The rules for signal
7156:../../Source/Kernel/rme_kernel.c ****               endpoint receive is:
7157:../../Source/Kernel/rme_kernel.c ****               1.If a receive endpoint have many send endpoints, everyone can
7158:../../Source/Kernel/rme_kernel.c ****                 send to it, and sending to it will increase the count by 1.
7159:../../Source/Kernel/rme_kernel.c ****               2.If some thread blocks on a receive endpoint, the wakeup is only
7160:../../Source/Kernel/rme_kernel.c ****                 possible from the same core that thread is on.
7161:../../Source/Kernel/rme_kernel.c ****               3.It is not recommended to let 2 cores operate on the rcv endpoint
7162:../../Source/Kernel/rme_kernel.c ****                 simutaneously.
7163:../../Source/Kernel/rme_kernel.c ****               This system call can potentially trigger a context switch.
7164:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7165:../../Source/Kernel/rme_kernel.c ****               volatile struct RME_Reg_Struct* Reg - The register set.
7166:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Sig - The capability to the signal.
7167:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7168:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Option - The receive option.
7169:../../Source/Kernel/rme_kernel.c **** Output      : None.
7170:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, a non-negative number containing the 
7171:../../Source/Kernel/rme_kernel.c ****                           number of signals received; or an error code.
7172:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7173:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Sig_Rcv(struct RME_Cap_Cpt* Cpt,
7174:../../Source/Kernel/rme_kernel.c ****                               struct RME_Reg_Struct* Reg,
7175:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Sig,
7176:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Option)
7177:../../Source/Kernel/rme_kernel.c **** {
 18155              		.loc 1 7177 1
 18156              		.cfi_startproc
 18157              		@ args = 0, pretend = 0, frame = 40
 18158              		@ frame_needed = 1, uses_anonymous_args = 0
 18159 0000 00482DE9 		push	{fp, lr}
 18160              		.cfi_def_cfa_offset 8
 18161              		.cfi_offset 11, -8
 18162              		.cfi_offset 14, -4
 18163 0004 04B08DE2 		add	fp, sp, #4
 18164              		.cfi_def_cfa 11, 4
 18165 0008 28D04DE2 		sub	sp, sp, #40
 18166 000c 20000BE5 		str	r0, [fp, #-32]
 18167 0010 24100BE5 		str	r1, [fp, #-36]
 18168 0014 28200BE5 		str	r2, [fp, #-40]
 18169 0018 2C300BE5 		str	r3, [fp, #-44]
7178:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Op;
7179:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Sig* Sig_Root;
7180:../../Source/Kernel/rme_kernel.c ****     struct RME_CPU_Local* Local;
7181:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
7182:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Old_Value;
7183:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7184:../../Source/Kernel/rme_kernel.c ****     
7185:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7186:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Sig,RME_CAP_TYPE_SIG,
 18170              		.loc 1 7186 5
 18171 001c 28301BE5 		ldr	r3, [fp, #-40]
 18172 0020 803003E2 		and	r3, r3, #128
 18173 0024 000053E3 		cmp	r3, #0
 18174 0028 1C00001A 		bne	.L1176
 18175              		.loc 1 7186 5 is_stmt 0 discriminator 1
 18176 002c 20301BE5 		ldr	r3, [fp, #-32]
 18177 0030 142093E5 		ldr	r2, [r3, #20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 446


 18178 0034 28301BE5 		ldr	r3, [fp, #-40]
 18179 0038 030052E1 		cmp	r2, r3
 18180 003c 0100008A 		bhi	.L1177
 18181              		.loc 1 7186 5 discriminator 3
 18182 0040 0230E0E3 		mvn	r3, #2
 18183              		.loc 1 7186 5
 18184 0044 F60000EA 		b	.L1178
 18185              	.L1177:
 18186              		.loc 1 7186 5 discriminator 4
 18187 0048 28301BE5 		ldr	r3, [fp, #-40]
 18188 004c 8322A0E1 		lsl	r2, r3, #5
 18189 0050 20301BE5 		ldr	r3, [fp, #-32]
 18190 0054 0C3093E5 		ldr	r3, [r3, #12]
 18191 0058 033082E0 		add	r3, r2, r3
 18192 005c 08300BE5 		str	r3, [fp, #-8]
 18193 0060 08301BE5 		ldr	r3, [fp, #-8]
 18194 0064 0300A0E1 		mov	r0, r3
 18195 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18196 006c 0C000BE5 		str	r0, [fp, #-12]
 18197              		.loc 1 7186 5 discriminator 1
 18198 0070 0C301BE5 		ldr	r3, [fp, #-12]
 18199 0074 FF3803E2 		and	r3, r3, #16711680
 18200 0078 020853E3 		cmp	r3, #131072
 18201 007c 0100001A 		bne	.L1179
 18202              		.loc 1 7186 5 discriminator 5
 18203 0080 0830E0E3 		mvn	r3, #8
 18204              		.loc 1 7186 5
 18205 0084 E60000EA 		b	.L1178
 18206              	.L1179:
 18207              		.loc 1 7186 5 discriminator 6
 18208 0088 0C301BE5 		ldr	r3, [fp, #-12]
 18209 008c 233CA0E1 		lsr	r3, r3, #24
 18210 0090 080053E3 		cmp	r3, #8
 18211 0094 3F00000A 		beq	.L1180
 18212              		.loc 1 7186 5 discriminator 7
 18213 0098 0130E0E3 		mvn	r3, #1
 18214              		.loc 1 7186 5
 18215 009c E00000EA 		b	.L1178
 18216              	.L1176:
 18217              		.loc 1 7186 5 discriminator 2
 18218 00a0 28301BE5 		ldr	r3, [fp, #-40]
 18219 00a4 2324A0E1 		lsr	r2, r3, #8
 18220 00a8 20301BE5 		ldr	r3, [fp, #-32]
 18221 00ac 143093E5 		ldr	r3, [r3, #20]
 18222 00b0 030052E1 		cmp	r2, r3
 18223 00b4 0100003A 		bcc	.L1181
 18224              		.loc 1 7186 5 discriminator 8
 18225 00b8 0230E0E3 		mvn	r3, #2
 18226              		.loc 1 7186 5
 18227 00bc D80000EA 		b	.L1178
 18228              	.L1181:
 18229              		.loc 1 7186 5 discriminator 9
 18230 00c0 28301BE5 		ldr	r3, [fp, #-40]
 18231 00c4 2334A0E1 		lsr	r3, r3, #8
 18232 00c8 8322A0E1 		lsl	r2, r3, #5
 18233 00cc 20301BE5 		ldr	r3, [fp, #-32]
 18234 00d0 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 447


 18235 00d4 033082E0 		add	r3, r2, r3
 18236 00d8 08300BE5 		str	r3, [fp, #-8]
 18237 00dc 08301BE5 		ldr	r3, [fp, #-8]
 18238 00e0 0300A0E1 		mov	r0, r3
 18239 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18240 00e8 0C000BE5 		str	r0, [fp, #-12]
 18241              		.loc 1 7186 5 discriminator 1
 18242 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 18243 00f0 FF3803E2 		and	r3, r3, #16711680
 18244 00f4 020853E3 		cmp	r3, #131072
 18245 00f8 0100001A 		bne	.L1182
 18246              		.loc 1 7186 5 discriminator 10
 18247 00fc 0830E0E3 		mvn	r3, #8
 18248              		.loc 1 7186 5
 18249 0100 C70000EA 		b	.L1178
 18250              	.L1182:
 18251              		.loc 1 7186 5 discriminator 11
 18252 0104 0C301BE5 		ldr	r3, [fp, #-12]
 18253 0108 233CA0E1 		lsr	r3, r3, #24
 18254 010c 030053E3 		cmp	r3, #3
 18255 0110 0100000A 		beq	.L1183
 18256              		.loc 1 7186 5 discriminator 12
 18257 0114 0130E0E3 		mvn	r3, #1
 18258              		.loc 1 7186 5
 18259 0118 C10000EA 		b	.L1178
 18260              	.L1183:
 18261              		.loc 1 7186 5 discriminator 13
 18262 011c 28301BE5 		ldr	r3, [fp, #-40]
 18263 0120 7F2003E2 		and	r2, r3, #127
 18264 0124 08301BE5 		ldr	r3, [fp, #-8]
 18265 0128 143093E5 		ldr	r3, [r3, #20]
 18266 012c 030052E1 		cmp	r2, r3
 18267 0130 0100003A 		bcc	.L1184
 18268              		.loc 1 7186 5 discriminator 14
 18269 0134 0230E0E3 		mvn	r3, #2
 18270              		.loc 1 7186 5
 18271 0138 B90000EA 		b	.L1178
 18272              	.L1184:
 18273              		.loc 1 7186 5 discriminator 15
 18274 013c 28301BE5 		ldr	r3, [fp, #-40]
 18275 0140 7F3003E2 		and	r3, r3, #127
 18276 0144 8322A0E1 		lsl	r2, r3, #5
 18277 0148 08301BE5 		ldr	r3, [fp, #-8]
 18278 014c 0C3093E5 		ldr	r3, [r3, #12]
 18279 0150 033082E0 		add	r3, r2, r3
 18280 0154 08300BE5 		str	r3, [fp, #-8]
 18281 0158 08301BE5 		ldr	r3, [fp, #-8]
 18282 015c 0300A0E1 		mov	r0, r3
 18283 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18284 0164 0C000BE5 		str	r0, [fp, #-12]
 18285              		.loc 1 7186 5 discriminator 1
 18286 0168 0C301BE5 		ldr	r3, [fp, #-12]
 18287 016c FF3803E2 		and	r3, r3, #16711680
 18288 0170 020853E3 		cmp	r3, #131072
 18289 0174 0100001A 		bne	.L1185
 18290              		.loc 1 7186 5 discriminator 16
 18291 0178 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 448


 18292              		.loc 1 7186 5
 18293 017c A80000EA 		b	.L1178
 18294              	.L1185:
 18295              		.loc 1 7186 5 discriminator 17
 18296 0180 0C301BE5 		ldr	r3, [fp, #-12]
 18297 0184 233CA0E1 		lsr	r3, r3, #24
 18298 0188 080053E3 		cmp	r3, #8
 18299 018c 0100000A 		beq	.L1180
 18300              		.loc 1 7186 5 discriminator 18
 18301 0190 0130E0E3 		mvn	r3, #1
 18302              		.loc 1 7186 5
 18303 0194 A20000EA 		b	.L1178
 18304              	.L1180:
7187:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Sig*,Sig_Op,Type_Stat);    
7188:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
7189:../../Source/Kernel/rme_kernel.c ****     switch(Option)
 18305              		.loc 1 7189 5 is_stmt 1
 18306 0198 2C201BE5 		ldr	r2, [fp, #-44]
 18307 019c 8C329FE5 		ldr	r3, .L1217
 18308 01a0 030052E3 		cmp	r2, #3
 18309 01a4 1D00008A 		bhi	.L1186
 18310 01a8 02F193E7 		ldr	pc, [r3, r2, lsl #2]
 18311              	.Lrtx1188:
 18312 01ac 00F020E3 		nop
 18313              		.section	.rodata._RME_Sig_Rcv,"a",%progbits
 18314              		.align	2
 18315              	.L1188:
 18316 0000 B0010000 		.word	.L1191
 18317 0004 CC010000 		.word	.L1190
 18318 0008 E8010000 		.word	.L1189
 18319 000c 04020000 		.word	.L1187
 18320              		.section	.text._RME_Sig_Rcv
 18321              		.p2align 2
 18322              	.L1191:
7190:../../Source/Kernel/rme_kernel.c ****     {
7191:../../Source/Kernel/rme_kernel.c ****         case RME_RCV_BS:
7192:../../Source/Kernel/rme_kernel.c ****         {
7193:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7194:../../Source/Kernel/rme_kernel.c **** 
7195:../../Source/Kernel/rme_kernel.c ****             RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_RCV_BS);
 18323              		.loc 1 7195 13
 18324 01b0 08301BE5 		ldr	r3, [fp, #-8]
 18325 01b4 083093E5 		ldr	r3, [r3, #8]
 18326 01b8 023003E2 		and	r3, r3, #2
 18327 01bc 000053E3 		cmp	r3, #0
 18328 01c0 1800001A 		bne	.L1213
 18329              		.loc 1 7195 13 is_stmt 0 discriminator 1
 18330 01c4 0630E0E3 		mvn	r3, #6
 18331              		.loc 1 7195 13
 18332 01c8 950000EA 		b	.L1178
 18333              	.L1190:
7196:../../Source/Kernel/rme_kernel.c ****             break;
7197:../../Source/Kernel/rme_kernel.c ****         }
7198:../../Source/Kernel/rme_kernel.c ****         case RME_RCV_BM:
7199:../../Source/Kernel/rme_kernel.c ****         {
7200:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7201:../../Source/Kernel/rme_kernel.c ****             
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 449


7202:../../Source/Kernel/rme_kernel.c ****             RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_RCV_BM);
 18334              		.loc 1 7202 13 is_stmt 1
 18335 01cc 08301BE5 		ldr	r3, [fp, #-8]
 18336 01d0 083093E5 		ldr	r3, [r3, #8]
 18337 01d4 043003E2 		and	r3, r3, #4
 18338 01d8 000053E3 		cmp	r3, #0
 18339 01dc 1300001A 		bne	.L1214
 18340              		.loc 1 7202 13 is_stmt 0 discriminator 1
 18341 01e0 0630E0E3 		mvn	r3, #6
 18342              		.loc 1 7202 13
 18343 01e4 8E0000EA 		b	.L1178
 18344              	.L1189:
7203:../../Source/Kernel/rme_kernel.c ****             break;
7204:../../Source/Kernel/rme_kernel.c ****         }
7205:../../Source/Kernel/rme_kernel.c ****         case RME_RCV_NS:
7206:../../Source/Kernel/rme_kernel.c ****         {
7207:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7208:../../Source/Kernel/rme_kernel.c ****             
7209:../../Source/Kernel/rme_kernel.c ****             RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_RCV_NS);
 18345              		.loc 1 7209 13 is_stmt 1
 18346 01e8 08301BE5 		ldr	r3, [fp, #-8]
 18347 01ec 083093E5 		ldr	r3, [r3, #8]
 18348 01f0 083003E2 		and	r3, r3, #8
 18349 01f4 000053E3 		cmp	r3, #0
 18350 01f8 0E00001A 		bne	.L1215
 18351              		.loc 1 7209 13 is_stmt 0 discriminator 1
 18352 01fc 0630E0E3 		mvn	r3, #6
 18353              		.loc 1 7209 13
 18354 0200 870000EA 		b	.L1178
 18355              	.L1187:
7210:../../Source/Kernel/rme_kernel.c ****             break;
7211:../../Source/Kernel/rme_kernel.c ****         }
7212:../../Source/Kernel/rme_kernel.c ****         case RME_RCV_NM:
7213:../../Source/Kernel/rme_kernel.c ****         {
7214:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7215:../../Source/Kernel/rme_kernel.c ****             
7216:../../Source/Kernel/rme_kernel.c ****             RME_CAP_CHECK(Sig_Op,RME_SIG_FLAG_RCV_NM);
 18356              		.loc 1 7216 13 is_stmt 1
 18357 0204 08301BE5 		ldr	r3, [fp, #-8]
 18358 0208 083093E5 		ldr	r3, [r3, #8]
 18359 020c 103003E2 		and	r3, r3, #16
 18360 0210 000053E3 		cmp	r3, #0
 18361 0214 0900001A 		bne	.L1216
 18362              		.loc 1 7216 13 is_stmt 0 discriminator 1
 18363 0218 0630E0E3 		mvn	r3, #6
 18364              		.loc 1 7216 13
 18365 021c 800000EA 		b	.L1178
 18366              	.L1186:
7217:../../Source/Kernel/rme_kernel.c ****             break;
7218:../../Source/Kernel/rme_kernel.c ****         }
7219:../../Source/Kernel/rme_kernel.c ****         default:
7220:../../Source/Kernel/rme_kernel.c ****         {
7221:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7222:../../Source/Kernel/rme_kernel.c ****             
7223:../../Source/Kernel/rme_kernel.c ****             return RME_ERR_SIV_ACT;
 18367              		.loc 1 7223 20 is_stmt 1
 18368 0220 4B3FE0E3 		mvn	r3, #300
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 450


 18369 0224 7E0000EA 		b	.L1178
 18370              	.L1213:
7196:../../Source/Kernel/rme_kernel.c ****         }
 18371              		.loc 1 7196 13
 18372 0228 00F020E3 		nop
 18373 022c 040000EA 		b	.L1193
 18374              	.L1214:
7203:../../Source/Kernel/rme_kernel.c ****         }
 18375              		.loc 1 7203 13
 18376 0230 00F020E3 		nop
 18377 0234 020000EA 		b	.L1193
 18378              	.L1215:
7210:../../Source/Kernel/rme_kernel.c ****         }
 18379              		.loc 1 7210 13
 18380 0238 00F020E3 		nop
 18381 023c 000000EA 		b	.L1193
 18382              	.L1216:
7217:../../Source/Kernel/rme_kernel.c ****         }
 18383              		.loc 1 7217 13
 18384 0240 00F020E3 		nop
 18385              	.L1193:
7224:../../Source/Kernel/rme_kernel.c ****         }
7225:../../Source/Kernel/rme_kernel.c ****     }
7226:../../Source/Kernel/rme_kernel.c ****     
7227:../../Source/Kernel/rme_kernel.c ****     /* Convert to root cap */
7228:../../Source/Kernel/rme_kernel.c ****     Sig_Root=RME_CAP_CONV_ROOT(Sig_Op,struct RME_Cap_Sig*);
 18386              		.loc 1 7228 14
 18387 0244 08301BE5 		ldr	r3, [fp, #-8]
 18388 0248 003093E5 		ldr	r3, [r3]
 18389 024c 7330FFE6 		uxth	r3, r3
 18390 0250 000053E3 		cmp	r3, #0
 18391 0254 0200000A 		beq	.L1197
 18392              		.loc 1 7228 14 is_stmt 0 discriminator 1
 18393 0258 08301BE5 		ldr	r3, [fp, #-8]
 18394 025c 043093E5 		ldr	r3, [r3, #4]
 18395 0260 000000EA 		b	.L1198
 18396              	.L1197:
 18397              		.loc 1 7228 14 discriminator 2
 18398 0264 08301BE5 		ldr	r3, [fp, #-8]
 18399              	.L1198:
 18400              		.loc 1 7228 13 is_stmt 1 discriminator 4
 18401 0268 10300BE5 		str	r3, [fp, #-16]
7229:../../Source/Kernel/rme_kernel.c ****     
7230:../../Source/Kernel/rme_kernel.c ****     /* See if we can receive on that endpoint - if someone blocks on it, we 
7231:../../Source/Kernel/rme_kernel.c ****      * must wait for it to unblock before we can proceed. */
7232:../../Source/Kernel/rme_kernel.c ****     if(Sig_Root->Thd!=RME_NULL)
 18402              		.loc 1 7232 16
 18403 026c 10301BE5 		ldr	r3, [fp, #-16]
 18404 0270 183093E5 		ldr	r3, [r3, #24]
 18405              		.loc 1 7232 7
 18406 0274 000053E3 		cmp	r3, #0
 18407 0278 0100000A 		beq	.L1199
7233:../../Source/Kernel/rme_kernel.c ****     {
7234:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7235:../../Source/Kernel/rme_kernel.c **** 
7236:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
 18408              		.loc 1 7236 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 451


 18409 027c 4B3FE0E3 		mvn	r3, #300
 18410 0280 670000EA 		b	.L1178
 18411              	.L1199:
7237:../../Source/Kernel/rme_kernel.c ****     }
7238:../../Source/Kernel/rme_kernel.c ****     else
7239:../../Source/Kernel/rme_kernel.c ****     {
7240:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7241:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7242:../../Source/Kernel/rme_kernel.c ****     }
7243:../../Source/Kernel/rme_kernel.c ****     
7244:../../Source/Kernel/rme_kernel.c ****     Local=RME_CPU_LOCAL();
 18412              		.loc 1 7244 10
 18413 0284 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 18414 0288 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 18415 028c 14300BE5 		str	r3, [fp, #-20]
7245:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=Local->Thd_Cur;
 18416              		.loc 1 7245 12
 18417 0290 14301BE5 		ldr	r3, [fp, #-20]
 18418 0294 043093E5 		ldr	r3, [r3, #4]
 18419 0298 18300BE5 		str	r3, [fp, #-24]
7246:../../Source/Kernel/rme_kernel.c ****     
7247:../../Source/Kernel/rme_kernel.c ****     /* Check if we trying to let a boot-time thread block on a signal, which is
7248:../../Source/Kernel/rme_kernel.c ****      * disallowed. Additionally, if the current thread have no timeslice left
7249:../../Source/Kernel/rme_kernel.c ****      * (which shouldn't happen under any circumstances), we assert and die. */
7250:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(Thd_Cur->Sched.Slice!=0U);
 18420              		.loc 1 7250 5
 18421 029c 18301BE5 		ldr	r3, [fp, #-24]
 18422 02a0 183093E5 		ldr	r3, [r3, #24]
 18423 02a4 000053E3 		cmp	r3, #0
 18424 02a8 0800001A 		bne	.L1200
 18425              		.loc 1 7250 5 is_stmt 0 discriminator 1
 18426 02ac 003000E3 		movw	r3, #:lower16:.LC6
 18427 02b0 003040E3 		movt	r3, #:upper16:.LC6
 18428 02b4 002000E3 		movw	r2, #:lower16:.LC7
 18429 02b8 002040E3 		movt	r2, #:upper16:.LC7
 18430 02bc 521C01E3 		movw	r1, #7250
 18431 02c0 000000E3 		movw	r0, #:lower16:.LC8
 18432 02c4 000040E3 		movt	r0, #:upper16:.LC8
 18433 02c8 FEFFFFEB 		bl	RME_Log
 18434              	.L1201:
 18435              		.loc 1 7250 5
 18436 02cc FEFFFFEA 		b	.L1201
 18437              	.L1200:
7251:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur->Sched.Slice==RME_THD_INIT_TIME)
 18438              		.loc 1 7251 22 is_stmt 1
 18439 02d0 18301BE5 		ldr	r3, [fp, #-24]
 18440 02d4 183093E5 		ldr	r3, [r3, #24]
 18441              		.loc 1 7251 7
 18442 02d8 060173E3 		cmn	r3, #-2147483647
 18443 02dc 0200001A 		bne	.L1202
7252:../../Source/Kernel/rme_kernel.c ****     {
7253:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7254:../../Source/Kernel/rme_kernel.c **** 
7255:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_BOOT;
 18444              		.loc 1 7255 16
 18445 02e0 CD3E0FE3 		movw	r3, #65229
 18446 02e4 FF3F4FE3 		movt	r3, 65535
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 452


 18447 02e8 4D0000EA 		b	.L1178
 18448              	.L1202:
7256:../../Source/Kernel/rme_kernel.c ****     }
7257:../../Source/Kernel/rme_kernel.c ****     else
7258:../../Source/Kernel/rme_kernel.c ****     {
7259:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7260:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7261:../../Source/Kernel/rme_kernel.c ****     }
7262:../../Source/Kernel/rme_kernel.c **** 
7263:../../Source/Kernel/rme_kernel.c ****     /* Check if there are signals available */
7264:../../Source/Kernel/rme_kernel.c ****     Old_Value=Sig_Root->Sig_Num;
 18449              		.loc 1 7264 14
 18450 02ec 10301BE5 		ldr	r3, [fp, #-16]
 18451 02f0 143093E5 		ldr	r3, [r3, #20]
 18452 02f4 1C300BE5 		str	r3, [fp, #-28]
7265:../../Source/Kernel/rme_kernel.c ****     if(Old_Value>0U)
 18453              		.loc 1 7265 7
 18454 02f8 1C301BE5 		ldr	r3, [fp, #-28]
 18455 02fc 000053E3 		cmp	r3, #0
 18456 0300 2600000A 		beq	.L1203
7266:../../Source/Kernel/rme_kernel.c ****     {
7267:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7268:../../Source/Kernel/rme_kernel.c **** 
7269:../../Source/Kernel/rme_kernel.c ****         /* Can't use faa, other cores may reduce count to zero in the meantime */
7270:../../Source/Kernel/rme_kernel.c ****         if((Option==RME_RCV_BS)||(Option==RME_RCV_NS))
 18457              		.loc 1 7270 11
 18458 0304 2C301BE5 		ldr	r3, [fp, #-44]
 18459 0308 000053E3 		cmp	r3, #0
 18460 030c 0200000A 		beq	.L1204
 18461              		.loc 1 7270 32 discriminator 1
 18462 0310 2C301BE5 		ldr	r3, [fp, #-44]
 18463 0314 020053E3 		cmp	r3, #2
 18464 0318 0F00001A 		bne	.L1205
 18465              	.L1204:
7271:../../Source/Kernel/rme_kernel.c ****         {
7272:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7273:../../Source/Kernel/rme_kernel.c **** 
7274:../../Source/Kernel/rme_kernel.c ****             /* Try to take one */
7275:../../Source/Kernel/rme_kernel.c ****             if(RME_COMP_SWAP(&(Sig_Root->Sig_Num),
 18466              		.loc 1 7275 16
 18467 031c 10301BE5 		ldr	r3, [fp, #-16]
 18468 0320 140083E2 		add	r0, r3, #20
 18469 0324 1C301BE5 		ldr	r3, [fp, #-28]
 18470 0328 013043E2 		sub	r3, r3, #1
 18471 032c 0320A0E1 		mov	r2, r3
 18472 0330 1C101BE5 		ldr	r1, [fp, #-28]
 18473 0334 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 18474 0338 0030A0E1 		mov	r3, r0
 18475              		.loc 1 7275 15 discriminator 1
 18476 033c 000053E3 		cmp	r3, #0
 18477 0340 0100001A 		bne	.L1206
7276:../../Source/Kernel/rme_kernel.c ****                              Old_Value,
7277:../../Source/Kernel/rme_kernel.c ****                              Old_Value-1U)==RME_CASFAIL)
7278:../../Source/Kernel/rme_kernel.c ****             {
7279:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
7280:../../Source/Kernel/rme_kernel.c **** 
7281:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_SIV_CONFLICT;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 453


 18478              		.loc 1 7281 24
 18479 0344 133EE0E3 		mvn	r3, #304
 18480 0348 350000EA 		b	.L1178
 18481              	.L1206:
7282:../../Source/Kernel/rme_kernel.c ****             }
7283:../../Source/Kernel/rme_kernel.c ****             else
7284:../../Source/Kernel/rme_kernel.c ****             {
7285:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
7286:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
7287:../../Source/Kernel/rme_kernel.c ****             }
7288:../../Source/Kernel/rme_kernel.c ****             
7289:../../Source/Kernel/rme_kernel.c ****             /* We have taken it, now return what we have taken */
7290:../../Source/Kernel/rme_kernel.c ****             __RME_Svc_Retval_Set(Reg,1);
 18482              		.loc 1 7290 13
 18483 034c 0110A0E3 		mov	r1, #1
 18484 0350 24001BE5 		ldr	r0, [fp, #-36]
 18485 0354 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 18486 0358 0E0000EA 		b	.L1207
 18487              	.L1205:
7291:../../Source/Kernel/rme_kernel.c ****         }
7292:../../Source/Kernel/rme_kernel.c ****         else
7293:../../Source/Kernel/rme_kernel.c ****         {
7294:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7295:../../Source/Kernel/rme_kernel.c **** 
7296:../../Source/Kernel/rme_kernel.c ****             /* Try to take all */
7297:../../Source/Kernel/rme_kernel.c ****             if(RME_COMP_SWAP(&(Sig_Root->Sig_Num),
 18488              		.loc 1 7297 16
 18489 035c 10301BE5 		ldr	r3, [fp, #-16]
 18490 0360 143083E2 		add	r3, r3, #20
 18491 0364 0020A0E3 		mov	r2, #0
 18492 0368 1C101BE5 		ldr	r1, [fp, #-28]
 18493 036c 0300A0E1 		mov	r0, r3
 18494 0370 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 18495 0374 0030A0E1 		mov	r3, r0
 18496              		.loc 1 7297 15 discriminator 1
 18497 0378 000053E3 		cmp	r3, #0
 18498 037c 0100001A 		bne	.L1208
7298:../../Source/Kernel/rme_kernel.c ****                              Old_Value,
7299:../../Source/Kernel/rme_kernel.c ****                              0U)==RME_CASFAIL)
7300:../../Source/Kernel/rme_kernel.c ****             {
7301:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
7302:../../Source/Kernel/rme_kernel.c **** 
7303:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_SIV_CONFLICT;
 18499              		.loc 1 7303 24
 18500 0380 133EE0E3 		mvn	r3, #304
 18501 0384 260000EA 		b	.L1178
 18502              	.L1208:
7304:../../Source/Kernel/rme_kernel.c ****             }
7305:../../Source/Kernel/rme_kernel.c ****             else
7306:../../Source/Kernel/rme_kernel.c ****             {
7307:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
7308:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
7309:../../Source/Kernel/rme_kernel.c ****             }
7310:../../Source/Kernel/rme_kernel.c ****             
7311:../../Source/Kernel/rme_kernel.c ****             /* We have taken all, now return what we have taken */
7312:../../Source/Kernel/rme_kernel.c ****             __RME_Svc_Retval_Set(Reg,(rme_ret_t)Old_Value);
 18503              		.loc 1 7312 13
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 454


 18504 0388 1C301BE5 		ldr	r3, [fp, #-28]
 18505 038c 0310A0E1 		mov	r1, r3
 18506 0390 24001BE5 		ldr	r0, [fp, #-36]
 18507 0394 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 18508              	.L1207:
7313:../../Source/Kernel/rme_kernel.c ****         }
7314:../../Source/Kernel/rme_kernel.c ****         
7315:../../Source/Kernel/rme_kernel.c ****         return 0;
 18509              		.loc 1 7315 16
 18510 0398 0030A0E3 		mov	r3, #0
 18511 039c 200000EA 		b	.L1178
 18512              	.L1203:
7316:../../Source/Kernel/rme_kernel.c ****     }
7317:../../Source/Kernel/rme_kernel.c ****     else
7318:../../Source/Kernel/rme_kernel.c ****     {
7319:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7320:../../Source/Kernel/rme_kernel.c **** 
7321:../../Source/Kernel/rme_kernel.c ****         /* There's no value, try to block */
7322:../../Source/Kernel/rme_kernel.c ****         if((Option==RME_RCV_BS)||(Option==RME_RCV_BM))
 18513              		.loc 1 7322 11
 18514 03a0 2C301BE5 		ldr	r3, [fp, #-44]
 18515 03a4 000053E3 		cmp	r3, #0
 18516 03a8 0200000A 		beq	.L1209
 18517              		.loc 1 7322 32 discriminator 1
 18518 03ac 2C301BE5 		ldr	r3, [fp, #-44]
 18519 03b0 010053E3 		cmp	r3, #1
 18520 03b4 1600001A 		bne	.L1210
 18521              	.L1209:
7323:../../Source/Kernel/rme_kernel.c ****         {
7324:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7325:../../Source/Kernel/rme_kernel.c **** 
7326:../../Source/Kernel/rme_kernel.c ****             if(RME_COMP_SWAP((rme_ptr_t*)&(Sig_Root->Thd),
 18522              		.loc 1 7326 16
 18523 03b8 10301BE5 		ldr	r3, [fp, #-16]
 18524 03bc 183083E2 		add	r3, r3, #24
 18525 03c0 18201BE5 		ldr	r2, [fp, #-24]
 18526 03c4 0010A0E3 		mov	r1, #0
 18527 03c8 0300A0E1 		mov	r0, r3
 18528 03cc FEFFFFEB 		bl	_RME_Comp_Swap_Single
 18529 03d0 0030A0E1 		mov	r3, r0
 18530              		.loc 1 7326 15 discriminator 1
 18531 03d4 000053E3 		cmp	r3, #0
 18532 03d8 0100001A 		bne	.L1211
7327:../../Source/Kernel/rme_kernel.c ****                              RME_NULL,
7328:../../Source/Kernel/rme_kernel.c ****                              (rme_ptr_t)Thd_Cur)==RME_CASFAIL)
7329:../../Source/Kernel/rme_kernel.c ****             {
7330:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
7331:../../Source/Kernel/rme_kernel.c **** 
7332:../../Source/Kernel/rme_kernel.c ****                 return RME_ERR_SIV_CONFLICT;
 18533              		.loc 1 7332 24
 18534 03dc 133EE0E3 		mvn	r3, #304
 18535 03e0 0F0000EA 		b	.L1178
 18536              	.L1211:
7333:../../Source/Kernel/rme_kernel.c ****             }
7334:../../Source/Kernel/rme_kernel.c ****             else
7335:../../Source/Kernel/rme_kernel.c ****             {
7336:../../Source/Kernel/rme_kernel.c ****                 RME_COV_MARKER();
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 455


7337:../../Source/Kernel/rme_kernel.c ****                 /* No action required */
7338:../../Source/Kernel/rme_kernel.c ****             }
7339:../../Source/Kernel/rme_kernel.c **** 
7340:../../Source/Kernel/rme_kernel.c ****             /* Now we block our current thread. No need to set any return value
7341:../../Source/Kernel/rme_kernel.c ****              * to the register set here, because we do not yet know how many
7342:../../Source/Kernel/rme_kernel.c ****              * signals will be there when the thread unblocks. The unblocking
7343:../../Source/Kernel/rme_kernel.c ****              * does not need an option so we don't keep that; we always treat
7344:../../Source/Kernel/rme_kernel.c ****              * it as single receive when we unblock anyway. */
7345:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.Signal=Sig_Root;
 18537              		.loc 1 7345 34
 18538 03e4 18301BE5 		ldr	r3, [fp, #-24]
 18539 03e8 10201BE5 		ldr	r2, [fp, #-16]
 18540 03ec 282083E5 		str	r2, [r3, #40]
7346:../../Source/Kernel/rme_kernel.c ****             Thd_Cur->Sched.State=RME_THD_BLOCKED;
 18541              		.loc 1 7346 33
 18542 03f0 18301BE5 		ldr	r3, [fp, #-24]
 18543 03f4 0120A0E3 		mov	r2, #1
 18544 03f8 1C2083E5 		str	r2, [r3, #28]
7347:../../Source/Kernel/rme_kernel.c ****             _RME_Run_Del(Thd_Cur);
 18545              		.loc 1 7347 13
 18546 03fc 18001BE5 		ldr	r0, [fp, #-24]
 18547 0400 FEFFFFEB 		bl	_RME_Run_Del
7348:../../Source/Kernel/rme_kernel.c ****             
7349:../../Source/Kernel/rme_kernel.c ****             /* Pick the highest priority thread to run */
7350:../../Source/Kernel/rme_kernel.c ****             _RME_Kern_High(Reg,Local);
 18548              		.loc 1 7350 13
 18549 0404 14101BE5 		ldr	r1, [fp, #-20]
 18550 0408 24001BE5 		ldr	r0, [fp, #-36]
 18551 040c FEFFFFEB 		bl	_RME_Kern_High
 18552 0410 020000EA 		b	.L1212
 18553              	.L1210:
7351:../../Source/Kernel/rme_kernel.c ****         }
7352:../../Source/Kernel/rme_kernel.c ****         else
7353:../../Source/Kernel/rme_kernel.c ****         {
7354:../../Source/Kernel/rme_kernel.c ****             RME_COV_MARKER();
7355:../../Source/Kernel/rme_kernel.c **** 
7356:../../Source/Kernel/rme_kernel.c ****             /* We have taken nothing but the system call is successful anyway */
7357:../../Source/Kernel/rme_kernel.c ****             __RME_Svc_Retval_Set(Reg,0);
 18554              		.loc 1 7357 13
 18555 0414 0010A0E3 		mov	r1, #0
 18556 0418 24001BE5 		ldr	r0, [fp, #-36]
 18557 041c FEFFFFEB 		bl	__RME_Svc_Retval_Set
 18558              	.L1212:
7358:../../Source/Kernel/rme_kernel.c ****         }
7359:../../Source/Kernel/rme_kernel.c ****     }
7360:../../Source/Kernel/rme_kernel.c ****     
7361:../../Source/Kernel/rme_kernel.c ****     return 0;
 18559              		.loc 1 7361 12
 18560 0420 0030A0E3 		mov	r3, #0
 18561              	.L1178:
7362:../../Source/Kernel/rme_kernel.c **** }
 18562              		.loc 1 7362 1
 18563 0424 0300A0E1 		mov	r0, r3
 18564 0428 04D04BE2 		sub	sp, fp, #4
 18565              		.cfi_def_cfa 13, 8
 18566              		@ sp needed
 18567 042c 0088BDE8 		pop	{fp, pc}
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 456


 18568              	.L1218:
 18569              		.align	2
 18570              	.L1217:
 18571 0430 00000000 		.word	.L1188
 18572              		.cfi_endproc
 18573              	.LFE71:
 18575              		.section	.text._RME_Inv_Crt,"ax",%progbits
 18576              		.align	2
 18577              		.syntax unified
 18578              		.arm
 18580              	_RME_Inv_Crt:
 18581              	.LFB72:
7363:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Sig_Rcv *************************************************/
7364:../../Source/Kernel/rme_kernel.c **** 
7365:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Inv_Crt ******************************************************
7366:../../Source/Kernel/rme_kernel.c **** Description : Create an invocation stub.
7367:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7368:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to use
7369:../../Source/Kernel/rme_kernel.c ****                                   for this process.
7370:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7371:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Inv - The capability slot that you want this newly
7372:../../Source/Kernel/rme_kernel.c ****                                   created invocation capability to be in.
7373:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
7374:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Prc - The capability to the process that it is in.
7375:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7376:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Raddr - The relative virtual address to store the
7377:../../Source/Kernel/rme_kernel.c ****                                 invocation port kernel object.
7378:../../Source/Kernel/rme_kernel.c **** Output      : None.
7379:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
7380:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7381:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Inv_Crt(struct RME_Cap_Cpt* Cpt,
7382:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
7383:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Kom,
7384:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Inv,
7385:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Prc,
7386:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Raddr)
7387:../../Source/Kernel/rme_kernel.c **** {
 18582              		.loc 1 7387 1
 18583              		.cfi_startproc
 18584              		@ args = 8, pretend = 0, frame = 48
 18585              		@ frame_needed = 1, uses_anonymous_args = 0
 18586 0000 00482DE9 		push	{fp, lr}
 18587              		.cfi_def_cfa_offset 8
 18588              		.cfi_offset 11, -8
 18589              		.cfi_offset 14, -4
 18590 0004 04B08DE2 		add	fp, sp, #4
 18591              		.cfi_def_cfa 11, 4
 18592 0008 30D04DE2 		sub	sp, sp, #48
 18593 000c 28000BE5 		str	r0, [fp, #-40]
 18594 0010 2C100BE5 		str	r1, [fp, #-44]
 18595 0014 30200BE5 		str	r2, [fp, #-48]
 18596 0018 34300BE5 		str	r3, [fp, #-52]
7388:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
7389:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Op;
7390:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Kom* Kom_Op;
7391:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Inv* Inv_Crt;
7392:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Prc* Prc_Root;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 457


7393:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Invocation;
7394:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7395:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Vaddr;
7396:../../Source/Kernel/rme_kernel.c ****     
7397:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slots */
7398:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 18597              		.loc 1 7398 5
 18598 001c 2C301BE5 		ldr	r3, [fp, #-44]
 18599 0020 803003E2 		and	r3, r3, #128
 18600 0024 000053E3 		cmp	r3, #0
 18601 0028 1C00001A 		bne	.L1220
 18602              		.loc 1 7398 5 is_stmt 0 discriminator 1
 18603 002c 28301BE5 		ldr	r3, [fp, #-40]
 18604 0030 142093E5 		ldr	r2, [r3, #20]
 18605 0034 2C301BE5 		ldr	r3, [fp, #-44]
 18606 0038 030052E1 		cmp	r2, r3
 18607 003c 0100008A 		bhi	.L1221
 18608              		.loc 1 7398 5 discriminator 3
 18609 0040 0230E0E3 		mvn	r3, #2
 18610              		.loc 1 7398 5
 18611 0044 950100EA 		b	.L1222
 18612              	.L1221:
 18613              		.loc 1 7398 5 discriminator 4
 18614 0048 2C301BE5 		ldr	r3, [fp, #-44]
 18615 004c 8322A0E1 		lsl	r2, r3, #5
 18616 0050 28301BE5 		ldr	r3, [fp, #-40]
 18617 0054 0C3093E5 		ldr	r3, [r3, #12]
 18618 0058 033082E0 		add	r3, r2, r3
 18619 005c 08300BE5 		str	r3, [fp, #-8]
 18620 0060 08301BE5 		ldr	r3, [fp, #-8]
 18621 0064 0300A0E1 		mov	r0, r3
 18622 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18623 006c 14000BE5 		str	r0, [fp, #-20]
 18624              		.loc 1 7398 5 discriminator 1
 18625 0070 14301BE5 		ldr	r3, [fp, #-20]
 18626 0074 FF3803E2 		and	r3, r3, #16711680
 18627 0078 020853E3 		cmp	r3, #131072
 18628 007c 0100001A 		bne	.L1223
 18629              		.loc 1 7398 5 discriminator 5
 18630 0080 0830E0E3 		mvn	r3, #8
 18631              		.loc 1 7398 5
 18632 0084 850100EA 		b	.L1222
 18633              	.L1223:
 18634              		.loc 1 7398 5 discriminator 6
 18635 0088 14301BE5 		ldr	r3, [fp, #-20]
 18636 008c 233CA0E1 		lsr	r3, r3, #24
 18637 0090 030053E3 		cmp	r3, #3
 18638 0094 3F00000A 		beq	.L1224
 18639              		.loc 1 7398 5 discriminator 7
 18640 0098 0130E0E3 		mvn	r3, #1
 18641              		.loc 1 7398 5
 18642 009c 7F0100EA 		b	.L1222
 18643              	.L1220:
 18644              		.loc 1 7398 5 discriminator 2
 18645 00a0 2C301BE5 		ldr	r3, [fp, #-44]
 18646 00a4 2324A0E1 		lsr	r2, r3, #8
 18647 00a8 28301BE5 		ldr	r3, [fp, #-40]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 458


 18648 00ac 143093E5 		ldr	r3, [r3, #20]
 18649 00b0 030052E1 		cmp	r2, r3
 18650 00b4 0100003A 		bcc	.L1225
 18651              		.loc 1 7398 5 discriminator 8
 18652 00b8 0230E0E3 		mvn	r3, #2
 18653              		.loc 1 7398 5
 18654 00bc 770100EA 		b	.L1222
 18655              	.L1225:
 18656              		.loc 1 7398 5 discriminator 9
 18657 00c0 2C301BE5 		ldr	r3, [fp, #-44]
 18658 00c4 2334A0E1 		lsr	r3, r3, #8
 18659 00c8 8322A0E1 		lsl	r2, r3, #5
 18660 00cc 28301BE5 		ldr	r3, [fp, #-40]
 18661 00d0 0C3093E5 		ldr	r3, [r3, #12]
 18662 00d4 033082E0 		add	r3, r2, r3
 18663 00d8 08300BE5 		str	r3, [fp, #-8]
 18664 00dc 08301BE5 		ldr	r3, [fp, #-8]
 18665 00e0 0300A0E1 		mov	r0, r3
 18666 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18667 00e8 14000BE5 		str	r0, [fp, #-20]
 18668              		.loc 1 7398 5 discriminator 1
 18669 00ec 14301BE5 		ldr	r3, [fp, #-20]
 18670 00f0 FF3803E2 		and	r3, r3, #16711680
 18671 00f4 020853E3 		cmp	r3, #131072
 18672 00f8 0100001A 		bne	.L1226
 18673              		.loc 1 7398 5 discriminator 10
 18674 00fc 0830E0E3 		mvn	r3, #8
 18675              		.loc 1 7398 5
 18676 0100 660100EA 		b	.L1222
 18677              	.L1226:
 18678              		.loc 1 7398 5 discriminator 11
 18679 0104 14301BE5 		ldr	r3, [fp, #-20]
 18680 0108 233CA0E1 		lsr	r3, r3, #24
 18681 010c 030053E3 		cmp	r3, #3
 18682 0110 0100000A 		beq	.L1227
 18683              		.loc 1 7398 5 discriminator 12
 18684 0114 0130E0E3 		mvn	r3, #1
 18685              		.loc 1 7398 5
 18686 0118 600100EA 		b	.L1222
 18687              	.L1227:
 18688              		.loc 1 7398 5 discriminator 13
 18689 011c 2C301BE5 		ldr	r3, [fp, #-44]
 18690 0120 7F2003E2 		and	r2, r3, #127
 18691 0124 08301BE5 		ldr	r3, [fp, #-8]
 18692 0128 143093E5 		ldr	r3, [r3, #20]
 18693 012c 030052E1 		cmp	r2, r3
 18694 0130 0100003A 		bcc	.L1228
 18695              		.loc 1 7398 5 discriminator 14
 18696 0134 0230E0E3 		mvn	r3, #2
 18697              		.loc 1 7398 5
 18698 0138 580100EA 		b	.L1222
 18699              	.L1228:
 18700              		.loc 1 7398 5 discriminator 15
 18701 013c 2C301BE5 		ldr	r3, [fp, #-44]
 18702 0140 7F3003E2 		and	r3, r3, #127
 18703 0144 8322A0E1 		lsl	r2, r3, #5
 18704 0148 08301BE5 		ldr	r3, [fp, #-8]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 459


 18705 014c 0C3093E5 		ldr	r3, [r3, #12]
 18706 0150 033082E0 		add	r3, r2, r3
 18707 0154 08300BE5 		str	r3, [fp, #-8]
 18708 0158 08301BE5 		ldr	r3, [fp, #-8]
 18709 015c 0300A0E1 		mov	r0, r3
 18710 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18711 0164 14000BE5 		str	r0, [fp, #-20]
 18712              		.loc 1 7398 5 discriminator 1
 18713 0168 14301BE5 		ldr	r3, [fp, #-20]
 18714 016c FF3803E2 		and	r3, r3, #16711680
 18715 0170 020853E3 		cmp	r3, #131072
 18716 0174 0100001A 		bne	.L1229
 18717              		.loc 1 7398 5 discriminator 16
 18718 0178 0830E0E3 		mvn	r3, #8
 18719              		.loc 1 7398 5
 18720 017c 470100EA 		b	.L1222
 18721              	.L1229:
 18722              		.loc 1 7398 5 discriminator 17
 18723 0180 14301BE5 		ldr	r3, [fp, #-20]
 18724 0184 233CA0E1 		lsr	r3, r3, #24
 18725 0188 030053E3 		cmp	r3, #3
 18726 018c 0100000A 		beq	.L1224
 18727              		.loc 1 7398 5 discriminator 18
 18728 0190 0130E0E3 		mvn	r3, #1
 18729              		.loc 1 7398 5
 18730 0194 410100EA 		b	.L1222
 18731              	.L1224:
7399:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
7400:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Prc,RME_CAP_TYPE_PRC,
 18732              		.loc 1 7400 5 is_stmt 1
 18733 0198 04309BE5 		ldr	r3, [fp, #4]
 18734 019c 803003E2 		and	r3, r3, #128
 18735 01a0 000053E3 		cmp	r3, #0
 18736 01a4 1C00001A 		bne	.L1230
 18737              		.loc 1 7400 5 is_stmt 0 discriminator 1
 18738 01a8 28301BE5 		ldr	r3, [fp, #-40]
 18739 01ac 142093E5 		ldr	r2, [r3, #20]
 18740 01b0 04309BE5 		ldr	r3, [fp, #4]
 18741 01b4 030052E1 		cmp	r2, r3
 18742 01b8 0100008A 		bhi	.L1231
 18743              		.loc 1 7400 5 discriminator 3
 18744 01bc 0230E0E3 		mvn	r3, #2
 18745              		.loc 1 7400 5
 18746 01c0 360100EA 		b	.L1222
 18747              	.L1231:
 18748              		.loc 1 7400 5 discriminator 4
 18749 01c4 04309BE5 		ldr	r3, [fp, #4]
 18750 01c8 8322A0E1 		lsl	r2, r3, #5
 18751 01cc 28301BE5 		ldr	r3, [fp, #-40]
 18752 01d0 0C3093E5 		ldr	r3, [r3, #12]
 18753 01d4 033082E0 		add	r3, r2, r3
 18754 01d8 0C300BE5 		str	r3, [fp, #-12]
 18755 01dc 0C301BE5 		ldr	r3, [fp, #-12]
 18756 01e0 0300A0E1 		mov	r0, r3
 18757 01e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18758 01e8 14000BE5 		str	r0, [fp, #-20]
 18759              		.loc 1 7400 5 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 460


 18760 01ec 14301BE5 		ldr	r3, [fp, #-20]
 18761 01f0 FF3803E2 		and	r3, r3, #16711680
 18762 01f4 020853E3 		cmp	r3, #131072
 18763 01f8 0100001A 		bne	.L1232
 18764              		.loc 1 7400 5 discriminator 5
 18765 01fc 0830E0E3 		mvn	r3, #8
 18766              		.loc 1 7400 5
 18767 0200 260100EA 		b	.L1222
 18768              	.L1232:
 18769              		.loc 1 7400 5 discriminator 6
 18770 0204 14301BE5 		ldr	r3, [fp, #-20]
 18771 0208 233CA0E1 		lsr	r3, r3, #24
 18772 020c 050053E3 		cmp	r3, #5
 18773 0210 3F00000A 		beq	.L1233
 18774              		.loc 1 7400 5 discriminator 7
 18775 0214 0130E0E3 		mvn	r3, #1
 18776              		.loc 1 7400 5
 18777 0218 200100EA 		b	.L1222
 18778              	.L1230:
 18779              		.loc 1 7400 5 discriminator 2
 18780 021c 04309BE5 		ldr	r3, [fp, #4]
 18781 0220 2324A0E1 		lsr	r2, r3, #8
 18782 0224 28301BE5 		ldr	r3, [fp, #-40]
 18783 0228 143093E5 		ldr	r3, [r3, #20]
 18784 022c 030052E1 		cmp	r2, r3
 18785 0230 0100003A 		bcc	.L1234
 18786              		.loc 1 7400 5 discriminator 8
 18787 0234 0230E0E3 		mvn	r3, #2
 18788              		.loc 1 7400 5
 18789 0238 180100EA 		b	.L1222
 18790              	.L1234:
 18791              		.loc 1 7400 5 discriminator 9
 18792 023c 04309BE5 		ldr	r3, [fp, #4]
 18793 0240 2334A0E1 		lsr	r3, r3, #8
 18794 0244 8322A0E1 		lsl	r2, r3, #5
 18795 0248 28301BE5 		ldr	r3, [fp, #-40]
 18796 024c 0C3093E5 		ldr	r3, [r3, #12]
 18797 0250 033082E0 		add	r3, r2, r3
 18798 0254 0C300BE5 		str	r3, [fp, #-12]
 18799 0258 0C301BE5 		ldr	r3, [fp, #-12]
 18800 025c 0300A0E1 		mov	r0, r3
 18801 0260 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18802 0264 14000BE5 		str	r0, [fp, #-20]
 18803              		.loc 1 7400 5 discriminator 1
 18804 0268 14301BE5 		ldr	r3, [fp, #-20]
 18805 026c FF3803E2 		and	r3, r3, #16711680
 18806 0270 020853E3 		cmp	r3, #131072
 18807 0274 0100001A 		bne	.L1235
 18808              		.loc 1 7400 5 discriminator 10
 18809 0278 0830E0E3 		mvn	r3, #8
 18810              		.loc 1 7400 5
 18811 027c 070100EA 		b	.L1222
 18812              	.L1235:
 18813              		.loc 1 7400 5 discriminator 11
 18814 0280 14301BE5 		ldr	r3, [fp, #-20]
 18815 0284 233CA0E1 		lsr	r3, r3, #24
 18816 0288 030053E3 		cmp	r3, #3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 461


 18817 028c 0100000A 		beq	.L1236
 18818              		.loc 1 7400 5 discriminator 12
 18819 0290 0130E0E3 		mvn	r3, #1
 18820              		.loc 1 7400 5
 18821 0294 010100EA 		b	.L1222
 18822              	.L1236:
 18823              		.loc 1 7400 5 discriminator 13
 18824 0298 04309BE5 		ldr	r3, [fp, #4]
 18825 029c 7F2003E2 		and	r2, r3, #127
 18826 02a0 0C301BE5 		ldr	r3, [fp, #-12]
 18827 02a4 143093E5 		ldr	r3, [r3, #20]
 18828 02a8 030052E1 		cmp	r2, r3
 18829 02ac 0100003A 		bcc	.L1237
 18830              		.loc 1 7400 5 discriminator 14
 18831 02b0 0230E0E3 		mvn	r3, #2
 18832              		.loc 1 7400 5
 18833 02b4 F90000EA 		b	.L1222
 18834              	.L1237:
 18835              		.loc 1 7400 5 discriminator 15
 18836 02b8 04309BE5 		ldr	r3, [fp, #4]
 18837 02bc 7F3003E2 		and	r3, r3, #127
 18838 02c0 8322A0E1 		lsl	r2, r3, #5
 18839 02c4 0C301BE5 		ldr	r3, [fp, #-12]
 18840 02c8 0C3093E5 		ldr	r3, [r3, #12]
 18841 02cc 033082E0 		add	r3, r2, r3
 18842 02d0 0C300BE5 		str	r3, [fp, #-12]
 18843 02d4 0C301BE5 		ldr	r3, [fp, #-12]
 18844 02d8 0300A0E1 		mov	r0, r3
 18845 02dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18846 02e0 14000BE5 		str	r0, [fp, #-20]
 18847              		.loc 1 7400 5 discriminator 1
 18848 02e4 14301BE5 		ldr	r3, [fp, #-20]
 18849 02e8 FF3803E2 		and	r3, r3, #16711680
 18850 02ec 020853E3 		cmp	r3, #131072
 18851 02f0 0100001A 		bne	.L1238
 18852              		.loc 1 7400 5 discriminator 16
 18853 02f4 0830E0E3 		mvn	r3, #8
 18854              		.loc 1 7400 5
 18855 02f8 E80000EA 		b	.L1222
 18856              	.L1238:
 18857              		.loc 1 7400 5 discriminator 17
 18858 02fc 14301BE5 		ldr	r3, [fp, #-20]
 18859 0300 233CA0E1 		lsr	r3, r3, #24
 18860 0304 050053E3 		cmp	r3, #5
 18861 0308 0100000A 		beq	.L1233
 18862              		.loc 1 7400 5 discriminator 18
 18863 030c 0130E0E3 		mvn	r3, #1
 18864              		.loc 1 7400 5
 18865 0310 E20000EA 		b	.L1222
 18866              	.L1233:
7401:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Prc*,Prc_Op,Type_Stat);
7402:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Kom,RME_CAP_TYPE_KOM,
 18867              		.loc 1 7402 5 is_stmt 1
 18868 0314 30301BE5 		ldr	r3, [fp, #-48]
 18869 0318 803003E2 		and	r3, r3, #128
 18870 031c 000053E3 		cmp	r3, #0
 18871 0320 1C00001A 		bne	.L1239
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 462


 18872              		.loc 1 7402 5 is_stmt 0 discriminator 1
 18873 0324 28301BE5 		ldr	r3, [fp, #-40]
 18874 0328 142093E5 		ldr	r2, [r3, #20]
 18875 032c 30301BE5 		ldr	r3, [fp, #-48]
 18876 0330 030052E1 		cmp	r2, r3
 18877 0334 0100008A 		bhi	.L1240
 18878              		.loc 1 7402 5 discriminator 3
 18879 0338 0230E0E3 		mvn	r3, #2
 18880              		.loc 1 7402 5
 18881 033c D70000EA 		b	.L1222
 18882              	.L1240:
 18883              		.loc 1 7402 5 discriminator 4
 18884 0340 30301BE5 		ldr	r3, [fp, #-48]
 18885 0344 8322A0E1 		lsl	r2, r3, #5
 18886 0348 28301BE5 		ldr	r3, [fp, #-40]
 18887 034c 0C3093E5 		ldr	r3, [r3, #12]
 18888 0350 033082E0 		add	r3, r2, r3
 18889 0354 10300BE5 		str	r3, [fp, #-16]
 18890 0358 10301BE5 		ldr	r3, [fp, #-16]
 18891 035c 0300A0E1 		mov	r0, r3
 18892 0360 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18893 0364 14000BE5 		str	r0, [fp, #-20]
 18894              		.loc 1 7402 5 discriminator 1
 18895 0368 14301BE5 		ldr	r3, [fp, #-20]
 18896 036c FF3803E2 		and	r3, r3, #16711680
 18897 0370 020853E3 		cmp	r3, #131072
 18898 0374 0100001A 		bne	.L1241
 18899              		.loc 1 7402 5 discriminator 5
 18900 0378 0830E0E3 		mvn	r3, #8
 18901              		.loc 1 7402 5
 18902 037c C70000EA 		b	.L1222
 18903              	.L1241:
 18904              		.loc 1 7402 5 discriminator 6
 18905 0380 14301BE5 		ldr	r3, [fp, #-20]
 18906 0384 233CA0E1 		lsr	r3, r3, #24
 18907 0388 020053E3 		cmp	r3, #2
 18908 038c 3F00000A 		beq	.L1242
 18909              		.loc 1 7402 5 discriminator 7
 18910 0390 0130E0E3 		mvn	r3, #1
 18911              		.loc 1 7402 5
 18912 0394 C10000EA 		b	.L1222
 18913              	.L1239:
 18914              		.loc 1 7402 5 discriminator 2
 18915 0398 30301BE5 		ldr	r3, [fp, #-48]
 18916 039c 2324A0E1 		lsr	r2, r3, #8
 18917 03a0 28301BE5 		ldr	r3, [fp, #-40]
 18918 03a4 143093E5 		ldr	r3, [r3, #20]
 18919 03a8 030052E1 		cmp	r2, r3
 18920 03ac 0100003A 		bcc	.L1243
 18921              		.loc 1 7402 5 discriminator 8
 18922 03b0 0230E0E3 		mvn	r3, #2
 18923              		.loc 1 7402 5
 18924 03b4 B90000EA 		b	.L1222
 18925              	.L1243:
 18926              		.loc 1 7402 5 discriminator 9
 18927 03b8 30301BE5 		ldr	r3, [fp, #-48]
 18928 03bc 2334A0E1 		lsr	r3, r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 463


 18929 03c0 8322A0E1 		lsl	r2, r3, #5
 18930 03c4 28301BE5 		ldr	r3, [fp, #-40]
 18931 03c8 0C3093E5 		ldr	r3, [r3, #12]
 18932 03cc 033082E0 		add	r3, r2, r3
 18933 03d0 10300BE5 		str	r3, [fp, #-16]
 18934 03d4 10301BE5 		ldr	r3, [fp, #-16]
 18935 03d8 0300A0E1 		mov	r0, r3
 18936 03dc FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18937 03e0 14000BE5 		str	r0, [fp, #-20]
 18938              		.loc 1 7402 5 discriminator 1
 18939 03e4 14301BE5 		ldr	r3, [fp, #-20]
 18940 03e8 FF3803E2 		and	r3, r3, #16711680
 18941 03ec 020853E3 		cmp	r3, #131072
 18942 03f0 0100001A 		bne	.L1244
 18943              		.loc 1 7402 5 discriminator 10
 18944 03f4 0830E0E3 		mvn	r3, #8
 18945              		.loc 1 7402 5
 18946 03f8 A80000EA 		b	.L1222
 18947              	.L1244:
 18948              		.loc 1 7402 5 discriminator 11
 18949 03fc 14301BE5 		ldr	r3, [fp, #-20]
 18950 0400 233CA0E1 		lsr	r3, r3, #24
 18951 0404 030053E3 		cmp	r3, #3
 18952 0408 0100000A 		beq	.L1245
 18953              		.loc 1 7402 5 discriminator 12
 18954 040c 0130E0E3 		mvn	r3, #1
 18955              		.loc 1 7402 5
 18956 0410 A20000EA 		b	.L1222
 18957              	.L1245:
 18958              		.loc 1 7402 5 discriminator 13
 18959 0414 30301BE5 		ldr	r3, [fp, #-48]
 18960 0418 7F2003E2 		and	r2, r3, #127
 18961 041c 10301BE5 		ldr	r3, [fp, #-16]
 18962 0420 143093E5 		ldr	r3, [r3, #20]
 18963 0424 030052E1 		cmp	r2, r3
 18964 0428 0100003A 		bcc	.L1246
 18965              		.loc 1 7402 5 discriminator 14
 18966 042c 0230E0E3 		mvn	r3, #2
 18967              		.loc 1 7402 5
 18968 0430 9A0000EA 		b	.L1222
 18969              	.L1246:
 18970              		.loc 1 7402 5 discriminator 15
 18971 0434 30301BE5 		ldr	r3, [fp, #-48]
 18972 0438 7F3003E2 		and	r3, r3, #127
 18973 043c 8322A0E1 		lsl	r2, r3, #5
 18974 0440 10301BE5 		ldr	r3, [fp, #-16]
 18975 0444 0C3093E5 		ldr	r3, [r3, #12]
 18976 0448 033082E0 		add	r3, r2, r3
 18977 044c 10300BE5 		str	r3, [fp, #-16]
 18978 0450 10301BE5 		ldr	r3, [fp, #-16]
 18979 0454 0300A0E1 		mov	r0, r3
 18980 0458 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 18981 045c 14000BE5 		str	r0, [fp, #-20]
 18982              		.loc 1 7402 5 discriminator 1
 18983 0460 14301BE5 		ldr	r3, [fp, #-20]
 18984 0464 FF3803E2 		and	r3, r3, #16711680
 18985 0468 020853E3 		cmp	r3, #131072
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 464


 18986 046c 0100001A 		bne	.L1247
 18987              		.loc 1 7402 5 discriminator 16
 18988 0470 0830E0E3 		mvn	r3, #8
 18989              		.loc 1 7402 5
 18990 0474 890000EA 		b	.L1222
 18991              	.L1247:
 18992              		.loc 1 7402 5 discriminator 17
 18993 0478 14301BE5 		ldr	r3, [fp, #-20]
 18994 047c 233CA0E1 		lsr	r3, r3, #24
 18995 0480 020053E3 		cmp	r3, #2
 18996 0484 0100000A 		beq	.L1242
 18997              		.loc 1 7402 5 discriminator 18
 18998 0488 0130E0E3 		mvn	r3, #1
 18999              		.loc 1 7402 5
 19000 048c 830000EA 		b	.L1222
 19001              	.L1242:
7403:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Kom*,Kom_Op,Type_Stat);
7404:../../Source/Kernel/rme_kernel.c ****     /* Check if the captbl is not frozen and allows such operations */
7405:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 19002              		.loc 1 7405 5 is_stmt 1
 19003 0490 08301BE5 		ldr	r3, [fp, #-8]
 19004 0494 083093E5 		ldr	r3, [r3, #8]
 19005 0498 013003E2 		and	r3, r3, #1
 19006 049c 000053E3 		cmp	r3, #0
 19007 04a0 0100001A 		bne	.L1248
 19008              		.loc 1 7405 5 is_stmt 0 discriminator 1
 19009 04a4 0630E0E3 		mvn	r3, #6
 19010              		.loc 1 7405 5
 19011 04a8 7C0000EA 		b	.L1222
 19012              	.L1248:
7406:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Prc_Op,RME_PRC_FLAG_INV);
 19013              		.loc 1 7406 5 is_stmt 1
 19014 04ac 0C301BE5 		ldr	r3, [fp, #-12]
 19015 04b0 083093E5 		ldr	r3, [r3, #8]
 19016 04b4 013003E2 		and	r3, r3, #1
 19017 04b8 000053E3 		cmp	r3, #0
 19018 04bc 0100001A 		bne	.L1249
 19019              		.loc 1 7406 5 is_stmt 0 discriminator 1
 19020 04c0 0630E0E3 		mvn	r3, #6
 19021              		.loc 1 7406 5
 19022 04c4 750000EA 		b	.L1222
 19023              	.L1249:
7407:../../Source/Kernel/rme_kernel.c ****     /* See if the creation is valid for this kmem range */
7408:../../Source/Kernel/rme_kernel.c ****     RME_KOM_CHECK(Kom_Op,RME_KOM_FLAG_INV,Raddr,Vaddr,RME_INV_SIZE);
 19024              		.loc 1 7408 5 is_stmt 1
 19025 04c8 10301BE5 		ldr	r3, [fp, #-16]
 19026 04cc 083093E5 		ldr	r3, [r3, #8]
 19027 04d0 083003E2 		and	r3, r3, #8
 19028 04d4 000053E3 		cmp	r3, #0
 19029 04d8 0100001A 		bne	.L1250
 19030              		.loc 1 7408 5 is_stmt 0 discriminator 1
 19031 04dc 0630E0E3 		mvn	r3, #6
 19032              		.loc 1 7408 5
 19033 04e0 6E0000EA 		b	.L1222
 19034              	.L1250:
 19035              		.loc 1 7408 5 discriminator 2
 19036 04e4 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 465


 19037 04e8 143093E5 		ldr	r3, [r3, #20]
 19038 04ec 08209BE5 		ldr	r2, [fp, #8]
 19039 04f0 033082E0 		add	r3, r2, r3
 19040 04f4 18300BE5 		str	r3, [fp, #-24]
 19041 04f8 18201BE5 		ldr	r2, [fp, #-24]
 19042 04fc 08309BE5 		ldr	r3, [fp, #8]
 19043 0500 030052E1 		cmp	r2, r3
 19044 0504 0100002A 		bcs	.L1251
 19045              		.loc 1 7408 5 discriminator 3
 19046 0508 0630E0E3 		mvn	r3, #6
 19047              		.loc 1 7408 5
 19048 050c 630000EA 		b	.L1222
 19049              	.L1251:
 19050              		.loc 1 7408 5 discriminator 4
 19051 0510 10301BE5 		ldr	r3, [fp, #-16]
 19052 0514 143093E5 		ldr	r3, [r3, #20]
 19053 0518 18201BE5 		ldr	r2, [fp, #-24]
 19054 051c 030052E1 		cmp	r2, r3
 19055 0520 0100002A 		bcs	.L1252
 19056              		.loc 1 7408 5 discriminator 5
 19057 0524 0630E0E3 		mvn	r3, #6
 19058              		.loc 1 7408 5
 19059 0528 5C0000EA 		b	.L1222
 19060              	.L1252:
 19061              		.loc 1 7408 5 discriminator 6
 19062 052c 18301BE5 		ldr	r3, [fp, #-24]
 19063 0530 250073E3 		cmn	r3, #37
 19064 0534 0100009A 		bls	.L1253
 19065              		.loc 1 7408 5 discriminator 7
 19066 0538 0630E0E3 		mvn	r3, #6
 19067              		.loc 1 7408 5
 19068 053c 570000EA 		b	.L1222
 19069              	.L1253:
 19070              		.loc 1 7408 5 discriminator 8
 19071 0540 10301BE5 		ldr	r3, [fp, #-16]
 19072 0544 182093E5 		ldr	r2, [r3, #24]
 19073 0548 18301BE5 		ldr	r3, [fp, #-24]
 19074 054c 233083E2 		add	r3, r3, #35
 19075 0550 030052E1 		cmp	r2, r3
 19076 0554 0100002A 		bcs	.L1254
 19077              		.loc 1 7408 5 discriminator 9
 19078 0558 0630E0E3 		mvn	r3, #6
 19079              		.loc 1 7408 5
 19080 055c 4F0000EA 		b	.L1222
 19081              	.L1254:
7409:../../Source/Kernel/rme_kernel.c ****     
7410:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
7411:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Inv,struct RME_Cap_Inv*,Inv_Crt);
 19082              		.loc 1 7411 5 is_stmt 1
 19083 0560 08301BE5 		ldr	r3, [fp, #-8]
 19084 0564 142093E5 		ldr	r2, [r3, #20]
 19085 0568 34301BE5 		ldr	r3, [fp, #-52]
 19086 056c 030052E1 		cmp	r2, r3
 19087 0570 0100008A 		bhi	.L1255
 19088              		.loc 1 7411 5 is_stmt 0 discriminator 1
 19089 0574 0230E0E3 		mvn	r3, #2
 19090              		.loc 1 7411 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 466


 19091 0578 480000EA 		b	.L1222
 19092              	.L1255:
 19093              		.loc 1 7411 5 discriminator 2
 19094 057c 34301BE5 		ldr	r3, [fp, #-52]
 19095 0580 8322A0E1 		lsl	r2, r3, #5
 19096 0584 08301BE5 		ldr	r3, [fp, #-8]
 19097 0588 0C3093E5 		ldr	r3, [r3, #12]
 19098 058c 033082E0 		add	r3, r2, r3
 19099 0590 1C300BE5 		str	r3, [fp, #-28]
7412:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
7413:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Inv_Crt);
 19100              		.loc 1 7413 5 is_stmt 1
 19101 0594 1C301BE5 		ldr	r3, [fp, #-28]
 19102 0598 0128A0E3 		mov	r2, #65536
 19103 059c 0010A0E3 		mov	r1, #0
 19104 05a0 0300A0E1 		mov	r0, r3
 19105 05a4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 19106 05a8 0030A0E1 		mov	r3, r0
 19107              		.loc 1 7413 5 is_stmt 0 discriminator 1
 19108 05ac 000053E3 		cmp	r3, #0
 19109 05b0 0100001A 		bne	.L1256
 19110 05b4 0430E0E3 		mvn	r3, #4
 19111              		.loc 1 7413 5
 19112 05b8 380000EA 		b	.L1222
 19113              	.L1256:
 19114              		.loc 1 7413 5 discriminator 2
 19115 05bc 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 19116 05c0 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 19117 05c4 002093E5 		ldr	r2, [r3]
 19118 05c8 1C301BE5 		ldr	r3, [fp, #-28]
 19119 05cc 102083E5 		str	r2, [r3, #16]
7414:../../Source/Kernel/rme_kernel.c ****     
7415:../../Source/Kernel/rme_kernel.c ****     /* Try to populate the area */
7416:../../Source/Kernel/rme_kernel.c ****     if(_RME_Kot_Mark(Vaddr,RME_INV_SIZE)!=0)
 19120              		.loc 1 7416 8 is_stmt 1
 19121 05d0 2410A0E3 		mov	r1, #36
 19122 05d4 18001BE5 		ldr	r0, [fp, #-24]
 19123 05d8 FEFFFFEB 		bl	_RME_Kot_Mark
 19124 05dc 0030A0E1 		mov	r3, r0
 19125              		.loc 1 7416 7 discriminator 1
 19126 05e0 000053E3 		cmp	r3, #0
 19127 05e4 0500000A 		beq	.L1257
7417:../../Source/Kernel/rme_kernel.c ****     {
7418:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7419:../../Source/Kernel/rme_kernel.c **** 
7420:../../Source/Kernel/rme_kernel.c ****         RME_WRITE_RELEASE(&(Inv_Crt->Head.Type_Stat),0U);
 19128              		.loc 1 7420 9
 19129 05e8 1C301BE5 		ldr	r3, [fp, #-28]
 19130 05ec 0010A0E3 		mov	r1, #0
 19131 05f0 0300A0E1 		mov	r0, r3
 19132 05f4 FEFFFFEB 		bl	__RME_A7A_Write_Release
7421:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_KOT;
 19133              		.loc 1 7421 16
 19134 05f8 0330E0E3 		mvn	r3, #3
 19135 05fc 270000EA 		b	.L1222
 19136              	.L1257:
7422:../../Source/Kernel/rme_kernel.c ****     }
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 467


7423:../../Source/Kernel/rme_kernel.c ****     else
7424:../../Source/Kernel/rme_kernel.c ****     {
7425:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7426:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7427:../../Source/Kernel/rme_kernel.c ****     }
7428:../../Source/Kernel/rme_kernel.c ****     
7429:../../Source/Kernel/rme_kernel.c ****     /* Object init */
7430:../../Source/Kernel/rme_kernel.c ****     Invocation=(struct RME_Inv_Struct*)Vaddr;
 19137              		.loc 1 7430 15
 19138 0600 18301BE5 		ldr	r3, [fp, #-24]
 19139 0604 20300BE5 		str	r3, [fp, #-32]
7431:../../Source/Kernel/rme_kernel.c ****     Prc_Root=RME_CAP_CONV_ROOT(Prc_Op,struct RME_Cap_Prc*);
 19140              		.loc 1 7431 14
 19141 0608 0C301BE5 		ldr	r3, [fp, #-12]
 19142 060c 003093E5 		ldr	r3, [r3]
 19143 0610 7330FFE6 		uxth	r3, r3
 19144 0614 000053E3 		cmp	r3, #0
 19145 0618 0200000A 		beq	.L1258
 19146              		.loc 1 7431 14 is_stmt 0 discriminator 1
 19147 061c 0C301BE5 		ldr	r3, [fp, #-12]
 19148 0620 043093E5 		ldr	r3, [r3, #4]
 19149 0624 000000EA 		b	.L1259
 19150              	.L1258:
 19151              		.loc 1 7431 14 discriminator 2
 19152 0628 0C301BE5 		ldr	r3, [fp, #-12]
 19153              	.L1259:
 19154              		.loc 1 7431 13 is_stmt 1 discriminator 4
 19155 062c 24300BE5 		str	r3, [fp, #-36]
7432:../../Source/Kernel/rme_kernel.c ****     Invocation->Prc=Prc_Root;
 19156              		.loc 1 7432 20
 19157 0630 20301BE5 		ldr	r3, [fp, #-32]
 19158 0634 24201BE5 		ldr	r2, [fp, #-36]
 19159 0638 082083E5 		str	r2, [r3, #8]
7433:../../Source/Kernel/rme_kernel.c ****     Invocation->Thd_Act=RME_NULL;
 19160              		.loc 1 7433 24
 19161 063c 20301BE5 		ldr	r3, [fp, #-32]
 19162 0640 0020A0E3 		mov	r2, #0
 19163 0644 0C2083E5 		str	r2, [r3, #12]
7434:../../Source/Kernel/rme_kernel.c ****     /* By default we do not return on exception */
7435:../../Source/Kernel/rme_kernel.c ****     Invocation->Is_Exc_Ret=0U;
 19164              		.loc 1 7435 27
 19165 0648 20301BE5 		ldr	r3, [fp, #-32]
 19166 064c 0020A0E3 		mov	r2, #0
 19167 0650 182083E5 		str	r2, [r3, #24]
7436:../../Source/Kernel/rme_kernel.c ****     
7437:../../Source/Kernel/rme_kernel.c ****     /* Header init */
7438:../../Source/Kernel/rme_kernel.c ****     Inv_Crt->Head.Root_Ref=0U;
 19168              		.loc 1 7438 27
 19169 0654 1C301BE5 		ldr	r3, [fp, #-28]
 19170 0658 0020A0E3 		mov	r2, #0
 19171 065c 042083E5 		str	r2, [r3, #4]
7439:../../Source/Kernel/rme_kernel.c ****     Inv_Crt->Head.Object=Vaddr;
 19172              		.loc 1 7439 25
 19173 0660 1C301BE5 		ldr	r3, [fp, #-28]
 19174 0664 18201BE5 		ldr	r2, [fp, #-24]
 19175 0668 0C2083E5 		str	r2, [r3, #12]
7440:../../Source/Kernel/rme_kernel.c ****     Inv_Crt->Head.Flag=RME_INV_FLAG_ALL;
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 468


 19176              		.loc 1 7440 23
 19177 066c 1C301BE5 		ldr	r3, [fp, #-28]
 19178 0670 0320A0E3 		mov	r2, #3
 19179 0674 082083E5 		str	r2, [r3, #8]
7441:../../Source/Kernel/rme_kernel.c ****     
7442:../../Source/Kernel/rme_kernel.c ****     /* Reference object */
7443:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Prc_Root->Head.Root_Ref),1U);
 19180              		.loc 1 7443 5
 19181 0678 24301BE5 		ldr	r3, [fp, #-36]
 19182 067c 043083E2 		add	r3, r3, #4
 19183 0680 0110A0E3 		mov	r1, #1
 19184 0684 0300A0E1 		mov	r0, r3
 19185 0688 FEFFFFEB 		bl	_RME_Fetch_Add_Single
7444:../../Source/Kernel/rme_kernel.c ****     
7445:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
7446:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Inv_Crt->Head.Type_Stat),
 19186              		.loc 1 7446 5
 19187 068c 1C301BE5 		ldr	r3, [fp, #-28]
 19188 0690 0714A0E3 		mov	r1, #117440512
 19189 0694 0300A0E1 		mov	r0, r3
 19190 0698 FEFFFFEB 		bl	__RME_A7A_Write_Release
7447:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_INV,
7448:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
7449:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
7450:../../Source/Kernel/rme_kernel.c **** 
7451:../../Source/Kernel/rme_kernel.c ****     return 0;
 19191              		.loc 1 7451 12
 19192 069c 0030A0E3 		mov	r3, #0
 19193              	.L1222:
7452:../../Source/Kernel/rme_kernel.c **** }
 19194              		.loc 1 7452 1
 19195 06a0 0300A0E1 		mov	r0, r3
 19196 06a4 04D04BE2 		sub	sp, fp, #4
 19197              		.cfi_def_cfa 13, 8
 19198              		@ sp needed
 19199 06a8 0088BDE8 		pop	{fp, pc}
 19200              		.cfi_endproc
 19201              	.LFE72:
 19203              		.section	.text._RME_Inv_Del,"ax",%progbits
 19204              		.align	2
 19205              		.syntax unified
 19206              		.arm
 19208              	_RME_Inv_Del:
 19209              	.LFB73:
7453:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Inv_Crt *************************************************/
7454:../../Source/Kernel/rme_kernel.c **** 
7455:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Inv_Del ******************************************************
7456:../../Source/Kernel/rme_kernel.c **** Description : Delete an invocation stub.
7457:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7458:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the capability table to
7459:../../Source/Kernel/rme_kernel.c ****                                   delete from.
7460:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7461:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Inv - The capability to the invocation stub.
7462:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
7463:../../Source/Kernel/rme_kernel.c **** Output      : None.
7464:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
7465:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 469


7466:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Inv_Del(struct RME_Cap_Cpt* Cpt,
7467:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Cpt,
7468:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Inv)
7469:../../Source/Kernel/rme_kernel.c **** {
 19210              		.loc 1 7469 1
 19211              		.cfi_startproc
 19212              		@ args = 0, pretend = 0, frame = 32
 19213              		@ frame_needed = 1, uses_anonymous_args = 0
 19214 0000 00482DE9 		push	{fp, lr}
 19215              		.cfi_def_cfa_offset 8
 19216              		.cfi_offset 11, -8
 19217              		.cfi_offset 14, -4
 19218 0004 04B08DE2 		add	fp, sp, #4
 19219              		.cfi_def_cfa 11, 4
 19220 0008 20D04DE2 		sub	sp, sp, #32
 19221 000c 18000BE5 		str	r0, [fp, #-24]
 19222 0010 1C100BE5 		str	r1, [fp, #-28]
 19223 0014 20200BE5 		str	r2, [fp, #-32]
7470:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
7471:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Inv* Inv_Del;
7472:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7473:../../Source/Kernel/rme_kernel.c ****     /* These are for deletion */
7474:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Invocation;
7475:../../Source/Kernel/rme_kernel.c ****     
7476:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7477:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 19224              		.loc 1 7477 5
 19225 0018 1C301BE5 		ldr	r3, [fp, #-28]
 19226 001c 803003E2 		and	r3, r3, #128
 19227 0020 000053E3 		cmp	r3, #0
 19228 0024 1C00001A 		bne	.L1261
 19229              		.loc 1 7477 5 is_stmt 0 discriminator 1
 19230 0028 18301BE5 		ldr	r3, [fp, #-24]
 19231 002c 142093E5 		ldr	r2, [r3, #20]
 19232 0030 1C301BE5 		ldr	r3, [fp, #-28]
 19233 0034 030052E1 		cmp	r2, r3
 19234 0038 0100008A 		bhi	.L1262
 19235              		.loc 1 7477 5 discriminator 3
 19236 003c 0230E0E3 		mvn	r3, #2
 19237              		.loc 1 7477 5
 19238 0040 D10000EA 		b	.L1263
 19239              	.L1262:
 19240              		.loc 1 7477 5 discriminator 4
 19241 0044 1C301BE5 		ldr	r3, [fp, #-28]
 19242 0048 8322A0E1 		lsl	r2, r3, #5
 19243 004c 18301BE5 		ldr	r3, [fp, #-24]
 19244 0050 0C3093E5 		ldr	r3, [r3, #12]
 19245 0054 033082E0 		add	r3, r2, r3
 19246 0058 08300BE5 		str	r3, [fp, #-8]
 19247 005c 08301BE5 		ldr	r3, [fp, #-8]
 19248 0060 0300A0E1 		mov	r0, r3
 19249 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19250 0068 0C000BE5 		str	r0, [fp, #-12]
 19251              		.loc 1 7477 5 discriminator 1
 19252 006c 0C301BE5 		ldr	r3, [fp, #-12]
 19253 0070 FF3803E2 		and	r3, r3, #16711680
 19254 0074 020853E3 		cmp	r3, #131072
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 470


 19255 0078 0100001A 		bne	.L1264
 19256              		.loc 1 7477 5 discriminator 5
 19257 007c 0830E0E3 		mvn	r3, #8
 19258              		.loc 1 7477 5
 19259 0080 C10000EA 		b	.L1263
 19260              	.L1264:
 19261              		.loc 1 7477 5 discriminator 6
 19262 0084 0C301BE5 		ldr	r3, [fp, #-12]
 19263 0088 233CA0E1 		lsr	r3, r3, #24
 19264 008c 030053E3 		cmp	r3, #3
 19265 0090 3F00000A 		beq	.L1265
 19266              		.loc 1 7477 5 discriminator 7
 19267 0094 0130E0E3 		mvn	r3, #1
 19268              		.loc 1 7477 5
 19269 0098 BB0000EA 		b	.L1263
 19270              	.L1261:
 19271              		.loc 1 7477 5 discriminator 2
 19272 009c 1C301BE5 		ldr	r3, [fp, #-28]
 19273 00a0 2324A0E1 		lsr	r2, r3, #8
 19274 00a4 18301BE5 		ldr	r3, [fp, #-24]
 19275 00a8 143093E5 		ldr	r3, [r3, #20]
 19276 00ac 030052E1 		cmp	r2, r3
 19277 00b0 0100003A 		bcc	.L1266
 19278              		.loc 1 7477 5 discriminator 8
 19279 00b4 0230E0E3 		mvn	r3, #2
 19280              		.loc 1 7477 5
 19281 00b8 B30000EA 		b	.L1263
 19282              	.L1266:
 19283              		.loc 1 7477 5 discriminator 9
 19284 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 19285 00c0 2334A0E1 		lsr	r3, r3, #8
 19286 00c4 8322A0E1 		lsl	r2, r3, #5
 19287 00c8 18301BE5 		ldr	r3, [fp, #-24]
 19288 00cc 0C3093E5 		ldr	r3, [r3, #12]
 19289 00d0 033082E0 		add	r3, r2, r3
 19290 00d4 08300BE5 		str	r3, [fp, #-8]
 19291 00d8 08301BE5 		ldr	r3, [fp, #-8]
 19292 00dc 0300A0E1 		mov	r0, r3
 19293 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19294 00e4 0C000BE5 		str	r0, [fp, #-12]
 19295              		.loc 1 7477 5 discriminator 1
 19296 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 19297 00ec FF3803E2 		and	r3, r3, #16711680
 19298 00f0 020853E3 		cmp	r3, #131072
 19299 00f4 0100001A 		bne	.L1267
 19300              		.loc 1 7477 5 discriminator 10
 19301 00f8 0830E0E3 		mvn	r3, #8
 19302              		.loc 1 7477 5
 19303 00fc A20000EA 		b	.L1263
 19304              	.L1267:
 19305              		.loc 1 7477 5 discriminator 11
 19306 0100 0C301BE5 		ldr	r3, [fp, #-12]
 19307 0104 233CA0E1 		lsr	r3, r3, #24
 19308 0108 030053E3 		cmp	r3, #3
 19309 010c 0100000A 		beq	.L1268
 19310              		.loc 1 7477 5 discriminator 12
 19311 0110 0130E0E3 		mvn	r3, #1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 471


 19312              		.loc 1 7477 5
 19313 0114 9C0000EA 		b	.L1263
 19314              	.L1268:
 19315              		.loc 1 7477 5 discriminator 13
 19316 0118 1C301BE5 		ldr	r3, [fp, #-28]
 19317 011c 7F2003E2 		and	r2, r3, #127
 19318 0120 08301BE5 		ldr	r3, [fp, #-8]
 19319 0124 143093E5 		ldr	r3, [r3, #20]
 19320 0128 030052E1 		cmp	r2, r3
 19321 012c 0100003A 		bcc	.L1269
 19322              		.loc 1 7477 5 discriminator 14
 19323 0130 0230E0E3 		mvn	r3, #2
 19324              		.loc 1 7477 5
 19325 0134 940000EA 		b	.L1263
 19326              	.L1269:
 19327              		.loc 1 7477 5 discriminator 15
 19328 0138 1C301BE5 		ldr	r3, [fp, #-28]
 19329 013c 7F3003E2 		and	r3, r3, #127
 19330 0140 8322A0E1 		lsl	r2, r3, #5
 19331 0144 08301BE5 		ldr	r3, [fp, #-8]
 19332 0148 0C3093E5 		ldr	r3, [r3, #12]
 19333 014c 033082E0 		add	r3, r2, r3
 19334 0150 08300BE5 		str	r3, [fp, #-8]
 19335 0154 08301BE5 		ldr	r3, [fp, #-8]
 19336 0158 0300A0E1 		mov	r0, r3
 19337 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19338 0160 0C000BE5 		str	r0, [fp, #-12]
 19339              		.loc 1 7477 5 discriminator 1
 19340 0164 0C301BE5 		ldr	r3, [fp, #-12]
 19341 0168 FF3803E2 		and	r3, r3, #16711680
 19342 016c 020853E3 		cmp	r3, #131072
 19343 0170 0100001A 		bne	.L1270
 19344              		.loc 1 7477 5 discriminator 16
 19345 0174 0830E0E3 		mvn	r3, #8
 19346              		.loc 1 7477 5
 19347 0178 830000EA 		b	.L1263
 19348              	.L1270:
 19349              		.loc 1 7477 5 discriminator 17
 19350 017c 0C301BE5 		ldr	r3, [fp, #-12]
 19351 0180 233CA0E1 		lsr	r3, r3, #24
 19352 0184 030053E3 		cmp	r3, #3
 19353 0188 0100000A 		beq	.L1265
 19354              		.loc 1 7477 5 discriminator 18
 19355 018c 0130E0E3 		mvn	r3, #1
 19356              		.loc 1 7477 5
 19357 0190 7D0000EA 		b	.L1263
 19358              	.L1265:
7478:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);    
7479:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
7480:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_DEL);
 19359              		.loc 1 7480 5 is_stmt 1
 19360 0194 08301BE5 		ldr	r3, [fp, #-8]
 19361 0198 083093E5 		ldr	r3, [r3, #8]
 19362 019c 023003E2 		and	r3, r3, #2
 19363 01a0 000053E3 		cmp	r3, #0
 19364 01a4 0100001A 		bne	.L1271
 19365              		.loc 1 7480 5 is_stmt 0 discriminator 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 472


 19366 01a8 0630E0E3 		mvn	r3, #6
 19367              		.loc 1 7480 5
 19368 01ac 760000EA 		b	.L1263
 19369              	.L1271:
7481:../../Source/Kernel/rme_kernel.c ****     
7482:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
7483:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Inv,struct RME_Cap_Inv*,Inv_Del);
 19370              		.loc 1 7483 5 is_stmt 1
 19371 01b0 08301BE5 		ldr	r3, [fp, #-8]
 19372 01b4 142093E5 		ldr	r2, [r3, #20]
 19373 01b8 20301BE5 		ldr	r3, [fp, #-32]
 19374 01bc 030052E1 		cmp	r2, r3
 19375 01c0 0100008A 		bhi	.L1272
 19376              		.loc 1 7483 5 is_stmt 0 discriminator 1
 19377 01c4 0230E0E3 		mvn	r3, #2
 19378              		.loc 1 7483 5
 19379 01c8 6F0000EA 		b	.L1263
 19380              	.L1272:
 19381              		.loc 1 7483 5 discriminator 2
 19382 01cc 20301BE5 		ldr	r3, [fp, #-32]
 19383 01d0 8322A0E1 		lsl	r2, r3, #5
 19384 01d4 08301BE5 		ldr	r3, [fp, #-8]
 19385 01d8 0C3093E5 		ldr	r3, [r3, #12]
 19386 01dc 033082E0 		add	r3, r2, r3
 19387 01e0 10300BE5 		str	r3, [fp, #-16]
7484:../../Source/Kernel/rme_kernel.c ****     /* Delete check */
7485:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DEL_CHECK(Inv_Del,Type_Stat,RME_CAP_TYPE_INV);
 19388              		.loc 1 7485 5 is_stmt 1
 19389 01e4 10301BE5 		ldr	r3, [fp, #-16]
 19390 01e8 0300A0E1 		mov	r0, r3
 19391 01ec FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19392 01f0 0C000BE5 		str	r0, [fp, #-12]
 19393              		.loc 1 7485 5 is_stmt 0 discriminator 1
 19394 01f4 0C301BE5 		ldr	r3, [fp, #-12]
 19395 01f8 FF3803E2 		and	r3, r3, #16711680
 19396 01fc 020853E3 		cmp	r3, #131072
 19397 0200 0100000A 		beq	.L1273
 19398 0204 0830E0E3 		mvn	r3, #8
 19399              		.loc 1 7485 5
 19400 0208 5F0000EA 		b	.L1263
 19401              	.L1273:
 19402              		.loc 1 7485 5 discriminator 2
 19403 020c 0C301BE5 		ldr	r3, [fp, #-12]
 19404 0210 233CA0E1 		lsr	r3, r3, #24
 19405 0214 070053E3 		cmp	r3, #7
 19406 0218 0100000A 		beq	.L1274
 19407              		.loc 1 7485 5 discriminator 3
 19408 021c 0130E0E3 		mvn	r3, #1
 19409              		.loc 1 7485 5
 19410 0220 590000EA 		b	.L1263
 19411              	.L1274:
 19412              		.loc 1 7485 5 discriminator 4
 19413 0224 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 19414 0228 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 19415 022c 002093E5 		ldr	r2, [r3]
 19416 0230 10301BE5 		ldr	r3, [fp, #-16]
 19417 0234 103093E5 		ldr	r3, [r3, #16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 473


 19418 0238 0310A0E1 		mov	r1, r3
 19419 023c 0200A0E1 		mov	r0, r2
 19420 0240 FEFFFFEB 		bl	_RME_Diff
 19421 0244 0030A0E1 		mov	r3, r0
 19422              		.loc 1 7485 5 discriminator 1
 19423 0248 0A0053E3 		cmp	r3, #10
 19424 024c 0100008A 		bhi	.L1275
 19425              		.loc 1 7485 5 discriminator 5
 19426 0250 0730E0E3 		mvn	r3, #7
 19427              		.loc 1 7485 5
 19428 0254 4C0000EA 		b	.L1263
 19429              	.L1275:
 19430              		.loc 1 7485 5 discriminator 6
 19431 0258 10301BE5 		ldr	r3, [fp, #-16]
 19432 025c 043093E5 		ldr	r3, [r3, #4]
 19433 0260 000053E3 		cmp	r3, #0
 19434 0264 0B00000A 		beq	.L1276
 19435              		.loc 1 7485 5 discriminator 7
 19436 0268 0C301BE5 		ldr	r3, [fp, #-12]
 19437 026c 7330FFE6 		uxth	r3, r3
 19438 0270 000053E3 		cmp	r3, #0
 19439 0274 0500001A 		bne	.L1277
 19440              		.loc 1 7485 5 discriminator 9
 19441 0278 10001BE5 		ldr	r0, [fp, #-16]
 19442 027c 0C301BE5 		ldr	r3, [fp, #-12]
 19443 0280 FF38C3E3 		bic	r3, r3, #16711680
 19444 0284 0320A0E1 		mov	r2, r3
 19445 0288 0C101BE5 		ldr	r1, [fp, #-12]
 19446 028c FEFFFFEB 		bl	_RME_Comp_Swap_Single
 19447              	.L1277:
 19448              		.loc 1 7485 5 discriminator 11
 19449 0290 0530E0E3 		mvn	r3, #5
 19450              		.loc 1 7485 5
 19451 0294 3C0000EA 		b	.L1263
 19452              	.L1276:
 19453              		.loc 1 7485 5 discriminator 8
 19454 0298 0C301BE5 		ldr	r3, [fp, #-12]
 19455 029c 7330FFE6 		uxth	r3, r3
 19456 02a0 000053E3 		cmp	r3, #0
 19457 02a4 0800000A 		beq	.L1278
 19458              		.loc 1 7485 5 discriminator 12
 19459 02a8 003000E3 		movw	r3, #:lower16:.LC6
 19460 02ac 003040E3 		movt	r3, #:upper16:.LC6
 19461 02b0 002000E3 		movw	r2, #:lower16:.LC7
 19462 02b4 002040E3 		movt	r2, #:upper16:.LC7
 19463 02b8 3D1D01E3 		movw	r1, #7485
 19464 02bc 000000E3 		movw	r0, #:lower16:.LC8
 19465 02c0 000040E3 		movt	r0, #:upper16:.LC8
 19466 02c4 FEFFFFEB 		bl	RME_Log
 19467              	.L1279:
 19468              		.loc 1 7485 5
 19469 02c8 FEFFFFEA 		b	.L1279
 19470              	.L1278:
7486:../../Source/Kernel/rme_kernel.c ****     
7487:../../Source/Kernel/rme_kernel.c ****     /* Get the invocation */
7488:../../Source/Kernel/rme_kernel.c ****     Invocation=RME_CAP_GETOBJ(Inv_Del,struct RME_Inv_Struct*);
 19471              		.loc 1 7488 16 is_stmt 1
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 474


 19472 02cc 10301BE5 		ldr	r3, [fp, #-16]
 19473 02d0 0C3093E5 		ldr	r3, [r3, #12]
 19474              		.loc 1 7488 15
 19475 02d4 14300BE5 		str	r3, [fp, #-20]
7489:../../Source/Kernel/rme_kernel.c ****     
7490:../../Source/Kernel/rme_kernel.c ****     /* See if the invocation is currently being used. If yes, we cannot delete it */
7491:../../Source/Kernel/rme_kernel.c ****     if(Invocation->Thd_Act!=RME_NULL)
 19476              		.loc 1 7491 18
 19477 02d8 14301BE5 		ldr	r3, [fp, #-20]
 19478 02dc 0C3093E5 		ldr	r3, [r3, #12]
 19479              		.loc 1 7491 7
 19480 02e0 000053E3 		cmp	r3, #0
 19481 02e4 0700000A 		beq	.L1280
7492:../../Source/Kernel/rme_kernel.c ****     {
7493:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7494:../../Source/Kernel/rme_kernel.c **** 
7495:../../Source/Kernel/rme_kernel.c ****         RME_CAP_DEFROST(Inv_Del,Type_Stat);
 19482              		.loc 1 7495 9
 19483 02e8 10001BE5 		ldr	r0, [fp, #-16]
 19484 02ec 0C301BE5 		ldr	r3, [fp, #-12]
 19485 02f0 FF38C3E3 		bic	r3, r3, #16711680
 19486 02f4 0320A0E1 		mov	r2, r3
 19487 02f8 0C101BE5 		ldr	r1, [fp, #-12]
 19488 02fc FEFFFFEB 		bl	_RME_Comp_Swap_Single
7496:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
 19489              		.loc 1 7496 16
 19490 0300 4B3FE0E3 		mvn	r3, #300
 19491 0304 200000EA 		b	.L1263
 19492              	.L1280:
7497:../../Source/Kernel/rme_kernel.c ****     }
7498:../../Source/Kernel/rme_kernel.c ****     else
7499:../../Source/Kernel/rme_kernel.c ****     {
7500:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7501:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7502:../../Source/Kernel/rme_kernel.c ****     }
7503:../../Source/Kernel/rme_kernel.c ****     
7504:../../Source/Kernel/rme_kernel.c ****     /* Now we can safely delete the cap */
7505:../../Source/Kernel/rme_kernel.c ****     RME_CAP_DELETE(Inv_Del,Type_Stat);
 19493              		.loc 1 7505 5
 19494 0308 10301BE5 		ldr	r3, [fp, #-16]
 19495 030c 0020A0E3 		mov	r2, #0
 19496 0310 0C101BE5 		ldr	r1, [fp, #-12]
 19497 0314 0300A0E1 		mov	r0, r3
 19498 0318 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 19499 031c 0030A0E1 		mov	r3, r0
 19500              		.loc 1 7505 5 is_stmt 0 discriminator 1
 19501 0320 000053E3 		cmp	r3, #0
 19502 0324 0100001A 		bne	.L1281
 19503 0328 0030E0E3 		mvn	r3, #0
 19504              		.loc 1 7505 5
 19505 032c 160000EA 		b	.L1263
 19506              	.L1281:
7506:../../Source/Kernel/rme_kernel.c ****     
7507:../../Source/Kernel/rme_kernel.c ****     /* Dereference the process */
7508:../../Source/Kernel/rme_kernel.c ****     RME_FETCH_ADD(&(Invocation->Prc->Head.Root_Ref), -1);
 19507              		.loc 1 7508 5 is_stmt 1
 19508 0330 14301BE5 		ldr	r3, [fp, #-20]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 475


 19509 0334 083093E5 		ldr	r3, [r3, #8]
 19510 0338 043083E2 		add	r3, r3, #4
 19511 033c 0010E0E3 		mvn	r1, #0
 19512 0340 0300A0E1 		mov	r0, r3
 19513 0344 FEFFFFEB 		bl	_RME_Fetch_Add_Single
7509:../../Source/Kernel/rme_kernel.c ****     
7510:../../Source/Kernel/rme_kernel.c ****     /* Try to clear the area - this must be successful */
7511:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(_RME_Kot_Erase((rme_ptr_t)Invocation,RME_INV_SIZE)==0);
 19514              		.loc 1 7511 5
 19515 0348 14301BE5 		ldr	r3, [fp, #-20]
 19516 034c 2410A0E3 		mov	r1, #36
 19517 0350 0300A0E1 		mov	r0, r3
 19518 0354 FEFFFFEB 		bl	_RME_Kot_Erase
 19519 0358 0030A0E1 		mov	r3, r0
 19520              		.loc 1 7511 5 is_stmt 0 discriminator 1
 19521 035c 000053E3 		cmp	r3, #0
 19522 0360 0800000A 		beq	.L1282
 19523 0364 003000E3 		movw	r3, #:lower16:.LC6
 19524 0368 003040E3 		movt	r3, #:upper16:.LC6
 19525 036c 002000E3 		movw	r2, #:lower16:.LC7
 19526 0370 002040E3 		movt	r2, #:upper16:.LC7
 19527 0374 571D01E3 		movw	r1, #7511
 19528 0378 000000E3 		movw	r0, #:lower16:.LC8
 19529 037c 000040E3 		movt	r0, #:upper16:.LC8
 19530 0380 FEFFFFEB 		bl	RME_Log
 19531              	.L1283:
 19532              		.loc 1 7511 5
 19533 0384 FEFFFFEA 		b	.L1283
 19534              	.L1282:
7512:../../Source/Kernel/rme_kernel.c ****     
7513:../../Source/Kernel/rme_kernel.c ****     return 0;
 19535              		.loc 1 7513 12 is_stmt 1
 19536 0388 0030A0E3 		mov	r3, #0
 19537              	.L1263:
7514:../../Source/Kernel/rme_kernel.c **** }
 19538              		.loc 1 7514 1
 19539 038c 0300A0E1 		mov	r0, r3
 19540 0390 04D04BE2 		sub	sp, fp, #4
 19541              		.cfi_def_cfa 13, 8
 19542              		@ sp needed
 19543 0394 0088BDE8 		pop	{fp, pc}
 19544              		.cfi_endproc
 19545              	.LFE73:
 19547              		.section	.text._RME_Inv_Set,"ax",%progbits
 19548              		.align	2
 19549              		.syntax unified
 19550              		.arm
 19552              	_RME_Inv_Set:
 19553              	.LFB74:
7515:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Inv_Del *************************************************/
7516:../../Source/Kernel/rme_kernel.c **** 
7517:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Inv_Set ******************************************************
7518:../../Source/Kernel/rme_kernel.c **** Description : Set an invocation stub's entry point and stack. The registers will
7519:../../Source/Kernel/rme_kernel.c ****               be initialized with these contents.
7520:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The capability table.
7521:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Inv - The capability to the invocation stub.
7522:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 476


7523:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Entry - The entry of the thread.
7524:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Stack - The stack address to use for execution.
7525:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Exc_Ret - If there is an exception in this
7526:../../Source/Kernel/rme_kernel.c ****                                      invocation, return immediately, or wait
7527:../../Source/Kernel/rme_kernel.c ****                                      for fault handling?
7528:../../Source/Kernel/rme_kernel.c ****                                      If 1, we return directly on fault.
7529:../../Source/Kernel/rme_kernel.c **** Output      : None.
7530:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
7531:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7532:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Inv_Set(struct RME_Cap_Cpt* Cpt,
7533:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Inv,
7534:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Entry,
7535:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Stack,
7536:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Is_Exc_Ret)
7537:../../Source/Kernel/rme_kernel.c **** {
 19554              		.loc 1 7537 1
 19555              		.cfi_startproc
 19556              		@ args = 4, pretend = 0, frame = 32
 19557              		@ frame_needed = 1, uses_anonymous_args = 0
 19558 0000 00482DE9 		push	{fp, lr}
 19559              		.cfi_def_cfa_offset 8
 19560              		.cfi_offset 11, -8
 19561              		.cfi_offset 14, -4
 19562 0004 04B08DE2 		add	fp, sp, #4
 19563              		.cfi_def_cfa 11, 4
 19564 0008 20D04DE2 		sub	sp, sp, #32
 19565 000c 18000BE5 		str	r0, [fp, #-24]
 19566 0010 1C100BE5 		str	r1, [fp, #-28]
 19567 0014 20200BE5 		str	r2, [fp, #-32]
 19568 0018 24300BE5 		str	r3, [fp, #-36]
7538:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Inv* Inv_Op;
7539:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Inv_Struct* Invocation;
7540:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7541:../../Source/Kernel/rme_kernel.c ****     
7542:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7543:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Inv,RME_CAP_TYPE_INV,
 19569              		.loc 1 7543 5
 19570 001c 1C301BE5 		ldr	r3, [fp, #-28]
 19571 0020 803003E2 		and	r3, r3, #128
 19572 0024 000053E3 		cmp	r3, #0
 19573 0028 1C00001A 		bne	.L1285
 19574              		.loc 1 7543 5 is_stmt 0 discriminator 1
 19575 002c 18301BE5 		ldr	r3, [fp, #-24]
 19576 0030 142093E5 		ldr	r2, [r3, #20]
 19577 0034 1C301BE5 		ldr	r3, [fp, #-28]
 19578 0038 030052E1 		cmp	r2, r3
 19579 003c 0100008A 		bhi	.L1286
 19580              		.loc 1 7543 5 discriminator 3
 19581 0040 0230E0E3 		mvn	r3, #2
 19582              		.loc 1 7543 5
 19583 0044 670000EA 		b	.L1287
 19584              	.L1286:
 19585              		.loc 1 7543 5 discriminator 4
 19586 0048 1C301BE5 		ldr	r3, [fp, #-28]
 19587 004c 8322A0E1 		lsl	r2, r3, #5
 19588 0050 18301BE5 		ldr	r3, [fp, #-24]
 19589 0054 0C3093E5 		ldr	r3, [r3, #12]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 477


 19590 0058 033082E0 		add	r3, r2, r3
 19591 005c 08300BE5 		str	r3, [fp, #-8]
 19592 0060 08301BE5 		ldr	r3, [fp, #-8]
 19593 0064 0300A0E1 		mov	r0, r3
 19594 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19595 006c 0C000BE5 		str	r0, [fp, #-12]
 19596              		.loc 1 7543 5 discriminator 1
 19597 0070 0C301BE5 		ldr	r3, [fp, #-12]
 19598 0074 FF3803E2 		and	r3, r3, #16711680
 19599 0078 020853E3 		cmp	r3, #131072
 19600 007c 0100001A 		bne	.L1288
 19601              		.loc 1 7543 5 discriminator 5
 19602 0080 0830E0E3 		mvn	r3, #8
 19603              		.loc 1 7543 5
 19604 0084 570000EA 		b	.L1287
 19605              	.L1288:
 19606              		.loc 1 7543 5 discriminator 6
 19607 0088 0C301BE5 		ldr	r3, [fp, #-12]
 19608 008c 233CA0E1 		lsr	r3, r3, #24
 19609 0090 070053E3 		cmp	r3, #7
 19610 0094 3F00000A 		beq	.L1289
 19611              		.loc 1 7543 5 discriminator 7
 19612 0098 0130E0E3 		mvn	r3, #1
 19613              		.loc 1 7543 5
 19614 009c 510000EA 		b	.L1287
 19615              	.L1285:
 19616              		.loc 1 7543 5 discriminator 2
 19617 00a0 1C301BE5 		ldr	r3, [fp, #-28]
 19618 00a4 2324A0E1 		lsr	r2, r3, #8
 19619 00a8 18301BE5 		ldr	r3, [fp, #-24]
 19620 00ac 143093E5 		ldr	r3, [r3, #20]
 19621 00b0 030052E1 		cmp	r2, r3
 19622 00b4 0100003A 		bcc	.L1290
 19623              		.loc 1 7543 5 discriminator 8
 19624 00b8 0230E0E3 		mvn	r3, #2
 19625              		.loc 1 7543 5
 19626 00bc 490000EA 		b	.L1287
 19627              	.L1290:
 19628              		.loc 1 7543 5 discriminator 9
 19629 00c0 1C301BE5 		ldr	r3, [fp, #-28]
 19630 00c4 2334A0E1 		lsr	r3, r3, #8
 19631 00c8 8322A0E1 		lsl	r2, r3, #5
 19632 00cc 18301BE5 		ldr	r3, [fp, #-24]
 19633 00d0 0C3093E5 		ldr	r3, [r3, #12]
 19634 00d4 033082E0 		add	r3, r2, r3
 19635 00d8 08300BE5 		str	r3, [fp, #-8]
 19636 00dc 08301BE5 		ldr	r3, [fp, #-8]
 19637 00e0 0300A0E1 		mov	r0, r3
 19638 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19639 00e8 0C000BE5 		str	r0, [fp, #-12]
 19640              		.loc 1 7543 5 discriminator 1
 19641 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 19642 00f0 FF3803E2 		and	r3, r3, #16711680
 19643 00f4 020853E3 		cmp	r3, #131072
 19644 00f8 0100001A 		bne	.L1291
 19645              		.loc 1 7543 5 discriminator 10
 19646 00fc 0830E0E3 		mvn	r3, #8
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 478


 19647              		.loc 1 7543 5
 19648 0100 380000EA 		b	.L1287
 19649              	.L1291:
 19650              		.loc 1 7543 5 discriminator 11
 19651 0104 0C301BE5 		ldr	r3, [fp, #-12]
 19652 0108 233CA0E1 		lsr	r3, r3, #24
 19653 010c 030053E3 		cmp	r3, #3
 19654 0110 0100000A 		beq	.L1292
 19655              		.loc 1 7543 5 discriminator 12
 19656 0114 0130E0E3 		mvn	r3, #1
 19657              		.loc 1 7543 5
 19658 0118 320000EA 		b	.L1287
 19659              	.L1292:
 19660              		.loc 1 7543 5 discriminator 13
 19661 011c 1C301BE5 		ldr	r3, [fp, #-28]
 19662 0120 7F2003E2 		and	r2, r3, #127
 19663 0124 08301BE5 		ldr	r3, [fp, #-8]
 19664 0128 143093E5 		ldr	r3, [r3, #20]
 19665 012c 030052E1 		cmp	r2, r3
 19666 0130 0100003A 		bcc	.L1293
 19667              		.loc 1 7543 5 discriminator 14
 19668 0134 0230E0E3 		mvn	r3, #2
 19669              		.loc 1 7543 5
 19670 0138 2A0000EA 		b	.L1287
 19671              	.L1293:
 19672              		.loc 1 7543 5 discriminator 15
 19673 013c 1C301BE5 		ldr	r3, [fp, #-28]
 19674 0140 7F3003E2 		and	r3, r3, #127
 19675 0144 8322A0E1 		lsl	r2, r3, #5
 19676 0148 08301BE5 		ldr	r3, [fp, #-8]
 19677 014c 0C3093E5 		ldr	r3, [r3, #12]
 19678 0150 033082E0 		add	r3, r2, r3
 19679 0154 08300BE5 		str	r3, [fp, #-8]
 19680 0158 08301BE5 		ldr	r3, [fp, #-8]
 19681 015c 0300A0E1 		mov	r0, r3
 19682 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19683 0164 0C000BE5 		str	r0, [fp, #-12]
 19684              		.loc 1 7543 5 discriminator 1
 19685 0168 0C301BE5 		ldr	r3, [fp, #-12]
 19686 016c FF3803E2 		and	r3, r3, #16711680
 19687 0170 020853E3 		cmp	r3, #131072
 19688 0174 0100001A 		bne	.L1294
 19689              		.loc 1 7543 5 discriminator 16
 19690 0178 0830E0E3 		mvn	r3, #8
 19691              		.loc 1 7543 5
 19692 017c 190000EA 		b	.L1287
 19693              	.L1294:
 19694              		.loc 1 7543 5 discriminator 17
 19695 0180 0C301BE5 		ldr	r3, [fp, #-12]
 19696 0184 233CA0E1 		lsr	r3, r3, #24
 19697 0188 070053E3 		cmp	r3, #7
 19698 018c 0100000A 		beq	.L1289
 19699              		.loc 1 7543 5 discriminator 18
 19700 0190 0130E0E3 		mvn	r3, #1
 19701              		.loc 1 7543 5
 19702 0194 130000EA 		b	.L1287
 19703              	.L1289:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 479


7544:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Inv*,Inv_Op,Type_Stat);
7545:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
7546:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Inv_Op,RME_INV_FLAG_SET);
 19704              		.loc 1 7546 5 is_stmt 1
 19705 0198 08301BE5 		ldr	r3, [fp, #-8]
 19706 019c 083093E5 		ldr	r3, [r3, #8]
 19707 01a0 013003E2 		and	r3, r3, #1
 19708 01a4 000053E3 		cmp	r3, #0
 19709 01a8 0100001A 		bne	.L1295
 19710              		.loc 1 7546 5 is_stmt 0 discriminator 1
 19711 01ac 0630E0E3 		mvn	r3, #6
 19712              		.loc 1 7546 5
 19713 01b0 0C0000EA 		b	.L1287
 19714              	.L1295:
7547:../../Source/Kernel/rme_kernel.c ****     
7548:../../Source/Kernel/rme_kernel.c ****     /* Commit the change - we do not care if the invocation is in use, it is
7549:../../Source/Kernel/rme_kernel.c ****      * the user's responsibility to guarantee the integrity of applications */
7550:../../Source/Kernel/rme_kernel.c ****     Invocation=RME_CAP_GETOBJ(Inv_Op,struct RME_Inv_Struct*);
 19715              		.loc 1 7550 16 is_stmt 1
 19716 01b4 08301BE5 		ldr	r3, [fp, #-8]
 19717 01b8 0C3093E5 		ldr	r3, [r3, #12]
 19718              		.loc 1 7550 15
 19719 01bc 10300BE5 		str	r3, [fp, #-16]
7551:../../Source/Kernel/rme_kernel.c ****     Invocation->Entry=Entry;
 19720              		.loc 1 7551 22
 19721 01c0 10301BE5 		ldr	r3, [fp, #-16]
 19722 01c4 20201BE5 		ldr	r2, [fp, #-32]
 19723 01c8 102083E5 		str	r2, [r3, #16]
7552:../../Source/Kernel/rme_kernel.c ****     Invocation->Stack=Stack;
 19724              		.loc 1 7552 22
 19725 01cc 10301BE5 		ldr	r3, [fp, #-16]
 19726 01d0 24201BE5 		ldr	r2, [fp, #-36]
 19727 01d4 142083E5 		str	r2, [r3, #20]
7553:../../Source/Kernel/rme_kernel.c ****     Invocation->Is_Exc_Ret=Is_Exc_Ret;
 19728              		.loc 1 7553 27
 19729 01d8 10301BE5 		ldr	r3, [fp, #-16]
 19730 01dc 04209BE5 		ldr	r2, [fp, #4]
 19731 01e0 182083E5 		str	r2, [r3, #24]
7554:../../Source/Kernel/rme_kernel.c ****     
7555:../../Source/Kernel/rme_kernel.c ****     return 0;
 19732              		.loc 1 7555 12
 19733 01e4 0030A0E3 		mov	r3, #0
 19734              	.L1287:
7556:../../Source/Kernel/rme_kernel.c **** }
 19735              		.loc 1 7556 1
 19736 01e8 0300A0E1 		mov	r0, r3
 19737 01ec 04D04BE2 		sub	sp, fp, #4
 19738              		.cfi_def_cfa 13, 8
 19739              		@ sp needed
 19740 01f0 0088BDE8 		pop	{fp, pc}
 19741              		.cfi_endproc
 19742              	.LFE74:
 19744              		.section	.text._RME_Inv_Act,"ax",%progbits
 19745              		.align	2
 19746              		.syntax unified
 19747              		.arm
 19749              	_RME_Inv_Act:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 480


 19750              	.LFB75:
7557:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Inv_Set *************************************************/
7558:../../Source/Kernel/rme_kernel.c **** 
7559:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Inv_Act ******************************************************
7560:../../Source/Kernel/rme_kernel.c **** Description : Call the invocation stub. One parameter is guaranteed; however, 
7561:../../Source/Kernel/rme_kernel.c ****               some platforms may provide more than that.
7562:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The capability table.
7563:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
7564:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Inv - The invocation stub.
7565:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7566:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Param - The parameter for the call.
7567:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
7568:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7569:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Inv_Act(struct RME_Cap_Cpt* Cpt, 
7570:../../Source/Kernel/rme_kernel.c ****                               struct RME_Reg_Struct* Reg,
7571:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Inv,
7572:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Param)
7573:../../Source/Kernel/rme_kernel.c **** {
 19751              		.loc 1 7573 1
 19752              		.cfi_startproc
 19753              		@ args = 0, pretend = 0, frame = 40
 19754              		@ frame_needed = 1, uses_anonymous_args = 0
 19755 0000 00482DE9 		push	{fp, lr}
 19756              		.cfi_def_cfa_offset 8
 19757              		.cfi_offset 11, -8
 19758              		.cfi_offset 14, -4
 19759 0004 04B08DE2 		add	fp, sp, #4
 19760              		.cfi_def_cfa 11, 4
 19761 0008 30D04DE2 		sub	sp, sp, #48
 19762 000c 20000BE5 		str	r0, [fp, #-32]
 19763 0010 24100BE5 		str	r1, [fp, #-36]
 19764 0014 28200BE5 		str	r2, [fp, #-40]
 19765 0018 2C300BE5 		str	r3, [fp, #-44]
7574:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Inv* Inv_Op;
7575:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Invocation;
7576:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Cur;
7577:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thd_Act;
7578:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7579:../../Source/Kernel/rme_kernel.c ****     
7580:../../Source/Kernel/rme_kernel.c **** #if(RME_CPT_ENTRY_MAX!=0U)
7581:../../Source/Kernel/rme_kernel.c ****     /* Check if the current invocation stack has reached its limit */
7582:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=RME_CPU_LOCAL()->Thd_Cur;
7583:../../Source/Kernel/rme_kernel.c ****     if(Thd_Cur->Ctx.Invstk_Depth>=RME_INV_DEPTH_MAX)
7584:../../Source/Kernel/rme_kernel.c ****     {
7585:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7586:../../Source/Kernel/rme_kernel.c **** 
7587:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
7588:../../Source/Kernel/rme_kernel.c ****     }
7589:../../Source/Kernel/rme_kernel.c ****     else
7590:../../Source/Kernel/rme_kernel.c ****     {
7591:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7592:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7593:../../Source/Kernel/rme_kernel.c ****     }
7594:../../Source/Kernel/rme_kernel.c **** #endif
7595:../../Source/Kernel/rme_kernel.c **** 
7596:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7597:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Inv,RME_CAP_TYPE_INV,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 481


 19766              		.loc 1 7597 5
 19767 001c 28301BE5 		ldr	r3, [fp, #-40]
 19768 0020 803003E2 		and	r3, r3, #128
 19769 0024 000053E3 		cmp	r3, #0
 19770 0028 1C00001A 		bne	.L1297
 19771              		.loc 1 7597 5 is_stmt 0 discriminator 1
 19772 002c 20301BE5 		ldr	r3, [fp, #-32]
 19773 0030 142093E5 		ldr	r2, [r3, #20]
 19774 0034 28301BE5 		ldr	r3, [fp, #-40]
 19775 0038 030052E1 		cmp	r2, r3
 19776 003c 0100008A 		bhi	.L1298
 19777              		.loc 1 7597 5 discriminator 3
 19778 0040 0230E0E3 		mvn	r3, #2
 19779              		.loc 1 7597 5
 19780 0044 A60000EA 		b	.L1299
 19781              	.L1298:
 19782              		.loc 1 7597 5 discriminator 4
 19783 0048 28301BE5 		ldr	r3, [fp, #-40]
 19784 004c 8322A0E1 		lsl	r2, r3, #5
 19785 0050 20301BE5 		ldr	r3, [fp, #-32]
 19786 0054 0C3093E5 		ldr	r3, [r3, #12]
 19787 0058 033082E0 		add	r3, r2, r3
 19788 005c 08300BE5 		str	r3, [fp, #-8]
 19789 0060 08301BE5 		ldr	r3, [fp, #-8]
 19790 0064 0300A0E1 		mov	r0, r3
 19791 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19792 006c 0C000BE5 		str	r0, [fp, #-12]
 19793              		.loc 1 7597 5 discriminator 1
 19794 0070 0C301BE5 		ldr	r3, [fp, #-12]
 19795 0074 FF3803E2 		and	r3, r3, #16711680
 19796 0078 020853E3 		cmp	r3, #131072
 19797 007c 0100001A 		bne	.L1300
 19798              		.loc 1 7597 5 discriminator 5
 19799 0080 0830E0E3 		mvn	r3, #8
 19800              		.loc 1 7597 5
 19801 0084 960000EA 		b	.L1299
 19802              	.L1300:
 19803              		.loc 1 7597 5 discriminator 6
 19804 0088 0C301BE5 		ldr	r3, [fp, #-12]
 19805 008c 233CA0E1 		lsr	r3, r3, #24
 19806 0090 070053E3 		cmp	r3, #7
 19807 0094 3F00000A 		beq	.L1301
 19808              		.loc 1 7597 5 discriminator 7
 19809 0098 0130E0E3 		mvn	r3, #1
 19810              		.loc 1 7597 5
 19811 009c 900000EA 		b	.L1299
 19812              	.L1297:
 19813              		.loc 1 7597 5 discriminator 2
 19814 00a0 28301BE5 		ldr	r3, [fp, #-40]
 19815 00a4 2324A0E1 		lsr	r2, r3, #8
 19816 00a8 20301BE5 		ldr	r3, [fp, #-32]
 19817 00ac 143093E5 		ldr	r3, [r3, #20]
 19818 00b0 030052E1 		cmp	r2, r3
 19819 00b4 0100003A 		bcc	.L1302
 19820              		.loc 1 7597 5 discriminator 8
 19821 00b8 0230E0E3 		mvn	r3, #2
 19822              		.loc 1 7597 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 482


 19823 00bc 880000EA 		b	.L1299
 19824              	.L1302:
 19825              		.loc 1 7597 5 discriminator 9
 19826 00c0 28301BE5 		ldr	r3, [fp, #-40]
 19827 00c4 2334A0E1 		lsr	r3, r3, #8
 19828 00c8 8322A0E1 		lsl	r2, r3, #5
 19829 00cc 20301BE5 		ldr	r3, [fp, #-32]
 19830 00d0 0C3093E5 		ldr	r3, [r3, #12]
 19831 00d4 033082E0 		add	r3, r2, r3
 19832 00d8 08300BE5 		str	r3, [fp, #-8]
 19833 00dc 08301BE5 		ldr	r3, [fp, #-8]
 19834 00e0 0300A0E1 		mov	r0, r3
 19835 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 19836 00e8 0C000BE5 		str	r0, [fp, #-12]
 19837              		.loc 1 7597 5 discriminator 1
 19838 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 19839 00f0 FF3803E2 		and	r3, r3, #16711680
 19840 00f4 020853E3 		cmp	r3, #131072
 19841 00f8 0100001A 		bne	.L1303
 19842              		.loc 1 7597 5 discriminator 10
 19843 00fc 0830E0E3 		mvn	r3, #8
 19844              		.loc 1 7597 5
 19845 0100 770000EA 		b	.L1299
 19846              	.L1303:
 19847              		.loc 1 7597 5 discriminator 11
 19848 0104 0C301BE5 		ldr	r3, [fp, #-12]
 19849 0108 233CA0E1 		lsr	r3, r3, #24
 19850 010c 030053E3 		cmp	r3, #3
 19851 0110 0100000A 		beq	.L1304
 19852              		.loc 1 7597 5 discriminator 12
 19853 0114 0130E0E3 		mvn	r3, #1
 19854              		.loc 1 7597 5
 19855 0118 710000EA 		b	.L1299
 19856              	.L1304:
 19857              		.loc 1 7597 5 discriminator 13
 19858 011c 28301BE5 		ldr	r3, [fp, #-40]
 19859 0120 7F2003E2 		and	r2, r3, #127
 19860 0124 08301BE5 		ldr	r3, [fp, #-8]
 19861 0128 143093E5 		ldr	r3, [r3, #20]
 19862 012c 030052E1 		cmp	r2, r3
 19863 0130 0100003A 		bcc	.L1305
 19864              		.loc 1 7597 5 discriminator 14
 19865 0134 0230E0E3 		mvn	r3, #2
 19866              		.loc 1 7597 5
 19867 0138 690000EA 		b	.L1299
 19868              	.L1305:
 19869              		.loc 1 7597 5 discriminator 15
 19870 013c 28301BE5 		ldr	r3, [fp, #-40]
 19871 0140 7F3003E2 		and	r3, r3, #127
 19872 0144 8322A0E1 		lsl	r2, r3, #5
 19873 0148 08301BE5 		ldr	r3, [fp, #-8]
 19874 014c 0C3093E5 		ldr	r3, [r3, #12]
 19875 0150 033082E0 		add	r3, r2, r3
 19876 0154 08300BE5 		str	r3, [fp, #-8]
 19877 0158 08301BE5 		ldr	r3, [fp, #-8]
 19878 015c 0300A0E1 		mov	r0, r3
 19879 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 483


 19880 0164 0C000BE5 		str	r0, [fp, #-12]
 19881              		.loc 1 7597 5 discriminator 1
 19882 0168 0C301BE5 		ldr	r3, [fp, #-12]
 19883 016c FF3803E2 		and	r3, r3, #16711680
 19884 0170 020853E3 		cmp	r3, #131072
 19885 0174 0100001A 		bne	.L1306
 19886              		.loc 1 7597 5 discriminator 16
 19887 0178 0830E0E3 		mvn	r3, #8
 19888              		.loc 1 7597 5
 19889 017c 580000EA 		b	.L1299
 19890              	.L1306:
 19891              		.loc 1 7597 5 discriminator 17
 19892 0180 0C301BE5 		ldr	r3, [fp, #-12]
 19893 0184 233CA0E1 		lsr	r3, r3, #24
 19894 0188 070053E3 		cmp	r3, #7
 19895 018c 0100000A 		beq	.L1301
 19896              		.loc 1 7597 5 discriminator 18
 19897 0190 0130E0E3 		mvn	r3, #1
 19898              		.loc 1 7597 5
 19899 0194 520000EA 		b	.L1299
 19900              	.L1301:
7598:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Inv*,Inv_Op,Type_Stat);
7599:../../Source/Kernel/rme_kernel.c ****     /* Check if the target cap is not frozen and allows such operations */
7600:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Inv_Op,RME_INV_FLAG_ACT);
 19901              		.loc 1 7600 5 is_stmt 1
 19902 0198 08301BE5 		ldr	r3, [fp, #-8]
 19903 019c 083093E5 		ldr	r3, [r3, #8]
 19904 01a0 023003E2 		and	r3, r3, #2
 19905 01a4 000053E3 		cmp	r3, #0
 19906 01a8 0100001A 		bne	.L1307
 19907              		.loc 1 7600 5 is_stmt 0 discriminator 1
 19908 01ac 0630E0E3 		mvn	r3, #6
 19909              		.loc 1 7600 5
 19910 01b0 4B0000EA 		b	.L1299
 19911              	.L1307:
7601:../../Source/Kernel/rme_kernel.c **** 
7602:../../Source/Kernel/rme_kernel.c ****     /* Get the invocation struct */
7603:../../Source/Kernel/rme_kernel.c ****     Invocation=RME_CAP_GETOBJ(Inv_Op,struct RME_Inv_Struct*);
 19912              		.loc 1 7603 16 is_stmt 1
 19913 01b4 08301BE5 		ldr	r3, [fp, #-8]
 19914 01b8 0C3093E5 		ldr	r3, [r3, #12]
 19915              		.loc 1 7603 15
 19916 01bc 10300BE5 		str	r3, [fp, #-16]
7604:../../Source/Kernel/rme_kernel.c ****     /* Check if this invocation port is already active */
7605:../../Source/Kernel/rme_kernel.c ****     Thd_Act=Invocation->Thd_Act;
 19917              		.loc 1 7605 12
 19918 01c0 10301BE5 		ldr	r3, [fp, #-16]
 19919 01c4 0C3093E5 		ldr	r3, [r3, #12]
 19920 01c8 14300BE5 		str	r3, [fp, #-20]
7606:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY(Thd_Act!=0U))
 19921              		.loc 1 7606 7
 19922 01cc 14301BE5 		ldr	r3, [fp, #-20]
 19923 01d0 000053E3 		cmp	r3, #0
 19924 01d4 0100000A 		beq	.L1308
7607:../../Source/Kernel/rme_kernel.c ****     {
7608:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7609:../../Source/Kernel/rme_kernel.c **** 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 484


7610:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
 19925              		.loc 1 7610 16
 19926 01d8 4B3FE0E3 		mvn	r3, #300
 19927 01dc 400000EA 		b	.L1299
 19928              	.L1308:
7611:../../Source/Kernel/rme_kernel.c ****     }
7612:../../Source/Kernel/rme_kernel.c ****     else
7613:../../Source/Kernel/rme_kernel.c ****     {
7614:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7615:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7616:../../Source/Kernel/rme_kernel.c ****     }
7617:../../Source/Kernel/rme_kernel.c **** 
7618:../../Source/Kernel/rme_kernel.c **** #if(RME_CPT_ENTRY_MAX==0U)
7619:../../Source/Kernel/rme_kernel.c ****     Thd_Cur=RME_CPU_LOCAL()->Thd_Cur;
 19929              		.loc 1 7619 12
 19930 01e0 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 19931 01e4 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 19932 01e8 043093E5 		ldr	r3, [r3, #4]
 19933 01ec 18300BE5 		str	r3, [fp, #-24]
7620:../../Source/Kernel/rme_kernel.c **** #endif
7621:../../Source/Kernel/rme_kernel.c ****     
7622:../../Source/Kernel/rme_kernel.c ****     /* Try to do CAS and activate this port */
7623:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY(RME_COMP_SWAP((volatile rme_ptr_t*)&(Invocation->Thd_Act),
 19934              		.loc 1 7623 8
 19935 01f0 10301BE5 		ldr	r3, [fp, #-16]
 19936 01f4 0C3083E2 		add	r3, r3, #12
 19937 01f8 14101BE5 		ldr	r1, [fp, #-20]
 19938 01fc 18201BE5 		ldr	r2, [fp, #-24]
 19939 0200 0300A0E1 		mov	r0, r3
 19940 0204 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 19941 0208 0030A0E1 		mov	r3, r0
 19942              		.loc 1 7623 7 discriminator 1
 19943 020c 000053E3 		cmp	r3, #0
 19944 0210 0100001A 		bne	.L1309
7624:../../Source/Kernel/rme_kernel.c ****                                   (rme_ptr_t)Thd_Act,
7625:../../Source/Kernel/rme_kernel.c ****                                   (rme_ptr_t)Thd_Cur)==RME_CASFAIL))
7626:../../Source/Kernel/rme_kernel.c ****     {
7627:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7628:../../Source/Kernel/rme_kernel.c **** 
7629:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_ACT;
 19945              		.loc 1 7629 16
 19946 0214 4B3FE0E3 		mvn	r3, #300
 19947 0218 310000EA 		b	.L1299
 19948              	.L1309:
7630:../../Source/Kernel/rme_kernel.c ****     }
7631:../../Source/Kernel/rme_kernel.c ****     else
7632:../../Source/Kernel/rme_kernel.c ****     {
7633:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7634:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7635:../../Source/Kernel/rme_kernel.c ****     }
7636:../../Source/Kernel/rme_kernel.c **** 
7637:../../Source/Kernel/rme_kernel.c ****     /* Save whatever is needed to return to the point - normally only SP and IP needed
7638:../../Source/Kernel/rme_kernel.c ****      * because all other registers, including the coprocessor registers, are saved at
7639:../../Source/Kernel/rme_kernel.c ****      * user-level. We do not set the return value because it will be set by Inv_Ret.
7640:../../Source/Kernel/rme_kernel.c ****      * The coprocessor state will be consistent across the call */
7641:../../Source/Kernel/rme_kernel.c ****     __RME_Inv_Reg_Save(&(Invocation->Ret),Reg);
 19949              		.loc 1 7641 5
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 485


 19950 021c 10301BE5 		ldr	r3, [fp, #-16]
 19951 0220 1C3083E2 		add	r3, r3, #28
 19952 0224 24101BE5 		ldr	r1, [fp, #-36]
 19953 0228 0300A0E1 		mov	r0, r3
 19954 022c FEFFFFEB 		bl	__RME_Inv_Reg_Save
7642:../../Source/Kernel/rme_kernel.c ****     /* Push this into the stack: insert after the thread list header */
7643:../../Source/Kernel/rme_kernel.c ****     _RME_List_Ins(&(Invocation->Head),
 19955              		.loc 1 7643 5
 19956 0230 10001BE5 		ldr	r0, [fp, #-16]
 19957 0234 18301BE5 		ldr	r3, [fp, #-24]
 19958 0238 4C1083E2 		add	r1, r3, #76
 19959 023c 18301BE5 		ldr	r3, [fp, #-24]
 19960 0240 4C3093E5 		ldr	r3, [r3, #76]
 19961 0244 0320A0E1 		mov	r2, r3
 19962 0248 FEFFFFEB 		bl	_RME_List_Ins
7644:../../Source/Kernel/rme_kernel.c ****                   &(Thd_Cur->Ctx.Invstk),
7645:../../Source/Kernel/rme_kernel.c ****                   Thd_Cur->Ctx.Invstk.Next);
7646:../../Source/Kernel/rme_kernel.c ****     /* Increase invocation depth - no atomic operation needed */
7647:../../Source/Kernel/rme_kernel.c ****     Thd_Cur->Ctx.Invstk_Depth++;
 19963              		.loc 1 7647 17
 19964 024c 18301BE5 		ldr	r3, [fp, #-24]
 19965 0250 543093E5 		ldr	r3, [r3, #84]
 19966              		.loc 1 7647 30
 19967 0254 012083E2 		add	r2, r3, #1
 19968 0258 18301BE5 		ldr	r3, [fp, #-24]
 19969 025c 542083E5 		str	r2, [r3, #84]
7648:../../Source/Kernel/rme_kernel.c ****     /* Setup the register contents, and do the invocation */
7649:../../Source/Kernel/rme_kernel.c ****     __RME_Thd_Reg_Init(RME_THD_ATTR(Thd_Cur->Ctx.Hyp_Attr),
 19970              		.loc 1 7649 24
 19971 0260 18301BE5 		ldr	r3, [fp, #-24]
 19972 0264 443093E5 		ldr	r3, [r3, #68]
 19973              		.loc 1 7649 5
 19974 0268 0201C3E3 		bic	r0, r3, #-2147483648
 19975 026c 10301BE5 		ldr	r3, [fp, #-16]
 19976 0270 101093E5 		ldr	r1, [r3, #16]
 19977 0274 10301BE5 		ldr	r3, [fp, #-16]
 19978 0278 142093E5 		ldr	r2, [r3, #20]
 19979 027c 24301BE5 		ldr	r3, [fp, #-36]
 19980 0280 00308DE5 		str	r3, [sp]
 19981 0284 2C301BE5 		ldr	r3, [fp, #-44]
 19982 0288 FEFFFFEB 		bl	__RME_Thd_Reg_Init
7650:../../Source/Kernel/rme_kernel.c ****                        Invocation->Entry,
7651:../../Source/Kernel/rme_kernel.c ****                        Invocation->Stack,
7652:../../Source/Kernel/rme_kernel.c ****                        Param,Reg);
7653:../../Source/Kernel/rme_kernel.c ****     
7654:../../Source/Kernel/rme_kernel.c ****     
7655:../../Source/Kernel/rme_kernel.c ****     /* We are assuming that we are always invoking into a new process (why use synchronous
7656:../../Source/Kernel/rme_kernel.c ****      * invocation if you don't do so?). So we always switch page tables regardless. */
7657:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
7658:../../Source/Kernel/rme_kernel.c ****     RME_ASSERT(RME_CAP_IS_ROOT(Invocation->Prc->Pgt)!=0U);
 19983              		.loc 1 7658 5
 19984 028c 10301BE5 		ldr	r3, [fp, #-16]
 19985 0290 083093E5 		ldr	r3, [r3, #8]
 19986 0294 183093E5 		ldr	r3, [r3, #24]
 19987 0298 003093E5 		ldr	r3, [r3]
 19988 029c 7330FFE6 		uxth	r3, r3
 19989 02a0 000053E3 		cmp	r3, #0
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 486


 19990 02a4 0800000A 		beq	.L1310
 19991              		.loc 1 7658 5 is_stmt 0 discriminator 1
 19992 02a8 003000E3 		movw	r3, #:lower16:.LC6
 19993 02ac 003040E3 		movt	r3, #:upper16:.LC6
 19994 02b0 002000E3 		movw	r2, #:lower16:.LC7
 19995 02b4 002040E3 		movt	r2, #:upper16:.LC7
 19996 02b8 EA1D01E3 		movw	r1, #7658
 19997 02bc 000000E3 		movw	r0, #:lower16:.LC8
 19998 02c0 000040E3 		movt	r0, #:upper16:.LC8
 19999 02c4 FEFFFFEB 		bl	RME_Log
 20000              	.L1311:
 20001              		.loc 1 7658 5
 20002 02c8 FEFFFFEA 		b	.L1311
 20003              	.L1310:
7659:../../Source/Kernel/rme_kernel.c **** #endif
7660:../../Source/Kernel/rme_kernel.c ****     __RME_Pgt_Set(Invocation->Prc->Pgt);
 20004              		.loc 1 7660 29 is_stmt 1
 20005 02cc 10301BE5 		ldr	r3, [fp, #-16]
 20006 02d0 083093E5 		ldr	r3, [r3, #8]
 20007              		.loc 1 7660 5
 20008 02d4 183093E5 		ldr	r3, [r3, #24]
 20009 02d8 0300A0E1 		mov	r0, r3
 20010 02dc FEFFFFEB 		bl	__RME_Pgt_Set
7661:../../Source/Kernel/rme_kernel.c ****     
7662:../../Source/Kernel/rme_kernel.c ****     return 0;
 20011              		.loc 1 7662 12
 20012 02e0 0030A0E3 		mov	r3, #0
 20013              	.L1299:
7663:../../Source/Kernel/rme_kernel.c **** }
 20014              		.loc 1 7663 1
 20015 02e4 0300A0E1 		mov	r0, r3
 20016 02e8 04D04BE2 		sub	sp, fp, #4
 20017              		.cfi_def_cfa 13, 8
 20018              		@ sp needed
 20019 02ec 0088BDE8 		pop	{fp, pc}
 20020              		.cfi_endproc
 20021              	.LFE75:
 20023              		.section	.text._RME_Inv_Ret,"ax",%progbits
 20024              		.align	2
 20025              		.syntax unified
 20026              		.arm
 20028              	_RME_Inv_Ret:
 20029              	.LFB76:
7664:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Inv_Act *************************************************/
7665:../../Source/Kernel/rme_kernel.c **** 
7666:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Inv_Ret ******************************************************
7667:../../Source/Kernel/rme_kernel.c **** Description : Return from the invocation function, and set the return value to
7668:../../Source/Kernel/rme_kernel.c ****               the old register set. This function does not need a capability
7669:../../Source/Kernel/rme_kernel.c ****               table to work.
7670:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Reg_Struct* Reg - The register set.
7671:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Retval - The return value of this synchronous invocation.
7672:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Is_Exc - Are we attempting a return from exception?
7673:../../Source/Kernel/rme_kernel.c **** Output      : None.
7674:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or an error code.
7675:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7676:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Inv_Ret(struct RME_Reg_Struct* Reg,
7677:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Retval,
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 487


7678:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Is_Exc)
7679:../../Source/Kernel/rme_kernel.c **** {
 20030              		.loc 1 7679 1
 20031              		.cfi_startproc
 20032              		@ args = 0, pretend = 0, frame = 24
 20033              		@ frame_needed = 1, uses_anonymous_args = 0
 20034 0000 00482DE9 		push	{fp, lr}
 20035              		.cfi_def_cfa_offset 8
 20036              		.cfi_offset 11, -8
 20037              		.cfi_offset 14, -4
 20038 0004 04B08DE2 		add	fp, sp, #4
 20039              		.cfi_def_cfa 11, 4
 20040 0008 18D04DE2 		sub	sp, sp, #24
 20041 000c 10000BE5 		str	r0, [fp, #-16]
 20042 0010 14100BE5 		str	r1, [fp, #-20]
 20043 0014 18200BE5 		str	r2, [fp, #-24]
7680:../../Source/Kernel/rme_kernel.c ****     struct RME_Thd_Struct* Thread;
7681:../../Source/Kernel/rme_kernel.c ****     struct RME_Inv_Struct* Invocation;
7682:../../Source/Kernel/rme_kernel.c **** 
7683:../../Source/Kernel/rme_kernel.c ****     /* See if we can return; If we can, get the structure */
7684:../../Source/Kernel/rme_kernel.c ****     Thread=RME_CPU_LOCAL()->Thd_Cur;
 20044              		.loc 1 7684 11
 20045 0018 003000E3 		movw	r3, #:lower16:RME_A7A_Local
 20046 001c 003040E3 		movt	r3, #:upper16:RME_A7A_Local
 20047 0020 043093E5 		ldr	r3, [r3, #4]
 20048 0024 08300BE5 		str	r3, [fp, #-8]
7685:../../Source/Kernel/rme_kernel.c ****     Invocation=RME_INVSTK_TOP(Thread);
 20049              		.loc 1 7685 16
 20050 0028 08301BE5 		ldr	r3, [fp, #-8]
 20051 002c 4C2093E5 		ldr	r2, [r3, #76]
 20052 0030 08301BE5 		ldr	r3, [fp, #-8]
 20053 0034 4C3083E2 		add	r3, r3, #76
 20054 0038 030052E1 		cmp	r2, r3
 20055 003c 0200000A 		beq	.L1313
 20056              		.loc 1 7685 16 is_stmt 0 discriminator 1
 20057 0040 08301BE5 		ldr	r3, [fp, #-8]
 20058 0044 4C3093E5 		ldr	r3, [r3, #76]
 20059 0048 000000EA 		b	.L1314
 20060              	.L1313:
 20061              		.loc 1 7685 16 discriminator 2
 20062 004c 0030A0E3 		mov	r3, #0
 20063              	.L1314:
 20064              		.loc 1 7685 15 is_stmt 1 discriminator 4
 20065 0050 0C300BE5 		str	r3, [fp, #-12]
7686:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY(Invocation==RME_NULL))
 20066              		.loc 1 7686 7
 20067 0054 0C301BE5 		ldr	r3, [fp, #-12]
 20068 0058 000053E3 		cmp	r3, #0
 20069 005c 0200001A 		bne	.L1315
7687:../../Source/Kernel/rme_kernel.c ****     {
7688:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7689:../../Source/Kernel/rme_kernel.c **** 
7690:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_EMPTY;
 20070              		.loc 1 7690 16
 20071 0060 D03E0FE3 		movw	r3, #65232
 20072 0064 FF3F4FE3 		movt	r3, 65535
 20073 0068 680000EA 		b	.L1316
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 488


 20074              	.L1315:
7691:../../Source/Kernel/rme_kernel.c ****     }
7692:../../Source/Kernel/rme_kernel.c ****     else
7693:../../Source/Kernel/rme_kernel.c ****     {
7694:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7695:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7696:../../Source/Kernel/rme_kernel.c ****     }
7697:../../Source/Kernel/rme_kernel.c **** 
7698:../../Source/Kernel/rme_kernel.c ****     /* See if this port allows return-on-fault */
7699:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY((Is_Exc!=0U)&&(Invocation->Is_Exc_Ret==0U)))
 20075              		.loc 1 7699 7
 20076 006c 18301BE5 		ldr	r3, [fp, #-24]
 20077 0070 000053E3 		cmp	r3, #0
 20078 0074 0600000A 		beq	.L1317
 20079              		.loc 1 7699 8 discriminator 1
 20080 0078 0C301BE5 		ldr	r3, [fp, #-12]
 20081 007c 183093E5 		ldr	r3, [r3, #24]
 20082 0080 000053E3 		cmp	r3, #0
 20083 0084 0200001A 		bne	.L1317
7700:../../Source/Kernel/rme_kernel.c ****     {
7701:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7702:../../Source/Kernel/rme_kernel.c **** 
7703:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_SIV_FAULT;
 20084              		.loc 1 7703 16
 20085 0088 D23E0FE3 		movw	r3, #65234
 20086 008c FF3F4FE3 		movt	r3, 65535
 20087 0090 5E0000EA 		b	.L1316
 20088              	.L1317:
7704:../../Source/Kernel/rme_kernel.c ****     }
7705:../../Source/Kernel/rme_kernel.c ****     else
7706:../../Source/Kernel/rme_kernel.c ****     {
7707:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7708:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7709:../../Source/Kernel/rme_kernel.c ****     }
7710:../../Source/Kernel/rme_kernel.c **** 
7711:../../Source/Kernel/rme_kernel.c ****     /* Pop it from the stack */
7712:../../Source/Kernel/rme_kernel.c ****     _RME_List_Del(Invocation->Head.Prev,Invocation->Head.Next);
 20089              		.loc 1 7712 5
 20090 0094 0C301BE5 		ldr	r3, [fp, #-12]
 20091 0098 042093E5 		ldr	r2, [r3, #4]
 20092 009c 0C301BE5 		ldr	r3, [fp, #-12]
 20093 00a0 003093E5 		ldr	r3, [r3]
 20094 00a4 0310A0E1 		mov	r1, r3
 20095 00a8 0200A0E1 		mov	r0, r2
 20096 00ac FEFFFFEB 		bl	_RME_List_Del
7713:../../Source/Kernel/rme_kernel.c ****     /* Decrease invocation depth - no atomic operation needed */
7714:../../Source/Kernel/rme_kernel.c ****     Thread->Ctx.Invstk_Depth--;
 20097              		.loc 1 7714 16
 20098 00b0 08301BE5 		ldr	r3, [fp, #-8]
 20099 00b4 543093E5 		ldr	r3, [r3, #84]
 20100              		.loc 1 7714 29
 20101 00b8 012043E2 		sub	r2, r3, #1
 20102 00bc 08301BE5 		ldr	r3, [fp, #-8]
 20103 00c0 542083E5 		str	r2, [r3, #84]
7715:../../Source/Kernel/rme_kernel.c **** 
7716:../../Source/Kernel/rme_kernel.c ****     /* Restore the register contents, and set return value. We need to set
7717:../../Source/Kernel/rme_kernel.c ****      * the return value of the invocation system call itself as well. */
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 489


7718:../../Source/Kernel/rme_kernel.c ****     __RME_Inv_Reg_Restore(Reg,&(Invocation->Ret));
 20104              		.loc 1 7718 5
 20105 00c4 0C301BE5 		ldr	r3, [fp, #-12]
 20106 00c8 1C3083E2 		add	r3, r3, #28
 20107 00cc 0310A0E1 		mov	r1, r3
 20108 00d0 10001BE5 		ldr	r0, [fp, #-16]
 20109 00d4 FEFFFFEB 		bl	__RME_Inv_Reg_Restore
7719:../../Source/Kernel/rme_kernel.c ****     __RME_Inv_Retval_Set(Reg,(rme_ret_t)Retval);
 20110              		.loc 1 7719 5
 20111 00d8 14301BE5 		ldr	r3, [fp, #-20]
 20112 00dc 0310A0E1 		mov	r1, r3
 20113 00e0 10001BE5 		ldr	r0, [fp, #-16]
 20114 00e4 FEFFFFEB 		bl	__RME_Inv_Retval_Set
7720:../../Source/Kernel/rme_kernel.c **** 
7721:../../Source/Kernel/rme_kernel.c ****     /* We have successfully returned, set the invocation as inactive. We need
7722:../../Source/Kernel/rme_kernel.c ****      * a barrier here to avoid potential destruction of the return value. */
7723:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE((volatile rme_ptr_t*)&(Invocation->Thd_Act),0U);
 20115              		.loc 1 7723 5
 20116 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 20117 00ec 0C3083E2 		add	r3, r3, #12
 20118 00f0 0010A0E3 		mov	r1, #0
 20119 00f4 0300A0E1 		mov	r0, r3
 20120 00f8 FEFFFFEB 		bl	__RME_A7A_Write_Release
7724:../../Source/Kernel/rme_kernel.c **** 
7725:../../Source/Kernel/rme_kernel.c ****     /* Decide the system call's return value */
7726:../../Source/Kernel/rme_kernel.c ****     if(RME_UNLIKELY(Is_Exc!=0U))
 20121              		.loc 1 7726 7
 20122 00fc 18301BE5 		ldr	r3, [fp, #-24]
 20123 0100 000053E3 		cmp	r3, #0
 20124 0104 0400000A 		beq	.L1318
7727:../../Source/Kernel/rme_kernel.c ****     {
7728:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7729:../../Source/Kernel/rme_kernel.c **** 
7730:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(Reg, RME_ERR_SIV_FAULT);
 20125              		.loc 1 7730 9
 20126 0108 D21E0FE3 		movw	r1, #65234
 20127 010c FF1F4FE3 		movt	r1, 65535
 20128 0110 10001BE5 		ldr	r0, [fp, #-16]
 20129 0114 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 20130 0118 020000EA 		b	.L1319
 20131              	.L1318:
7731:../../Source/Kernel/rme_kernel.c ****     }
7732:../../Source/Kernel/rme_kernel.c ****     else
7733:../../Source/Kernel/rme_kernel.c ****     {
7734:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7735:../../Source/Kernel/rme_kernel.c **** 
7736:../../Source/Kernel/rme_kernel.c ****         __RME_Svc_Retval_Set(Reg,0);
 20132              		.loc 1 7736 9
 20133 011c 0010A0E3 		mov	r1, #0
 20134 0120 10001BE5 		ldr	r0, [fp, #-16]
 20135 0124 FEFFFFEB 		bl	__RME_Svc_Retval_Set
 20136              	.L1319:
7737:../../Source/Kernel/rme_kernel.c ****     }
7738:../../Source/Kernel/rme_kernel.c **** 
7739:../../Source/Kernel/rme_kernel.c ****     /* Same assumptions as in invocation activation */
7740:../../Source/Kernel/rme_kernel.c ****     Invocation=RME_INVSTK_TOP(Thread);
 20137              		.loc 1 7740 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 490


 20138 0128 08301BE5 		ldr	r3, [fp, #-8]
 20139 012c 4C2093E5 		ldr	r2, [r3, #76]
 20140 0130 08301BE5 		ldr	r3, [fp, #-8]
 20141 0134 4C3083E2 		add	r3, r3, #76
 20142 0138 030052E1 		cmp	r2, r3
 20143 013c 0200000A 		beq	.L1320
 20144              		.loc 1 7740 16 is_stmt 0 discriminator 1
 20145 0140 08301BE5 		ldr	r3, [fp, #-8]
 20146 0144 4C3093E5 		ldr	r3, [r3, #76]
 20147 0148 000000EA 		b	.L1321
 20148              	.L1320:
 20149              		.loc 1 7740 16 discriminator 2
 20150 014c 0030A0E3 		mov	r3, #0
 20151              	.L1321:
 20152              		.loc 1 7740 15 is_stmt 1 discriminator 4
 20153 0150 0C300BE5 		str	r3, [fp, #-12]
7741:../../Source/Kernel/rme_kernel.c ****     if(Invocation!=RME_NULL)
 20154              		.loc 1 7741 7
 20155 0154 0C301BE5 		ldr	r3, [fp, #-12]
 20156 0158 000053E3 		cmp	r3, #0
 20157 015c 1500000A 		beq	.L1322
7742:../../Source/Kernel/rme_kernel.c ****     {
7743:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7744:../../Source/Kernel/rme_kernel.c ****         
7745:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
7746:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(RME_CAP_IS_ROOT(Invocation->Prc->Pgt)!=0U);
 20158              		.loc 1 7746 9
 20159 0160 0C301BE5 		ldr	r3, [fp, #-12]
 20160 0164 083093E5 		ldr	r3, [r3, #8]
 20161 0168 183093E5 		ldr	r3, [r3, #24]
 20162 016c 003093E5 		ldr	r3, [r3]
 20163 0170 7330FFE6 		uxth	r3, r3
 20164 0174 000053E3 		cmp	r3, #0
 20165 0178 0800000A 		beq	.L1323
 20166              		.loc 1 7746 9 is_stmt 0 discriminator 1
 20167 017c 003000E3 		movw	r3, #:lower16:.LC6
 20168 0180 003040E3 		movt	r3, #:upper16:.LC6
 20169 0184 002000E3 		movw	r2, #:lower16:.LC7
 20170 0188 002040E3 		movt	r2, #:upper16:.LC7
 20171 018c 421E01E3 		movw	r1, #7746
 20172 0190 000000E3 		movw	r0, #:lower16:.LC8
 20173 0194 000040E3 		movt	r0, #:upper16:.LC8
 20174 0198 FEFFFFEB 		bl	RME_Log
 20175              	.L1324:
 20176              		.loc 1 7746 9
 20177 019c FEFFFFEA 		b	.L1324
 20178              	.L1323:
7747:../../Source/Kernel/rme_kernel.c **** #endif
7748:../../Source/Kernel/rme_kernel.c ****         __RME_Pgt_Set(Invocation->Prc->Pgt);
 20179              		.loc 1 7748 33 is_stmt 1
 20180 01a0 0C301BE5 		ldr	r3, [fp, #-12]
 20181 01a4 083093E5 		ldr	r3, [r3, #8]
 20182              		.loc 1 7748 9
 20183 01a8 183093E5 		ldr	r3, [r3, #24]
 20184 01ac 0300A0E1 		mov	r0, r3
 20185 01b0 FEFFFFEB 		bl	__RME_Pgt_Set
 20186 01b4 140000EA 		b	.L1325
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 491


 20187              	.L1322:
7749:../../Source/Kernel/rme_kernel.c ****     }
7750:../../Source/Kernel/rme_kernel.c ****     else
7751:../../Source/Kernel/rme_kernel.c ****     {
7752:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7753:../../Source/Kernel/rme_kernel.c ****         
7754:../../Source/Kernel/rme_kernel.c **** #if(RME_PGT_RAW_ENABLE==0U)
7755:../../Source/Kernel/rme_kernel.c ****         RME_ASSERT(RME_CAP_IS_ROOT(Thread->Sched.Prc->Pgt)!=0U);
 20188              		.loc 1 7755 9
 20189 01b8 08301BE5 		ldr	r3, [fp, #-8]
 20190 01bc 2C3093E5 		ldr	r3, [r3, #44]
 20191 01c0 183093E5 		ldr	r3, [r3, #24]
 20192 01c4 003093E5 		ldr	r3, [r3]
 20193 01c8 7330FFE6 		uxth	r3, r3
 20194 01cc 000053E3 		cmp	r3, #0
 20195 01d0 0800000A 		beq	.L1326
 20196              		.loc 1 7755 9 is_stmt 0 discriminator 1
 20197 01d4 003000E3 		movw	r3, #:lower16:.LC6
 20198 01d8 003040E3 		movt	r3, #:upper16:.LC6
 20199 01dc 002000E3 		movw	r2, #:lower16:.LC7
 20200 01e0 002040E3 		movt	r2, #:upper16:.LC7
 20201 01e4 4B1E01E3 		movw	r1, #7755
 20202 01e8 000000E3 		movw	r0, #:lower16:.LC8
 20203 01ec 000040E3 		movt	r0, #:upper16:.LC8
 20204 01f0 FEFFFFEB 		bl	RME_Log
 20205              	.L1327:
 20206              		.loc 1 7755 9
 20207 01f4 FEFFFFEA 		b	.L1327
 20208              	.L1326:
7756:../../Source/Kernel/rme_kernel.c **** #endif
7757:../../Source/Kernel/rme_kernel.c ****         __RME_Pgt_Set(Thread->Sched.Prc->Pgt);
 20209              		.loc 1 7757 36 is_stmt 1
 20210 01f8 08301BE5 		ldr	r3, [fp, #-8]
 20211 01fc 2C3093E5 		ldr	r3, [r3, #44]
 20212              		.loc 1 7757 9
 20213 0200 183093E5 		ldr	r3, [r3, #24]
 20214 0204 0300A0E1 		mov	r0, r3
 20215 0208 FEFFFFEB 		bl	__RME_Pgt_Set
 20216              	.L1325:
7758:../../Source/Kernel/rme_kernel.c ****     }
7759:../../Source/Kernel/rme_kernel.c ****     
7760:../../Source/Kernel/rme_kernel.c ****     return 0;
 20217              		.loc 1 7760 12
 20218 020c 0030A0E3 		mov	r3, #0
 20219              	.L1316:
7761:../../Source/Kernel/rme_kernel.c **** }
 20220              		.loc 1 7761 1
 20221 0210 0300A0E1 		mov	r0, r3
 20222 0214 04D04BE2 		sub	sp, fp, #4
 20223              		.cfi_def_cfa 13, 8
 20224              		@ sp needed
 20225 0218 0088BDE8 		pop	{fp, pc}
 20226              		.cfi_endproc
 20227              	.LFE76:
 20229              		.section	.text._RME_Kfn_Boot_Crt,"ax",%progbits
 20230              		.align	2
 20231              		.global	_RME_Kfn_Boot_Crt
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 492


 20232              		.syntax unified
 20233              		.arm
 20235              	_RME_Kfn_Boot_Crt:
 20236              	.LFB77:
7762:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Inv_Ret *************************************************/
7763:../../Source/Kernel/rme_kernel.c **** 
7764:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kfn_Boot_Crt *************************************************
7765:../../Source/Kernel/rme_kernel.c **** Description : This function is used to create boot-time kernel call capability.
7766:../../Source/Kernel/rme_kernel.c ****               This kind of capability that does not have a kernel object.
7767:../../Source/Kernel/rme_kernel.c ****               Kernel function capabilities allow you to execute user-defined 
7768:../../Source/Kernel/rme_kernel.c ****               functions in kernel mode. These functions must be defined in the
7769:../../Source/Kernel/rme_kernel.c ****               platform extensions.
7770:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7771:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Cpt - The capability to the captbl that may contain
7772:../../Source/Kernel/rme_kernel.c ****                                   the cap to kernel function.
7773:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7774:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kfn - The capability to the kernel function.
7775:../../Source/Kernel/rme_kernel.c ****                                   1-Level.
7776:../../Source/Kernel/rme_kernel.c **** Output      : None.
7777:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If successful, 0; or error code.
7778:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7779:../../Source/Kernel/rme_kernel.c **** rme_ret_t _RME_Kfn_Boot_Crt(struct RME_Cap_Cpt* Cpt,
7780:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Cpt,
7781:../../Source/Kernel/rme_kernel.c ****                             rme_cid_t Cap_Kfn)
7782:../../Source/Kernel/rme_kernel.c **** {
 20237              		.loc 1 7782 1
 20238              		.cfi_startproc
 20239              		@ args = 0, pretend = 0, frame = 32
 20240              		@ frame_needed = 1, uses_anonymous_args = 0
 20241 0000 00482DE9 		push	{fp, lr}
 20242              		.cfi_def_cfa_offset 8
 20243              		.cfi_offset 11, -8
 20244              		.cfi_offset 14, -4
 20245 0004 04B08DE2 		add	fp, sp, #4
 20246              		.cfi_def_cfa 11, 4
 20247 0008 20D04DE2 		sub	sp, sp, #32
 20248 000c 18000BE5 		str	r0, [fp, #-24]
 20249 0010 1C100BE5 		str	r1, [fp, #-28]
 20250 0014 20200BE5 		str	r2, [fp, #-32]
7783:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Cpt* Cpt_Op;
7784:../../Source/Kernel/rme_kernel.c ****     volatile struct RME_Cap_Kfn* Kfn_Crt;
7785:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7786:../../Source/Kernel/rme_kernel.c ****     
7787:../../Source/Kernel/rme_kernel.c ****     /* Get the cap location that we care about */
7788:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Cpt,RME_CAP_TYPE_CPT,
 20251              		.loc 1 7788 5
 20252 0018 1C301BE5 		ldr	r3, [fp, #-28]
 20253 001c 803003E2 		and	r3, r3, #128
 20254 0020 000053E3 		cmp	r3, #0
 20255 0024 1C00001A 		bne	.L1329
 20256              		.loc 1 7788 5 is_stmt 0 discriminator 1
 20257 0028 18301BE5 		ldr	r3, [fp, #-24]
 20258 002c 142093E5 		ldr	r2, [r3, #20]
 20259 0030 1C301BE5 		ldr	r3, [fp, #-28]
 20260 0034 030052E1 		cmp	r2, r3
 20261 0038 0100008A 		bhi	.L1330
 20262              		.loc 1 7788 5 discriminator 3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 493


 20263 003c 0230E0E3 		mvn	r3, #2
 20264              		.loc 1 7788 5
 20265 0040 850000EA 		b	.L1331
 20266              	.L1330:
 20267              		.loc 1 7788 5 discriminator 4
 20268 0044 1C301BE5 		ldr	r3, [fp, #-28]
 20269 0048 8322A0E1 		lsl	r2, r3, #5
 20270 004c 18301BE5 		ldr	r3, [fp, #-24]
 20271 0050 0C3093E5 		ldr	r3, [r3, #12]
 20272 0054 033082E0 		add	r3, r2, r3
 20273 0058 08300BE5 		str	r3, [fp, #-8]
 20274 005c 08301BE5 		ldr	r3, [fp, #-8]
 20275 0060 0300A0E1 		mov	r0, r3
 20276 0064 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20277 0068 0C000BE5 		str	r0, [fp, #-12]
 20278              		.loc 1 7788 5 discriminator 1
 20279 006c 0C301BE5 		ldr	r3, [fp, #-12]
 20280 0070 FF3803E2 		and	r3, r3, #16711680
 20281 0074 020853E3 		cmp	r3, #131072
 20282 0078 0100001A 		bne	.L1332
 20283              		.loc 1 7788 5 discriminator 5
 20284 007c 0830E0E3 		mvn	r3, #8
 20285              		.loc 1 7788 5
 20286 0080 750000EA 		b	.L1331
 20287              	.L1332:
 20288              		.loc 1 7788 5 discriminator 6
 20289 0084 0C301BE5 		ldr	r3, [fp, #-12]
 20290 0088 233CA0E1 		lsr	r3, r3, #24
 20291 008c 030053E3 		cmp	r3, #3
 20292 0090 3F00000A 		beq	.L1333
 20293              		.loc 1 7788 5 discriminator 7
 20294 0094 0130E0E3 		mvn	r3, #1
 20295              		.loc 1 7788 5
 20296 0098 6F0000EA 		b	.L1331
 20297              	.L1329:
 20298              		.loc 1 7788 5 discriminator 2
 20299 009c 1C301BE5 		ldr	r3, [fp, #-28]
 20300 00a0 2324A0E1 		lsr	r2, r3, #8
 20301 00a4 18301BE5 		ldr	r3, [fp, #-24]
 20302 00a8 143093E5 		ldr	r3, [r3, #20]
 20303 00ac 030052E1 		cmp	r2, r3
 20304 00b0 0100003A 		bcc	.L1334
 20305              		.loc 1 7788 5 discriminator 8
 20306 00b4 0230E0E3 		mvn	r3, #2
 20307              		.loc 1 7788 5
 20308 00b8 670000EA 		b	.L1331
 20309              	.L1334:
 20310              		.loc 1 7788 5 discriminator 9
 20311 00bc 1C301BE5 		ldr	r3, [fp, #-28]
 20312 00c0 2334A0E1 		lsr	r3, r3, #8
 20313 00c4 8322A0E1 		lsl	r2, r3, #5
 20314 00c8 18301BE5 		ldr	r3, [fp, #-24]
 20315 00cc 0C3093E5 		ldr	r3, [r3, #12]
 20316 00d0 033082E0 		add	r3, r2, r3
 20317 00d4 08300BE5 		str	r3, [fp, #-8]
 20318 00d8 08301BE5 		ldr	r3, [fp, #-8]
 20319 00dc 0300A0E1 		mov	r0, r3
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 494


 20320 00e0 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20321 00e4 0C000BE5 		str	r0, [fp, #-12]
 20322              		.loc 1 7788 5 discriminator 1
 20323 00e8 0C301BE5 		ldr	r3, [fp, #-12]
 20324 00ec FF3803E2 		and	r3, r3, #16711680
 20325 00f0 020853E3 		cmp	r3, #131072
 20326 00f4 0100001A 		bne	.L1335
 20327              		.loc 1 7788 5 discriminator 10
 20328 00f8 0830E0E3 		mvn	r3, #8
 20329              		.loc 1 7788 5
 20330 00fc 560000EA 		b	.L1331
 20331              	.L1335:
 20332              		.loc 1 7788 5 discriminator 11
 20333 0100 0C301BE5 		ldr	r3, [fp, #-12]
 20334 0104 233CA0E1 		lsr	r3, r3, #24
 20335 0108 030053E3 		cmp	r3, #3
 20336 010c 0100000A 		beq	.L1336
 20337              		.loc 1 7788 5 discriminator 12
 20338 0110 0130E0E3 		mvn	r3, #1
 20339              		.loc 1 7788 5
 20340 0114 500000EA 		b	.L1331
 20341              	.L1336:
 20342              		.loc 1 7788 5 discriminator 13
 20343 0118 1C301BE5 		ldr	r3, [fp, #-28]
 20344 011c 7F2003E2 		and	r2, r3, #127
 20345 0120 08301BE5 		ldr	r3, [fp, #-8]
 20346 0124 143093E5 		ldr	r3, [r3, #20]
 20347 0128 030052E1 		cmp	r2, r3
 20348 012c 0100003A 		bcc	.L1337
 20349              		.loc 1 7788 5 discriminator 14
 20350 0130 0230E0E3 		mvn	r3, #2
 20351              		.loc 1 7788 5
 20352 0134 480000EA 		b	.L1331
 20353              	.L1337:
 20354              		.loc 1 7788 5 discriminator 15
 20355 0138 1C301BE5 		ldr	r3, [fp, #-28]
 20356 013c 7F3003E2 		and	r3, r3, #127
 20357 0140 8322A0E1 		lsl	r2, r3, #5
 20358 0144 08301BE5 		ldr	r3, [fp, #-8]
 20359 0148 0C3093E5 		ldr	r3, [r3, #12]
 20360 014c 033082E0 		add	r3, r2, r3
 20361 0150 08300BE5 		str	r3, [fp, #-8]
 20362 0154 08301BE5 		ldr	r3, [fp, #-8]
 20363 0158 0300A0E1 		mov	r0, r3
 20364 015c FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20365 0160 0C000BE5 		str	r0, [fp, #-12]
 20366              		.loc 1 7788 5 discriminator 1
 20367 0164 0C301BE5 		ldr	r3, [fp, #-12]
 20368 0168 FF3803E2 		and	r3, r3, #16711680
 20369 016c 020853E3 		cmp	r3, #131072
 20370 0170 0100001A 		bne	.L1338
 20371              		.loc 1 7788 5 discriminator 16
 20372 0174 0830E0E3 		mvn	r3, #8
 20373              		.loc 1 7788 5
 20374 0178 370000EA 		b	.L1331
 20375              	.L1338:
 20376              		.loc 1 7788 5 discriminator 17
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 495


 20377 017c 0C301BE5 		ldr	r3, [fp, #-12]
 20378 0180 233CA0E1 		lsr	r3, r3, #24
 20379 0184 030053E3 		cmp	r3, #3
 20380 0188 0100000A 		beq	.L1333
 20381              		.loc 1 7788 5 discriminator 18
 20382 018c 0130E0E3 		mvn	r3, #1
 20383              		.loc 1 7788 5
 20384 0190 310000EA 		b	.L1331
 20385              	.L1333:
7789:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Cpt*,Cpt_Op,Type_Stat);
7790:../../Source/Kernel/rme_kernel.c ****     /* Check if the target captbl is not frozen and allows such operations */
7791:../../Source/Kernel/rme_kernel.c ****     RME_CAP_CHECK(Cpt_Op,RME_CPT_FLAG_CRT);
 20386              		.loc 1 7791 5 is_stmt 1
 20387 0194 08301BE5 		ldr	r3, [fp, #-8]
 20388 0198 083093E5 		ldr	r3, [r3, #8]
 20389 019c 013003E2 		and	r3, r3, #1
 20390 01a0 000053E3 		cmp	r3, #0
 20391 01a4 0100001A 		bne	.L1339
 20392              		.loc 1 7791 5 is_stmt 0 discriminator 1
 20393 01a8 0630E0E3 		mvn	r3, #6
 20394              		.loc 1 7791 5
 20395 01ac 2A0000EA 		b	.L1331
 20396              	.L1339:
7792:../../Source/Kernel/rme_kernel.c ****     
7793:../../Source/Kernel/rme_kernel.c ****     /* Get the cap slot */
7794:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETSLOT(Cpt_Op,Cap_Kfn,struct RME_Cap_Kfn*,Kfn_Crt);
 20397              		.loc 1 7794 5 is_stmt 1
 20398 01b0 08301BE5 		ldr	r3, [fp, #-8]
 20399 01b4 142093E5 		ldr	r2, [r3, #20]
 20400 01b8 20301BE5 		ldr	r3, [fp, #-32]
 20401 01bc 030052E1 		cmp	r2, r3
 20402 01c0 0100008A 		bhi	.L1340
 20403              		.loc 1 7794 5 is_stmt 0 discriminator 1
 20404 01c4 0230E0E3 		mvn	r3, #2
 20405              		.loc 1 7794 5
 20406 01c8 230000EA 		b	.L1331
 20407              	.L1340:
 20408              		.loc 1 7794 5 discriminator 2
 20409 01cc 20301BE5 		ldr	r3, [fp, #-32]
 20410 01d0 8322A0E1 		lsl	r2, r3, #5
 20411 01d4 08301BE5 		ldr	r3, [fp, #-8]
 20412 01d8 0C3093E5 		ldr	r3, [r3, #12]
 20413 01dc 033082E0 		add	r3, r2, r3
 20414 01e0 10300BE5 		str	r3, [fp, #-16]
7795:../../Source/Kernel/rme_kernel.c ****     /* Take the slot if possible */
7796:../../Source/Kernel/rme_kernel.c ****     RME_CPT_OCCUPY(Kfn_Crt);
 20415              		.loc 1 7796 5 is_stmt 1
 20416 01e4 10301BE5 		ldr	r3, [fp, #-16]
 20417 01e8 0128A0E3 		mov	r2, #65536
 20418 01ec 0010A0E3 		mov	r1, #0
 20419 01f0 0300A0E1 		mov	r0, r3
 20420 01f4 FEFFFFEB 		bl	_RME_Comp_Swap_Single
 20421 01f8 0030A0E1 		mov	r3, r0
 20422              		.loc 1 7796 5 is_stmt 0 discriminator 1
 20423 01fc 000053E3 		cmp	r3, #0
 20424 0200 0100001A 		bne	.L1341
 20425 0204 0430E0E3 		mvn	r3, #4
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 496


 20426              		.loc 1 7796 5
 20427 0208 130000EA 		b	.L1331
 20428              	.L1341:
 20429              		.loc 1 7796 5 discriminator 2
 20430 020c 003000E3 		movw	r3, #:lower16:RME_A7A_Timestamp
 20431 0210 003040E3 		movt	r3, #:upper16:RME_A7A_Timestamp
 20432 0214 002093E5 		ldr	r2, [r3]
 20433 0218 10301BE5 		ldr	r3, [fp, #-16]
 20434 021c 102083E5 		str	r2, [r3, #16]
7797:../../Source/Kernel/rme_kernel.c ****     
7798:../../Source/Kernel/rme_kernel.c ****     /* Header init */
7799:../../Source/Kernel/rme_kernel.c ****     Kfn_Crt->Head.Root_Ref=1U;
 20435              		.loc 1 7799 27 is_stmt 1
 20436 0220 10301BE5 		ldr	r3, [fp, #-16]
 20437 0224 0120A0E3 		mov	r2, #1
 20438 0228 042083E5 		str	r2, [r3, #4]
7800:../../Source/Kernel/rme_kernel.c ****     Kfn_Crt->Head.Object=0U;
 20439              		.loc 1 7800 25
 20440 022c 10301BE5 		ldr	r3, [fp, #-16]
 20441 0230 0020A0E3 		mov	r2, #0
 20442 0234 0C2083E5 		str	r2, [r3, #12]
7801:../../Source/Kernel/rme_kernel.c ****     Kfn_Crt->Head.Flag=RME_KFN_FLAG_FULL_RANGE;
 20443              		.loc 1 7801 23
 20444 0238 10201BE5 		ldr	r2, [fp, #-16]
 20445 023c 0030A0E3 		mov	r3, #0
 20446 0240 FF3F4FE3 		movt	r3, 65535
 20447 0244 083082E5 		str	r3, [r2, #8]
7802:../../Source/Kernel/rme_kernel.c ****     
7803:../../Source/Kernel/rme_kernel.c ****     /* Establish cap */
7804:../../Source/Kernel/rme_kernel.c ****     RME_WRITE_RELEASE(&(Kfn_Crt->Head.Type_Stat),
 20448              		.loc 1 7804 5
 20449 0248 10301BE5 		ldr	r3, [fp, #-16]
 20450 024c 0114A0E3 		mov	r1, #16777216
 20451 0250 0300A0E1 		mov	r0, r3
 20452 0254 FEFFFFEB 		bl	__RME_A7A_Write_Release
7805:../../Source/Kernel/rme_kernel.c ****                       RME_CAP_TYPE_STAT(RME_CAP_TYPE_KFN,
7806:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_STAT_VALID,
7807:../../Source/Kernel/rme_kernel.c ****                                         RME_CAP_ATTR_ROOT));
7808:../../Source/Kernel/rme_kernel.c **** 
7809:../../Source/Kernel/rme_kernel.c ****     return 0;
 20453              		.loc 1 7809 12
 20454 0258 0030A0E3 		mov	r3, #0
 20455              	.L1331:
7810:../../Source/Kernel/rme_kernel.c **** }
 20456              		.loc 1 7810 1
 20457 025c 0300A0E1 		mov	r0, r3
 20458 0260 04D04BE2 		sub	sp, fp, #4
 20459              		.cfi_def_cfa 13, 8
 20460              		@ sp needed
 20461 0264 0088BDE8 		pop	{fp, pc}
 20462              		.cfi_endproc
 20463              	.LFE77:
 20465              		.section	.text._RME_Kfn_Act,"ax",%progbits
 20466              		.align	2
 20467              		.syntax unified
 20468              		.arm
 20470              	_RME_Kfn_Act:
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 497


 20471              	.LFB78:
7811:../../Source/Kernel/rme_kernel.c **** /* End Function:_RME_Kfn_Boot_Crt ********************************************/
7812:../../Source/Kernel/rme_kernel.c **** 
7813:../../Source/Kernel/rme_kernel.c **** /* Function:_RME_Kfn_Act ******************************************************
7814:../../Source/Kernel/rme_kernel.c **** Description : Activate a kernel function.
7815:../../Source/Kernel/rme_kernel.c **** Input       : struct RME_Cap_Cpt* Cpt - The master capability table.
7816:../../Source/Kernel/rme_kernel.c ****               struct RME_Reg_Struct* Reg - The register set.
7817:../../Source/Kernel/rme_kernel.c ****               rme_cid_t Cap_Kfn - The capability to the kernel capability.
7818:../../Source/Kernel/rme_kernel.c ****                                   2-Level.
7819:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Func_ID - The function ID to invoke.
7820:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Sub_ID - The subfunction ID to invoke.
7821:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Param1 - The first parameter.
7822:../../Source/Kernel/rme_kernel.c ****               rme_ptr_t Param2 - The second parameter.
7823:../../Source/Kernel/rme_kernel.c **** Output      : None.
7824:../../Source/Kernel/rme_kernel.c **** Return      : rme_ret_t - If the call is successful, it will return whatever
7825:../../Source/Kernel/rme_kernel.c ****                           the 
7826:../../Source/Kernel/rme_kernel.c ****                           function returned (It is expected that they shall
7827:../../Source/Kernel/rme_kernel.c ****                           never return an negative value); or an error code.
7828:../../Source/Kernel/rme_kernel.c ****                           If the kernel function ever causes a context switch,
7829:../../Source/Kernel/rme_kernel.c ****                           it is responsible for setting the return value. On 
7830:../../Source/Kernel/rme_kernel.c ****                           failure, no context switch is allowed.
7831:../../Source/Kernel/rme_kernel.c **** ******************************************************************************/
7832:../../Source/Kernel/rme_kernel.c **** static rme_ret_t _RME_Kfn_Act(struct RME_Cap_Cpt* Cpt,
7833:../../Source/Kernel/rme_kernel.c ****                               struct RME_Reg_Struct* Reg,
7834:../../Source/Kernel/rme_kernel.c ****                               rme_cid_t Cap_Kfn,
7835:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Func_ID,
7836:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Sub_ID,
7837:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Param1,
7838:../../Source/Kernel/rme_kernel.c ****                               rme_ptr_t Param2)
7839:../../Source/Kernel/rme_kernel.c **** {
 20472              		.loc 1 7839 1
 20473              		.cfi_startproc
 20474              		@ args = 12, pretend = 0, frame = 24
 20475              		@ frame_needed = 1, uses_anonymous_args = 0
 20476 0000 00482DE9 		push	{fp, lr}
 20477              		.cfi_def_cfa_offset 8
 20478              		.cfi_offset 11, -8
 20479              		.cfi_offset 14, -4
 20480 0004 04B08DE2 		add	fp, sp, #4
 20481              		.cfi_def_cfa 11, 4
 20482 0008 20D04DE2 		sub	sp, sp, #32
 20483 000c 10000BE5 		str	r0, [fp, #-16]
 20484 0010 14100BE5 		str	r1, [fp, #-20]
 20485 0014 18200BE5 		str	r2, [fp, #-24]
 20486 0018 1C300BE5 		str	r3, [fp, #-28]
7840:../../Source/Kernel/rme_kernel.c ****     struct RME_Cap_Kfn* Kfn_Op;
7841:../../Source/Kernel/rme_kernel.c ****     rme_ptr_t Type_Stat;
7842:../../Source/Kernel/rme_kernel.c ****     
7843:../../Source/Kernel/rme_kernel.c ****     /* Get the capability slot */
7844:../../Source/Kernel/rme_kernel.c ****     RME_CPT_GETCAP(Cpt,Cap_Kfn,RME_CAP_TYPE_KFN,
 20487              		.loc 1 7844 5
 20488 001c 18301BE5 		ldr	r3, [fp, #-24]
 20489 0020 803003E2 		and	r3, r3, #128
 20490 0024 000053E3 		cmp	r3, #0
 20491 0028 1C00001A 		bne	.L1343
 20492              		.loc 1 7844 5 is_stmt 0 discriminator 1
 20493 002c 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 498


 20494 0030 142093E5 		ldr	r2, [r3, #20]
 20495 0034 18301BE5 		ldr	r3, [fp, #-24]
 20496 0038 030052E1 		cmp	r2, r3
 20497 003c 0100008A 		bhi	.L1344
 20498              		.loc 1 7844 5 discriminator 3
 20499 0040 0230E0E3 		mvn	r3, #2
 20500              		.loc 1 7844 5
 20501 0044 6B0000EA 		b	.L1345
 20502              	.L1344:
 20503              		.loc 1 7844 5 discriminator 4
 20504 0048 18301BE5 		ldr	r3, [fp, #-24]
 20505 004c 8322A0E1 		lsl	r2, r3, #5
 20506 0050 10301BE5 		ldr	r3, [fp, #-16]
 20507 0054 0C3093E5 		ldr	r3, [r3, #12]
 20508 0058 033082E0 		add	r3, r2, r3
 20509 005c 08300BE5 		str	r3, [fp, #-8]
 20510 0060 08301BE5 		ldr	r3, [fp, #-8]
 20511 0064 0300A0E1 		mov	r0, r3
 20512 0068 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20513 006c 0C000BE5 		str	r0, [fp, #-12]
 20514              		.loc 1 7844 5 discriminator 1
 20515 0070 0C301BE5 		ldr	r3, [fp, #-12]
 20516 0074 FF3803E2 		and	r3, r3, #16711680
 20517 0078 020853E3 		cmp	r3, #131072
 20518 007c 0100001A 		bne	.L1346
 20519              		.loc 1 7844 5 discriminator 5
 20520 0080 0830E0E3 		mvn	r3, #8
 20521              		.loc 1 7844 5
 20522 0084 5B0000EA 		b	.L1345
 20523              	.L1346:
 20524              		.loc 1 7844 5 discriminator 6
 20525 0088 0C301BE5 		ldr	r3, [fp, #-12]
 20526 008c 233CA0E1 		lsr	r3, r3, #24
 20527 0090 010053E3 		cmp	r3, #1
 20528 0094 3F00000A 		beq	.L1347
 20529              		.loc 1 7844 5 discriminator 7
 20530 0098 0130E0E3 		mvn	r3, #1
 20531              		.loc 1 7844 5
 20532 009c 550000EA 		b	.L1345
 20533              	.L1343:
 20534              		.loc 1 7844 5 discriminator 2
 20535 00a0 18301BE5 		ldr	r3, [fp, #-24]
 20536 00a4 2324A0E1 		lsr	r2, r3, #8
 20537 00a8 10301BE5 		ldr	r3, [fp, #-16]
 20538 00ac 143093E5 		ldr	r3, [r3, #20]
 20539 00b0 030052E1 		cmp	r2, r3
 20540 00b4 0100003A 		bcc	.L1348
 20541              		.loc 1 7844 5 discriminator 8
 20542 00b8 0230E0E3 		mvn	r3, #2
 20543              		.loc 1 7844 5
 20544 00bc 4D0000EA 		b	.L1345
 20545              	.L1348:
 20546              		.loc 1 7844 5 discriminator 9
 20547 00c0 18301BE5 		ldr	r3, [fp, #-24]
 20548 00c4 2334A0E1 		lsr	r3, r3, #8
 20549 00c8 8322A0E1 		lsl	r2, r3, #5
 20550 00cc 10301BE5 		ldr	r3, [fp, #-16]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 499


 20551 00d0 0C3093E5 		ldr	r3, [r3, #12]
 20552 00d4 033082E0 		add	r3, r2, r3
 20553 00d8 08300BE5 		str	r3, [fp, #-8]
 20554 00dc 08301BE5 		ldr	r3, [fp, #-8]
 20555 00e0 0300A0E1 		mov	r0, r3
 20556 00e4 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20557 00e8 0C000BE5 		str	r0, [fp, #-12]
 20558              		.loc 1 7844 5 discriminator 1
 20559 00ec 0C301BE5 		ldr	r3, [fp, #-12]
 20560 00f0 FF3803E2 		and	r3, r3, #16711680
 20561 00f4 020853E3 		cmp	r3, #131072
 20562 00f8 0100001A 		bne	.L1349
 20563              		.loc 1 7844 5 discriminator 10
 20564 00fc 0830E0E3 		mvn	r3, #8
 20565              		.loc 1 7844 5
 20566 0100 3C0000EA 		b	.L1345
 20567              	.L1349:
 20568              		.loc 1 7844 5 discriminator 11
 20569 0104 0C301BE5 		ldr	r3, [fp, #-12]
 20570 0108 233CA0E1 		lsr	r3, r3, #24
 20571 010c 030053E3 		cmp	r3, #3
 20572 0110 0100000A 		beq	.L1350
 20573              		.loc 1 7844 5 discriminator 12
 20574 0114 0130E0E3 		mvn	r3, #1
 20575              		.loc 1 7844 5
 20576 0118 360000EA 		b	.L1345
 20577              	.L1350:
 20578              		.loc 1 7844 5 discriminator 13
 20579 011c 18301BE5 		ldr	r3, [fp, #-24]
 20580 0120 7F2003E2 		and	r2, r3, #127
 20581 0124 08301BE5 		ldr	r3, [fp, #-8]
 20582 0128 143093E5 		ldr	r3, [r3, #20]
 20583 012c 030052E1 		cmp	r2, r3
 20584 0130 0100003A 		bcc	.L1351
 20585              		.loc 1 7844 5 discriminator 14
 20586 0134 0230E0E3 		mvn	r3, #2
 20587              		.loc 1 7844 5
 20588 0138 2E0000EA 		b	.L1345
 20589              	.L1351:
 20590              		.loc 1 7844 5 discriminator 15
 20591 013c 18301BE5 		ldr	r3, [fp, #-24]
 20592 0140 7F3003E2 		and	r3, r3, #127
 20593 0144 8322A0E1 		lsl	r2, r3, #5
 20594 0148 08301BE5 		ldr	r3, [fp, #-8]
 20595 014c 0C3093E5 		ldr	r3, [r3, #12]
 20596 0150 033082E0 		add	r3, r2, r3
 20597 0154 08300BE5 		str	r3, [fp, #-8]
 20598 0158 08301BE5 		ldr	r3, [fp, #-8]
 20599 015c 0300A0E1 		mov	r0, r3
 20600 0160 FEFFFFEB 		bl	__RME_A7A_Read_Acquire
 20601 0164 0C000BE5 		str	r0, [fp, #-12]
 20602              		.loc 1 7844 5 discriminator 1
 20603 0168 0C301BE5 		ldr	r3, [fp, #-12]
 20604 016c FF3803E2 		and	r3, r3, #16711680
 20605 0170 020853E3 		cmp	r3, #131072
 20606 0174 0100001A 		bne	.L1352
 20607              		.loc 1 7844 5 discriminator 16
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 500


 20608 0178 0830E0E3 		mvn	r3, #8
 20609              		.loc 1 7844 5
 20610 017c 1D0000EA 		b	.L1345
 20611              	.L1352:
 20612              		.loc 1 7844 5 discriminator 17
 20613 0180 0C301BE5 		ldr	r3, [fp, #-12]
 20614 0184 233CA0E1 		lsr	r3, r3, #24
 20615 0188 010053E3 		cmp	r3, #1
 20616 018c 0100000A 		beq	.L1347
 20617              		.loc 1 7844 5 discriminator 18
 20618 0190 0130E0E3 		mvn	r3, #1
 20619              		.loc 1 7844 5
 20620 0194 170000EA 		b	.L1345
 20621              	.L1347:
7845:../../Source/Kernel/rme_kernel.c ****                    struct RME_Cap_Kfn*,Kfn_Op,Type_Stat);    
7846:../../Source/Kernel/rme_kernel.c **** 
7847:../../Source/Kernel/rme_kernel.c ****     /* Check if the range of calling is allowed - kernel function specific */
7848:../../Source/Kernel/rme_kernel.c ****     if((Func_ID>RME_KFN_FLAG_HIGH(Kfn_Op->Head.Flag))||
 20622              		.loc 1 7848 17 is_stmt 1
 20623 0198 08301BE5 		ldr	r3, [fp, #-8]
 20624 019c 083093E5 		ldr	r3, [r3, #8]
 20625 01a0 2338A0E1 		lsr	r3, r3, #16
 20626              		.loc 1 7848 7
 20627 01a4 1C201BE5 		ldr	r2, [fp, #-28]
 20628 01a8 030052E1 		cmp	r2, r3
 20629 01ac 0500008A 		bhi	.L1353
7849:../../Source/Kernel/rme_kernel.c ****        (Func_ID<RME_KFN_FLAG_LOW(Kfn_Op->Head.Flag)))
 20630              		.loc 1 7849 17
 20631 01b0 08301BE5 		ldr	r3, [fp, #-8]
 20632 01b4 083093E5 		ldr	r3, [r3, #8]
 20633 01b8 7330FFE6 		uxth	r3, r3
7848:../../Source/Kernel/rme_kernel.c ****        (Func_ID<RME_KFN_FLAG_LOW(Kfn_Op->Head.Flag)))
 20634              		.loc 1 7848 54 discriminator 1
 20635 01bc 1C201BE5 		ldr	r2, [fp, #-28]
 20636 01c0 030052E1 		cmp	r2, r3
 20637 01c4 0100002A 		bcs	.L1354
 20638              	.L1353:
7850:../../Source/Kernel/rme_kernel.c ****     {
7851:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7852:../../Source/Kernel/rme_kernel.c **** 
7853:../../Source/Kernel/rme_kernel.c ****         return RME_ERR_CPT_FLAG;
 20639              		.loc 1 7853 16
 20640 01c8 0630E0E3 		mvn	r3, #6
 20641 01cc 090000EA 		b	.L1345
 20642              	.L1354:
7854:../../Source/Kernel/rme_kernel.c ****     }
7855:../../Source/Kernel/rme_kernel.c ****     else
7856:../../Source/Kernel/rme_kernel.c ****     {
7857:../../Source/Kernel/rme_kernel.c ****         RME_COV_MARKER();
7858:../../Source/Kernel/rme_kernel.c ****         /* No action required */
7859:../../Source/Kernel/rme_kernel.c ****     }
7860:../../Source/Kernel/rme_kernel.c **** 
7861:../../Source/Kernel/rme_kernel.c ****     /* Return whatever the function returns */
7862:../../Source/Kernel/rme_kernel.c ****     return __RME_Kfn_Handler(Cpt,Reg,Func_ID,Sub_ID,Param1,Param2);
 20643              		.loc 1 7862 12
 20644 01d0 0C309BE5 		ldr	r3, [fp, #12]
 20645 01d4 04308DE5 		str	r3, [sp, #4]
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 501


 20646 01d8 08309BE5 		ldr	r3, [fp, #8]
 20647 01dc 00308DE5 		str	r3, [sp]
 20648 01e0 04309BE5 		ldr	r3, [fp, #4]
 20649 01e4 1C201BE5 		ldr	r2, [fp, #-28]
 20650 01e8 14101BE5 		ldr	r1, [fp, #-20]
 20651 01ec 10001BE5 		ldr	r0, [fp, #-16]
 20652 01f0 FEFFFFEB 		bl	__RME_Kfn_Handler
 20653 01f4 0030A0E1 		mov	r3, r0
 20654              	.L1345:
7863:../../Source/Kernel/rme_kernel.c **** }
 20655              		.loc 1 7863 1
 20656 01f8 0300A0E1 		mov	r0, r3
 20657 01fc 04D04BE2 		sub	sp, fp, #4
 20658              		.cfi_def_cfa 13, 8
 20659              		@ sp needed
 20660 0200 0088BDE8 		pop	{fp, pc}
 20661              		.cfi_endproc
 20662              	.LFE78:
 20664              		.section	.rodata.Table.1,"a"
 20665              		.align	2
 20668              	Table.1:
 20669 0000 00000101 		.ascii	"\000\000\001\001\002\002\002\002\003\003\003\003\003"
 20669      02020202 
 20669      03030303 
 20669      03
 20670 000d 03030304 		.ascii	"\003\003\003\004\004\004\004\004\004\004\004\004\004"
 20670      04040404 
 20670      04040404 
 20670      04
 20671 001a 04040404 		.ascii	"\004\004\004\004\004\004\005\005\005\005\005\005\005"
 20671      04040505 
 20671      05050505 
 20671      05
 20672 0027 05050505 		.ascii	"\005\005\005\005\005\005\005\005\005\005\005\005\005"
 20672      05050505 
 20672      05050505 
 20672      05
 20673 0034 05050505 		.ascii	"\005\005\005\005\005\005\005\005\005\005\005\005\006"
 20673      05050505 
 20673      05050505 
 20673      06
 20674 0041 06060606 		.ascii	"\006\006\006\006\006\006\006\006\006\006\006\006\006"
 20674      06060606 
 20674      06060606 
 20674      06
 20675 004e 06060606 		.ascii	"\006\006\006\006\006\006\006\006\006\006\006\006\006"
 20675      06060606 
 20675      06060606 
 20675      06
 20676 005b 06060606 		.ascii	"\006\006\006\006\006\006\006\006\006\006\006\006\006"
 20676      06060606 
 20676      06060606 
 20676      06
 20677 0068 06060606 		.ascii	"\006\006\006\006\006\006\006\006\006\006\006\006\006"
 20677      06060606 
 20677      06060606 
 20677      06
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 502


 20678 0075 06060606 		.ascii	"\006\006\006\006\006\006\006\006\006\006\006\007\007"
 20678      06060606 
 20678      06060607 
 20678      07
 20679 0082 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20679      07070707 
 20679      07070707 
 20679      07
 20680 008f 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20680      07070707 
 20680      07070707 
 20680      07
 20681 009c 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20681      07070707 
 20681      07070707 
 20681      07
 20682 00a9 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20682      07070707 
 20682      07070707 
 20682      07
 20683 00b6 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20683      07070707 
 20683      07070707 
 20683      07
 20684 00c3 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20684      07070707 
 20684      07070707 
 20684      07
 20685 00d0 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20685      07070707 
 20685      07070707 
 20685      07
 20686 00dd 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20686      07070707 
 20686      07070707 
 20686      07
 20687 00ea 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007\007\007\007\007"
 20687      07070707 
 20687      07070707 
 20687      07
 20688 00f7 07070707 		.ascii	"\007\007\007\007\007\007\007\007\007"
 20688      07070707 
 20688      07
 20689              		.section	.rodata.Table.0,"a"
 20690              		.align	2
 20693              	Table.0:
 20694 0000 00000100 		.ascii	"\000\000\001\000\002\000\001\000\003\000\001\000\002"
 20694      02000100 
 20694      03000100 
 20694      02
 20695 000d 00010004 		.ascii	"\000\001\000\004\000\001\000\002\000\001\000\003\000"
 20695      00010002 
 20695      00010003 
 20695      00
 20696 001a 01000200 		.ascii	"\001\000\002\000\001\000\005\000\001\000\002\000\001"
 20696      01000500 
 20696      01000200 
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 503


 20696      01
 20697 0027 00030001 		.ascii	"\000\003\000\001\000\002\000\001\000\004\000\001\000"
 20697      00020001 
 20697      00040001 
 20697      00
 20698 0034 02000100 		.ascii	"\002\000\001\000\003\000\001\000\002\000\001\000\006"
 20698      03000100 
 20698      02000100 
 20698      06
 20699 0041 00010002 		.ascii	"\000\001\000\002\000\001\000\003\000\001\000\002\000"
 20699      00010003 
 20699      00010002 
 20699      00
 20700 004e 01000400 		.ascii	"\001\000\004\000\001\000\002\000\001\000\003\000\001"
 20700      01000200 
 20700      01000300 
 20700      01
 20701 005b 00020001 		.ascii	"\000\002\000\001\000\005\000\001\000\002\000\001\000"
 20701      00050001 
 20701      00020001 
 20701      00
 20702 0068 03000100 		.ascii	"\003\000\001\000\002\000\001\000\004\000\001\000\002"
 20702      02000100 
 20702      04000100 
 20702      02
 20703 0075 00010003 		.ascii	"\000\001\000\003\000\001\000\002\000\001\000\007\000"
 20703      00010002 
 20703      00010007 
 20703      00
 20704 0082 01000200 		.ascii	"\001\000\002\000\001\000\003\000\001\000\002\000\001"
 20704      01000300 
 20704      01000200 
 20704      01
 20705 008f 00040001 		.ascii	"\000\004\000\001\000\002\000\001\000\003\000\001\000"
 20705      00020001 
 20705      00030001 
 20705      00
 20706 009c 02000100 		.ascii	"\002\000\001\000\005\000\001\000\002\000\001\000\003"
 20706      05000100 
 20706      02000100 
 20706      03
 20707 00a9 00010002 		.ascii	"\000\001\000\002\000\001\000\004\000\001\000\002\000"
 20707      00010004 
 20707      00010002 
 20707      00
 20708 00b6 01000300 		.ascii	"\001\000\003\000\001\000\002\000\001\000\006\000\001"
 20708      01000200 
 20708      01000600 
 20708      01
 20709 00c3 00020001 		.ascii	"\000\002\000\001\000\003\000\001\000\002\000\001\000"
 20709      00030001 
 20709      00020001 
 20709      00
 20710 00d0 04000100 		.ascii	"\004\000\001\000\002\000\001\000\003\000\001\000\002"
 20710      02000100 
 20710      03000100 
 20710      02
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 504


 20711 00dd 00010005 		.ascii	"\000\001\000\005\000\001\000\002\000\001\000\003\000"
 20711      00010002 
 20711      00010003 
 20711      00
 20712 00ea 01000200 		.ascii	"\001\000\002\000\001\000\004\000\001\000\002\000\001"
 20712      01000400 
 20712      01000200 
 20712      01
 20713 00f7 00030001 		.ascii	"\000\003\000\001\000\002\000\001\000"
 20713      00020001 
 20713      00
 20714              		.text
 20715              	.Letext0:
 20716              		.file 2 "../../Include/Platform/A7A/rme_platform_a7a.h"
 20717              		.file 3 "../../Include/Kernel/rme_kernel.h"
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 505


DEFINED SYMBOLS
                            *ABS*:00000000 rme_kernel.c
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:21     .text.RME_Int_Print:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:26     .text.RME_Int_Print:00000000 RME_Int_Print
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:176    .text.RME_Hex_Print:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:181    .text.RME_Hex_Print:00000000 RME_Hex_Print
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:297    .text.RME_Str_Print:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:302    .text.RME_Str_Print:00000000 RME_Str_Print
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:364    .rodata:00000000 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:365    .rodata:00000000 .LC0
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:369    .rodata:00000028 .LC1
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:372    .rodata:00000034 .LC2
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:375    .rodata:00000038 .LC3
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:378    .text.RME_Log:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:383    .text.RME_Log:00000000 RME_Log
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:442    .text._RME_MSB_Generic:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:447    .text._RME_MSB_Generic:00000000 _RME_MSB_Generic
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20668  .rodata.Table.1:00000000 Table.1
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:517    .text._RME_LSB_Generic:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:522    .text._RME_LSB_Generic:00000000 _RME_LSB_Generic
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20693  .rodata.Table.0:00000000 Table.0
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:601    .text._RME_Comp_Swap_Single:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:606    .text._RME_Comp_Swap_Single:00000000 _RME_Comp_Swap_Single
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:653    .text._RME_Fetch_Add_Single:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:658    .text._RME_Fetch_Add_Single:00000000 _RME_Fetch_Add_Single
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:702    .text._RME_Fetch_And_Single:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:707    .text._RME_Fetch_And_Single:00000000 _RME_Fetch_And_Single
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:748    .text._RME_List_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:753    .text._RME_List_Crt:00000000 _RME_List_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:788    .text._RME_List_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:793    .text._RME_List_Del:00000000 _RME_List_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:829    .text._RME_List_Ins:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:834    .text._RME_List_Ins:00000000 _RME_List_Ins
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:879    .text._RME_Clear:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:884    .text._RME_Clear:00000000 _RME_Clear
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:936    .text._RME_Memcmp:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:941    .text._RME_Memcmp:00000000 _RME_Memcmp
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1023   .text._RME_Memcpy:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1028   .text._RME_Memcpy:00000000 _RME_Memcpy
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1087   .text._RME_Diff:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1092   .text._RME_Diff:00000000 _RME_Diff
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1142   .text.RME_Kmain:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1147   .text.RME_Kmain:00000000 RME_Kmain
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1185   .text._RME_Lowlvl_Check:00000000 _RME_Lowlvl_Check
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8324   .text._RME_Kot_Init:00000000 _RME_Kot_Init
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1181   .text._RME_Lowlvl_Check:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1212   .text._RME_Svc_Handler:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1217   .text._RME_Svc_Handler:00000000 _RME_Svc_Handler
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20028  .text._RME_Inv_Ret:00000000 _RME_Inv_Ret
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19749  .text._RME_Inv_Act:00000000 _RME_Inv_Act
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:1341   .rodata._RME_Svc_Handler:00000000 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17851  .text._RME_Sig_Snd:00000000 _RME_Sig_Snd
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18153  .text._RME_Sig_Rcv:00000000 _RME_Sig_Rcv
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20470  .text._RME_Kfn_Act:00000000 _RME_Kfn_Act
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:14524  .text._RME_Thd_Sched_Free:00000000 _RME_Thd_Sched_Free
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:14882  .text._RME_Thd_Exec_Set:00000000 _RME_Thd_Exec_Set
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15143  .text._RME_Thd_Sched_Prio:00000000 _RME_Thd_Sched_Prio
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 506


C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15844  .text._RME_Thd_Time_Xfer:00000000 _RME_Thd_Time_Xfer
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:16433  .text._RME_Thd_Swt:00000000 _RME_Thd_Swt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2709   .text._RME_Cpt_Crt:00000000 _RME_Cpt_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3214   .text._RME_Cpt_Del:00000000 _RME_Cpt_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3584   .text._RME_Cpt_Frz:00000000 _RME_Cpt_Frz
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3853   .text._RME_Cpt_Add:00000000 _RME_Cpt_Add
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:4641   .text._RME_Cpt_Rem:00000000 _RME_Cpt_Rem
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5890   .text._RME_Pgt_Crt:00000000 _RME_Pgt_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:6416   .text._RME_Pgt_Del:00000000 _RME_Pgt_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:6764   .text._RME_Pgt_Add:00000000 _RME_Pgt_Add
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7238   .text._RME_Pgt_Rem:00000000 _RME_Pgt_Rem
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7457   .text._RME_Pgt_Con:00000000 _RME_Pgt_Con
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7904   .text._RME_Pgt_Des:00000000 _RME_Pgt_Des
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:10483  .text._RME_Prc_Crt:00000000 _RME_Prc_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11062  .text._RME_Prc_Del:00000000 _RME_Prc_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11376  .text._RME_Prc_Cpt:00000000 _RME_Prc_Cpt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11748  .text._RME_Prc_Pgt:00000000 _RME_Prc_Pgt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:12630  .text._RME_Thd_Crt:00000000 _RME_Thd_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:13362  .text._RME_Thd_Del:00000000 _RME_Thd_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:13784  .text._RME_Thd_Sched_Bind:00000000 _RME_Thd_Sched_Bind
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15577  .text._RME_Thd_Sched_Rcv:00000000 _RME_Thd_Sched_Rcv
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17064  .text._RME_Sig_Crt:00000000 _RME_Sig_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17306  .text._RME_Sig_Del:00000000 _RME_Sig_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18580  .text._RME_Inv_Crt:00000000 _RME_Inv_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19208  .text._RME_Inv_Del:00000000 _RME_Inv_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19552  .text._RME_Inv_Set:00000000 _RME_Inv_Set
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2103   .text._RME_Svc_Handler:000008b0 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2109   .text._RME_Tim_Handler:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2114   .text._RME_Tim_Handler:00000000 _RME_Tim_Handler
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9474   .text._RME_Run_Del:00000000 _RME_Run_Del
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9665   .text._RME_Run_Notif:00000000 _RME_Run_Notif
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17729  .text._RME_Kern_Snd:00000000 _RME_Kern_Snd
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17618  .text._RME_Kern_High:00000000 _RME_Kern_High
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2194   .text._RME_Tim_Elapse:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2199   .text._RME_Tim_Elapse:00000000 _RME_Tim_Elapse
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2260   .text._RME_Tim_Future:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2265   .text._RME_Tim_Future:00000000 _RME_Tim_Future
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2296   .text._RME_Cpt_Boot_Init:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2301   .text._RME_Cpt_Boot_Init:00000000 _RME_Cpt_Boot_Init
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8389   .text._RME_Kot_Mark:00000000 _RME_Kot_Mark
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2409   .text._RME_Cpt_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2414   .text._RME_Cpt_Boot_Crt:00000000 _RME_Cpt_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:2705   .text._RME_Cpt_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3201   .rodata:0000003c .LC6
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3204   .rodata:00000048 .LC7
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3207   .rodata:00000054 .LC8
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3210   .text._RME_Cpt_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8696   .text._RME_Kot_Erase:00000000 _RME_Kot_Erase
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3580   .text._RME_Cpt_Frz:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:3849   .text._RME_Cpt_Add:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:4637   .text._RME_Cpt_Rem:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:4929   .text._RME_Pgt_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:4934   .text._RME_Pgt_Boot_Crt:00000000 _RME_Pgt_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5266   .text._RME_Pgt_Boot_Add:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5271   .text._RME_Pgt_Boot_Add:00000000 _RME_Pgt_Boot_Add
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5482   .text._RME_Pgt_Boot_Con:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5487   .text._RME_Pgt_Boot_Con:00000000 _RME_Pgt_Boot_Con
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 507


C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:5886   .text._RME_Pgt_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:6412   .text._RME_Pgt_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:6760   .text._RME_Pgt_Add:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7234   .text._RME_Pgt_Rem:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7453   .text._RME_Pgt_Con:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:7900   .text._RME_Pgt_Des:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8319   .text._RME_Kot_Init:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8384   .text._RME_Kot_Mark:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8691   .text._RME_Kot_Erase:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8925   .text._RME_Kom_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:8930   .text._RME_Kom_Boot_Crt:00000000 _RME_Kom_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9200   .text._RME_CPU_Local_Init:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9205   .text._RME_CPU_Local_Init:00000000 _RME_CPU_Local_Init
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9280   .rodata:00000078 .LC9
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9283   .text._RME_Thd_Fatal:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9288   .text._RME_Thd_Fatal:00000000 _RME_Thd_Fatal
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9385   .text._RME_Run_Ins:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9389   .text._RME_Run_Ins:00000000 _RME_Run_Ins
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9470   .text._RME_Run_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9566   .text._RME_Run_High:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9570   .text._RME_Run_High:00000000 _RME_Run_High
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9661   .text._RME_Run_Notif:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9724   .text._RME_Thd_Pgt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9729   .text._RME_Thd_Pgt:00000000 _RME_Thd_Pgt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9790   .text._RME_Run_Swt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9794   .text._RME_Run_Swt:00000000 _RME_Run_Swt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9899   .text._RME_Prc_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:9904   .text._RME_Prc_Boot_Crt:00000000 _RME_Prc_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:10479  .text._RME_Prc_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11058  .text._RME_Prc_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11372  .text._RME_Prc_Cpt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:11744  .text._RME_Prc_Pgt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:12116  .text._RME_Thd_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:12121  .text._RME_Thd_Boot_Crt:00000000 _RME_Thd_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:12626  .text._RME_Thd_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:13358  .text._RME_Thd_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:13780  .text._RME_Thd_Sched_Bind:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:14520  .text._RME_Thd_Sched_Free:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:14878  .text._RME_Thd_Exec_Set:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15139  .text._RME_Thd_Sched_Prio:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15573  .text._RME_Thd_Sched_Rcv:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:15840  .text._RME_Thd_Time_Xfer:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:16429  .text._RME_Thd_Swt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:16817  .text._RME_Sig_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:16822  .text._RME_Sig_Boot_Crt:00000000 _RME_Sig_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17060  .text._RME_Sig_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17302  .text._RME_Sig_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17613  .text._RME_Kern_High:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17724  .text._RME_Kern_Snd:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:17847  .text._RME_Sig_Snd:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18149  .text._RME_Sig_Rcv:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18314  .rodata._RME_Sig_Rcv:00000000 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18571  .text._RME_Sig_Rcv:00000430 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:18576  .text._RME_Inv_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19204  .text._RME_Inv_Del:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19548  .text._RME_Inv_Set:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:19745  .text._RME_Inv_Act:00000000 $a
ARM GAS  C:\Users\even\AppData\Local\Temp\ccMOtiSp.s 			page 508


C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20024  .text._RME_Inv_Ret:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20230  .text._RME_Kfn_Boot_Crt:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20235  .text._RME_Kfn_Boot_Crt:00000000 _RME_Kfn_Boot_Crt
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20466  .text._RME_Kfn_Act:00000000 $a
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20665  .rodata.Table.1:00000000 $d
C:\Users\even\AppData\Local\Temp\ccMOtiSp.s:20690  .rodata.Table.0:00000000 $d
                           .group:00000000 wm4.0.3b9f63523dc4e8d86e863c7e7e762be7
                           .group:00000000 wm4.rme_platform_a7a.h.12.f1b47b5cf52f8425e79b8a761d5bd676
                           .group:00000000 wm4.rme_platform_xc7z020.h.15.c1d90fcf057b7628b5ac2d33951e63ab
                           .group:00000000 wm4.rme_platform_a7a.h.137.fdc6a038503ac117e4f4f30ba1107f52
                           .group:00000000 wm4.rme_kernel.h.27.716340edb41bad57d522729bf2b8a38a
                           .group:00000000 wm4.rme.h.11.105c42759f88404be372052d8d99e5e6
                           .group:00000000 wm4.rme_kernel.h.185.d02db6497e1a69d04e005d15d216f811
                           .group:00000000 wm4.rme_platform_a7a.h.390.918e282e9d9d990fe491c99e3e90944b
                           .group:00000000 wm4.rme_kernel.h.678.0572fdf2012fb48f701f562b23d175bb
                           .group:00000000 wm4.rme_kernel.h.930.a0227bbf293ff3272fab74c6046a5fa5
                           .group:00000000 wm4.rme_platform_a7a.h.506.4377aa764f98c0dc92a81f841f19d61c

UNDEFINED SYMBOLS
__RME_Putchar
__aeabi_idiv
__aeabi_idivmod
__RME_Int_Disable
__RME_Lowlvl_Init
__RME_Pgt_Kom_Init
__RME_Boot
__RME_Svc_Param_Get
__RME_Svc_Retval_Set
RME_A7A_Local
__RME_A7A_Write_Release
__RME_A7A_Read_Acquire
RME_A7A_Timestamp
__RME_Pgt_Check
__RME_Pgt_Init
__RME_Pgt_Page_Map
__RME_Pgt_Pgdir_Map
__RME_Pgt_Del_Check
__RME_Pgt_Lookup
__RME_Pgt_Page_Unmap
__RME_Pgt_Pgdir_Unmap
RME_A7A_Kot
__RME_A7A_MSB_Get
__RME_Thd_Reg_Copy
__RME_Pgt_Set
__RME_Thd_Reg_Init
__RME_Inv_Reg_Save
__RME_Inv_Reg_Restore
__RME_Inv_Retval_Set
__RME_Kfn_Handler
